"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[574],{7574:(Ze,L,l)=>{l.r(L),l.d(L,{ProfileModule:()=>xe});var u=l(6814);class G{constructor(){this.customerId=0,this.orderId=0,this.professionIds=[],this.orderItemIds=[],this.pageNumber=1,this.pageSize=10}}class b{constructor(){this.id=0,this.applicationNoFrom=0,this.applicationNoUpto=0,this.candidateName="",this.passportNo="",this.professionId=0,this.agentId=0,this.typeOfCandidate="",this.sort="name",this.pageNumber=1,this.pageSize=5,this.search=""}}var t=l(9468),T=l(2051),r=l(95);function X(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"span",16)(2,"input",17),t.NdJ("change",function(){const a=t.CHM(e).$implicit;return t.KtG(a.checked=!a.checked)}),t.qZA()(),t.TgZ(3,"div",18),t._uU(4),t.qZA(),t.TgZ(5,"div",19),t._uU(6),t.qZA(),t.TgZ(7,"div",20),t._uU(8),t.qZA(),t.TgZ(9,"div",18),t._uU(10),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(2),t.Q6J("checked",e.checked)("disabled","closed"===e.status||"canceled"===e.status),t.xp6(2),t.Oqu(e.orderNo),t.xp6(2),t.Oqu(e.categoryName),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.status)}}let V=(()=>{class n{constructor(e){this.bsModalRef=e,this.emitterObj=new t.vpe,this.title="",this.orderItems=[],this.ids=[]}ngOnInit(){}emitSelectedIds(){this.emitterObj.emit(this.ids),this.bsModalRef.hide()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(T.UZ))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-ids-modal"]],inputs:{emitterObj:"emitterObj"},decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left",2,"font-size","smaller","font-weight","bold"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"stdd","b","w100",2,"margin-left","17px"],[1,"stdd","b","w150"],[1,"stdd","b","w75"],[2,"display","inline-inline-block","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],["id","agentsForm"],["agentsForm","ngForm"],["class","form-check stdd",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"form-check","stdd"],[2,"width","3px","display","inline-block","padding","0px","vertical-align","top"],["type","checkbox",1,"form-check-input",3,"checked","disabled","change"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w75"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return s.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5),t._uU(8,"Order No"),t.qZA(),t.TgZ(9,"div",6),t._uU(10,"Category Name"),t.qZA(),t.TgZ(11,"div",7),t._uU(12,"Qnty"),t.qZA(),t.TgZ(13,"div",6),t._uU(14,"Status"),t.qZA(),t._UZ(15,"hr",8),t.TgZ(16,"form",9,10),t.YNc(18,X,11,6,"div",11),t.qZA()(),t.TgZ(19,"div",12)(20,"button",13),t.NdJ("click",function(){return s.bsModalRef.hide()}),t._uU(21,"Cancel"),t.qZA(),t.TgZ(22,"button",14),t.NdJ("click",function(){return s.emitSelectedIds()}),t._uU(23,"Submit"),t.qZA()()),2&i&&(t.xp6(2),t.hij("",s.title," "),t.xp6(16),t.Q6J("ngForOf",s.orderItems))},dependencies:[u.sg,r._Y,r.JL,r.F],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75p}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return n})();function Y(n,c,e,i,s,a,o){try{var d=n[a](o),p=d.value}catch(_){return void e(_)}d.done?c(p):Promise.resolve(p).then(i,s)}function q(n){return function(){var c=this,e=arguments;return new Promise(function(i,s){var a=n.apply(c,e);function o(p){Y(a,i,s,o,d,"next",p)}function d(p){Y(a,i,s,o,d,"throw",p)}o(void 0)})}}var U=l(7328),I=l(8180),v=l(2096),C=l(7398),Z=l(5516),x=l(9862),g=l(3976),N=l(7783);let M=(()=>{class n{constructor(e,i){this.http=e,this.accountService=i,this.apiUrl=Z.N.apiUrl,this.currentUserSource=new U.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cities=[],this.cache=new Map,this.accountService.currentUser$.pipe((0,I.q)(1)).subscribe({next:s=>{s&&(this.cvParams=new b),this.user=s}})}onClickLoadDocument(){var e=this;return q(function*(){return e.http.get(e.apiUrl+"candidates/loaddocument")})()}getAvailableCandidatesPaged(e,i=!0){if(i){const a=this.cache.get(Object.values(e).join("-"));if(a)return(0,v.of)(a)}else this.cache=new Map;let s=(0,g.ME)(e);return(0,g.Tr)(this.apiUrl+"candidate/cvsAvailable",s,this.http).pipe((0,C.U)(a=>(this.cache.set(Object.values(e).join("-"),a),a)))}getCandidatesPaged(e,i=!0){if(i){const a=this.cache.get(Object.values(e).join("-"));if(a)return(0,v.of)(a)}else this.cache=new Map;let s=(0,g.ME)(e);return(0,g.Tr)(this.apiUrl+"candidate",s,this.http).pipe((0,C.U)(a=>(this.cache.set(Object.values(e).join("-"),a),a)))}getCandidate(e){return this.http.get(this.apiUrl+"candidate/byid/"+e)}getCandidateBrief(e){const i=[...this.cache.values()].reduce((s,a)=>s.concat(a.result),[]).find(s=>s.id===e);return i?(0,v.of)(i):this.http.get(this.apiUrl+"candidate/briefdtobyid/"+e)}getCandidateBriefDtoFromAppNo(e){let i=new x.LE;return i.append("applicationNo",e.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}getCandidateBriefDtoFromId(e){var i=new x.LE;return i=i.append("candidateId",e.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}registerNewWithFiles(e){return this.http.post(this.apiUrl+"Candidate/RegisterByUpload",e)}UpdateCandidateWithFiles(e){return this.http.put(this.apiUrl+"candidate/updatecandidatewithfiles",e)}setCurrentUser(e){localStorage.setItem("token",e.token),this.currentUserSource.next(e)}setCVParams(e){this.cvParams=e}getCVParams(){return this.cvParams}getCandidateCities(){return this.cities.length>0?(0,v.of)(this.cities):this.http.get(this.apiUrl+"candidate/cities").pipe((0,C.U)(e=>(this.cities=e,e)))}downloadAttachmentFile(e){return this.http.get(this.apiUrl+"fileupload/downloadattachmentfile/"+e)}updateAttachments(e){var i=[];return i.push(e),this.http.post(this.apiUrl+"Candidate/attachment",i)}getAttachments(e){return this.http.get(this.apiUrl+"Candidate/userattachments"+e)}deleteAttachment(e){return this.http.delete(this.apiUrl+"Candidate/userattachment/"+e)}setPhoto(e){return this.http.put(this.apiUrl+"userattachment/setPhoto",e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN),t.LFG(N.B))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=l(8397),H=l(8241);let B=(()=>{class n{constructor(e){this.http=e,this.apiUrl=Z.N.apiUrl}downloadFile(e){return this.http.get(this.apiUrl+"candidate/downloadfile/"+e)}downloadProspectiveFile(e){return this.http.get(this.apiUrl+"FileUpload/downloadprospectivefile/"+e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A=l(8763),O=l(7012);function tt(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No candidate detail available\n"),t.qZA())}function et(n,c){1&n&&t._UZ(0,"div",15)}function it(n,c){if(1&n&&(t.TgZ(0,"span",13),t._uU(1),t.YNc(2,et,1,0,"div",14),t.qZA()),2&n){const e=c.$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",e.professionName," "),t.xp6(1),t.Q6J("ngIf",i.cv.userProfessions.length>1)}}function st(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.CVChecked(s.cv))}),t.qZA(),t.TgZ(2,"div",4),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,it,3,2,"span",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editCV(s.cv.id))}),t.qZA(),t.TgZ(13,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cvAssessClicked(s.cv))}),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.download(s.cv.id))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.cv.checked),t.xp6(1),t.MGl("routerLink","/candidates/edit/",e.cv.id,""),t.xp6(1),t.Oqu(e.cv.applicationNo),t.xp6(1),t.MGl("routerLink","/candidate/historyfromcvid/",e.cv.id,""),t.xp6(1),t.Oqu(e.cv.fullName),t.xp6(2),t.Oqu(e.cv.city),t.xp6(2),t.Oqu(e.cv.referredByName),t.xp6(2),t.Q6J("ngForOf",e.cv.userProfessions)}}let nt=(()=>{class n{constructor(){this.msgEvent=new t.vpe,this.downloadEvent=new t.vpe,this.cvAssessEvent=new t.vpe,this.cvCheckedEvent=new t.vpe,this.cvEditEvent=new t.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(e){return e.stopPropagation(),this.xPosTabMenu=e.clientX,this.yPosTabMenu=e.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(e){this.downloadEvent.emit(e)}onClickLoadDocument(e){var i=this;return q(function*(){i.msgEvent.emit(e)})()}setCurrentId(e){this.currentId=e}showhistory(e){this.msgEvent.emit(e)}cvAssessClicked(e){this.cvAssessEvent.emit(e)}CVChecked(e){this.cvCheckedEvent.emit(e)}editCV(e){this.cvEditEvent.emit(e),console.log("profile item edit cv, id: ",e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",cvEditEvent:"cvEditEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 25px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","25px"],["type","checkbox","value","cv.id",1,"form-check-input",3,"checked","change"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","w50",3,"routerLink"],["title","contact history of the candidate",1,"stdd","mx-1","w180",3,"routerLink"],[1,"stdd","mx-1","w100"],[1,"stdd","mx-1","w200"],[1,"stdd","mx-1","fSmall","w200",2,"border","aqua"],["style","white-space: normal;",4,"ngFor","ngForOf"],["type","button","type","button","title","edit the candidate profile",1,"btn","btn-outline-secondary","fa","fa-solid","fa-pencil","w50",3,"click"],["type","button","type","button","title","Assess the CV",1,"btn","btn-outline-secondary","mx-2","fa","fa-solid","fa-balance-scale","w50",3,"click"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-trash","w50",3,"click"],[2,"white-space","normal"],["style","display: inline-block",4,"ngIf"],[2,"display","inline-block"]],template:function(i,s){1&i&&(t.YNc(0,tt,2,0,"div",0),t.YNc(1,st,15,8,"div",1)),2&i&&(t.Q6J("ngIf",null===s.cv),t.xp6(1),t.Q6J("ngIf",null!=s.cv))},dependencies:[u.sg,u.O5,h.rH],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();const at=["search"];function ot(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"input",10,11),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSearch())}),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSearch())}),t._uU(4,"Search"),t.qZA(),t.TgZ(5,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onReset())}),t._uU(6,"Reset"),t.qZA(),t.TgZ(7,"button",14),t._uU(8,"+"),t.qZA()()}}function rt(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No compliant CVs available on record "),t.qZA())}function ct(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"app-profile-item",17),t.NdJ("downloadEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.downloadFileEvent(s))})("cvAssessEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cvAssessEvent(s))})("cvCheckedEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cvCheckedEvent(s))})("cvEditEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cvEditClicked(s))}),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.Q6J("cv",e)}}function dt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ct,2,1,"div",15),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cvs)}}function lt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"pagination",2),t.NdJ("pageChanged",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onPageChanged(s))}),t._uU(2," >"),t.qZA(),t.YNc(3,ot,9,0,"div",0),t.TgZ(4,"div",3),t._UZ(5,"div",4),t.TgZ(6,"div",5),t._uU(7,"Appl No"),t.qZA(),t.TgZ(8,"div",6),t._uU(9,"Candidate Name"),t.qZA(),t.TgZ(10,"div",7),t._uU(11,"City"),t.qZA(),t.TgZ(12,"div",8),t._uU(13,"Agent"),t.qZA(),t.TgZ(14,"div",8),t._uU(15,"Professions"),t.qZA()(),t.YNc(16,rt,2,0,"div",9),t.YNc(17,dt,2,1,"div",9),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",10),t.xp6(2),t.Q6J("ngIf",e.cvs),t.xp6(13),t.Q6J("ngIf",!e.cvs),t.xp6(1),t.Q6J("ngIf",e.cvs.length)}}let pt=(()=>{class n{constructor(e,i,s,a,o,d,p){this.service=e,this.router=i,this.activatedRoute=s,this.modalService=a,this.orderService=o,this.downloadservice=d,this.toastr=p,this.cvs=[],this.selectedCVs=[],this.cvParams=new b,this.totalCount=0,this.professions=[],this.existingQBankCategories=[],this.agents=[],this.idFromChild=0,this.selectedProfIds=[],this.events=[],this.documentLoading=!1,this.sortOptions=[{name:"By Application No Asc",value:"appno"},{name:"By Application No Desc",value:"apppnodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Agent",value:"agent"},{name:"By Agent Desc",value:"agentdesc"}],this.cvParams=new b,this.service.setCVParams(this.cvParams)}ngOnInit(){this.loadCandidates(!1),this.activatedRoute.data.subscribe(e=>{this.professions=e.professions,this.agents=e.agents})}loadCandidates(e=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,e).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination)}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,!0).subscribe({next:e=>{e.result&&e.pagination&&(this.cvs=e.result,this.totalCount=e.count)}}))}onSearch(){const e=this.service.getCVParams()??new b;e.search=this.searchTerm.nativeElement.value,e.pageNumber=1,this.service.setCVParams(e),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new b,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(e){this.cvParams&&this.cvParams.pageNumber!==e.page&&(this.cvParams.pageNumber=e.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(e){var a=[];const o={class:"modal-dialog-centered",initialState:{user:e,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(V,o),this.bsModalRef.content.updateSelectedRoles.subscribe(d=>{a=d})}onAgentSelected(e){const i=this.service.getCVParams()??new b;i.agentId=e,i.pageNumber=1,this.service.setCVParams(i),this.getCVs()}getOpenOrderItemsArray(){let i=[],a=new G;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadFileEvent(e){return this.downloadservice.downloadFile(e).subscribe(()=>{this.toastr.success("document downloaded")},i=>{this.toastr.error("failed to download document",i)})}cvAssessEvent(e){this.navigateByUrl("/hr/cvassess/"+e.id,e,!1)}navigateByUrl(e,i,s){this.router.navigate([e],{state:{cvbrief:i,userobject:this.service.user,toedit:s,returnUrl:"/candidates"}})}cvCheckedEvent(e){var i=this.selectedCVs.find(a=>a.id==e.id),s=this.selectedCVs.findIndex(a=>a.id===e.id);void 0!==i?i.checked?this.selectedCVs.push(e):this.selectedCVs.splice(s,1):this.selectedCVs.push(e)}cvEditClicked(e){this.navigateByUrl("/candidates/register/edit/"+e,void 0,!0)}cvAssessClicked(){this.navigateByUrl("/hr/assessments",this.selectedCVs,!1)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(M),t.Y36(h.F0),t.Y36(h.gz),t.Y36(T.tT),t.Y36(H.p),t.Y36(B),t.Y36(A._W))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-list"]],viewQuery:function(i,s){if(1&i&&t.Gf(at,5),2&i){let a;t.iGM(a=t.CRH())&&(s.searchTerm=a.first)}},decls:1,vars:1,consts:[["class","stdd",4,"ngIf"],[1,"stdd"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","75px"],[1,"stddm","w15"],[1,"stddM","w45"],[1,"stddM","w180","mx-2"],[1,"stddM","w100","mx-1"],[1,"stddM","w200","mx-1"],[4,"ngIf"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"stdd","btn","btn-outline-primary","mx-3",3,"click"],["type","button",1,"stdd","btn","btn-outline-success","mx-3",2,"font-size","small",3,"click"],["type","button","title","Add a new candidate","routerLink","/candidates/register/edit/0",1,"stdd","btn","btn-outline-success","fa","fa-plus"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvAssessEvent","cvCheckedEvent","cvEditEvent"]],template:function(i,s){1&i&&t.YNc(0,lt,18,6,"div",0),2&i&&t.Q6J("ngIf",void 0!==s.pagination)},dependencies:[u.sg,u.O5,h.rH,O.Qt,nt],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;text-align:right;width:100px;font-weight:700;font-size:medium;margin-left:5px;vertical-align:top}.stddlist[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:200px;font-size:medium}.stddM[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();var E=l(3655),S=l(1730),z=l(4825),w=l(4664);class ut{constructor(){this.id=0,this.name="",this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}let D=(()=>{class n{constructor(e){this.http=e,this.apiUrl=Z.N.apiUrl,this.currentUserSource=new U.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.mParams=new ut}getQualificationList(){return this.http.get(this.apiUrl+"Qualification/qualificationlist")}getQualification(e){return this.http.get(this.apiUrl+"Qualification/qById/"+e)}updateQualification(e,i){return this.http.put(this.apiUrl+"Qualification/edit",{id:e,name:i})}deleteQualification(e){return this.http.delete(this.apiUrl+"Qualification/delete/"+e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ht=(()=>{class n{constructor(e){this.http=e,this.apiUrl=Z.N.apiUrl}updateWithFiles(e){return this.http.put(this.apiUrl+"candidate/updatecandidate",e,{reportProgress:!0,observe:"events"})}registerNewCandidate(e){return this.http.post(this.apiUrl+"account/RegisterNewCandidate",e,{reportProgress:!0,observe:"events"})}download(e){return this.http.get(this.apiUrl+"FileUpload/downloadattachmentfile/"+e,{reportProgress:!0,observe:"events",responseType:"blob"})}downloadFile(e){const i=(new x.WM).set("Accept","application/vnd.ms-excel");this.http.get("this.apiUrl + '/FileUpload/downloadbyattachmentid/' + attachmentid",{headers:i,responseType:"blob"}).subscribe(s=>{const o=s.headers.get("Content-Disposition").split(";")[1].trim().split("=")[1];!function mt(n,c){const e=document.createElement("a");e.download=c,e.href=window.URL.createObjectURL(n),e.click(),window.URL.revokeObjectURL(e.href)}(s.body,o)},s=>{console.error("Error: ",s)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var K=l(612),j=l(8806),W=l(7114),vt=l(3123);const ft=["memberTabs"],gt=["password"];function _t(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No valid object\n"),t.qZA())}function bt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"label",77),t._uU(2,"Referred By"),t.qZA(),t.TgZ(3,"ng-select",78),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getAgentValue(s))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("items",e.agents)("searchable",!0)}}function Ct(n,c){1&n&&(t.TgZ(0,"div",79)(1,"label",80),t._uU(2,"Password"),t.qZA(),t._UZ(3,"app-text-input",81)(4,"app-text-input",82),t.qZA()),2&n&&(t.xp6(3),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("label","Confirm Password")("type","password"))}function xt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",83)(2,"div",55),t._uU(3),t.qZA(),t.TgZ(4,"ng-select",84),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getProfessionValue(s))}),t.qZA(),t._UZ(5,"input",85)(6,"input",86),t.TgZ(7,"button",87),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removeUserProfession(a))}),t.qZA()()()}if(2&n){const e=c.index,i=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Oqu(e+1),t.xp6(1),t.Q6J("items",i.professions)("searchable",!0)}}function wt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",83)(2,"div",62),t._uU(3),t.qZA(),t.TgZ(4,"div",63),t._UZ(5,"app-text-input",88),t.qZA(),t.TgZ(6,"div",64),t._UZ(7,"input",85),t.qZA(),t._UZ(8,"input",89),t.TgZ(9,"div",64)(10,"button",87),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removeUserPhone(a))}),t.qZA()()()()}if(2&n){const e=c.index;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Q6J("label","Mobile No")}}function Zt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",83)(2,"div",55),t._uU(3),t.qZA(),t.TgZ(4,"ng-select",90),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getValues(s))}),t.qZA(),t._UZ(5,"input",85)(6,"input",89),t.TgZ(7,"button",87),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removeUserQualification(a))}),t.qZA()()()}if(2&n){const e=c.index,i=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Oqu(e+1),t.xp6(1),t.Q6J("items",i.qualifications)("searchable",!0)}}function Tt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",83)(2,"div",27),t._UZ(3,"app-text-input",91),t.qZA(),t.TgZ(4,"div",50),t._UZ(5,"app-text-input",92),t.qZA(),t.TgZ(6,"div",93),t._UZ(7,"app-text-input",94),t.qZA(),t.TgZ(8,"div",8),t._UZ(9,"app-date-picker",95),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"app-date-picker",96),t.qZA(),t._UZ(12,"input",89),t.TgZ(13,"button",87),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removeUserExp(a))}),t.qZA()()()}if(2&n){const e=c.index,i=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("label","Sr No"),t.xp6(2),t.Q6J("label","Position"),t.xp6(2),t.Q6J("label","Company"),t.xp6(2),t.Q6J("maxDate",i.maxDate)("label","Worked From"),t.xp6(2),t.Q6J("maxDate",i.maxDate)("label","Worked Upto")}}function At(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",83)(2,"div",97),t._UZ(3,"app-text-input",98),t.qZA(),t._UZ(4,"ng-select",99),t.TgZ(5,"button",100),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removeUserAttachment(a))}),t.qZA(),t.TgZ(6,"button",101),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.download(a))}),t.qZA(),t._UZ(7,"input",102)(8,"input",103),t.qZA()()}if(2&n){const e=c.index,i=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("label","File Name"),t.xp6(1),t.Q6J("items",i.attachmentTypes)("searchable",!0)}}function Pt(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e," ")}}function yt(n,c){if(1&n&&(t.TgZ(0,"div",104)(1,"ul",105),t.YNc(2,Pt,2,1,"li",59),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.validationErrors)}}function Ut(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.registerForm.valid&&s.savewithattachments())}),t._UZ(1,"hr"),t.TgZ(2,"div",4)(3,"div",5),t._UZ(4,"app-text-input",6),t.qZA(),t.TgZ(5,"label",7),t._uU(6,"Application No:"),t.qZA(),t.TgZ(7,"div",8),t._UZ(8,"app-text-input",9),t.qZA(),t.TgZ(9,"div",10)(10,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancel())}),t.qZA(),t._UZ(11,"button",12),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label",13),t._uU(14,"Gender: "),t.qZA(),t._UZ(15,"input",14),t._uU(16,"Male "),t._UZ(17,"input",15),t._uU(18,"Female "),t._UZ(19,"br"),t.TgZ(20,"label",16),t._uU(21,"First Name"),t.qZA(),t.TgZ(22,"div",8),t._UZ(23,"app-text-input",17),t.qZA(),t.TgZ(24,"label",18),t._uU(25,"Second Name"),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"app-text-input",19),t.qZA(),t.TgZ(28,"label",20),t._uU(29,"Family Name"),t.qZA(),t.TgZ(30,"div",8),t._UZ(31,"app-text-input",21),t.qZA(),t.TgZ(32,"label",22),t._uU(33,"Known As"),t.qZA(),t.TgZ(34,"div",8),t._UZ(35,"app-text-input",23),t.qZA(),t._UZ(36,"br"),t.TgZ(37,"label",24),t._uU(38,"Aadhar No"),t.qZA(),t.TgZ(39,"div",8),t._UZ(40,"app-text-input",25),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"label",26),t._uU(43,"Passport No"),t.qZA(),t.TgZ(44,"div",27),t._UZ(45,"app-text-input",28),t.qZA(),t.TgZ(46,"label",29),t._uU(47,"Emig Clearance: "),t.qZA(),t._UZ(48,"input",30),t._uU(49," ECNR "),t._UZ(50,"input",31),t._uU(51," ECR "),t.qZA(),t.TgZ(52,"div",32)(53,"tabset",33,34)(55,"tab",35),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(56,"label",36),t._uU(57,"Date of Birth"),t.qZA(),t.TgZ(58,"div",8),t._UZ(59,"app-date-picker",37),t.qZA(),t.TgZ(60,"label",38),t._uU(61,"Place of Birth"),t.qZA(),t.TgZ(62,"div",8),t._UZ(63,"app-text-input",39),t.qZA(),t.YNc(64,bt,4,2,"div",0),t._UZ(65,"br"),t.TgZ(66,"label",40),t._uU(67,"Address"),t.qZA(),t.TgZ(68,"div",41),t._UZ(69,"app-text-input",42),t.qZA(),t._UZ(70,"br"),t.TgZ(71,"label",43),t._uU(72,"City"),t.qZA(),t.TgZ(73,"div",8),t._UZ(74,"app-text-input",44),t.qZA(),t.TgZ(75,"label",45),t._uU(76,"PIN"),t.qZA(),t.TgZ(77,"div",27),t._UZ(78,"app-text-input",46),t.qZA(),t.TgZ(79,"label",47),t._uU(80,"District"),t.qZA(),t.TgZ(81,"div",8),t._UZ(82,"app-text-input",48),t.qZA(),t._UZ(83,"br"),t.TgZ(84,"label",49),t._uU(85,"Email"),t.qZA(),t.TgZ(86,"div",50),t._UZ(87,"app-text-input",51),t.qZA(),t._UZ(88,"br"),t.YNc(89,Ct,5,4,"div",52),t.qZA(),t.TgZ(90,"tab",53),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(91,"label"),t._uU(92,"Professions"),t.qZA(),t.TgZ(93,"div",54)(94,"div",55),t._uU(95,"Sr No"),t.qZA(),t.TgZ(96,"div",56),t._uU(97,"Category"),t.qZA(),t.TgZ(98,"div",57),t._uU(99,"Is Main"),t.qZA(),t.TgZ(100,"button",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addUserProfession())}),t.qZA(),t.YNc(101,xt,8,4,"div",59),t.qZA(),t._UZ(102,"hr"),t.qZA(),t.TgZ(103,"tab",60),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(104,"label"),t._uU(105,"Phones"),t.qZA(),t.TgZ(106,"div",61)(107,"div",62),t._uU(108,"Sr No"),t.qZA(),t.TgZ(109,"div",63),t._uU(110,"Phone"),t.qZA(),t.TgZ(111,"div",64),t._uU(112,"Is Main"),t.qZA(),t.TgZ(113,"button",65),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addPhone())}),t.qZA(),t.YNc(114,wt,11,3,"div",59),t.qZA()(),t.TgZ(115,"tab",66),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(116,"label"),t._uU(117,"Qualifications"),t.qZA(),t.TgZ(118,"div",67)(119,"div",55),t._uU(120,"Sr No"),t.qZA(),t.TgZ(121,"div",56),t._uU(122,"Qualification"),t.qZA(),t.TgZ(123,"div",57),t._uU(124,"Is Main"),t.qZA(),t.TgZ(125,"button",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addQualification())}),t.qZA(),t.YNc(126,Zt,8,4,"div",59),t.qZA()(),t.TgZ(127,"tab",68),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(128,"label"),t._uU(129,"Experiences"),t.qZA(),t.TgZ(130,"div",69)(131,"button",58),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addUserExp())}),t.qZA(),t.YNc(132,Tt,14,8,"div",59),t.qZA()(),t.TgZ(133,"tab",70),t.NdJ("selectTab",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabActivated(s))}),t.TgZ(134,"div",71),t._uU(135,"File to upload"),t.qZA(),t.TgZ(136,"div",72),t._uU(137,"Type"),t.qZA(),t.TgZ(138,"div",73)(139,"div",74)(140,"input",75),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileInputChange(s))}),t.qZA()(),t.YNc(141,At,9,4,"div",59),t.qZA()()()(),t.YNc(142,yt,3,1,"div",76),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.registerForm),t.xp6(8),t.Q6J("label","App No"),t.xp6(3),t.Q6J("disabled",!e.registerForm.valid),t.xp6(12),t.Q6J("label","First Name"),t.xp6(4),t.Q6J("label","Second Name"),t.xp6(4),t.Q6J("label","Family Name"),t.xp6(4),t.Q6J("label","Known As"),t.xp6(5),t.Q6J("label","Aadhar No"),t.xp6(5),t.Q6J("label","Passport No"),t.xp6(14),t.Q6J("maxDate",e.maxDate)("label","Date of birth"),t.xp6(4),t.Q6J("label","Place of birth"),t.xp6(1),t.Q6J("ngIf",!e.agents),t.xp6(5),t.Q6J("label","address"),t.xp6(5),t.Q6J("label","city"),t.xp6(4),t.Q6J("label","pin"),t.xp6(4),t.Q6J("label","district"),t.xp6(5),t.Q6J("label","email"),t.xp6(2),t.Q6J("ngIf",0===e.candidate.id),t.xp6(12),t.Q6J("ngForOf",null==e.userProfessions?null:e.userProfessions.controls),t.xp6(13),t.Q6J("ngForOf",null==e.userPhones?null:e.userPhones.controls),t.xp6(12),t.Q6J("ngForOf",null==e.userQualifications?null:e.userQualifications.controls),t.xp6(6),t.Q6J("ngForOf",null==e.userExperiences?null:e.userExperiences.controls),t.xp6(9),t.Q6J("ngForOf",null==e.userAttachments?null:e.userAttachments.controls),t.xp6(1),t.Q6J("ngIf",e.validationErrors)}}let Nt=(()=>{class n{constructor(e,i,s,a,o,d,p,_,R){this.accountService=e,this.toastrService=i,this.fb=s,this.activatedRoute=a,this.candidateService=o,this.router=d,this.qualService=_,this.downloadService=R,this.myPassword="",this.cancelRegister=new t.vpe,this.registerForm=new r.cw({}),this.maxDate=new Date,this.memberPhotoUrl="",this.professions=[],this.agents=[],this.qualifications=[],this.errors=[],this.isAddMode=!1,this.loading=!1,this.submitted=!1,this.bsValueDate=new Date,this.fileToUpload=null,this.filesToUpload=[],this.selectedProfession="",this.events=[],this.onUploadFinished=new t.vpe,this.progress={loaded:0,total:0},this.message="",this.isMultipleUploaded=!1,this.isSingleUploaded=!1,this.urlAfterUpload="",this.percentUploaded=0,this.attachmentType="",this.userFiles=[],this.attachmentid=0,this.routeId="",this.returnUrl="/candidates",this.attachmentTypes=[{typeName:"CV"},{typeName:"Educational Certificate"},{typeName:"Experience Certificate"},{typeName:"Passport Copy"},{typeName:"Photograph"}],this.lastTimeCalled=Date.now(),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();const y=new FormData;this.userFiles.length>0&&this.userFiles.forEach(m=>{y.append("file",m,m.name)}),y.append("data",JSON.stringify(this.registerForm.value)),this.candidate||void 0!==y.get("password")?0===this.candidate.id?(this.toastrService.info("inserting ..."),this.candidateService.registerNewWithFiles(y).subscribe({next:m=>{null!==m.errorMessage?this.toastrService.error("failed to save the candidate data",m.errorMessage):(this.toastrService.success("candidate saved, with Application No. "+m.returnInt.toString(),"Profile successfully inserted"),this.registerForm.setValue({applicationNo:m.returnInt}))},error:m=>this.toastrService.error("failed to insert the candidate",m)})):(this.toastrService.info("udating ..."),this.candidateService.UpdateCandidateWithFiles(y).subscribe({next:m=>{""!==m?.errorString?this.toastrService.error("failed to update the candidate",m.errorString):(this.toastrService.success("updated the candidate successfully"),this.router.navigateByUrl(this.returnUrl))},error:m=>{this.toastrService.error("failed to update the candidate",m),console.log(m)}})):this.toastrService.info("Password not provided")},this.uploadFinished=Q=>{this.response=Q},this.passwordElement=p,this.routeId=this.activatedRoute.snapshot.params.id,this.routeId=this.activatedRoute.snapshot.params.id,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let f=this.router.getCurrentNavigation();f?.extras&&f.extras.state&&(f.extras.state.returnUrl&&(this.returnUrl=f.extras.state.returnUrl),f.extras.state.user&&(this.user=f.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.professions=e.categories,this.qualifications=e.qualifications,this.agents=e.agents,this.candidate=e.candidate,this.isAddMode=0===this.candidate?.id}),this.candidate&&this.InitializeAndPopulateFormArray(this.candidate)}InitializeAndPopulateFormArray(e){this.registerForm=this.fb.group({id:[e.id,r.kI.required],applicationNo:[e.applicationNo],gender:[e.gender,r.kI.required],nationality:["Indian"],firstName:[e.firstName,r.kI.required],secondName:[e.secondName],familyName:[e.familyName],knownAs:[e.knownAs,r.kI.required],dOB:[e.dOB],placeOfBirth:[e.placeOfBirth],aadharNo:[e.aadharNo],ppNo:[e.ppNo],ecnr:[e.ecnr],referredBy:[e.referredBy],referredByName:[e.referredByName],address:[e.address],city:[e.city,r.kI.required],pin:[e.pin],district:[e.district],email:[e.email,r.kI.required],userPhones:this.fb.array(e.userPhones.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],mobileNo:[i.mobileNo,r.kI.required],isMain:[i.isMain],remarks:[i.remarks],isValid:[i.isValid]}))),userQualifications:this.fb.array(e.userQualifications.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],qualificationId:[i.qualificationId,r.kI.required],isMain:[i.isMain]}))),userProfessions:this.fb.array(e.userProfessions.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,professionId:[i.professionId,r.kI.required],isMain:[i.isMain]}))),userExperiences:this.fb.array(e.userExperiences.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,employer:i.employer,position:i.position,salaryCurrency:i.salaryCurrency,monthlySalaryDrawn:i.monthlySalaryDrawn,workedFrom:i.workedFrom,workedUpto:i.workedUpto}))),userAttachments:this.fb.array(e.userAttachments.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,appUserId:i.appUserId,attachmentType:i.attachmentType,name:[i.name,r.kI.required],attachmentSizeInBytes:i.attachmentSizeInBytes,url:i.url})))})}get userPhones(){return this.registerForm.get("userPhones")}get userQualifications(){return this.registerForm.get("userQualifications")}get userProfessions(){return this.registerForm.get("userProfessions")}get userExperiences(){return this.registerForm.get("userExperiences")}newUserPhone(){return this.fb.group({candidateId:this.candidate?.id,mobileNo:["",r.kI.required],isMain:!1,remarks:""})}addPhone(){this.userPhones.push(this.newUserPhone())}removeUserPhone(e){this.userPhones.removeAt(e)}newQualification(){return this.fb.group({candidateId:this.candidate?.id,qualificationId:0,qualificationName:"",isMain:[!1]})}addQualification(){this.userQualifications.push(this.newQualification())}removeUserQualification(e){this.userQualifications.removeAt(e)}newUserProfession(){return this.fb.group({professionId:[0,r.kI.required],isMain:[!1,r.kI.required],candidateId:this.candidate?.id})}addUserProfession(){this.userProfessions.push(this.fb.group({candidateId:[0,r.kI.required],professionId:[0,r.kI.required],isMain:[!1,r.kI.required]}))}removeUserProfession(e){this.userProfessions.removeAt(e)}newUserExp(){return this.fb.group({candidateId:this.candidate?.id,srNo:[0,r.kI.required],position:["",r.kI.required],company:["",r.kI.required],workedFrom:"",workedUpto:""})}addUserExp(){this.userExperiences.push(this.newUserExp())}removeUserExp(e){this.userExperiences.removeAt(e)}get userAttachments(){return this.registerForm.get("userAttachments")}newUserAttachment(){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:[""],name:["",r.kI.required],attachmentSizeInBytes:0,url:""})}newUserAttachmentWithFile(e){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:["",r.kI.required],name:[e.name,r.kI.required],attachmentSizeInBytes:e.size,url:""})}addUserAttachment(){this.userAttachments.push(this.newUserAttachment())}removeUserAttachment(e){this.userAttachments.removeAt(e)}getCVById(e){return this.candidateService.getCandidate(e).subscribe({next:i=>{this.candidate=i,this.InitializeAndPopulateFormArray(this.candidate)},error:i=>this.toastrService.error("failed to get candidate to edit:",i)})}getQualifications(){return this.qualService.getQualificationList().subscribe({next:e=>this.qualifications=e,error:e=>this.toastrService.error("error in qualificatin",e)})}matchValues(e){return i=>i.value===i.parent?.get(e)?.value?null:{notMatching:!0}}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}selectTab(e){this.memberTabs.tabs[e].active=!0}onTabActivated(e){this.activeTab=e}validateEmailNotTaken(){return e=>(0,z.H)(10).pipe((0,w.w)(()=>e.value?this.accountService.checkEmailExists(e.value).pipe((0,C.U)(i=>i?{emailExists:!0}:null)):(0,v.of)(null)))}validatePPNotTaken(){return e=>(0,z.H)(10).pipe((0,w.w)(()=>e.value?this.accountService.checkPPExists(e.value).pipe((0,C.U)(i=>(null!==i&&this.toastrService.warning("that passport number is taken by "+i),i?{ppExists:!0}:null))):(0,v.of)(null)))}handleFileInput(e){this.fileToUpload=e[0],this.filesToUpload.push(e[0])}getAgentValue(e){console.log("agent selected",e)}getProfessionValue(e){console.log("ngx dropdown selected",e)}getValues(e){console.log("ngx dropdown selected",this.selectedProfession)}onFileInputChange(e){const a=e.target.files[0];a.size>0&&(this.userFiles.push(a),this.userAttachments.push(this.newUserAttachmentWithFile(a)))}download(e){var i=this.userAttachments.at(e).get("id")?.value;0!==i?(this.toastrService.info("downloading from api server"),this.downloadService.download(i).subscribe(s=>{})):this.toastrService.warning("this item has no primary key value")}IsNewAttachment(e){return void 0!==this.userAttachments.value.map(s=>s.id).findIndex(s=>0===s.id)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(N.B),t.Y36(A._W),t.Y36(r.qu),t.Y36(h.gz),t.Y36(M),t.Y36(h.F0),t.Y36(t.SBq),t.Y36(D),t.Y36(ht))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-candidate-edit"]],viewQuery:function(i,s){if(1&i&&(t.Gf(ft,7),t.Gf(gt,7)),2&i){let a;t.iGM(a=t.CRH())&&(s.memberTabs=a.first),t.iGM(a=t.CRH())&&(s.passwordElement=a.first)}},outputs:{cancelRegister:"cancelRegister",onUploadFinished:"onUploadFinished"},decls:5,vars:5,consts:[[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[2,"font-size","smaller"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","col-5","mt-1",2,"border-style","groove","margin-left","5px"],[1,"stdd","w30"],["formControlName","id"],["for","applicationNo",1,"lbl"],[1,"stdd","w150"],["formControlName","applicationNo",3,"label"],[1,"stdd","pull-right"],["type","button",1,"btn","btn-default","fa","fa-undo",3,"click"],["title","Update","type","submit",1,"btn","btn-success","me-2","fa","fa-save",3,"disabled"],[1,"lbl"],["type","radio","value","male","formControlName","gender",1,"inputcheck","form-check-input"],["type","radio","value","female","formControlName","gender",1,"inputcheck","form-check-input"],["for","firstName",1,"lbl"],["formControlName","firstName",3,"label"],["for","secondName",1,"lbl"],["formControlName","secondName",3,"label"],["for","familyName",1,"lbl"],["formControlName","familyName",3,"label"],["for","knownAs",1,"lbl"],["formControlName","knownAs",3,"label"],["for","aadharNo",1,"lbl"],["formControlName","aadharNo",3,"label"],["for","ppNo",1,"lbl",2,"margin-left","5px"],[1,"stdd","w100"],["formControlName","ppNo",3,"label"],[1,"lbl",2,"margin-left","10px","margin-right","10px"],["type","radio","formControlName","ecnr","value","true",1,"form-check-input","inputcheck"],["type","radio","formControlName","ecnr","value","false",1,"form-check-input","inputcheck"],[1,"stdd","col-6","mt-1",2,"margin-left","5px"],[1,"member-tabset"],["memberTabs",""],["heading","General",3,"selectTab"],["for","dOB",1,"lbl"],["formControlName","dOB",3,"maxDate","label"],["for","placeOfBirth",1,"lbl"],["formControlName","placeOfBirth",3,"label"],["for","address",1,"lbl"],[1,"stdd"],["formControlName","address",3,"label"],["for","city",1,"lbl"],["formControlName","city",3,"label"],["for","pin",1,"lbl",2,"width","75px","display","inline-block"],["formControlName","pin",3,"label"],["for","district",1,"lbl"],["formControlName","district",3,"label"],["for","email",1,"lbl"],[1,"stdd","w300"],["formControlName","email",3,"label"],["class","stdd w500",4,"ngIf"],["heading","Professions",3,"selectTab"],["formArrayName","userProfessions",1,"my-1","px-0",2,"height","10px","font-size","small"],[2,"width","50px","display","inline-block"],[2,"width","300px","display","inline-block"],[2,"width","50px","margin-left","10px","display","inline-block"],["type","button",1,"my-1","fa","fa-plus",2,"color","blue",3,"click"],[4,"ngFor","ngForOf"],["heading","Phones",3,"selectTab"],["formArrayName","userPhones",1,"my-1","px-0",2,"height","10px","font-size","small"],[1,"stdd","col-1"],[1,"stdd","col-4"],[1,"stdd","col-2"],["type","button",1,"stdd","my-1","fa","fa-plus",2,"color","blue",3,"click"],["heading","Qualification",3,"selectTab"],["formArrayName","userQualifications",1,"my-1","px-0",2,"height","10px","font-size","small"],["heading","Experience",3,"selectTab"],["formArrayName","userExperiences",1,"my-1","px-0",2,"height","10px","font-size","small"],["heading","Attachments",3,"selectTab"],[1,"stdd","col-6"],[1,"stdd","col-3"],["formArrayName","userAttachments",2,"height","12px"],[1,"stdd",2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],["class","row",4,"ngIf"],["for","referredBy",1,"lbl"],["bindLabel","name","bindValue","id","formControlName","referredBy",1,"stdd","w150",3,"items","searchable","change"],[1,"stdd","w500"],["for","password",1,"lbl"],["formControlName","passwword",3,"label","type"],[3,"label","type"],[3,"formGroupName"],["bindLabel","professionName","bindValue","id","formControlName","professionId",1,"stdd","w300","py-0","my-0",3,"items","searchable","change"],["type","checkbox","formControlName","isMain",2,"width","50px","margin-left","30","display","inline-block"],["type","text","readonly","","formControlName","candidateId",1,"stdd","w15"],[1,"fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["formControlName","mobileNo",3,"label"],["type","text","formControlName","candidateId",1,"stdd","w15"],["bindLabel","qualificationName","bindValue","id","formControlName","qualificationId",1,"stdd","w300","py-0","my-0",3,"items","searchable","change"],["formControlName","srNo",3,"label"],["formControlName","position",3,"label"],[1,"stdd","w400"],["formControlName","company",3,"label"],["formControlName","workedFrom",3,"maxDate","label"],["formControlName","workedUpto",3,"maxDate","label"],[1,"stdd","col-5"],["formControlName","name",3,"label"],["bindLabel","typeName","bindValue","typeName","formControlName","attachmentType",1,"stdd","mx-10","w150","fSmaller",3,"items","searchable"],[1,"stdd","red","fa","fa-trash",2,"margin-left","20px",3,"click"],[1,"stdd","mx-1","red","fa","fa-download",3,"click"],["type","text","readonly","","formControlName","candidateId",1,"stdd","w30","mx-5"],["type","number","formControlName","id","readonly","",1,"stdd","w15"],[1,"row"],[1,"text-danger"]],template:function(i,s){1&i&&(t.YNc(0,_t,2,0,"div",0),t.YNc(1,Ut,143,25,"form",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"json"),t.qZA()),2&i&&(t.Q6J("ngIf",!s.candidate),t.xp6(1),t.Q6J("ngIf",s.candidate),t.xp6(2),t.hij(" ",t.lcZ(4,3,s.registerForm.value)," "))},dependencies:[u.sg,u.O5,K.wW,K.AH,r._Y,r.Fj,r.wV,r.Wl,r._,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,j.w9,W.t,vt.L,u.Ts],styles:['.stdd[_ngcontent-%COMP%]{vertical-align:top;padding-left:5px;display:inline-block;margin-top:5px}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin-right:10px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.lblS[_ngcontent-%COMP%]{font-weight:125;font-size:smaller;display:inline-block;vertical-align:top;font-weight:700;width:40px;margin-top:5px}.lbl[_ngcontent-%COMP%]{font-weight:125;font-size:smaller;display:inline-block;font-weight:700;width:100px;margin-top:5px;margin-left:5px;vertical-align:middle}.chkLabel[_ngcontent-%COMP%]{width:100px;margin-right:2px;padding-left:2px}.tAlignR[_ngcontent-%COMP%]{text-align:right}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.red[_ngcontent-%COMP%]{color:red}']})}return n})();class kt{constructor(){this.id=0,this.applicationNo=0,this.gender="",this.firstName="",this.secondName="",this.familyName="",this.knownAs="",this.referredBy=0,this.referredByName="",this.placeOfBirth="",this.aadharNo="",this.ppNo="",this.ecnr="",this.address="",this.city="",this.pin="",this.district="",this.nationality="",this.email="",this.companyId=0,this.created=new Date,this.appUserIdNotEnforced="",this.appUserId=0,this.notificationDesired=!1,this.candidateStatus=0,this.photoUrl="",this.lastActive=new Date,this.userPhones=[],this.userQualifications=[],this.userProfessions=[],this.userAttachments=[],this.userExperiences=[],this.userPhotos=[]}}var P=l(2181),J=l(3298);function It(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No assessment record available for the candidate against the given Order item "),t.qZA())}function Ot(n,c){if(1&n&&(t.TgZ(0,"div")(1,"div",26),t._UZ(2,"input",27),t.TgZ(3,"div",28),t._UZ(4,"app-text-input",29),t.qZA(),t.TgZ(5,"div",30),t._UZ(6,"app-text-input",31),t.qZA(),t.TgZ(7,"div",32),t._UZ(8,"app-text-input",33),t.qZA(),t.TgZ(9,"div",32),t._UZ(10,"app-text-input",34),t.qZA()()()),2&n){const e=c.index;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(3),t.Q6J("label","Q No"),t.xp6(2),t.Q6J("label","Question"),t.xp6(2),t.Q6J("label","Max Points"),t.xp6(2),t.Q6J("label","Points")}}function Et(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.form.valid)}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"Application No"),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.qZA(),t.TgZ(6,"label",12),t._uU(7,"Candidate Name"),t.qZA(),t.TgZ(8,"div",13),t._uU(9),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"label",10),t._uU(12,"Customer"),t.qZA(),t.TgZ(13,"div",13),t._UZ(14,"app-text-input",14),t.qZA(),t.TgZ(15,"label",15),t._uU(16,"Category Name"),t.qZA(),t.TgZ(17,"div",13),t._UZ(18,"app-text-input",16),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"label",15),t._uU(21,"Assessed On"),t.qZA(),t.TgZ(22,"div",17),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"label",18),t._uU(26,"Result"),t.qZA(),t.TgZ(27,"div",11),t._UZ(28,"app-text-input",19),t.qZA(),t._UZ(29,"br"),t.TgZ(30,"label",20),t._uU(31,"Ass'd"),t.qZA(),t.TgZ(32,"label",18),t._uU(33,"Q No."),t.qZA(),t.TgZ(34,"label",21),t._uU(35,"Question"),t.qZA(),t.TgZ(36,"label",18),t._uU(37,"Max"),t._UZ(38,"br"),t._uU(39,"Points"),t.qZA(),t.TgZ(40,"label",18),t._uU(41,"Points"),t.qZA(),t.TgZ(42,"div",22),t.YNc(43,Ot,11,5,"div",23),t.TgZ(44,"label",24),t._uU(45,"Total"),t.qZA(),t.TgZ(46,"div",25),t._uU(47),t.qZA(),t.TgZ(48,"div",25),t._uU(49),t.qZA()()()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(5),t.Oqu(e.assess.applicationNo),t.xp6(4),t.Oqu(e.assess.candidateName),t.xp6(5),t.Q6J("label","Customer"),t.xp6(4),t.Q6J("label","Category"),t.xp6(5),t.Oqu(t.xi3(24,10,e.assess.assessedOn,"dd-MMM-yy")),t.xp6(5),t.Q6J("label","Assess Result"),t.xp6(15),t.Q6J("ngForOf",e.items.controls),t.xp6(4),t.Oqu(e.totalMaxPoints),t.xp6(2),t.Oqu(e.totalPoints)}}let F=(()=>{class n{constructor(e,i,s,a,o){this.bsModalRef=e,this.assessService=i,this.activatedRoute=s,this.fb=a,this.router=o,this.candAssessEvent=new t.vpe,this.totalPoints=0,this.totalMaxPoints=0,this.form=new r.cw({})}ngOnInit(){void 0!==this.assess&&(this.InitializeFormArray(this.assess),this.calculateTotalPoints())}InitializeFormArray(e){this.form=this.fb.group({applicationNo:[e.applicationNo,r.kI.required],candidateId:[e.candidateId,r.kI.required],candidateName:[e.candidateName,r.kI.required],customerName:[e.customerName,r.kI.required],orderItemId:[e.orderItemId,r.kI.required],categoryRef:[e.categoryRef,r.kI.required],orderId:[e.orderId,r.kI.required],requireInternalReview:e.requireInternalReview,assessedByUsername:e.assessedByUsername,professionName:[e.professionName,r.kI.required],assessResult:[e.assessResult,r.kI.required],assessedOn:e.assessedOn,checklistHRId:e.checklistHRId,checklistedByName:e.checklistedByName,items:this.fb.array(e.assessmentItemsDto.map(i=>this.fb.group({id:i.id,candidateAssessmentId:i.candidateAssessmentId,questionNo:[i.questionNo,r.kI.required],question:[i.question,r.kI.required],assessed:[i.assessed],maxPoints:[i.maxPoints,r.kI.required],points:[i.points],remarks:i.remarks})))})}get items(){return this.form.get("items")}close(){this.candAssessEvent.emit(this.assess),this.bsModalRef.hide()}calculateTotalPoints(){this.totalMaxPoints=this.items.value.map(e=>e.maxPoints).reduce((e,i)=>e+i,0),this.totalPoints=this.items.value.map(e=>e.points).reduce((e,i)=>e+i,0)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(T.UZ),t.Y36(J.k),t.Y36(h.gz),t.Y36(r.qu),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cv-assess-modal"]],outputs:{candAssessEvent:"candAssessEvent"},decls:10,vars:2,consts:[[1,"modal-header"],[1,"stdd",2,"font-weight","bold"],["type","button",1,"stdd","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","mt-2"],[1,"lbl","w100"],[1,"stdd","w50"],[1,"lbl","w125","mx-5"],[1,"stdd","w250"],["formControlName","customerName",3,"label"],[1,"lbl","w100","mx-2"],["formControlName","professionName",2,"font-size","small",3,"label"],[1,"stdd","w125"],[1,"lbl","w50","mx-2"],["formControlName","assessResult",2,"font-size","small","font-weight","bold",3,"label"],[1,"lbl","w25","mx-2"],[1,"lbl","w400","mx-2"],["formArrayName","items",1,"formArray"],[4,"ngFor","ngForOf"],[1,"lbl","w50","b",2,"margin-left","458px"],[1,"stdd","w50","alignR","mx-2","b"],[3,"formGroupName"],["type","checkbox","formControlName","assessed",1,"stdd","w25","mx-2",2,"font-size","small"],[1,"stdd","w50","mx-2"],["formControlName","questionNo",2,"font-size","small",3,"label"],[1,"stdd","w400","mx-2"],["formControlName","question",2,"font-size","small",3,"label"],[1,"stdd","w50","mx-2","alignR"],["formControlName","maxPoints",2,"font-size","small","text-align","right",3,"label"],["formControlName","points",2,"font-size","small","text-align","right",3,"label"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Candidate Assessment"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return s.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,It,2,0,"div",5),t.YNc(8,Et,50,13,"form",6),t.qZA(),t._UZ(9,"div",7)),2&i&&(t.xp6(7),t.Q6J("ngIf",!s.assess),t.xp6(1),t.Q6J("ngIf",s.assess))},dependencies:[u.sg,u.O5,r._Y,r.Wl,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,W.t,u.uU],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;vertical-align:middle;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.alignR[_ngcontent-%COMP%]{text-align:right}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w250[_ngcontent-%COMP%]{width:250px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return n})();class St{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.professionId=0,this.agentId=0,this.customerId=0,this.customerName="",this.orderId=0,this.orderItemId=0,this.cVRefStatus="",this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}let Jt=(()=>{class n{constructor(e,i,s){this.activatedRoute=e,this.accountService=i,this.http=s,this.apiUrl=Z.N.apiUrl,this.currentUserSource=new U.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new St,this.accountService.currentUser$.pipe((0,I.q)(1)).subscribe(a=>this.user=a)}referCVs(e){return this.http.post(this.apiUrl+"CVRef",e)}referredCVs(e){const i=this.cacheReferred.get(Object.values(e).join("-"));if(i)return(0,v.of)(i);let s=(0,g.R1)(e);return(0,g.Tr)(this.apiUrl+"cvref/cvsreferred",s,this.http).pipe((0,C.U)(a=>(this.cache.set(Object.values(e).join("-"),a),a)))}getCVRefWithDeploys(e){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+e)}getCVRefWithCVRefId(e){return this.http.get(this.apiUrl+"CVRef/cvref/"+e)}setCVRefParams(e){this.cvRefParams=e}getCVRefParams(){return this.cvRefParams}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(h.gz),t.LFG(N.B),t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ft(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No candidate detail available\n"),t.qZA())}function Rt(n,c){1&n&&t._UZ(0,"div",15)}function Qt(n,c){if(1&n&&(t.TgZ(0,"span",13),t._uU(1),t.YNc(2,Rt,1,0,"div",14),t.qZA()),2&n){const e=c.$implicit,i=t.oxw(2);t.xp6(1),t.hij(" ",e.professionName," , "),t.xp6(1),t.Q6J("ngIf",i.cv.userProfessions.length>1)}}function Lt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"input",3),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.CVChecked(s.cv))}),t.qZA(),t.TgZ(2,"div",4),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div",7),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"div",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.displayAssessment())}),t._uU(16),t.qZA(),t.TgZ(17,"div",10),t.YNc(18,Qt,3,2,"span",11),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.download(s.cv.candidateId))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.cv.checked),t.xp6(2),t.Oqu(e.cv.gender),t.xp6(1),t.MGl("routerLink","/candidates/edit/",e.cv.candidateId,""),t.xp6(1),t.Oqu(e.cv.applicationNo),t.xp6(1),t.MGl("routerLink","/candidate/historyfromcvid/",e.cv.candidateId,""),t.xp6(1),t.Oqu(e.cv.fullName),t.xp6(2),t.Oqu(e.cv.city),t.xp6(2),t.Oqu(e.cv.orderCategoryRef),t.xp6(2),t.Oqu(t.xi3(14,11,e.cv.assessedOn,"dd-MMM-yy")),t.xp6(3),t.Oqu(e.cv.gradeAssessed),t.xp6(2),t.Q6J("ngForOf",e.cv.userProfessions)}}let Gt=(()=>{class n{constructor(){this.msgEvent=new t.vpe,this.downloadEvent=new t.vpe,this.cvAssessEvent=new t.vpe,this.cvCheckedEvent=new t.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(e){return e.stopPropagation(),this.xPosTabMenu=e.clientX,this.yPosTabMenu=e.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(e){this.downloadEvent.emit(e)}onClickLoadDocument(e){var i=this;return q(function*(){i.msgEvent.emit(e)})()}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(e){this.currentId=e}showhistory(e){this.msgEvent.emit(e)}CVChecked(e){this.cvCheckedEvent.emit(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-available-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],[1,"stdd","fSmall","w25","mx-1",2,"text-align","center"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","fSmall","w50","mx-1",2,"margin-left","10px",3,"routerLink"],["title","contact history of the candidate",1,"stdd","fSmall","w130","mx-1",3,"routerLink"],[1,"stdd","fSmall","mx-1","w100"],[1,"stdd","fSmaller","mx-1","w300"],[1,"stdd","fSmall","w50","mx-1","blue","cursorpointer",2,"text-align","center",3,"click"],[1,"stdd","mx-1","fSmall","w200","mx-1",2,"border","aqua"],["style","white-space: normal;",4,"ngFor","ngForOf"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-download","w40",3,"click"],[2,"white-space","normal"],["style","display: inline-block",4,"ngIf"],[2,"display","inline-block"]],template:function(i,s){1&i&&(t.YNc(0,Ft,2,0,"div",0),t.YNc(1,Lt,20,14,"div",1)),2&i&&(t.Q6J("ngIf",null===s.cv),t.xp6(1),t.Q6J("ngIf",null!=s.cv))},dependencies:[u.sg,u.O5,h.rH,u.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.blue[_ngcontent-%COMP%]{color:#00008b}"]})}return n})();const Vt=["search"];function Yt(n,c){1&n&&(t.TgZ(0,"div",1),t._uU(1," No CVs available to refer to clients "),t.qZA())}function Ht(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"input",12,13),t.NdJ("keyup.enter",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSearch())}),t.qZA(),t.TgZ(3,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSearch())}),t._uU(4,"Search"),t.qZA(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onReset())}),t._uU(6,"Reset"),t.qZA(),t.TgZ(7,"button",16),t._uU(8,"+"),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.referCVs())}),t._uU(10,"Refer"),t.qZA()()}}function Bt(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No candidates available to refer "),t.qZA())}function zt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"app-available-item",20),t.NdJ("downloadEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.downloadFileEvent(s))})("cvCheckedEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cvCheckedEvent(s))})("cvAssessEvent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.displayAssessmentModalBySwitchMap(s))}),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.Q6J("cv",e)}}function Dt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,zt,2,1,"div",18),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cvs)}}function Kt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"pagination",2),t.NdJ("pageChanged",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onPageChanged(s))}),t._uU(2," >"),t.qZA(),t.YNc(3,Yt,2,0,"div",0),t.YNc(4,Ht,11,0,"div",0),t.TgZ(5,"div",3)(6,"div",4),t._uU(7,"Select"),t.qZA(),t.TgZ(8,"div",5),t._uU(9,"Gndr"),t.qZA(),t.TgZ(10,"div",6),t._uU(11,"App No"),t.qZA(),t.TgZ(12,"div",7),t._uU(13,"Candidate Name"),t.qZA(),t.TgZ(14,"div",8),t._uU(15,"City"),t.qZA(),t.TgZ(16,"div",9),t._uU(17,"Category Ref"),t.qZA(),t.TgZ(18,"div",8),t._uU(19,"Assessed On"),t.qZA(),t.TgZ(20,"div",6),t._uU(21,"Grade"),t.qZA(),t.TgZ(22,"div",10),t._uU(23,"Professions"),t.qZA()(),t.YNc(24,Bt,2,0,"div",11),t.YNc(25,Dt,2,1,"div",11),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",10),t.xp6(2),t.Q6J("ngIf",!e.cvs),t.xp6(1),t.Q6J("ngIf",e.cvs),t.xp6(20),t.Q6J("ngIf",!e.cvs),t.xp6(1),t.Q6J("ngIf",e.cvs.length)}}let jt=(()=>{class n{constructor(e,i,s,a,o,d,p,_,R){this.router=e,this.activatedRoute=i,this.service=s,this.candAssessService=a,this.referService=o,this.toastr=d,this.modalService=p,this.orderService=_,this.downloadService=R,this.professions=[],this.agents=[],this.cvs=[],this.selectedCVs=[],this.returnUrl="",this.cvParams=new b,this.totalCount=0,this.cvParams.typeOfCandidate="available";let f=this.router.getCurrentNavigation();f?.extras&&f.extras.state&&(f.extras.state.returnUrl&&(this.returnUrl=f.extras.state.returnUrl),f.extras.state.user&&(this.user=f.extras.state.user))}ngOnInit(){this.loadCandidates(!1),this.activatedRoute.data.subscribe(e=>{this.professions=e.professions,this.agents=e.agents}),this.selectedCVs=[]}loadCandidates(e=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,e).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination,console.log("cvs",this.cvs))}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,!0).subscribe({next:e=>{e.result&&e.pagination&&(this.cvs=e.result,this.totalCount=e.count)}}))}onSearch(){const e=this.service.getCVParams()??new b;e.search=this.searchTerm.nativeElement.value,e.pageNumber=1,this.service.setCVParams(e),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new b,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(e){this.cvParams&&this.cvParams.pageNumber!==e.page&&(this.cvParams.pageNumber=e.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(e){var a=[];const o={class:"modal-dialog-centered",initialState:{user:e,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(V,o),this.bsModalRef.content.updateSelectedRoles.subscribe(d=>{a=d})}getOpenOrderItemsArray(){let i=[],a=new G;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadFileEvent(e){return this.downloadService.downloadFile(e).subscribe(()=>{this.toastr.success("document downloaded")},i=>{this.toastr.error("failed to download document",i)})}displayAssessmentModal(e){this.candAssessService.getCandidateAssessmentDto(e.candidateId,e.orderItemId).subscribe(a=>{null===a?this.toastr.warning("failed to retrieve the assessment object"):(this.bsModalRef=this.modalService.show(F,{class:"modal-dialog-centered modal-lg",initialState:{assess:a}}),this.bsModalRef.content.candAssessEvent.subscribe(()=>{console.log("succeeded")}))})}displayAssessmentModalBySwitchMap(e){this.candAssessService.getCandidateAssessmentDto(e.candidateId,e.orderItemId).pipe((0,P.h)(o=>void 0!==o),(0,w.w)(o=>(this.bsModalRef=this.modalService.show(F,{class:"modal-dialog-centered modal-lg",initialState:{assess:o,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(o=>{console.log("inner response:",o)})}navigateByUrl(e,i,s){this.router.navigate([e],{state:{cvbrief:i,userobject:this.service.user,toedit:s,returnUrl:"/candidates"}})}cvCheckedEvent(e){var i=this.selectedCVs.find(a=>a.candidateId==e.id),s=this.selectedCVs.findIndex(a=>a.candidateId===e.id);void 0!==i?i.checked?this.selectedCVs.push(e):this.selectedCVs.splice(s,1):this.selectedCVs.push(e)}referCVs(){if(0!==this.selectedCVs.length){var e=this.selectedCVs.map(i=>i.candAssessmentId);this.referService.referCVs(e).subscribe({next:i=>{console.log("returned from api, cv ref:",i),""===i?(this.toastr.success("selected CVs referred, and CV Referral message available in Messages section for edits","success"),this.cvs.forEach(s=>{s.checked&&(s.checked=!1)}),this.selectedCVs=[]):this.toastr.warning("failed to refer the CVs","failed to refer CVs")},error:i=>this.toastr.error(i,"Error in referring the CVs;")})}else this.toastr.warning("No CVs selected to forward to client","No selections made")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(h.F0),t.Y36(h.gz),t.Y36(M),t.Y36(J.k),t.Y36(Jt),t.Y36(A._W),t.Y36(T.tT),t.Y36(H.p),t.Y36(B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cvs-available-to-ref"]],viewQuery:function(i,s){if(1&i&&t.Gf(Vt,5),2&i){let a;t.iGM(a=t.CRH())&&(s.searchTerm=a.first)}},decls:1,vars:1,consts:[["class","stdd",4,"ngIf"],[1,"stdd"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","70px"],[1,"lbl","w30","mx-1"],[1,"lbl","w25","mx-1"],[1,"lbl","w50","mx-1"],[1,"lbl","w130","mx-1"],[1,"lbl","w100","mx-1"],[1,"lbl","w300","mx-1"],[1,"lbl","w200","mx-1"],[4,"ngIf"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"stdd","btn","btn-outline-primary","mx-3",3,"click"],["type","button",1,"stdd","btn","btn-outline-success","mx-3",2,"font-size","small",3,"click"],["type","button","title","Add a new candidate","routerLink","/candidates/register/edit/0",1,"stdd","btn","btn-outline-success","fa","fa-plus"],[1,"stdd","w40","mx-5","fa","fa-aeroplane",3,"click"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvCheckedEvent","cvAssessEvent"]],template:function(i,s){1&i&&t.YNc(0,Kt,26,7,"div",0),2&i&&t.Q6J("ngIf",void 0!==s.pagination)},dependencies:[u.sg,u.O5,h.rH,O.Qt,Gt],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();var $=l(7411);function Wt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"li"),t._uU(3,"This option will upload your Excel File, read the data and insert into the database."),t.qZA(),t.TgZ(4,"li"),t._uU(5,"This option needs following requirements to be met:"),t.qZA(),t.TgZ(6,"li"),t._uU(7,"The Worksheet name must be 'Sheet1'"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"The file must be an Excel Workbook, with XLSX extension. Column Titles should be in row 5"),t.qZA(),t.TgZ(10,"li"),t._uU(11,"Data should begin from row 6.\\nIn addition."),t.qZA(),t.TgZ(12,"li"),t._uU(13,"Row 2 or 3 should contain the title 'OrderItemId' and its value in next column"),t.qZA()(),t._UZ(14,"br")(15,"br"),t.TgZ(16,"input",8),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileInputChange(s))}),t.qZA(),t.TgZ(17,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.importProspectiveExcel())}),t.qZA()()}}let $t=(()=>{class n{constructor(e,i,s,a){this.router=e,this.accountService=i,this.toastr=s,this.confirm=a,this.uploadExcel=!1,this.accountService.currentUser$.pipe((0,I.q)(1)).subscribe({next:o=>{o&&(this.user=o)}})}OpenAvailableCandidatesComponent(){this.navigateByRoute(0,"/candidates/availablecandidates",!1)}OpenCandidatesListingComponent(){this.navigateByRoute(0,"/candidates/listing",!1)}OpenCallRecordMenu(){this.navigateByRoute(0,"/callRecords/callRecordList",!1)}navigateByRoute(e,i,s){this.router.navigate([0===e?i:i+"/"+e],{state:{user:this.user,toedit:s,returnUrl:"/administration/orders"}})}importProspectiveExcel(){this.uploadExcel=!this.uploadExcel}OpenActiveProspectiveList(){this.navigateByRoute(0,"/candidates/prospective",!1)}onFileInputChange(e){var i=new FormData;const o=e.target.files[0];o.size>0&&(i.append("file",o,o.name),this.accountService.copyProspectiveXLSFileToDB(i).subscribe({next:d=>{""===d?this.toastr.success(d+" file(s) copied to database","success"):this.toastr.warning(d,"Failed to copy the excel data to database")},error:d=>{console.log(d.error.text,"Error encountered"),this.toastr.error(d.error.text,"Error in copying the excel data to database")}}),this.uploadExcel=!1)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(h.F0),t.Y36(N.B),t.Y36(A._W),t.Y36($.z))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile-menu"]],decls:12,vars:1,consts:[[1,"container","d-flex","justify-contents-between","align-items-center","mt-5"],["title","Candidates reviewed and approved for sending to clients",1,"stdd",3,"click"],["title","List of Candidates",1,"stdd",3,"click"],["title","Candidate history",1,"stdd",3,"click"],["title","displays active prospective candidates",1,"stdd",3,"click"],["class","my-10",4,"ngIf"],[1,"my-10"],[2,"word-wrap","normal","width","800px"],["type","file","id","file",1,"stdd","d-flex","align-items-center",3,"change"],[1,"stdd","btn","fa","fa-window-close",2,"margin-left","100px",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return s.OpenAvailableCandidatesComponent()}),t._uU(2,"Candidates available to refer"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return s.OpenCandidatesListingComponent()}),t._uU(4,"List of Candidates"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return s.OpenCallRecordMenu()}),t._uU(6,"Candidate History"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return s.OpenActiveProspectiveList()}),t._uU(8,"Active Prospective Candidates List"),t.qZA(),t.TgZ(9,"button",3),t.NdJ("click",function(){return s.importProspectiveExcel()}),t._uU(10,"import Prospective Candidates From Excel"),t.qZA()(),t.YNc(11,Wt,18,0,"div",5)),2&i&&(t.xp6(11),t.Q6J("ngIf",s.uploadExcel))},dependencies:[u.O5],styles:[".stdd[_ngcontent-%COMP%]{font-size:smaller;display:inline-block}"]})}return n})();var te=l(6306),ee=l(9397);class k{constructor(){this.categoryRef="",this.status="",this.statusClass="Active",this.closed=!1,this.sort="date",this.pageNumber=1,this.pageSize=10,this.search=""}}var ie=l(1986),se=l(369);class ne{constructor(){this.personId="",this.personType="",this.categoryRef="",this.dateRegistered=new Date,this.status="",this.username="",this.phoneNo="",this.email="",this.candidateName="",this.sort="categoryRef",this.pageNumber=1,this.pageSize=10,this.search=""}}let ae=(()=>{class n{constructor(e){this.http=e,this.apiUrl=Z.N.apiUrl,this.currentUserSource=new U.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.oParams=new k,this.sParams=new ne,this.summaries=[],this.cache=new Map,this.cacheSummary=new Map}getProspectiveCandidates(e){const i=this.cache.get(Object.values(e).join("-"));if(i)return(0,v.of)(i);let s=(0,g.NO)(e);return(0,g.Tr)(this.apiUrl+"prospectivecandidates",s,this.http).pipe((0,C.U)(a=>(this.cache.set(Object.values(e).join("-"),a),a)))}getOrAddCallRecord(e){var i=(0,g.$Y)(e);return this.http.get(this.apiUrl+"CallRecord/getOrAddHistoryWithItems",{params:i})}getProspectivesPaged(e){const i=this.cache.get(Object.values(e).join("-"));if(i)return(0,v.of)(i);let s=(0,g.NO)(e);return(0,g.Tr)(this.apiUrl+"Prospectives/pagedlist",s,this.http).pipe((0,C.U)(a=>(this.cache.set(Object.values(e).join("-"),a),a)))}getProspectiveSummary(e){if(!1===e&&(this.cacheSummary=new Map),this.cacheSummary.size>0&&!0===e&&this.cacheSummary.has(Object.values(this.sParams).join("-")))return this.summaries=this.cacheSummary.get(Object.values(this.sParams).join("-")),(0,v.of)(this.summaries);let i=(0,g.UV)(this.sParams);return this.http.get(this.apiUrl+"Prospectives/summary",{params:i}).pipe((0,C.U)(s=>(this.cache.set(Object.values(this.sParams).join("-"),s),this.summaries=s,s)))}setParams(e){this.oParams=e,console.log("in prospective.sevice, params set to",this.oParams)}getParams(){return this.oParams}setSummaryParams(e){this.sParams=e,console.log("summaryParams set to:",e)}getSummaryParams(){return this.sParams}displayModalUserContact(){}uploadProspectiveXLSFile(e){return this.http.post(this.apiUrl+"excel/uploadProspectiveFile",e)}convertProspectiveXLStoDb(e){return this.http.post(this.apiUrl+"excel/convertToDb/"+e,{})}convertProspectiveToCandidate(e){return this.http.put(this.apiUrl+"Prospectives/convertProspective/"+e,{})}createCandidateFromprospective(e){return this.http.post(this.apiUrl+"Prospectives",e)}updateProspectives(e){return this.http.put(this.apiUrl+"Prospectives/prospectivelistedit",e)}updateCallRecord(e){return this.http.put(this.apiUrl+"CallRecord",e)}deleteProspectiveRecord(e){return this.http.delete(this.apiUrl+"Prospectives/delete/"+e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe=l(3574),re=l(6125);function ce(n,c){1&n&&(t.TgZ(0,"div"),t._uU(1," No active prospetive candidates on record matching the conditions\n"),t.qZA())}function de(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"input",2),t.NdJ("ngModelChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.prospective.checked=s)})("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedClicked())}),t.qZA(),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",4),t._uU(10),t.qZA(),t.TgZ(11,"div",5),t._uU(12),t.qZA(),t.TgZ(13,"div",6),t._uU(14),t.qZA(),t.TgZ(15,"div",6),t._uU(16),t.qZA(),t.TgZ(17,"div",6),t._uU(18),t.qZA(),t.TgZ(19,"div",6),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"div",5),t._uU(23),t.qZA(),t.TgZ(24,"div",5),t._uU(25),t.ALo(26,"timeago"),t.qZA(),t.TgZ(27,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editEventClicked())}),t.qZA(),t.TgZ(28,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.convertToCandidateClicked())}),t.qZA(),t.TgZ(29,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.deleteEventClicked())}),t.qZA()()()}if(2&n){const e=t.oxw();let i;t.xp6(2),t.Q6J("ngModel",e.prospective.checked),t.xp6(2),t.Oqu(e.prospective.candidateName),t.xp6(2),t.Oqu(e.prospective.categoryRef),t.xp6(2),t.Oqu(e.prospective.phoneNo),t.xp6(2),t.Oqu(e.prospective.email),t.xp6(2),t.Oqu(e.prospective.source),t.xp6(2),t.Oqu(e.prospective.personType),t.xp6(2),t.Oqu(e.prospective.personId),t.xp6(2),t.Oqu(e.prospective.nationality),t.xp6(2),t.Oqu(t.xi3(21,12,e.prospective.dateRegistered,"dd-MMM-yy")),t.xp6(3),t.Oqu(null!==(i=e.prospective.status)&&void 0!==i?i:"undefined"),t.xp6(2),t.Oqu(t.lcZ(26,15,e.prospective.statusDate))}}let le=(()=>{class n{constructor(e){this.callRecService=e,this.editEvent=new t.vpe,this.deleteEvent=new t.vpe,this.selectedEvent=new t.vpe,this.convertToCandidateEvent=new t.vpe,this.StatusSelected=""}ngOnInit(){}selected(e){this.StatusSelected=e}editEventClicked(){this.prospective&&this.callRecService.getCallRecordWithItems(0,this.prospective.personType,this.prospective.personId,this.prospective.categoryRef).subscribe({next:e=>{e&&this.editEvent.emit(e)}})}selectedClicked(){this.selectedEvent.emit(this.prospective)}deleteEventClicked(){this.deleteEvent.emit(this.prospective?.id)}convertToCandidateClicked(){this.convertToCandidateEvent.emit(this.prospective?.id)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(oe.C))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-prospective-line"]],inputs:{prospective:"prospective"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",selectedEvent:"selectedEvent",convertToCandidateEvent:"convertToCandidateEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"stdd",2,"width","max-content"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w125",2,"margin-left","25px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"stdd","w15","fa","fa-pencil",3,"click"],["title","converts this prospective candidate to a candidate, and removes it from the prospectives list",1,"stdd","w15","fa","fa-arrow-right",3,"click"],[1,"stdd","w15","fa","fa-trash","red",3,"click"]],template:function(i,s){1&i&&(t.YNc(0,ce,2,0,"div",0),t.YNc(1,de,30,17,"div",0)),2&i&&(t.Q6J("ngIf",!s.prospective),t.xp6(1),t.Q6J("ngIf",s.prospective))},dependencies:[u.O5,r.Wl,r.JJ,r.On,u.uU,re.wr],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:small;word-wrap:normal!important;vertical-align:top}.red[_ngcontent-%COMP%]{color:red}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return n})();const pe=["search"],ue=["discussions"];function he(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"pagination",21),t.NdJ("pageChanged",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onPageChanged(s))}),t._uU(1," >"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",10)}}function me(n,c){1&n&&(t.TgZ(0,"div",22),t._uU(1," No prospective candidates found matching your criteria\n"),t.qZA())}function ve(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-prospective-line",24),t.NdJ("deleteEvent",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deleteProspectiveClicked(s))})("editEvent",function(s){const o=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.editProspectiveClicked(s,o))})("selectedEvent",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectedClicked(s))})("convertToCandidateEvent",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.convertProspectiveToCandidate(s))}),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.Q6J("prospective",e)}}function fe(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ve,2,1,"div",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.prospectives)}}const _e=[{path:"",component:$t},{path:"listing",component:pt,resolve:{professions:E.h,agents:S.Y}},{path:"register/edit/:id",component:Nt,resolve:{categories:E.h,qualifications:()=>(0,t.f3M)(D).getQualificationList(),agents:S.Y,candidate:n=>{var c=n.paramMap.get("id");return null===c||""===c||"0"===c?(0,v.of)(new kt):(0,t.f3M)(M).getCandidate(+c)}},data:{breadcrumb:"Edit Candidate"}},{path:"availablecandidates",component:jt,resolve:{professions:E.h,agents:S.Y}},{path:"candidateAssessmentDto/:id",component:F,resolve:{candidateAssessmentDto:(n,c)=>{var e=n.paramMap.get("id");if(null===e)return(0,v.of)(null);var i=n.paramMap.get("orderitemid");return null===i?(0,v.of)(null):(0,t.f3M)(J.k).getCandidateAssessmentDto(+e,+i)}}},{path:"prospective",component:(()=>{class n{constructor(e,i,s,a,o){this.service=e,this.modalService=i,this.router=s,this.toastr=a,this.confirm=o,this.returnUrl="",this.prospectives=[],this.totalCount=0,this.pParams=new k,this.statusSelected="",this.paramsStatus=[{status:"All"},{status:"Active"},{status:"Declined"},{status:"Interested"}],this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"}];let d=this.router.getCurrentNavigation();d?.extras&&d.extras.state&&(d.extras.state.returnUrl&&(this.returnUrl=d.extras.state.returnUrl),d.extras.state.user&&(this.user=d.extras.state.user))}ngOnInit(){this.loadProspectives()}onPageChanged(e){const i=this.service.getParams();i.pageNumber!==e&&(i.pageNumber=e.page,this.service.setParams(i),this.loadProspectives())}setParameters(){(new k).statusClass=this.pParams.statusClass,this.service.setParams(this.pParams),this.loadProspectives()}loadProspectives(){var e=this.service.getParams();console.log("params in loadProspectives",e),this.service.getProspectivesPaged(e)?.subscribe({next:i=>{null!=i?(this.prospectives=i.result,this.totalCount=i?.count,this.pagination=i.pagination):console.log("response is undefined")},error:i=>console.log(i)})}selectedClicked(e){!0===e.checked?this.prospectives.filter(i=>i.id!=e.id).forEach(i=>i.checked=!1):this.prospectives.forEach(i=>i.checked=!1),this.prospectiveSelected=e.checked?void 0:e}selected(e){this.statusSelected=e}applyTransactions(){""!==this.statusSelected?this.prospectiveSelected&&this.service.getOrAddCallRecord({id:0,phoneNo:this.prospectiveSelected.phoneNo??"",subject:"Acceptance Followup",callRecordId:0,personName:this.prospectiveSelected.candidateName,categoryRef:this.prospectiveSelected.categoryRef,personType:this.prospectiveSelected.personType,personId:this.prospectiveSelected.personId,status:this.statusSelected,email:this.prospectiveSelected.email}).pipe((0,P.h)(s=>null!=s),(0,w.w)(s=>(this.bsModalRef=this.modalService.show(ie.Y,{class:"modal-dialog-centered modal-lg",initialState:{callRecord:s,contactResult:this.statusSelected,contactResults:this.callRecordStatus}}),this.bsModalRef.content.callRecordAddEvent))).subscribe(s=>{console.log("inner response",s)}):this.toastr.warning("Status not selected","Please select the status you want to apply")}deleteProspectiveClicked(e){var i=e;const a=this.service.deleteProspectiveRecord(i);this.confirm.confirm("confirm Delete","confirm delete this prospective Candidate?. WARNING: this cannot be undone").pipe((0,P.h)(d=>d),(0,w.w)(d=>a)).subscribe(d=>{if(d){this.toastr.success("Prospective Candidate deleted","deletion successful");var p=this.prospectives.findIndex(_=>_.id==i);p>=0&&this.prospectives.splice(p,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}editProspectiveClicked(e,i){null!==e?(this.bsModalRef=this.modalService.show(se.h,{class:"modal-dialog-centered modal-lg",initialState:{callRecord:e,contactResults:this.callRecordStatus,candidateName:i.candidateName}}),this.bsModalRef.content.updateCallRecordEvent.pipe((0,P.h)(o=>null!==o),(0,w.w)(o=>this.service.updateCallRecord(o))).subscribe(o=>{""===o?this.toastr.success("Deployment updated","Success"):this.toastr.warning(o,"Failure")})):this.toastr.warning("No Call Record object returned from the modal form")}convertProspectiveToCandidate(e){var i=e;const a=this.service.convertProspectiveToCandidate(i);this.confirm.confirm("confirm Convert Prospective To Candidate","this will convert the selected prospective candidate to a candidate, and remove it from this prospectives list. WARNING: this cannot be undone").pipe((0,P.h)(d=>d),(0,w.w)(()=>a.pipe((0,te.K)(d=>(0,v.of)()),(0,ee.b)(d=>{if(0===d)this.toastr.warning("Failed to convert the prospective to candidate","Failed to convert");else{this.toastr.success("Converted the prospective to candidate, with Application No "+d,"success");var p=this.prospectives.findIndex(_=>_.id);console.log("index to remove",p),p>=0&&this.prospectives.slice(p,1)}})))).subscribe(d=>{if(d){this.toastr.success("Prospective Candidate converted, with application No "+d,"Conversion successful");var p=this.prospectives.findIndex(_=>_.id==i);console.log("index to remove in subscribe",p),p>=0&&this.prospectives.splice(p,1)}else this.toastr.error("Error in converting the prospective candidate to a Candidate","failed to convert")})}onSearch(){const e=this.service.getParams();e.search=this.searchTerm?.nativeElement.value,e.pageNumber=1,this.service.setParams(e),this.loadProspectives()}onReset(){this.searchTerm.nativeElement.value="",this.pParams=new k,this.service.setParams(this.pParams),this.loadProspectives()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(ae),t.Y36(T.tT),t.Y36(h.F0),t.Y36(A._W),t.Y36($.z))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-prospective-list"]],viewQuery:function(i,s){if(1&i&&(t.Gf(pe,5),t.Gf(ue,5)),2&i){let a;t.iGM(a=t.CRH())&&(s.searchTerm=a.first),t.iGM(a=t.CRH())&&(s.discussionTerm=a.first)}},decls:49,vars:7,consts:[[2,"display","inline-block"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","fa-solid","fa-magnifying-glass","w200",3,"keyup.enter"],["search",""],["title","search the text entered",1,"stdd","btn","fa-solid","fa-magnifying-glass","mx-1",3,"click"],[1,"btn","btn-outline-success","fa","fa-refresh","mx-1",3,"click"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear",1,"stdd",2,"border-style","double","width","250px","font-size","small",3,"items","ngModel","selected","ngModelChange"],["title","create new transaction based upon the status selected",1,"btn","fa","fa-check","mx-2"],["title","The paged list that will retreive records based upon the status you select",1,"lbl","w100"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear",1,"stdd",2,"border-style","double","width","100px","font-size","small",3,"items","ngModel","ngModelChange"],["title","filters the records based upon the status selected",1,"btn","btn-outline-primary",3,"click"],["title","go back","routerLink","/profiles",1,"btn","btn-outline-primary","fa","fa-window-close","pull-right"],[1,"form-inline"],[1,"lbl","w35"],[1,"lbl","w125",2,"margin-left","15px"],[1,"lbl","w150"],[1,"lbl","w100"],[1,"lbl","w75"],["class","my-2",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[4,"ngFor","ngForOf"],[3,"prospective","deleteEvent","editEvent","selectedEvent","convertToCandidateEvent"]],template:function(i,s){1&i&&(t.TgZ(0,"h6",0),t._uU(1,"Prospective Candidates"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,he,2,3,"pagination",2),t.TgZ(4,"input",3,4),t.NdJ("keyup.enter",function(){return s.onSearch()}),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return s.onSearch()}),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return s.onReset()}),t.qZA(),t.TgZ(9,"ng-select",7),t.NdJ("selected",function(o){return s.selected(o)})("ngModelChange",function(o){return s.statusSelected=o}),t.qZA(),t._UZ(10,"button",8),t.TgZ(11,"label",9),t._uU(12,"Choose Status"),t.qZA(),t.TgZ(13,"ng-select",10),t.NdJ("ngModelChange",function(o){return s.pParams.statusClass=o}),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){return s.setParameters()}),t._uU(15,"apply"),t.qZA(),t._UZ(16,"button",12),t.qZA(),t.TgZ(17,"div",13)(18,"label",14),t._uU(19,"Sel"),t.qZA(),t.TgZ(20,"label",15),t._uU(21,"Candidate Name"),t.qZA(),t.TgZ(22,"label",16),t._uU(23,"Category Ref"),t.qZA(),t.TgZ(24,"label",17),t._uU(25,"Phone No"),t.qZA(),t.TgZ(26,"label",16),t._uU(27,"Email"),t.qZA(),t.TgZ(28,"label",17),t._uU(29,"Source"),t.qZA(),t.TgZ(30,"label",18),t._uU(31,"Person"),t._UZ(32,"br"),t._uU(33,"Type"),t.qZA(),t.TgZ(34,"label",18),t._uU(35,"Person Id"),t.qZA(),t.TgZ(36,"label",18),t._uU(37,"Nationality"),t.qZA(),t.TgZ(38,"label",18),t._uU(39,"Date"),t._UZ(40,"br"),t._uU(41,"Registered"),t.qZA(),t.TgZ(42,"label",17),t._uU(43,"Status"),t.qZA(),t.TgZ(44,"label",17),t._uU(45,"Duration"),t.qZA()(),t._UZ(46,"hr"),t.YNc(47,me,2,0,"div",19),t.YNc(48,fe,2,1,"div",20)),2&i&&(t.xp6(3),t.Q6J("ngIf",void 0!==s.pagination),t.xp6(6),t.Q6J("items",s.callRecordStatus)("ngModel",s.statusSelected),t.xp6(4),t.Q6J("items",s.paramsStatus)("ngModel",s.pParams.statusClass),t.xp6(34),t.Q6J("ngIf",!s.prospectives),t.xp6(1),t.Q6J("ngIf",s.prospectives))},dependencies:[u.sg,u.O5,h.rH,O.Qt,r.JJ,r.On,j.w9,le],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:smaller;word-wrap:normal;vertical-align:middle;font-weight:700}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}"]})}return n})()}];let be=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[u.ez,h.Bz.forChild(_e),h.Bz]})}return n})();var Ce=l(4849);let xe=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[u.ez,be,Ce.m]})}return n})()}}]);