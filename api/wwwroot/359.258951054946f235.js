"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[359],{7114:(y,x,d)=>{d.d(x,{t:()=>v});var o=d(5879),_=d(6223),C=d(6814);function b(c,g){if(1&c&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&c){const p=o.oxw();o.xp6(1),o.hij(" Please enter a ",p.label," ")}}function I(c,g){if(1&c&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&c){const p=o.oxw();o.xp6(1),o.AsE(" ",p.label," must be at least ",null==p.control.errors?null:p.control.errors.minlength.requiredLength," characters ")}}function e(c,g){if(1&c&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&c){const p=o.oxw();o.xp6(1),o.AsE(" ",p.label," must be at most ",null==p.control.errors?null:p.control.errors.maxlength.requiredLength," characters ")}}function h(c,g){if(1&c&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&c){const p=o.oxw();o.xp6(1),o.hij(" ",p.label," do not match ")}}let v=(()=>{class c{constructor(p){this.ngControl=p,this.label="",this.type="text",this.width="",this.ngControl.valueAccessor=this}writeValue(p){}registerOnChange(p){}registerOnTouched(p){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(f){return new(f||c)(o.Y36(_.a5,2))};static#t=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-text-input"]],inputs:{label:"label",type:"type",width:"width"},decls:6,vars:10,consts:[[1,"mb-3",2,"vertical-align","middle"],[1,"form-control",2,"font-size","small","word-wrap","normal","height","auto","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px",3,"type","width","formControl","placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(f,s){1&f&&(o.TgZ(0,"div",0),o._UZ(1,"input",1),o.YNc(2,b,2,1,"div",2),o.YNc(3,I,2,2,"div",2),o.YNc(4,e,2,2,"div",2),o.YNc(5,h,2,1,"div",2),o.qZA()),2&f&&(o.xp6(1),o.ekj("is-invalid",s.control.touched&&s.control.invalid),o.s9C("type",s.type),o.s9C("width",s.width),o.s9C("placeholder",s.label),o.Q6J("formControl",s.control),o.xp6(1),o.Q6J("ngIf",null==s.control.errors?null:s.control.errors.required),o.xp6(1),o.Q6J("ngIf",null==s.control.errors?null:s.control.errors.minlength),o.xp6(1),o.Q6J("ngIf",null==s.control.errors?null:s.control.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==s.control.errors?null:s.control.errors.isMatching))},dependencies:[C.O5,_.Fj,_.JJ,_.oH]})}return c})()},2359:(y,x,d)=>{d.r(x),d.d(x,{InterviewModule:()=>$});var o=d(6814),_=d(3983),C=d(5964),b=d(2181),I=d(4664),e=d(5879),h=d(3340),v=d(7133),c=d(8763),g=d(2051),p=d(7411),f=d(7012),s=d(6223);function k(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",2),e._uU(7),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.qZA(),e.TgZ(10,"div",1),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",1),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"div",1),e._uU(17),e.qZA(),e.TgZ(18,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editClicked())}),e.qZA(),e.TgZ(19,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteClicked())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.interview.orderNo),e.xp6(2),e.Oqu(e.xi3(5,7,t.interview.orderDate,"ddMMMyy")),e.xp6(3),e.Oqu(t.interview.customerName),e.xp6(2),e.Oqu(t.interview.interviewVenues),e.xp6(2),e.Oqu(e.xi3(12,10,t.interview.interviewDateFrom,"dd-MMM")),e.xp6(3),e.Oqu(e.xi3(15,13,t.interview.interviewDateUpto,"dd-MMM")),e.xp6(3),e.Oqu(t.interview.interviewStatus)}}let q=(()=>{class r{constructor(t,i){this.service=t,this.toastr=i,this.deleteEvent=new e.vpe,this.editEvent=new e.vpe}editClicked(){this.editEvent.emit(this.interview?.orderNo)}deleteClicked(){this.deleteEvent.emit(this.interview.id)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(h.n),e.Y36(c._W))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-line"]],inputs:{interview:"interview"},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","w100"],[1,"stdd","w200"],[1,"btn","fa","fa-pencil",2,"color","aliceblue",3,"click"],[1,"btn","fa","fa-trash","red",3,"click"]],template:function(i,n){1&i&&e.YNc(0,k,20,16,"div",0),2&i&&e.Q6J("ngIf",n.interview)},dependencies:[o.O5,o.uU],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:top;word-wrap:break-word}.red[_ngcontent-%COMP%]{color:red}"]})}return r})();const O=["search"];function U(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"pagination",11),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(1,"\n>"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function E(r,u){1&r&&(e.TgZ(0,"div",12),e._uU(1," No interview schedule on record\n"),e.qZA())}function P(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-interview-line",13),e.NdJ("editEvent",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interviewEdit(n))})("deleteEvent",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interviewDelete(n))}),e.qZA()()}if(2&r){const t=u.$implicit;e.xp6(1),e.Q6J("interview",t)}}let J=(()=>{class r{constructor(t,i,n,a,l,m){this.service=t,this.activatedRoute=i,this.toastr=n,this.modalService=a,this.router=l,this.confirm=m,this.interviews=[],this.iParams=new C.j,this.orderNoToGet=0,this.totalCount=0}ngOnInit(){this.getInterviewsPaged()}getInterviewsPaged(){this.service.setParams(this.iParams),this.service.getInterviewsPaged().subscribe({next:t=>{this.interviews=t.result,this.pagination=t.pagination,this.totalCount=t.totalCount}})}interviewEdit(t){this.router.navigateByUrl("/interviews/editintervw/"+t)}interviewDelete(t){const a=this.service.deleteInterview(t.id);this.confirm.confirm("confirm Delete","confirm delete this Interview. WARNING: If there are more than one venues for this interview, then only the interview for the venue selected will be deleted.  This cannot be undone").pipe((0,b.h)(m=>m),(0,I.w)(()=>a)).subscribe(m=>{m?(this.toastr.success("Interview deleted","deletion successful"),console.log("subscribed response:",m),this.bsModalRef.hide()):this.toastr.error("Error in deleting the checklist","failed to delete")})}onPageChanged(t){const i=this.service.getParams()??new C.j;i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setParams(i),this.getInterviewsPaged())}onSearch(){const t=this.service.getParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getInterviewsPaged()}onReset(){this.searchTerm.nativeElement.value="";const t=this.service.getParams();this.service.setParams(t),this.getInterviewsPaged()}getInterviewR(){0!==this.orderNoToGet?this.router.navigateByUrl("/interviews/editintervw/"+this.orderNoToGet):this.toastr.warning("No Order No provided","Invalid Order No")}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(h.n),e.Y36(v.gz),e.Y36(c._W),e.Y36(g.tT),e.Y36(v.F0),e.Y36(p.z))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-list"]],viewQuery:function(i,n){if(1&i&&e.Gf(O,5),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first)}},decls:24,vars:4,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"stdd",2,"width","250px","margin-left","15px","text-align","right"],["type","text","title","enter order number to get the interview data",1,"stdd","form-control","w100",2,"margin-left","20px",3,"ngModel","ngModelChange"],["type","button",1,"mx-5","fa","fa-search","fa-2x",3,"click"],["type","button",1,"fa","fa-refresh","fa-2x","mx-2",3,"click"],["type","button","routerLink","/",1,"fa","fa-window-close","fa-2x"],[1,"stdd","w100"],[1,"lbl","w100"],[1,"lbl","w200"],["class","my-2",4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[3,"interview","editEvent","deleteEvent"]],template:function(i,n){1&i&&(e.YNc(0,U,2,3,"pagination",0),e.TgZ(1,"label",1),e._uU(2,"Enter Order No to generate new schedule"),e.qZA(),e.TgZ(3,"input",2),e.NdJ("ngModelChange",function(l){return n.orderNoToGet=l}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.getInterviewR()}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.onReset()}),e.qZA(),e._UZ(6,"button",5)(7,"br"),e.TgZ(8,"label",6),e._uU(9,"Order No"),e.qZA(),e.TgZ(10,"label",7),e._uU(11,"Dated"),e.qZA(),e.TgZ(12,"label",8),e._uU(13,"Customer"),e.qZA(),e.TgZ(14,"label",8),e._uU(15,"Interview Venues"),e.qZA(),e.TgZ(16,"label",7),e._uU(17,"Date From"),e.qZA(),e.TgZ(18,"label",7),e._uU(19,"Date Upto"),e.qZA(),e.TgZ(20,"label",7),e._uU(21,"Interview Status"),e.qZA(),e.YNc(22,E,2,0,"div",9),e.YNc(23,P,2,1,"div",10)),2&i&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(3),e.Q6J("ngModel",n.orderNoToGet),e.xp6(19),e.Q6J("ngIf",0===n.interviews.length),e.xp6(1),e.Q6J("ngForOf",n.interviews))},dependencies:[o.sg,o.O5,f.Qt,s.Fj,s.JJ,s.On,v.rH,q],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle;font-weight:700}"]})}return r})();var Z=d(3593);function F(r,u){1&r&&(e.TgZ(0,"div")(1,"label",9),e._uU(2,"Choose"),e.qZA(),e.TgZ(3,"label",10),e._uU(4,"App No"),e.qZA(),e.TgZ(5,"label",10),e._uU(6,"Source"),e.qZA(),e.TgZ(7,"label",11),e._uU(8,"Candidate Name"),e.qZA(),e.TgZ(9,"label",12),e._uU(10,"City"),e.qZA(),e.TgZ(11,"label",12),e._uU(12,"Mobile No"),e.qZA(),e.TgZ(13,"label",11),e._uU(14,"Profession"),e.qZA()())}function R(r,u){1&r&&(e.TgZ(0,"div"),e._uU(1," No CVs found with desired Profession "),e.qZA())}function D(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"input",13),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.checked=n)})("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.SelectCVs(a))}),e.qZA(),e.TgZ(2,"div",14),e._uU(3),e.qZA(),e.TgZ(4,"div",15),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e._uU(7),e.qZA(),e.TgZ(8,"div",15),e._uU(9),e.qZA(),e.TgZ(10,"div",15),e._uU(11),e.qZA(),e.TgZ(12,"div",16),e._uU(13),e.qZA()()}if(2&r){const t=u.$implicit;e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(2),e.Oqu(t.applicationNo>0?t.applicationNo:"-"),e.xp6(2),e.Oqu(t.source),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.city),e.xp6(2),e.Oqu(t.mobileNo),e.xp6(2),e.Oqu(t.professionName)}}let S=(()=>{class r{constructor(t,i){this.service=t,this.bsModalRef=i,this.emittedEvent=new e.vpe,this.professionid=0,this.cvs=[],this.cvsSelected=[]}ngOnInit(){this.service.getMatchingCandidates(this.professionid).subscribe({next:t=>this.cvs=t})}SelectCVs(t){if(t.checked){var i=this.cvsSelected.findIndex(n=>n.candidateId===t.candidateId);-1!==i&&this.cvsSelected.splice(i,1)}else this.cvsSelected.push(t)}emitCVs(){this.cvsSelected.length>0&&(this.emittedEvent.emit(this.cvsSelected),this.bsModalRef.hide())}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(h.n),e.Y36(g.UZ))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-candidates-available-modal"]],outputs:{emittedEvent:"emittedEvent"},decls:12,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn","btn-success","fa","fa-check",2,"margin-left","50px",3,"click"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"lbl","w55"],[1,"lbl","w75"],[1,"lbl","w150"],[1,"lbl","w100"],["type","checkbox",1,"form-check-input","hAlignCenter",2,"width","20px","margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w75",2,"text-align","center"],[1,"stdd","w100"],[1,"stdd","w150"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Select Candidates"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.emitCVs()}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5),e.YNc(8,F,15,0,"div",6),e.YNc(9,R,2,0,"div",6),e.YNc(10,D,14,7,"div",7),e.qZA(),e._UZ(11,"div",8)),2&i&&(e.xp6(8),e.Q6J("ngIf",n.cvs),e.xp6(1),e.Q6J("ngIf",0===n.cvs.length),e.xp6(1),e.Q6J("ngForOf",n.cvs))},dependencies:[o.sg,o.O5,s.Wl,s.JJ,s.On],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;word-wrap:break-word;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.w15[_ngcontent-%COMP%]{width:15px}.w20[_ngcontent-%COMP%]{width:20px}.w55[_ngcontent-%COMP%]{width:55px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return r})(),Q=(()=>{class r{ngOnInit(){this.displayCopy=this.displayText}constructor(t){this.bsModalRef=t,this.textChangedEvent=new e.vpe,this.displayText="",this.title="",this.displayCopy=""}emitText(){this.textChangedEvent.emit(this.displayCopy!==this.displayText?this.displayText:""),this.bsModalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(g.UZ))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-display-text-modal"]],outputs:{textChangedEvent:"textChangedEvent"},decls:8,vars:2,consts:[[1,"modal-header"],["type","button",1,"close","fa","fa-window-close","fa-2x","mx-5",3,"click"],["type","button",1,"fa","fa-check","fa-2x","mx-5",3,"click"],[1,"modal-body"],["name","displaytext","id","displaytext","cols","50","rows","5",3,"ngModel","ngModelChange"],[1,"modal-footer"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.emitText()}),e.qZA()(),e.TgZ(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"textarea",4),e.NdJ("ngModelChange",function(l){return n.displayText=l}),e.qZA()(),e._UZ(7,"div",5)),2&i&&(e.xp6(5),e.Oqu(n.title),e.xp6(1),e.Q6J("ngModel",n.displayText))},dependencies:[s.Fj,s.JJ,s.On]})}return r})();var Y=d(4807),L=d(7114);function G(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",23)(1,"input",24),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onFileInputChange(n))}),e.qZA()()}}function z(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",25)(2,"app-text-input",26),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.addInterviewItemCandidate(a))}),e.qZA(),e._UZ(3,"app-text-input",27)(4,"app-text-input",28)(5,"app-text-input",29)(6,"app-text-input",30)(7,"ng-select",31),e.TgZ(8,"app-text-input",32),e.NdJ("dblclick",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.displayInterviewerRemarks(a))}),e.qZA(),e.TgZ(9,"button",33),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.downloadattachment(a))}),e.qZA(),e.TgZ(10,"button",34),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.uploadattachment(a))}),e.qZA(),e.TgZ(11,"button",35),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.removeInterviewItem(a))}),e.qZA()()()}if(2&r){const t=u.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("label","application No"),e.xp6(1),e.Q6J("label","Candidate Name"),e.xp6(1),e.Q6J("type","datetime-local")("label","Scheduled time"),e.xp6(1),e.Q6J("type","datetime-local")("label","Reported At"),e.xp6(1),e.Q6J("type","datetime-local")("label","Interviewed At"),e.xp6(1),e.Q6J("items",i.interviewResults),e.xp6(1),e.Q6J("label","Interviewer Remarks")}}function V(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.formChanged())}),e.TgZ(2,"h4",3),e._uU(3,"Interview Category details"),e.qZA(),e._UZ(4,"hr",4),e.TgZ(5,"label",5),e._uU(6,"Category:"),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.TgZ(9,"label",7),e._uU(10,"Intervw Mode:"),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA(),e.TgZ(13,"label",9),e._uU(14,"Venue: "),e.qZA(),e._UZ(15,"app-text-input",10),e.TgZ(16,"label",11),e._uU(17,"Interviewer Name:"),e.qZA(),e._UZ(18,"app-text-input",12),e.TgZ(19,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.savewithattachments())}),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getMatchingCVs(n.interviewItem))}),e.qZA(),e._UZ(21,"hr",15)(22,"br"),e.TgZ(23,"label",16),e._uU(24,"App No"),e.qZA(),e.TgZ(25,"label",17),e._uU(26,"Candidate Name"),e.qZA(),e.TgZ(27,"label",18),e._uU(28,"Scheduled From"),e.qZA(),e.TgZ(29,"label",18),e._uU(30,"Reported At"),e.qZA(),e.TgZ(31,"label",18),e._uU(32,"Interviewed At"),e.qZA(),e.TgZ(33,"label",19),e._uU(34,"Interview Result"),e.qZA(),e.TgZ(35,"label",17),e._uU(36,"Interviewer Remarks"),e.qZA(),e.TgZ(37,"div",20),e.YNc(38,G,2,0,"div",21),e.YNc(39,z,12,11,"div",22),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(7),e.Oqu(t.interviewItem.professionName),e.xp6(4),e.hij("",t.interviewItem.interviewMode," "),e.xp6(3),e.Q6J("label","Interview Venue"),e.xp6(3),e.Q6J("label","Interviewer Name"),e.xp6(20),e.Q6J("ngIf",t.upload),e.xp6(1),e.Q6J("ngForOf",t.interviewItemCandidates.controls)}}let M=(()=>{class r{constructor(t,i,n,a,l){this.fb=t,this.activatedRoute=i,this.service=n,this.toastr=a,this.bsModalService=l,this.lastTimeCalled=Date.now(),this.userFiles=[],this.selectedIndex=0,this.upload=!1,this.interviewResults=[{result:"Not Interviewed"},{result:"Selected"},{result:"Rejected-Exp irrelevant"},{result:"Rejected-Low Exp"},{result:"Rejected-Overage"},{result:"Rejected-No communication"},{result:"Rejected-other reasons"},{result:"Shortlisted"}],this.bsValueDate=new Date,this.form=new s.cw({}),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let T=new FormData;this.userFiles.length>0&&this.userFiles.forEach(w=>{T.append("file",w,w.name)}),T.append("data",JSON.stringify(this.form.value)),this.service.editOrInsertInterviewItemWithFile(T).subscribe({next:w=>{""!==w.errorMessage?this.toastr.error("failed to save the interview data",w.errorMessage):this.toastr.success("interview saved","success")},error:w=>this.toastr.error(w.error.details,"Error encountered")}),this.userFiles=[]}}ngOnInit(){this.InitializeForm(this.interviewItem)}InitializeForm(t){this.form=this.fb.group({id:t.id,interviewId:t.intervwId,orderItemId:[t.orderItemId,s.kI.required],professionId:[t.professionId,s.kI.required],professionName:[t.professionName,s.kI.required],interviewMode:[t.interviewMode,s.kI.required],interviewerName:t.interviewerName,interviewVenue:[t.interviewVenue,s.kI.required],interviewItemCandidates:this.fb.array(t.interviewItemCandidates.map(i=>this.fb.group({id:i.id,intervwItemId:[i.intervwItemId??t.id,s.kI.required],candidateId:[i.candidateId,s.kI.required],applicationNo:i.applicationNo,candidateName:[i.candidateName,s.kI.required],passportNo:i.passportNo,scheduledFrom:[i.scheduledFrom,s.kI.required],reportedAt:i.reportedAt,interviewedAt:i.interviewedAt,interviewStatus:[i.interviewStatus,s.kI.required],interviewerRemarks:i.interviewerRemarks,attachmentFileNameWithPath:i.attachmentFileNameWithPath})))})}get interviewItemCandidates(){return this.form.get("interviewItemCandidates")}newInterviewItemCandidate(){return this.fb.group({id:0,intervwItemId:this.interviewItem?.id,candidateId:[0,s.kI.required],applicationNo:0,candidateName:["",s.kI.required],passportNo:"",scheduledFrom:["",s.kI.required],reportedAt:"",interviewedAt:"",interviewStatus:["",s.kI.required],interviewerRemarks:"",intervwCandAttachmentId:""})}addInterviewItemCandidate(t){this.interviewItemCandidates.push(this.newInterviewItemCandidate())}removeInterviewItem(t){this.interviewItemCandidates.removeAt(t)}formChanged(){}onFileInputChange(t){const i=this.interviewItemCandidates.at(this.selectedIndex)?.value,l=t.target.files[0];l.size>0&&(this.userFiles.push(l),i.attachmentFileNameWithPath=l.name)}update(){var t=this.form.value;0!==t.id?this.service.updateInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to update the interview item","failure"):this.toastr.success("Interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error encountered")}):this.service.insertInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to insert the interview item","failure"):this.toastr.success("The interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error in inserting the interview category")})}displayInterviewerRemarks(t){var i=this.interviewItemCandidates.at(t).get("interviewerRemarks").value;this.bsModalRef=this.bsModalService.show(Q,{class:"modal-dialog-centered modal-md",initialState:{displayText:i,title:"edit Interviewer Remarks"}}),this.bsModalRef.content.textChangedEvent.subscribe({next:a=>{""!==a&&this.interviewItemCandidates.at(t).get("interviewerRemarks")?.setValue(a)}})}downloadattachment(t){const i=this.interviewItemCandidates.at(t).get("attachmentFileNameWithPath")?.value;(""===i||void 0===i)&&this.toastr.warning("no file exists for downloading","Bad Request"),this.service.downloadInterviewerCommentFile(i).subscribe({next:n=>{const a=document.createElement("a"),l=URL.createObjectURL(n);a.href=l;var m=i.lastIndexOf("\\");a.download=-1!==m?i.substring(m+1):"filename.ext",a.click(),URL.revokeObjectURL(l)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")})}uploadattachment(t){this.itemCandidateSelected=this.interviewItemCandidates.at(t).value,this.selectedIndex=t,this.upload=!this.upload}getMatchingCVs(t){var i=t.professionId;0!==i?(this.bsModalRef=this.bsModalService.show(S,{class:"modal-dialog-centered modal-lg",initialState:{professionid:i}}),this.bsModalRef.content.emittedEvent.subscribe({next:a=>{null!==a?(a.forEach(l=>{this.interviewItemCandidates.push(this.fb.group({id:0,intervwItemId:this.interviewItem?.id,candidateId:[l.candidateId,s.kI.required],applicationNo:l.applicationNo,candidateName:[l.fullName,s.kI.required],passportNo:"",scheduledFrom:[new Date,s.kI.required],reportedAt:"",interviewedAt:"",interviewStatus:["Not Interviewed",s.kI.required],interviewerRemarks:""}))}),this.toastr.success(a.length+" candidates assigned.  Pl note the form needs to be saved for changes to take effect","Success")):this.toastr.warning("No candidates found - either registered or in prospective list - matching the profession "+t.professionName,"Not Found")},error:a=>this.toastr.error(a.error.details,"error encountered")})):this.toastr.warning("No Task object returned from Task line")}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(s.qu),e.Y36(v.gz),e.Y36(h.n),e.Y36(c._W),e.Y36(g.tT))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-schedule"]],inputs:{interviewItem:"interviewItem"},decls:1,vars:1,consts:[["style","margin-left: 5px;",4,"ngIf"],[2,"margin-left","5px"],[3,"formGroup","change"],[1,"stdd"],[2,"margin","0","border-width","2px","border-color","aqua"],[1,"lbl","w75"],[1,"stdd","w250","mx-3"],[1,"lbl","w100"],[1,"stdd","w75","mx-3"],[1,"lbl","w75","mx-3"],["formControlName","interviewVenue",1,"stdd","w150",3,"label"],[1,"lbl","w125","mx-2"],["formControlName","interviewerName",1,"stdd","w150",3,"label"],[1,"btn","fa","fa-save","mx-2","green",2,"color","aliceblue","vertical-align","top",3,"click"],["title","gets candidates available and matching this profession.  Sources from candidates as well as prospetive candidates",1,"btn","fa","fa-users","w15",2,"color","aliceblue",3,"click"],[2,"margin","0"],[1,"lbl","w75",2,"margin-left","25px"],[1,"lbl","w150"],[1,"dt"],[1,"lbl","w200"],["formArrayName","interviewItemCandidates",1,"my-2",2,"margin-left","25px"],["style","font-size: x-small;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[3,"formGroupName"],["formControlName","applicationNo",1,"stdd","w75",3,"label","click"],["formControlName","candidateName",1,"stdd","w150",3,"label"],["formControlName","scheduledFrom",1,"dt",3,"type","label"],["formControlName","reportedAt",1,"dt",3,"type","label"],["formControlName","interviewedAt",1,"dt",3,"type","label"],["bindLabel","result","bindValue","result","labelForId","result","clearAllText","Clear","formControlName","interviewStatus",1,"dropdown",3,"items"],["formControlName","interviewerRemarks","title","double click to edit in a larger window",1,"stdd","w150",3,"label","dblclick"],["type","button","title","download interviewer comments",1,"btn","w15","fa","fa-download",2,"color","aliceblue",3,"click"],["type","button","title","upload a new interviewer comment.  Any existing attachment will be REPLACED",1,"btn","w15","fa","fa-upload",2,"color","aliceblue",3,"click"],[1,"btn","w15","fa","fa-trash","red",3,"click"]],template:function(i,n){1&i&&e.YNc(0,V,40,7,"div",0),2&i&&e.Q6J("ngIf",n.interviewItem)},dependencies:[o.sg,o.O5,s._Y,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,Y.w9,L.t],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.dropdown[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;width:200px;word-wrap:break-word}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top;width:160px}.w15[_ngcontent-%COMP%]{width:15px}.w35[_ngcontent-%COMP%]{width:35px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}"]})}return r})();function H(r,u){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-edit-schedule",13),e.qZA()),2&r){const t=u.$implicit;e.xp6(1),e.Q6J("interviewItem",t)}}const A=function(){return{dateInputFormat:"YYYY-MM-DD"}};function K(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"h4",1),e._uU(2,"Interview Schedule"),e.qZA(),e._UZ(3,"button",2)(4,"hr",3),e.TgZ(5,"label",4),e._uU(6,"Customer Name"),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.customerName=n)}),e.qZA(),e.TgZ(8,"label",6),e._uU(9,"Order No"),e.qZA(),e.TgZ(10,"input",7),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.orderNo=n)}),e.qZA(),e.TgZ(11,"label",6),e._uU(12,"Dated"),e.qZA(),e.TgZ(13,"div",8),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"label",9),e._uU(17,"From: "),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.interviewDateFrom=n)}),e.qZA(),e.TgZ(19,"label",6),e._uU(20,"Upto:"),e.qZA(),e.TgZ(21,"input",11),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.interviewDateUpto=n)}),e.qZA(),e.YNc(22,H,2,1,"div",12),e.qZA()}if(2&r){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.interview.customerName),e.xp6(3),e.Q6J("ngModel",t.interview.orderNo),e.xp6(4),e.Oqu(e.xi3(15,10,t.interview.orderDate,"dd-MMM-yy")),e.xp6(4),e.Q6J("ngModel",t.interview.interviewDateFrom)("bsValue",t.bsValueDate)("bsConfig",e.DdM(13,A)),e.xp6(3),e.Q6J("ngModel",t.interview.interviewDateUpto)("bsValue",t.bsValueDate)("bsConfig",e.DdM(14,A)),e.xp6(1),e.Q6J("ngForOf",t.interview.interviewItems)}}let j=(()=>{class r{constructor(t,i){this.fb=t,this.activatedRoute=i,this.bsValueDate=new Date}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.interview=t.interview})}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(s.qu),e.Y36(v.gz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[2,"display","inline-block"],["type","button","routerLink","/interviews",1,"btn","fa","fa-window-close","fa-2x","mx-5",2,"color","aliceblue"],[2,"margin","0","padding","0","border-width","thick","border-color","beige"],[1,"lbl","w100","mx-2"],["type","text","name","customerName",1,"stdd","w250","mx-3",3,"ngModel","ngModelChange"],[1,"lbl","w75","mx-2"],["type","text","name","orderNo",1,"stdd","w75","mx-3",3,"ngModel","ngModelChange"],[1,"stdd","w100"],[1,"lbl","w75"],["name","interviewDateFrom","type","text","placeholder","Date From","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","interviewDateUpto","type","text","placeholder","Date Upto","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],[4,"ngFor","ngForOf"],[3,"interviewItem"]],template:function(i,n){1&i&&e.YNc(0,K,23,15,"div",0),2&i&&e.Q6J("ngIf",n.interview)},dependencies:[o.sg,o.O5,Z.Np,Z.Y5,s.Fj,s.JJ,s.On,v.rH,M,o.uU],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.red[_ngcontent-%COMP%]{color:red}"]})}return r})();var B=d(2096);const N=r=>{var u=r.paramMap.get("orderno");return null===u||""===u?(0,B.of)(null):(0,e.f3M)(h.n).getOrGenerateinterviewnew(+u)},W=[{path:"",component:J},{path:"editintervw/:orderno",component:j,resolve:{interview:N}},{path:"editschedule/:orderno",component:M,resolve:{interview:N}}];let X=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[o.ez,v.Bz.forChild(W),v.Bz]})}return r})(),$=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[o.ez,_.m,X]})}return r})()}}]);