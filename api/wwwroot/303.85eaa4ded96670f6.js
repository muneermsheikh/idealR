"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[303],{3056:(M,S,r)=>{r.d(S,{p:()=>l});class l{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},7411:(M,S,r)=>{r.d(S,{z:()=>h});var l=r(5879),c=r(2051);let y=(()=>{class m{constructor(u){this.bsModalRef=u,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(g){return new(g||m)(l.Y36(c.UZ))};static#t=this.\u0275cmp=l.Xpm({type:m,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(g,b){1&g&&(l.TgZ(0,"div",0)(1,"h4",1),l._uU(2),l.qZA()(),l.TgZ(3,"div",2)(4,"p"),l._uU(5),l.qZA()(),l.TgZ(6,"div",3)(7,"button",4),l.NdJ("click",function(){return b.confirm()}),l._uU(8),l.qZA(),l.TgZ(9,"button",5),l.NdJ("click",function(){return b.decline()}),l._uU(10),l.qZA()()),2&g&&(l.xp6(2),l.Oqu(b.title),l.xp6(3),l.Oqu(b.message),l.xp6(3),l.Oqu(b.btnOkText),l.xp6(2),l.Oqu(b.btnCancelText))}})}return m})();var e=r(7398),_=r(5516),v=r(9862);let h=(()=>{class m{constructor(u,g){this.modalService=u,this.http=g,this.baseUrl=_.N.apiUrl}confirm(u="Confirmation",g="Are you sure you want to do this?",b="Ok",x="Cancel"){return this.bsModelRef=this.modalService.show(y,{initialState:{title:u,message:g,btnOkText:b,btnCancelText:x}}),this.bsModelRef.onHidden.pipe((0,e.U)(()=>this.bsModelRef.content.result))}getHelp(u){return this.http.get(this.baseUrl+"Help/help/"+u)}static#e=this.\u0275fac=function(g){return new(g||m)(l.LFG(c.tT),l.LFG(v.eN))};static#t=this.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},3391:(M,S,r)=>{r.d(S,{Z:()=>b});var l=r(7328),c=r(8180),y=r(2096),e=r(7398),_=r(5516),v=r(3056),h=r(1436),m=r(5879),C=r(7133),u=r(7783),g=r(9862);let b=(()=>{class x{constructor(f,Z,P){this.activatedRoute=f,this.accountService=Z,this.http=P,this.apiUrl=_.N.apiUrl,this.currentUserSource=new l.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new v.p,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,c.q)(1)).subscribe(I=>this.user=I)}referCVs(f){return this.http.post(this.apiUrl+"CVRef",f)}referredCVsPaginated(f=!1){if(f){const P=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(P)return(0,y.of)(P)}else this.cacheReferred=new Map;let Z=(0,h.R1)(this.cvRefParams);return(0,h.Tr)(this.apiUrl+"cvref/cvsreferred",Z,this.http).pipe((0,e.U)(P=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),P),P)))}deleteCVRef(f){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+f)}getCVRefWithDeploys(f){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+f)}getCVRefWithCVRefId(f){return this.http.get(this.apiUrl+"CVRef/cvref/"+f)}registerSelectionDecisions(f){return this.http.post(this.apiUrl+"Selection",f)}getCVReferredOrderNosDto(f){return this.http.get(this.apiUrl+"CVRef/headers/"+f)}setParams(f){this.cvRefParams=f}getParams(){return this.cvRefParams}static#e=this.\u0275fac=function(Z){return new(Z||x)(m.LFG(C.gz),m.LFG(u.B),m.LFG(g.eN))};static#t=this.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()},5303:(M,S,r)=>{r.r(S),r.d(S,{SelectionModule:()=>ge});var l=r(6814),c=r(6223),y=r(3983),e=r(5879);let _=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selection-menu"]],decls:2,vars:0,template:function(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"selection-menu works!"),e.qZA())}})}return o})();var v=r(3056),h=r(3391),m=r(8763),C=r(7133),u=r(7012),g=r(4807),b=r(3166);function x(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"input",1),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.SelectedClicked())})("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pending.checked=i)}),e.qZA(),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA(),e.TgZ(6,"div",4),e._uU(7),e.qZA(),e.TgZ(8,"div",5),e._uU(9),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",6),e._uU(14),e.ALo(15,"timeago"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.pending.checked)("ngModel",t.pending.checked),e.xp6(2),e.Oqu(t.pending.applicationNo),e.xp6(2),e.Oqu(t.pending.candidateName),e.xp6(2),e.Oqu(t.pending.customerName),e.xp6(2),e.Oqu(t.pending.categoryRefAndName),e.xp6(2),e.Oqu(e.xi3(12,8,t.pending.referredOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(e.lcZ(15,11,t.pending.referredOn))}}let R=(()=>{class o{constructor(){this.selectedEvent=new e.vpe}ngOnInit(){}SelectedClicked(){this.selectedEvent.emit(this.pending)}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selection-pending-line"]],inputs:{pending:"pending"},outputs:{selectedEvent:"selectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["type","checkbox",1,"form-check-input","stdd","mL85",2,"border","aliceblue","border","inset",3,"checked","ngModel","change","ngModelChange"],[2,"display","inline-block","vertical-align","top","margin-left","30px !important","width","50px"],[1,"stdd","w150","mL10"],[1,"stdd","w200"],[1,"stdd","w150"],[1,"stdd","w100"]],template:function(n,i){1&n&&e.YNc(0,x,16,13,"div",0),2&n&&e.Q6J("ngIf",i.pending)},dependencies:[l.O5,c.Wl,c.JJ,c.On,l.uU,b.wr],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL85[_ngcontent-%COMP%]{margin-left:85px!important}.mL10[_ngcontent-%COMP%]{margin-left:10px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})();const f=["search"];function Z(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"pagination",10),e.NdJ("pageChanged",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onPageChanged(i))}),e._uU(2," >"),e.qZA(),e.TgZ(3,"span",11),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",12)(7,"input",13,14),e.NdJ("keyup.enter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearch())}),e.qZA(),e.TgZ(9,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearch())}),e._uU(10,"Search"),e.qZA(),e.TgZ(11,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onReset())}),e._uU(12,"Reset"),e.qZA(),e.TgZ(13,"div",17)(14,"ng-select",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.selectionStatus=i)})("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.changeSelectionStatus(i))}),e.qZA()()(),e.TgZ(15,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.UpdateSelections())}),e.qZA(),e._UZ(16,"button",20),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10),e.xp6(3),e.hij("of ",t.pagination.totalItems," "),e.xp6(10),e.Q6J("items",t.rejectionStatuses)("ngModel",t.selectionStatus),e.xp6(1),e.Q6J("disabled",""===t.selectionStatus||0===t.pendingSelectionsSelected.length)}}function P(o,p){1&o&&(e.TgZ(0,"div",21)(1,"h4"),e._uU(2,"No selections pending as per your parameters"),e.qZA()())}function I(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",22)(1,"app-selection-pending-line",23),e.NdJ("selectedEvent",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.pendingSelected(i))}),e.qZA()()}if(2&o){const t=p.$implicit;e.xp6(1),e.Q6J("pending",t)}}let Y=(()=>{class o{constructor(t,n,i,s){this.service=t,this.toastr=n,this.activatedRoute=i,this.router=s,this.selectionsPending=[],this.pendingSelectionsSelected=[],this.selectionStatus="",this.cvsSelected=[],this.sParams=new v.p,this.rejectionStatuses=[],this.pageIndex=1,this.totalCount=0,this.title="Selections pending",this.todayDate=new Date(Date.now());let a=this.router.getCurrentNavigation();a?.extras&&a.extras.state&&(a.extras.state.title&&(this.title=a.extras.state.title),a.extras.state.user&&(this.user=a.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.rejectionStatuses=t.rejReasons,this.selectionsPending=t.selPending.result,this.pagination=t.selPending.pagination,this.totalCount=t.selPending.count}),this.sParams.selectionStatus="Pending"}getPendingSelectionsPaged(t=!0){this.service.setParams(this.sParams),this.service.referredCVsPaginated().subscribe({next:n=>{n.result&&n.pagination?(this.selectionsPending=n.result,this.totalCount=n.count,this.pagination=n.pagination):this.toastr.warning("There are no pending selections","No record found")},error:n=>this.toastr.error(n)})}convertSelDecisionToDto(t){if(0!==t.length){var n=[];return t.forEach(i=>{n.push({cVRefId:i.cvRefId,selectionStatus:this.selectionStatus??"",decisionDate:this.todayDate,remarks:i.remarks??""})}),n}this.toastr.warning("no selections made to save")}UpdateSelections(){if(0!==this.pendingSelectionsSelected.length){if(this.pendingSelectionsSelected=this.pendingSelectionsSelected.filter(n=>n.checked),""===this.selectionStatus||0===this.pendingSelectionsSelected.length)return void this.toastr.warning("Please press the MARK AS SELECTED Button, or choose one of the rejectioon reasons to proceed. also, atleast one candidate must be selected","Selection Status not chosen");var t=this.convertSelDecisionToDto(this.pendingSelectionsSelected);return this.service.registerSelectionDecisions(t).subscribe({next:n=>{console.log("selectionpending.ts, response:",n),this.toastr.success("Selections Registered.  The employment details can be viewed/edited from Selections Page","selection decisions registered"),null==n.errortring||""===n.errortring?n.cvRefIdsInserted.forEach(i=>{var s=this.selectionsPending.findIndex(d=>d.cvRefId===i);if(s>=0){this.selectionsPending.splice(s,1);var a=this.pendingSelectionsSelected.findIndex(d=>d.cvRefId===i);a>=0&&this.pendingSelectionsSelected.splice(a,1)}}):""!==n.notification?this.toastr.info(n.notification,"Failed to register the selection decisions"):""!==n.errortring&&this.toastr.warning(n.errortring,"Failed to register the selection decisions")},error:n=>{console.log("error:",n),this.toastr.error(n.error.details?n.error.details:n.details,"Error in registering the selections")}})}}onPageChanged(t){const n=this.service.getParams();n.pageNumber!==t.page&&(n.pageNumber=t.page,this.service.setParams(n),this.getPendingSelectionsPaged(!0))}onSortSelected(t){var n=t.value;const i=this.service.getParams();i.sort=n,i.pageNumber=1,i.pageSize=10,this.service.setParams(i),this.getPendingSelectionsPaged(!0)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getPendingSelectionsPaged(!0)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new v.p,this.service.setParams(this.sParams),this.getPendingSelectionsPaged(!0)}changeSelectionStatus(t){this.selectionStatus=t.name,console.log("selection status",this.selectionStatus)}pendingSelected(t){if(t.checked){var n=this.pendingSelectionsSelected.find(s=>s.cvRefId===t.cvRefId);n?n.checked=t.checked:this.pendingSelectionsSelected.push(t)}else{var i=this.pendingSelectionsSelected.findIndex(s=>s.cvRefId===t.cvRefId);i>=0&&this.pendingSelectionsSelected.splice(i,1)}}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(h.Z),e.Y36(m._W),e.Y36(C.gz),e.Y36(C.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selection-pending"]],viewQuery:function(n,i){if(1&n&&e.Gf(f,5),2&n){let s;e.iGM(s=e.CRH())&&(i.searchTerm=s.first)}},decls:19,vars:3,consts:[[2,"display","inline-block","font-weight","bold"],["class","d-flex justify-contents-between align-items-center","style","display: inline-block; margin-left: 15px; vertical-align: top;",4,"ngIf"],[1,"stdd","w50","mL80"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","my-5",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"d-flex","justify-contents-between","align-items-center",2,"display","inline-block","margin-left","15px","vertical-align","top"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"vertical-align","middle"],[1,"form-inline",2,"margin-left","50px !important"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","matContrast","btn-outline-primary","mx-1",3,"click"],[1,"btn","matContrast","btn-outline-success","mx-1",3,"click"],["title","Choose the rejection Status.  Press the UPDATE SELECTION button to save these changes",1,"stdd","w200","mx-2"],["bindLabel","name","bindValue","name","labelForId","selectionStatus","clearAllText","Clear",2,"border-style","double",3,"items","ngModel","ngModelChange","change"],["title","update the selections/rejections",1,"btn","matContrast","btn-outline-success","fa","fa-check","mx-5",3,"disabled","click"],["routerLink","/","title","return to Administration Menu",1,"btn","matContrast","btn-outline-close","fa","fa-window-close","fa-2x","mx-5"],[1,"my-5"],[1,"row"],[3,"pending","selectedEvent"]],template:function(n,i){1&n&&(e.TgZ(0,"h4",0),e._uU(1,"Selections Pending as on date"),e.qZA(),e.YNc(2,Z,17,7,"div",1),e.TgZ(3,"label",2),e._uU(4,"Check"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"App No"),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"Candidate Name"),e.qZA(),e.TgZ(9,"label",5),e._uU(10,"Customer Name"),e.qZA(),e.TgZ(11,"label",4),e._uU(12,"Category Ref"),e.qZA(),e.TgZ(13,"label",6),e._uU(14,"Referred On"),e.qZA(),e.TgZ(15,"label",6),e._uU(16,"Days since"),e.qZA(),e.YNc(17,P,3,0,"div",7),e.YNc(18,I,2,1,"div",8)),2&n&&(e.xp6(2),e.Q6J("ngIf",i.selectionsPending&&i.pagination),e.xp6(15),e.Q6J("ngIf",!i.selectionsPending||0===i.selectionsPending.length),e.xp6(1),e.Q6J("ngForOf",i.selectionsPending))},dependencies:[l.sg,l.O5,c.JJ,c.On,u.Qt,g.w9,C.rH,R],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle;font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.b[_ngcontent-%COMP%]{font-weight:700}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})();var D=r(2181),A=r(4664),O=r(6306),T=r(2096),J=r(9397),k=r(7728),F=r(2051),q=r(7411),G=r(7328),z=r(7398),L=r(9862),V=r(5516);class Q{constructor(){this.approved="null",this.selDecisionId=0,this.cvRefId=0,this.orderItemId=0,this.categoryId=0,this.orderId=0,this.orderNo=0,this.candidateId=0,this.applicationNo=0,this.customerId=0,this.customerName="",this.categoryName="",this.candidateName="",this.selectionDateFrom=new Date("1900-01-01"),this.selectionDateUpto=new Date("1900-01-01"),this.sort="orderitemid",this.searchOn="appno",this.pageNumber=1,this.pageSize=10,this.search=""}}var j=r(1436);let B=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.apiUrl,this.currentUserSource=new G.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.eParams=new Q,this.cache=new Map}getEmployments(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,T.of)(n);let i=(0,j.aP)(t);return(0,j.Tr)(this.apiUrl+"Employment",i,this.http).pipe((0,z.U)(s=>(this.cache.set(Object.values(t).join("-"),s),s)))}GetEmploymentObject(t){return this.http.get(this.apiUrl+"employment/generate/"+t)}updateEmployment(t){return this.http.put(this.apiUrl+"employment/employment",t)}deleteEmployment(t){return this.http.delete(this.apiUrl+"employment/"+t)}downloadAttachment(t){let n=new L.LE;return n=n.append("fullpath",t),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:n,responseType:"blob"})}setEParams(t){this.eParams=t}getEParams(){return this.eParams}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(L.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var E=r(3593);function W(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"h4"),e._uU(2,"Employment details"),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateEmployment())}),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.close())}),e.qZA()()}}const $=function(){return{dateInputFormat:"YYYY-MM-DD"}};function X(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"form",7)(2,"label",8),e._uU(3,"Application No:"),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"label",10),e._uU(8,"Customer Name"),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"label",10),e._uU(13,"Category Ref"),e.qZA(),e.TgZ(14,"div",9),e._uU(15),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"label",11),e._uU(18,"Offer Acceptance"),e.qZA(),e.TgZ(19,"div",12),e._UZ(20,"ng-select",13),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"label",14),e._uU(23,"Accept/Decline `On"),e.qZA(),e.TgZ(24,"div",15),e._UZ(25,"input",16),e.qZA(),e._UZ(26,"br")(27,"br"),e.TgZ(28,"input",17),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileInputChange(i))}),e.qZA(),e.TgZ(29,"label",18),e._uU(30,"Offer Attachment File Name"),e.qZA(),e._UZ(31,"input",19)(32,"br"),e.TgZ(33,"label",18),e._uU(34,"Offer Attachment Full Path"),e.qZA(),e._UZ(35,"input",20),e.TgZ(36,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.download())}),e.qZA(),e._UZ(37,"hr",22),e.TgZ(38,"label",11),e._uU(39,"Currency & Salary"),e.qZA(),e._UZ(40,"input",23)(41,"input",24)(42,"hr",25),e.TgZ(43,"label",11),e._uU(44,"Perks"),e.qZA(),e.TgZ(45,"label",26),e._uU(46,"Allowance"),e.qZA(),e.TgZ(47,"label",26),e._uU(48,"Provided Free"),e.qZA(),e.TgZ(49,"label",26),e._uU(50,"Not Provided"),e.qZA(),e._UZ(51,"br"),e.TgZ(52,"label",27),e._uU(53,"Housing"),e.qZA(),e._UZ(54,"input",28)(55,"input",29)(56,"input",30)(57,"br"),e.TgZ(58,"label",31),e._uU(59,"Food"),e.qZA(),e._UZ(60,"input",32)(61,"input",33)(62,"input",34)(63,"br"),e.TgZ(64,"label",35),e._uU(65,"Transportation"),e.qZA(),e._UZ(66,"input",36)(67,"input",37)(68,"input",38)(69,"br"),e.TgZ(70,"label",39),e._uU(71,"Other Allowance"),e.qZA(),e._UZ(72,"input",40)(73,"br"),e.TgZ(74,"label",31),e._uU(75,"Contract Period"),e.qZA(),e._UZ(76,"input",41),e.TgZ(77,"label",42),e._uU(78,"Months"),e.qZA(),e._UZ(79,"br"),e.TgZ(80,"label",31),e._uU(81,"Annual Leave"),e.qZA(),e._UZ(82,"input",43),e.TgZ(83,"label",44),e._uU(84,"days, after"),e.qZA(),e._UZ(85,"input",45),e.TgZ(86,"label",46),e._uU(87,"months of employment"),e.qZA()()()}if(2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(t.candidateName),e.xp6(5),e.Oqu(t.companyName),e.xp6(5),e.Oqu(t.categoryRef),e.xp6(5),e.Q6J("items",t.statuses),e.xp6(5),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(8,$)),e.xp6(11),e.Q6J("disabled",""===(null==(n=t.form.get("offerAttachmentFullPath"))?null:n.value))}}let ee=(()=>{class o{constructor(t,n,i,s,a){this.bsModalRef=t,this.toastr=n,this.confirmService=i,this.fb=s,this.service=a,this.updateEmp=new e.vpe,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.categoryRef="",this.companyName="",this.candidateName="",this.form=new c.cw({}),this.formData=new FormData,this.statuses=[{status:"Accepted"},{status:"Declined - Salary Low"},{status:"Declined - Company history suspicious"},{status:"Declined - Work Hours too long"},{status:"Declined - Cannot pay Services Charges"},{status:"Declined - Family problems"}]}ngOnInit(){this.emp&&this.InitializeForm(this.emp)}InitializeForm(t){this.form=this.fb.group({id:[t.id],selDecisionId:[t.selectionDecisionId],cvRefId:[t.cvRefId],selectionDecisionId:[t.selectionDecisionId],selectedOn:[t.selectedOn],charges:[t.charges],offerAttachmentFileName:[t.offerAttachmentFileName],offerAttachmentFullPath:[t.offerAttachmentFullPath],salaryCurrency:[t.salaryCurrency,c.kI.required],salary:[t.salary,c.kI.required],contractPeriodInMonths:[t.contractPeriodInMonths,c.kI.required],weeklyHours:[t.weeklyHours,c.kI.required],housingProvidedFree:[t.housingProvidedFree],housingNotProvided:[t.housingNotProvided??!1],housingAllowance:[t.housingAllowance],foodProvidedFree:[t.foodProvidedFree],foodNotProvided:[t.foodNotProvided??!1],foodAllowance:[t.foodAllowance],transportProvidedFree:[t.transportProvidedFree],transportNotProvided:[t.transportNotProvided??!1],transportAllowance:[t.transportAllowance],otherAllowance:[t.otherAllowance],leavePerYearInDays:[t.leavePerYearInDays],leaveAirfareEntitlementAfterMonths:[t.leaveAirfareEntitlementAfterMonths],offerAccepted:[t.offerAccepted],offerAcceptedOn:[t.offerAcceptedOn]})}updateEmployment(){var t=this.form.value;t.housingAllowance=t.housingAllowance??0,t.foodAllowance=t.foodAllowance??0,t.transportAllowance=t.transportAllowance??0;var n="";t.foodAllowance>0&&(t.foodNotProvided||t.foodProvidedFree)&&(n="only one value allowed : either Food Allowance, Food Not Provided Or Food Provided "),t.housingAllowance>0&&(t.housingProvidedFree||t.housingNotProvided)&&(n+="only one value allowed : either Housing Allowance, Housing Not Provided Or Housing Provided "),t.transportAllowance>0&&(t.transportProvidedFree||t.transportNotProvided)&&(n+="only one value allowed : either Transport Allowance, Transport Not Provided Or Transport Provided "),null===t.cVRefId&&(t.cVRefId=0),""===n?(this.formData.append("data",JSON.stringify(t)),this.updateEmp.emit(this.formData),this.bsModalRef.hide()):this.toastr.warning(n,"Invalid data")}close(){this.bsModalRef.hide()}onFileInputChange(t){const s=t.target.files[0];s.size>0&&(this.formData.append("file",s,s.name),this.form.get("offerAttachmentFileName")?.setValue(s.name))}download(){var t=this.form.get("offerAttachmentFullPath")?.value;null===t||""===t||this.service.downloadAttachment(t).subscribe({next:n=>{const i=document.createElement("a"),s=URL.createObjectURL(n);i.href=s;var a=t.lastIndexOf("\\");i.download=-1!==a?t.substring(a+1):"filename.ext",i.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(F.UZ),e.Y36(m._W),e.Y36(q.z),e.Y36(c.qu),e.Y36(B))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employment-modal"]],inputs:{emp:"emp",updateEmp:"updateEmp"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer","my-0"],[1,"modal-header","my-0"],["title","edit emp data",1,"w35","btn","btn-success","fa","fa-save",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-close","fa-2x","pull-right",3,"click"],[1,"modal-body","my-0"],[3,"formGroup"],["for","applicationNo",1,"stdd","w150","b"],[1,"stdd","w200"],["for","customerName",1,"stdd","w150","b"],[1,"stdd","w150","b"],[1,"stdd","w175"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","offerAccepted",2,"border","color(from color srgb r g b)","font-size","smaller",3,"items"],[1,"stdd","b","w150"],[2,"display","inline-block","width","110px"],["type","text","placeholder","Offer accepted On","formControlName","offerAcceptedOn","bsDatepicker","",1,"stdd","w110",3,"bsValue","bsConfig"],["type","file","id","file","title","click to choose the Offer Letter to upload",1,"stdd","d-flex","align-items-center",3,"change"],[1,"stdd","b","w175"],["type","text","formControlName","offerAttachmentFileName",1,"stdd","w200"],["type","text","formControlName","offerAttachmentFullPath",1,"stdd","w200"],["title","click to download the offer letter - disabled if not uploaded",1,"btn","fa","fa-download",3,"disabled","click"],[2,"border","double","margin-top","2px","margin-bottom","2px"],["type","text","title","salary currency","formControlName","salaryCurrency",1,"stdd","w50","ml-10"],["type","number","title","salary","formControlName","salary",1,"stdd","w75"],[1,"my-0"],[1,"stdd","w100","b"],["for","housingAllowance",1,"stdd","w150"],["type","number","title","housing allowance","formControlName","housingAllowance",1,"stdd","w75"],["type","checkbox","formControlName","housingProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","housingNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],[1,"stdd","w150"],["type","number","title","Food Allowance","formControlName","foodAllowance",1,"stdd","w75"],["type","checkbox","formControlName","foodProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","foodNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","Transportation",1,"stdd","w150"],["type","number","title","Transportation allowance","formControlName","transportAllowance",1,"stdd","w75"],["type","checkbox","formControlName","transportProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","transportNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","otherAllowance",1,"stdd","w150"],["type","number","title","Other allowance","formControlName","otherAllowance",1,"stdd","w75"],["type","number","title","Contract Period n months","formControlName","contractPeriodInMonths",1,"stdd","w50"],[1,"stdd","w50"],["type","number","title","Number of days leave in a year","formControlName","leavePerYearInDays",1,"stdd","w50"],[1,"stdd","w75"],["type","number","title","after months of employment","formControlName","leaveAirfareEntitlementAfterMonths",1,"stdd","w50"],[1,"stdd","w100"]],template:function(n,i){1&n&&(e.YNc(0,W,5,0,"div",0),e.YNc(1,X,88,9,"div",1),e._UZ(2,"div",2)),2&n&&(e.Q6J("ngIf",i.emp),e.xp6(1),e.Q6J("ngIf",i.emp))},dependencies:[l.O5,c._Y,c.Fj,c.wV,c.Wl,c.JJ,c.JL,E.Np,E.Y5,c.sg,c.u,g.w9],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.bordernone[_ngcontent-%COMP%]{border:none}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.mL5[_ngcontent-%COMP%]{margin-right:5px!important}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle}.b[_ngcontent-%COMP%]{font-weight:700}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}"]})}return o})();var N=r(3957);function te(o,p){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Candidate:"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.candidateName)}}const ne=function(){return{dateInputFormat:"YYYY-MM-DD"}};function ie(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e._uU(2,"Customer"),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"div",11)(6,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.update())}),e.qZA(),e.TgZ(7,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.bsModalRef.hide())}),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSel())}),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"div",9),e._uU(11,"Category Selected"),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",9),e._uU(16,"Selected On"),e.qZA(),e._UZ(17,"input",15)(18,"br"),e.TgZ(19,"label",9),e._uU(20,"Selection Status"),e.qZA(),e.TgZ(21,"div",10),e._UZ(22,"ng-select",16),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.customerName),e.xp6(9),e.Oqu(t.categoryRefAndName),e.xp6(4),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(5,ne)),e.xp6(5),e.Q6J("items",t.statuses)}}let oe=(()=>{class o{constructor(t,n,i,s,a){this.bsModalRef=t,this.confirmService=n,this.toastr=i,this.fb=s,this.service=a,this.updateObj=new e.vpe,this.candidateName="",this.customerName="",this.categoryRefAndName="",this.form=new c.cw({}),this.bsValueDate=new Date,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.statuses=[{status:"selected"},{status:"Rejected - Profile does not match"},{status:"Rejected - High Salary expectation"},{status:"Rejected - over-age"},{status:"Rejected - Qualification does not match"},{status:"Rejected - Low Exp"},{status:"Rejected - Exp not relevant"},{status:"Rejected - profile not relevant"}]}ngOnInit(){this.sel&&this.Initialize(this.sel),console.log("recd in in modal ngOnINit:",this.sel)}Initialize(t){this.form=this.fb.group({id:[t.id],candidateId:t.candidateId??0,candidateName:[t.candidateName],applicationNo:[t.applicationNo??0],customerName:[t.customerName],professionName:[t.professionName],cvRefId:[t.cvRefId],orderItemId:t.orderItemId??0,professionId:t.professionId??0,selectedOn:[t.selectedOn],selectionStatus:[t.selectionStatus],remarks:t.remarks})}update(){this.updateObj.emit(this.form.value),this.bsModalRef.hide()}deleteSel(){if(this.sel){const n=this.service.deleteSelectionDecisions(this.sel.id);this.confirmService.confirm("Confirm Delete","This will delete this selection record, along with all related records like Employments and all deployment records.  Or, depending upon settings, the deletion might fail if there are related records").pipe((0,A.w)(s=>n.pipe((0,O.K)(a=>(console.log("Error in deleting the order",a),(0,T.of)())),(0,J.b)(a=>this.toastr.success("deleted Selection record")))),(0,O.K)(s=>(this.toastr.error("Error in getting delete confirmation",s),(0,T.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},s=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",s)}),this.bsModalRef.hide()}}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(F.UZ),e.Y36(q.z),e.Y36(m._W),e.Y36(c.qu),e.Y36(N.z))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selection-modal"]],inputs:{updateObj:"updateObj"},decls:5,vars:3,consts:[["class","modal-header my-0",4,"ngIf"],[1,"modal-body","my-0"],[3,"formGroup"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"stdd","w100","b"],[1,"stdd","w400","blue","mx-1"],[1,"mt-2"],[1,"stdd","w150","b"],[1,"stdd","w175"],[1,"stdd","pull-right"],["type","button",1,"btn","fa","fa-save","green",3,"click"],["type","button","aria-label","Close",1,"btn","btn-close",3,"click"],["title","Delete this Selection",1,"btn","red","fa","fa-trash","fa-sm",3,"click"],["type","text","placeholder","Selected On","formControlName","selectedOn","bsDatepicker","",1,"stdd","w150",3,"bsValue","bsConfig"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","selectionStatus",2,"border","color(from color srgb r g b)",3,"items"]],template:function(n,i){1&n&&(e.YNc(0,te,5,1,"div",0),e.TgZ(1,"div",1)(2,"form",2),e.YNc(3,ie,23,6,"div",3),e.qZA()(),e._UZ(4,"div",4)),2&n&&(e.Q6J("ngIf",i.sel),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngIf",i.sel))},dependencies:[l.O5,c._Y,c.Fj,c.JJ,c.JL,E.Np,E.Y5,c.sg,c.u,g.w9],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:2px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}"]})}return o})();function se(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.displayEmployment())}),e._uU(1,"No"),e.qZA()}}function re(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.displayEmployment())}),e._uU(1,"Yes"),e.qZA()}}function ae(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.remindCandidateForDecision())}),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",5),e._uU(13),e.ALo(14,"date"),e.qZA(),e.YNc(15,se,2,0,"div",6),e.YNc(16,re,2,0,"div",7),e.TgZ(17,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editSelection())}),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteSelection())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.selection.applicationNo),e.xp6(2),e.Oqu(t.selection.candidateName),e.xp6(2),e.Oqu(t.selection.customerName),e.xp6(2),e.Oqu(t.selection.categoryRef),e.xp6(2),e.Oqu(e.xi3(11,8,t.selection.selectedOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(e.xi3(14,11,t.selection.referredOn,"dd-MMM-yy")),e.xp6(2),e.Q6J("ngIf",0===t.selection.employmentId),e.xp6(1),e.Q6J("ngIf",t.selection.employmentId>0)}}let le=(()=>{class o{constructor(t,n){this.service=t,this.toastr=n,this.editEmploymentEvent=new e.vpe,this.deleteSelectionEvent=new e.vpe,this.editSelectionEvent=new e.vpe,this.remindCandidateForDecisionEvent=new e.vpe}displayEmployment(){this.service.getorGenerateEmploymentFromSelDecisionId(this.selection.id).subscribe({next:t=>{this.editEmploymentEvent.emit(null!==t?t:null)}})}editSelection(){this.service.getSelectionBySelDecisionId(this.selection?.id).subscribe({next:t=>{console.log("response from selection-line",t),this.editSelectionEvent.emit(t)}})}deleteSelection(){this.selection&&this.deleteSelectionEvent.emit(this.selection.id)}remindCandidateForDecision(){"Selected"!==this.selection?.selectionStatus?this.toastr.warning("This candidate has conveyed his decision on his selection - ("+this.selection?.selectionStatus+"). No reminder to the candidate need be given","No reminder feasible"):0===this.selection.employmentId?this.toastr.warning("For reminders to be issued to a candidate, the employment remuneration data must be set.  This candidate does not have his remuneration data set","remuneration not set"):this.remindCandidateForDecisionEvent.emit(this.selection.id)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(N.z),e.Y36(m._W))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selection-line"]],inputs:{selection:"selection"},outputs:{editEmploymentEvent:"editEmploymentEvent",deleteSelectionEvent:"deleteSelectionEvent",editSelectionEvent:"editSelectionEvent",remindCandidateForDecisionEvent:"remindCandidateForDecisionEvent"},decls:1,vars:1,consts:[["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"stdd","w50"],["title","email reminder to the candidate for his selection decision",1,"stdd","w150","cursorPointer",3,"click"],[1,"stdd","w200"],[1,"stdd","w100"],["class","stdd w50 cursorPointer yellow","title","Employment data not generated for this candidate. Click to generate new",3,"click",4,"ngIf"],["class","stdd w50 cursorPointer","title","Click to view the employment details of this candidate",3,"click",4,"ngIf"],["title","edit selection detais of this candidate",1,"btn","matContrast","fa","fa-pencil",3,"click"],["title","delete this selection data",1,"btn","matContrast","fa","fa-trash","fa-sm","red",3,"click"],["title","Employment data not generated for this candidate. Click to generate new",1,"stdd","w50","cursorPointer","yellow",3,"click"],["title","Click to view the employment details of this candidate",1,"stdd","w50","cursorPointer",3,"click"]],template:function(n,i){1&n&&e.YNc(0,ae,19,14,"div",0),2&n&&e.Q6J("ngIf",i.selection)},dependencies:[l.O5,l.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer}.green[_ngcontent-%COMP%]{color:#006400}.yellow[_ngcontent-%COMP%]{color:#ff0}.blue[_ngcontent-%COMP%]{color:#00008b}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})();const ce=["search"];function de(o,p){1&o&&(e.TgZ(0,"div"),e._uU(1," No selection records found matching your criteria\n"),e.qZA())}function me(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"pagination",16),e.NdJ("pageChanged",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onPageChanged(i))}),e._uU(1," >"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function pe(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"app-selection-line",18),e.NdJ("editEmploymentEvent",function(i){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.displayEmploymentModal(i,a))})("deleteSelectionEvent",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteSelection(i))})("editSelectionEvent",function(i){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.displaySelectionModal(i,a))})("remindCandidateForDecisionEvent",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.sendReminders(i))}),e.qZA()()}if(2&o){const t=p.$implicit;e.xp6(1),e.Q6J("selection",t)}}const ue=[{path:"",component:_},{path:"pendingSelections",component:Y,resolve:{selPending:o=>{var p=new v.p;p.selectionStatus="Pending";var t=(0,e.f3M)(h.Z);return t.setParams(p),t.referredCVsPaginated(!1)},rejReasons:o=>(0,e.f3M)(h.Z).selectionStatuses}},{path:"selections",component:(()=>{class o{constructor(t,n,i,s,a){this.service=t,this.confirmService=n,this.toastr=i,this.activatedRoute=s,this.bsModalService=a,this.selections=[],this.selectionStatus=[],this.sParams=new k.F,this.totalCount=0,this.pageIndex=1,this.todayDate=new Date(Date.now()),this.loading=!1,this.SelMsgsToCandidates=!1,this.SelSMSToCandidates=!1,this.RejMsgsToCandidates=!1,this.RejSMSToCandidates=!1,this.MsgsToClient=!1,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-Low Salary"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}]}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.selections=t.selections.result,this.pagination=t.selections.pagination,this.totalCount=t.selections.count})}getSelectionsPaged(t){this.service.setParams(this.sParams),this.service.getSelectionRecords(t).subscribe({next:n=>{n.result&&n.pagination&&(this.selections=n.result,this.pagination=n.pagination,this.totalCount=n.count)},error:n=>console.log(n)})}registerCandidateAcceptance(t){}updateSelection(t){return this.service.editSelectionDecision(t).subscribe(()=>{this.toastr.success("selection decision updated")},n=>{this.toastr.error(n)})}remindCandidateForAcceptances(t){this.service.remindCandidatesForAcceptance(t).subscribe({next:n=>{""===n?this.toastr.success("Messages composed and saved.  You can view/edit/send these messages from the Messages Component","Messages composed"):this.toastr.warning("Failed to generate/save Messages","Failed")},error:n=>{this.toastr.error(n?.error?.error?n?.error?.error:n,"Error encountered")}})}deleteSelection(t){var n=this.selections.filter(d=>d.id==t).map(d=>d.candidateName);const i=this.service.deleteSelectionDecisions(t);this.confirmService.confirm("Confirm Delete","This will delete selection records of "+n+". along with all related records like Employments and all deployment records.  Or, depending upon settings, the deletion might fail if there are related records").pipe((0,D.h)(d=>!0===d),(0,A.w)(d=>i.pipe((0,O.K)(w=>(this.toastr.error(w.error.details,"Error in deleting the selection record"),console.log("Error in deleting the Selection",w),(0,T.of)())),(0,J.b)(w=>{this.toastr.success("deleted Selection records","Success");var U=this.selections.findIndex(fe=>fe.id===t);-1===U?this.toastr.warning("cannot find index of the selection record just deleted"):this.selections.splice(U,1)}))),(0,O.K)(d=>(this.toastr.error(d.error.details,"Error in deleting the selection"),(0,T.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},d=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",d)})}displayEmploymentModal(t,n){console.log("emplyment item",n),null!==t?(this.bsModalRef=this.bsModalService.show(ee,{class:"modal-dialog-centered modal-md",initialState:{emp:t,candidateName:n.applicationNo+"-"+n.candidateName,categoryRef:n.categoryRef,companyName:n.customerName}}),this.bsModalRef.content.updateEmp.pipe((0,D.h)(a=>null!==a),(0,A.w)(a=>{var d=this.selections.findIndex(U=>U.id==n.id);d>=0&&this.selections[d].selectionStatus!==a.selectionStatus&&(this.selections[d].selectionStatus=a.selectionStatus);let w=new Date(a.offerAcceptanceConcludedOn);return w.setHours(w.getHours()+9),a.offerAcceptanceConcludedOn=w,this.service.updateEmploymentWithUploads(a)})).subscribe(a=>{if(a>0){this.toastr.success("Employment updated","Success");var d=this.selections.findIndex(w=>w.id==n.id);-1!==d&&(this.selections[d].employmentId=a,console.log(n),this.selections[d].selectionStatus=n.selectionStatus)}else this.toastr.error("Failed to update the employment data","error encountered")})):this.toastr.warning("No Employment data could be retrieved from the database")}displaySelectionModal(t,n){this.bsModalRef=this.bsModalService.show(oe,{class:"modal-dialog-centered modal-md",initialState:{sel:t,candidateName:n.applicationNo+"-"+n.candidateName,customerName:n.customerName,categoryRefAndName:n.categoryRef}}),this.bsModalRef.content.updateObj.pipe((0,D.h)(a=>null!==a),(0,A.w)(a=>{var d=this.selections.findIndex(w=>w.id==n.id);return d>=0&&(this.selections[d].selectedOn=a.selectedOn,this.selections[d].selectionStatus=a.selectionStatus),a.selectedOn.setHours(a.selectedOn.getHours()+9),this.service.editSelectionDecision(a)})).subscribe(a=>{a?this.toastr.success("Selection model edited","Success"):this.toastr.warning("Failed to update the selection model","Failure")})}sendReminders(t){var n=[];n.push(t),this.service.remindCandidatesForAcceptance(n).subscribe({next:i=>{""===i||null===i?this.toastr.success("Acceptance reminder email messages composed.  You can view/edit these messages in the MESSAGES section","success"):this.toastr.warning(i,"Failed to compose reminder acceptance email messages")},error:i=>{this.toastr.error(i?.error?.error?i?.error?.error:i,"Error encountered")}})}onPageChanged(t){this.service.getParams(),this.sParams.pageNumber!==t.page&&(this.sParams.pageNumber=t.page,this.service.setParams(this.sParams),this.getSelectionsPaged(!0))}onSortSelected(t){var n=t.value;const i=this.service.getParams();i.sort=n,i.pageNumber=1,i.pageSize=10,this.service.setParams(i),this.getSelectionsPaged(!0)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getSelectionsPaged(!0)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new k.F,this.service.setParams(this.sParams),this.getSelectionsPaged(!0)}DoHousekeeping(){this.service.Housekeeping().subscribe({next:t=>{console.log("response housekeeping",t),""===t?this.toastr.success("houskeeping done for processes CVRef and Selections","success"):this.toastr.warning(t,"failed to do housekeeping")},error:t=>{this.toastr.error(t,"Failed to carry out the housekeeping for CVRef and Selections")}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(N.z),e.Y36(q.z),e.Y36(m._W),e.Y36(C.gz),e.Y36(F.tT))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-selections"]],viewQuery:function(n,i){if(1&n&&e.Gf(ce,5),2&n){let s;e.iGM(s=e.CRH())&&(i.searchTerm=s.first)}},decls:32,vars:5,consts:[[4,"ngIf"],[1,"mx-5",2,"display","inline-block","font-weight","bold"],["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","mx-5","w150",3,"keyup.enter"],["search",""],["bindLabel","name","bindValue","name","labelForId","name","clearAllText","Clear",1,"stdd","w150",3,"items","ngModel","ngModelChange"],[1,"btn","btn-outline-primary","matContrast","fa","fa-search","mx-1",3,"click"],[1,"btn","btn-outline-success","matContrast","fa","fa-refresh","mx-1",3,"click"],["title","align values in CVRef with Selections",1,"btn","matContrast","fa","fa-house","mx-2",3,"click"],["routerLink","/",1,"btn","matContrast","fa","fa-window-close","fa-2x","mx-2"],[2,"margin-left","25px"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","row",4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"row"],[3,"selection","editEmploymentEvent","deleteSelectionEvent","editSelectionEvent","remindCandidateForDecisionEvent"]],template:function(n,i){1&n&&(e.YNc(0,de,2,0,"div",0),e.TgZ(1,"h4",1),e._uU(2,"Selections"),e.qZA(),e.YNc(3,me,2,3,"pagination",2),e.TgZ(4,"input",3,4),e.NdJ("keyup.enter",function(){return i.onSearch()}),e.qZA(),e.TgZ(6,"ng-select",5),e.NdJ("ngModelChange",function(a){return i.sParams.selectionStatus=a}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.onSearch()}),e.qZA(),e.TgZ(8,"button",7),e.NdJ("click",function(){return i.onReset()}),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return i.DoHousekeeping()}),e._uU(10,"HK"),e.qZA(),e._UZ(11,"button",9),e.TgZ(12,"div",10)(13,"label",11),e._uU(14,"App No"),e.qZA(),e.TgZ(15,"label",12),e._uU(16,"Candidate Name"),e.qZA(),e.TgZ(17,"label",13),e._uU(18,"Customer Name"),e.qZA(),e.TgZ(19,"label",13),e._uU(20,"Category Ref"),e.qZA(),e.TgZ(21,"label",14),e._uU(22,"Sel/Rej"),e._UZ(23,"br"),e._uU(24,"Date"),e.qZA(),e.TgZ(25,"label",14),e._uU(26,"Referred On"),e.qZA(),e.TgZ(27,"label",11),e._uU(28,"Employmt"),e._UZ(29,"br"),e._uU(30,"available"),e.qZA(),e.YNc(31,pe,2,1,"div",15),e.qZA()),2&n&&(e.Q6J("ngIf",!i.selections),e.xp6(3),e.Q6J("ngIf",i.selections&&i.pagination),e.xp6(3),e.Q6J("items",i.selectionStatuses)("ngModel",i.sParams.selectionStatus),e.xp6(25),e.Q6J("ngForOf",i.selections))},dependencies:[l.sg,l.O5,c.JJ,c.On,u.Qt,g.w9,C.rH,le],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding:0;font-weight:700;vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})(),resolve:{selections:o=>{var p=o.paramMap.get("id"),t=(0,e.f3M)(N.z);if(""!==p&&"0"!==p){var n=new k.F;n.orderId=+p,t.setParams(n)}return t.getSelectionRecords(!1)}}}];let he=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[l.ez,C.Bz.forChild(ue),C.Bz]})}return o})(),ge=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[l.ez,c.u5,y.m,he]})}return o})()},7328:(M,S,r)=>{r.d(S,{t:()=>y});var l=r(8645),c=r(4552);class y extends l.x{constructor(_=1/0,v=1/0,h=c.l){super(),this._bufferSize=_,this._windowTime=v,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=v===1/0,this._bufferSize=Math.max(1,_),this._windowTime=Math.max(1,v)}next(_){const{isStopped:v,_buffer:h,_infiniteTimeWindow:m,_timestampProvider:C,_windowTime:u}=this;v||(h.push(_),!m&&h.push(C.now()+u)),this._trimBuffer(),super.next(_)}_subscribe(_){this._throwIfClosed(),this._trimBuffer();const v=this._innerSubscribe(_),{_infiniteTimeWindow:h,_buffer:m}=this,C=m.slice();for(let u=0;u<C.length&&!_.closed;u+=h?1:2)_.next(C[u]);return this._checkFinalizedStatuses(_),v}_trimBuffer(){const{_bufferSize:_,_timestampProvider:v,_buffer:h,_infiniteTimeWindow:m}=this,C=(m?1:2)*_;if(_<1/0&&C<h.length&&h.splice(0,h.length-C),!m){const u=v.now();let g=0;for(let b=1;b<h.length&&h[b]<=u;b+=2)g=b;g&&h.splice(0,g+1)}}}}}]);