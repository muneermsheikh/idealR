"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[828],{2828:(I,c,a)=>{a.r(c),a.d(c,{MemberModule:()=>F});var d=a(6814),M=a(3983),_=a(8180),C=a(2181),v=a(4664),b=a(8717),e=a(5879),h=a(8763),Z=a(7783),p=a(3167),x=a(7411),g=a(7133),T=a(7012);function w(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.TgZ(9,"div",3),e._uU(10),e.qZA(),e.TgZ(11,"div",2),e._uU(12),e.qZA(),e.TgZ(13,"div",2),e._uU(14),e.qZA(),e.TgZ(15,"button",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editClicked())}),e.qZA(),e.TgZ(16,"button",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteClicked())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.member.userName),e.xp6(2),e.Oqu(t.member.knownAs),e.xp6(2),e.Oqu(t.member.age>100?"--":t.member.age),e.xp6(2),e.Oqu(t.member.city),e.xp6(2),e.Oqu(t.member.phoneNumber),e.xp6(2),e.Oqu(t.member.email),e.xp6(2),e.Oqu(t.member.roles.flat())}}let A=(()=>{class r{constructor(){this.editEvent=new e.vpe,this.deleteEvent=new e.vpe}editClicked(){this.editEvent.emit(this.member)}deleteClicked(){this.deleteEvent.emit(this.member?.id)}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-item"]],inputs:{member:"member"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"btn","fa","fa-pencil",3,"click"],[1,"btn","fa","fa-trash",3,"click"]],template:function(i,n){1&i&&e.YNc(0,w,17,7,"div",0),2&i&&e.Q6J("ngIf",n.member)},dependencies:[d.O5],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;word-wrap:break-word;border:aqua;vertical-align:top}.w25[_ngcontent-%COMP%]{width:25px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return r})();function U(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"pagination",8),e.NdJ("pageChanged",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.pageChanged(n))}),e._uU(1,"\n>"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function O(r,l){1&r&&(e.TgZ(0,"div",9),e._uU(1," No members on record\n"),e.qZA())}function y(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-member-item",12),e.NdJ("editEvent",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editMember(n))})("deleteEvent",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deleteMember(n))}),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.Q6J("member",t)}}function q(r,l){if(1&r&&(e.TgZ(0,"div",10),e.YNc(1,y,2,1,"div",11),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.members)}}let E=(()=>{class r{constructor(t,i,n,s,o){this.toastr=t,this.accountService=i,this.service=n,this.confirm=s,this.router=o,this.mParams=new b.M,this.members=[],this.totalCount=0,this.userparams=new b.M,this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}]}ngOnInit(){this.accountService.currentUser$.pipe((0,_.q)(1)).subscribe(t=>this.user=t),this.loadMembers(!1)}loadMembers(t=!0){this.service.setUserParams(this.userparams),this.service.getMembers(t).subscribe({next:i=>{this.members=i.result,this.pagination=i.pagination,this.totalCount=i.count}})}resetFilters(){this.service.resetUserParams(),this.loadMembers()}pageChanged(t){this.userparams.pageNumber!=t.page&&(console.log("new page:",t.page),this.userparams.pageNumber=t.page,this.loadMembers(!0))}editMember(t){this.navigateByRoute(t,"/members/edit",t)}deleteMember(t){const s=this.service.deleteMember(t);this.confirm.confirm("confirm Delete","confirm delete this Member. WARNING: this cannot be undone").pipe((0,C.h)(u=>u),(0,v.w)(()=>s)).subscribe(u=>{u?this.toastr.success("Checklist deleted","deletion successful"):this.toastr.error("Error in deleting the Member","failed to delete")})}navigateByRoute(t,i,n){this.router.navigate([i+"/"+t],{state:{user:this.user,member:n,returnUrl:"/members"}})}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(h._W),e.Y36(Z.B),e.Y36(p.n),e.Y36(x.z),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-list"]],decls:19,vars:3,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["routerLink","/",1,"btn","fa","fa-window-close","fa-2x",2,"margin-left","100px"],[1,"stdd","w150",2,"margin-left","15px"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"stdd","w150"],["style","margin-left: 50px;",4,"ngIf"],["class","row",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","50px"],[1,"row"],[4,"ngFor","ngForOf"],[3,"member","editEvent","deleteEvent"]],template:function(i,n){1&i&&(e.YNc(0,U,2,3,"pagination",0),e._UZ(1,"button",1)(2,"br"),e.TgZ(3,"label",2),e._uU(4,"User name"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Known As"),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"Age"),e.qZA(),e.TgZ(9,"label",4),e._uU(10,"city"),e.qZA(),e.TgZ(11,"label",3),e._uU(12,"Phone No"),e.qZA(),e.TgZ(13,"label",5),e._uU(14,"Email"),e.qZA(),e.TgZ(15,"label",5),e._uU(16,"Roles"),e.qZA(),e.YNc(17,O,2,0,"div",6),e.YNc(18,q,2,1,"div",7)),2&i&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(17),e.Q6J("ngIf",0===n.members.length),e.xp6(1),e.Q6J("ngIf",n.members))},dependencies:[d.sg,d.O5,T.Qt,g.rH,A],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;font-weight:700}.w25[_ngcontent-%COMP%]{width:25px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return r})();var f=a(3593),m=a(6223);function J(r,l){1&r&&(e.TgZ(0,"div",1),e._uU(1,"Member undefined"),e.qZA())}const P=function(){return{dateInputFormat:"YYYY-MM-DD"}},N=[{path:"",component:E},{path:"edit/:username",component:(()=>{class r{constructor(t,i,n,s){this.activatedRoute=t,this.toastr=i,this.router=n,this.service=s,this.returnUrl="/",this.bsValueDate=new Date,this.knownAs="",this.city="",this.country="",this.phoneNumber="",this.email="",this.gender="";let o=this.router.getCurrentNavigation();o?.extras&&o.extras.state&&(o.extras.state.returnUrl&&(this.returnUrl=o.extras.state.returnUrl),o.extras.state.user&&(this.user=o.extras.state.user),o.extras.state.member&&(this.member=o.extras.state.member))}ngOnInit(){}UpdateMember(){console.log("member",this.member),this.service.updateMember(this.member).subscribe({next:t=>{t?this.toastr.success("Order Updated","Success"):this.toastr.warning("Failed to update the order","Failure")},error:t=>{console.log("updateOrder error:",t),this.toastr.error(t.error.error?t.error.error:t,"Error encountered")}})}close(){this.router.navigateByUrl("/members")}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(g.gz),e.Y36(h._W),e.Y36(g.F0),e.Y36(p.n))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-edit"]],decls:53,vars:16,consts:[[1,"container"],[1,"stdd"],["class","stdd",4,"ngIf"],["id","editForm"],["editForm","ngForm"],[1,"btn","fa","fa-save","fa-2x",2,"margin-left","150px",3,"disabled","click"],[1,"btn","fa","fa-window-close","fa-2x","mx-2",3,"click"],[1,"stdd","w100"],[1,"stdd","w150"],["type","radio","value","m","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],[1,"stdd","mx-2"],["type","radio","value","f","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],["type","text","name","knownAs",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Date of birth","name","dob","bsDatepicker","",1,"stdd","w150",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","city",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","country",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","position",1,"stdd","w200",3,"ngModel","ngModelChange"],["name","phoneno",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","email",1,"stdd","w250",3,"ngModel","ngModelChange"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.YNc(3,J,2,0,"div",2),e.TgZ(4,"form",3,4)(6,"button",5),e.NdJ("click",function(){return n.UpdateMember()}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.close()}),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"label",7),e._uU(11,"User name"),e.qZA(),e.TgZ(12,"div",8),e._uU(13),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"label",7),e._uU(17,"Gender"),e.qZA(),e.TgZ(18,"input",9),e.NdJ("ngModelChange",function(o){return n.member.gender=o}),e.qZA(),e.TgZ(19,"span",10),e._uU(20,"Male"),e.qZA(),e.TgZ(21,"input",11),e.NdJ("ngModelChange",function(o){return n.member.gender=o}),e.qZA(),e.TgZ(22,"span",10),e._uU(23,"Female"),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"label",7),e._uU(26,"Known As"),e.qZA(),e.TgZ(27,"input",12),e.NdJ("ngModelChange",function(o){return n.member.knownAs=o}),e.qZA(),e._UZ(28,"br"),e.TgZ(29,"label",7),e._uU(30,"Date of birth"),e.qZA(),e.TgZ(31,"input",13),e.NdJ("ngModelChange",function(o){return n.member.dateOfBirth=o}),e.qZA(),e._UZ(32,"br")(33,"br"),e.TgZ(34,"label",7),e._uU(35,"City"),e.qZA(),e.TgZ(36,"input",14),e.NdJ("ngModelChange",function(o){return n.member.city=o}),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"label",7),e._uU(39,"Country"),e.qZA(),e.TgZ(40,"input",15),e.NdJ("ngModelChange",function(o){return n.member.country=o}),e.qZA(),e._UZ(41,"br"),e.TgZ(42,"label",7),e._uU(43,"Position"),e.qZA(),e.TgZ(44,"input",16),e.NdJ("ngModelChange",function(o){return n.member.position=o}),e.qZA(),e._UZ(45,"br"),e.TgZ(46,"label",7),e._uU(47,"Phone"),e.qZA(),e.TgZ(48,"input",17),e.NdJ("ngModelChange",function(o){return n.member.phoneNumber=o}),e.qZA(),e._UZ(49,"br"),e.TgZ(50,"label",7),e._uU(51,"Email"),e.qZA(),e.TgZ(52,"input",18),e.NdJ("ngModelChange",function(o){return n.member.email=o}),e.qZA()()()),2&i){const s=e.MAs(5);e.xp6(2),e.hij("Edit Member - logged-in user: ",null==n.user?null:n.user.knownAs,""),e.xp6(1),e.Q6J("ngIf",!n.member),e.xp6(3),e.Q6J("disabled",!s.dirty),e.xp6(7),e.Oqu(null==n.member?null:n.member.userName),e.xp6(5),e.Q6J("ngModel",n.member.gender),e.xp6(3),e.Q6J("ngModel",n.member.gender),e.xp6(6),e.Q6J("ngModel",n.member.knownAs),e.xp6(4),e.Q6J("ngModel",n.member.dateOfBirth)("bsValue",n.bsValueDate)("bsConfig",e.DdM(15,P)),e.xp6(5),e.Q6J("ngModel",n.member.city),e.xp6(4),e.Q6J("ngModel",n.member.country),e.xp6(4),e.Q6J("ngModel",n.member.position),e.xp6(4),e.Q6J("ngModel",n.member.phoneNumber),e.xp6(4),e.Q6J("ngModel",n.member.email)}},dependencies:[d.O5,f.Np,f.Y5,m._Y,m.Fj,m._,m.JJ,m.JL,m.On,m.F],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:medium;margin:4px 2px}.b[_ngcontent-%COMP%]{font-weight:700}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.inputCheck[_ngcontent-%COMP%]{margin:2px 5px 2px 10px;width:40px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:15px;height:15px;border:1px solid #fff;border-radius:50%;margin-right:5px;background-color:#c3b1b1;position:relative;vertical-align:middle}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:9px;height:9px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return r})(),resolve:{member:(r,l)=>(0,e.f3M)(p.n).getMember(r.paramMap.get("username"))}}];let k=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[d.ez,g.Bz.forChild(N),g.Bz]})}return r})(),F=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[d.ez,M.m,k]})}return r})()}}]);