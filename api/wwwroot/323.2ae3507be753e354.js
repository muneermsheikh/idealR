"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[323],{1571:(A,b,d)=>{d.d(b,{e:()=>o});class o{constructor(){this.venue="Mumbai",this.address="B-8, Everest Building, 3rd floor",this.address2="Tardeo Road, Tardeo",this.city="Mumbai 400034",this.siteRepName="Sanjay Patil",this.sitePhoneNo="9892337301"}}},7114:(A,b,d)=>{d.d(b,{t:()=>u});var o=d(5879),I=d(6223),T=d(6814);function S(m,_){if(1&m&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&m){const h=o.oxw();o.xp6(1),o.hij(" Please enter a ",h.label," ")}}function g(m,_){if(1&m&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&m){const h=o.oxw();o.xp6(1),o.AsE(" ",h.label," must be at least ",null==h.control.errors?null:h.control.errors.minlength.requiredLength," characters ")}}function e(m,_){if(1&m&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&m){const h=o.oxw();o.xp6(1),o.AsE(" ",h.label," must be at most ",null==h.control.errors?null:h.control.errors.maxlength.requiredLength," characters ")}}function v(m,_){if(1&m&&(o.TgZ(0,"div",3),o._uU(1),o.qZA()),2&m){const h=o.oxw();o.xp6(1),o.hij(" ",h.label," do not match ")}}let u=(()=>{class m{constructor(h){this.ngControl=h,this.label="",this.type="text",this.width="",this.ngControl.valueAccessor=this}writeValue(h){}registerOnChange(h){}registerOnTouched(h){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(p){return new(p||m)(o.Y36(I.a5,2))};static#t=this.\u0275cmp=o.Xpm({type:m,selectors:[["app-text-input"]],inputs:{label:"label",type:"type",width:"width"},decls:6,vars:10,consts:[[1,"mb-3",2,"vertical-align","top"],[1,"form-control",2,"font-size","small","word-wrap","normal","height","auto","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px","background-color","darkgrey",3,"type","width","formControl","placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(p,c){1&p&&(o.TgZ(0,"div",0),o._UZ(1,"input",1),o.YNc(2,S,2,1,"div",2),o.YNc(3,g,2,2,"div",2),o.YNc(4,e,2,2,"div",2),o.YNc(5,v,2,1,"div",2),o.qZA()),2&p&&(o.xp6(1),o.ekj("is-invalid",c.control.touched&&c.control.invalid),o.s9C("type",c.type),o.s9C("width",c.width),o.s9C("placeholder",c.label),o.Q6J("formControl",c.control),o.xp6(1),o.Q6J("ngIf",null==c.control.errors?null:c.control.errors.required),o.xp6(1),o.Q6J("ngIf",null==c.control.errors?null:c.control.errors.minlength),o.xp6(1),o.Q6J("ngIf",null==c.control.errors?null:c.control.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==c.control.errors?null:c.control.errors.isMatching))},dependencies:[T.O5,I.Fj,I.JJ,I.oH]})}return m})()},3056:(A,b,d)=>{d.d(b,{p:()=>o});class o{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},5964:(A,b,d)=>{d.d(b,{j:()=>o});class o{constructor(){this.id=0,this.orderNo=0,this.orderId=0,this.customerId=0,this.customerNameLike="",this.interviewVenue="",this.categoryId=0,this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}},3574:(A,b,d)=>{d.d(b,{C:()=>u});var o=d(7328),I=d(2096),T=d(7398),S=d(5516),g=d(1436),e=d(5879),v=d(9862);let u=(()=>{class m{constructor(h){this.http=h,this.apiUrl=S.N.apiUrl,this.currentUserSource=new o.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"},{status:"Declined - other reasons"}]}getHistories(h){const p=this.cache.get(Object.values(h).join("-"));if(p)return(0,I.of)(p);let c=(0,g.qb)(h);return(0,g.Tr)(this.apiUrl+"userHistory/pagedlist",c,this.http).pipe((0,T.U)(Z=>(this.cache.set(Object.values(h).join("-"),Z),Z)))}getCallRecordReport(h){let p=(0,g.qb)(h);return this.http.get(this.apiUrl+"CallRecord/report",{params:p})}getCallRecordWithItems(h,p){return this.http.get(this.apiUrl+"CallRecord/callRecordWithItems/"+h+"/"+p)}getCallRecordStatus(){return this.callRecordStatus}updateHistoryItem(h){return this.http.post(this.apiUrl+"userHistory/userhistoryitem",h)}insertNewCallRecordItem(h){return this.http.post(this.apiUrl+"CallRecord/CallRecorditem",h)}setParams(h){this.hParams=h}getParams(){return this.hParams}updateCallRecord(h){return this.http.put(this.apiUrl+"CallRecord",h)}updateCallRecordObject(h){return this.http.put(this.apiUrl+"CallRecord/UpdateNewItem",h)}updateCallRecordItem(h){return console.log("updatecallrecorditem, model"),this.http.put(this.apiUrl+"CallRecord/InsertCallRecordItem",h)}deleteHistory(h){return this.http.delete(this.apiUrl+"userHistory/"+h)}deleteHistoryItem(h){return this.http.delete(this.apiUrl+"userHistory/historyItemId/"+h)}getCallRecordFromPhoneNo(h){return this.http.get(this.apiUrl+"callRecord/callRecordFromPhoneNo/"+h)}getCallRecordsOfACandidate(h,p){return this.http.get(this.apiUrl+"callRecord/CallRecordSummary/"+h+"/"+p)}static#e=this.\u0275fac=function(p){return new(p||m)(e.LFG(v.eN))};static#t=this.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},7411:(A,b,d)=>{d.d(b,{z:()=>v});var o=d(5879),I=d(2051);let T=(()=>{class u{constructor(_){this.bsModalRef=_,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(h){return new(h||u)(o.Y36(I.UZ))};static#t=this.\u0275cmp=o.Xpm({type:u,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(h,p){1&h&&(o.TgZ(0,"div",0)(1,"h4",1),o._uU(2),o.qZA()(),o.TgZ(3,"div",2)(4,"p"),o._uU(5),o.qZA()(),o.TgZ(6,"div",3)(7,"button",4),o.NdJ("click",function(){return p.confirm()}),o._uU(8),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return p.decline()}),o._uU(10),o.qZA()()),2&h&&(o.xp6(2),o.Oqu(p.title),o.xp6(3),o.Oqu(p.message),o.xp6(3),o.Oqu(p.btnOkText),o.xp6(2),o.Oqu(p.btnCancelText))}})}return u})();var S=d(7398),g=d(5516),e=d(9862);let v=(()=>{class u{constructor(_,h){this.modalService=_,this.http=h,this.baseUrl=g.N.apiUrl}confirm(_="Confirmation",h="Are you sure you want to do this?",p="Ok",c="Cancel"){return this.bsModelRef=this.modalService.show(T,{initialState:{title:_,message:h,btnOkText:p,btnCancelText:c}}),this.bsModelRef.onHidden.pipe((0,S.U)(()=>this.bsModelRef.content.result))}getHelp(_){return this.http.get(this.baseUrl+"Help/help/"+_)}static#e=this.\u0275fac=function(h){return new(h||u)(o.LFG(I.tT),o.LFG(e.eN))};static#t=this.\u0275prov=o.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},3391:(A,b,d)=>{d.d(b,{Z:()=>p});var o=d(7328),I=d(8180),T=d(2096),S=d(7398),g=d(5516),e=d(3056),v=d(1436),u=d(5879),m=d(7133),_=d(7783),h=d(9862);let p=(()=>{class c{constructor(f,P,E){this.activatedRoute=f,this.accountService=P,this.http=E,this.apiUrl=g.N.apiUrl,this.currentUserSource=new o.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new e.p,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,I.q)(1)).subscribe(N=>this.user=N)}referCVs(f){return this.http.post(this.apiUrl+"CVRef",f)}referredCVsPaginated(f=!1){if(f){const E=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(E)return(0,T.of)(E)}else this.cacheReferred=new Map;let P=(0,v.R1)(this.cvRefParams);return(0,v.Tr)(this.apiUrl+"cvref/cvsreferred",P,this.http).pipe((0,S.U)(E=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),E),E)))}deleteCVRef(f){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+f)}getCVRefWithDeploys(f){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+f)}getCVRefWithCVRefId(f){return this.http.get(this.apiUrl+"CVRef/cvref/"+f)}registerSelectionDecisions(f){return this.http.post(this.apiUrl+"Selection",f)}getCVReferredOrderNosDto(f){return this.http.get(this.apiUrl+"CVRef/headers/"+f)}setParams(f){this.cvRefParams=f}getParams(){return this.cvRefParams}static#e=this.\u0275fac=function(P){return new(P||c)(u.LFG(m.gz),u.LFG(_.B),u.LFG(h.eN))};static#t=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},3340:(A,b,d)=>{d.d(b,{n:()=>m});var o=d(9862),I=d(2096),T=d(7398),S=d(5516),g=d(5964),e=d(1436),v=d(1571),u=d(5879);let m=(()=>{class _{constructor(p){this.http=p,this.apiUrl=S.N.apiUrl,this.iParams=new g.j,this.cache=new Map}getInterviewsPaged(p=!1){var c=this.iParams;if(p){const f=this.cache.get(Object.values(c).join("-"));if(f)return(0,I.of)(f)}let Z=(0,e.Mw)(c);return(0,e.Tr)(this.apiUrl+"interview/pagedlist",Z,this.http).pipe((0,T.U)(f=>(this.cache.set(Object.values(c).join("-"),f),f)))}getDefaultInterviewAddress(){return new v.e}getOrGenerateinterview(p){return this.http.get(this.apiUrl+"interview/getorgenerate/"+p)}getOrGenerateinterviewnew(p){return this.http.get(this.apiUrl+"interview/getorgeneratenew/"+p)}getOrGenerateinterviewschedule(p){return this.http.get(this.apiUrl+"interview/getorgenerateschedule/"+p)}getInterviewWithItemsById(p){return this.http.get(this.apiUrl+"interview/interviewById/"+p)}saveNewInterview(p){return this.http.post(this.apiUrl+"interview/savenew",p)}updateInterviewHeader(p){return this.http.put(this.apiUrl+"interview/interviewheader",p)}updateInterview(p){return this.http.put(this.apiUrl+"interview/Intervw",p)}updateInterviewItem(p){return this.http.put(this.apiUrl+"interview/intervwitem",p)}editOrInsertInterviewItemWithFile(p){return this.http.post(this.apiUrl+"FileUpload/interviewitem",p)}insertInterviewItem(p){return this.http.post(this.apiUrl+"interview/intervwitem",p)}insertInterviewItemWithFile(p){return this.http.post(this.apiUrl+"interview/intervwitemwithfiles",p)}downloadInterviewerCommentFile(p){let c=new o.LE;return c=c.append("fullpath",p),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:c,responseType:"blob"})}deleteInterview(p){return this.http.delete(this.apiUrl+"interview/interview/"+p)}deleteInterviewItem(p){return this.http.delete(this.apiUrl+"interview/deleteinterviewitem/"+p)}deleteInterviewItemCandidate(p){return this.http.delete(this.apiUrl+"interview/deleteinterviewitemcandidate/"+p)}getInterviewItemCatAndCandidates(p){return this.http.get(this.apiUrl+"interview/catandcandidates/"+p)}getMatchingCandidates(p){return this.http.get(this.apiUrl+"users/candidatesmatchingprof/"+p)}getInterviewItemsMatchingCategory(p){return this.http.get(this.apiUrl+"interview/interviewCategoryMatching/"+p.flat())}insertInterviewItemCandidate(p){return console.log("insert interview item cndidate",p),this.http.put(this.apiUrl+"Interview/addCandidateToInterviewItem",p)}getParams(){return this.iParams}setParams(p){this.iParams=p}static#e=this.\u0275fac=function(c){return new(c||_)(u.LFG(o.eN))};static#t=this.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},9323:(A,b,d)=>{d.r(b),d.d(b,{InterviewModule:()=>$e});var o=d(6814),I=d(3983),T=d(5964),S=d(2181),g=d(4664),e=d(5879),v=d(3340),u=d(7133),m=d(8763),_=d(2051),h=d(7411),p=d(7012),c=d(6223);function Z(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",2),e._uU(7),e.qZA(),e.TgZ(8,"div",2),e._uU(9),e.qZA(),e.TgZ(10,"div",1),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",1),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"div",1),e._uU(17),e.qZA(),e.TgZ(18,"button",3),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editClicked())}),e.qZA(),e.TgZ(19,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.attendanceClicked())}),e.qZA(),e.TgZ(20,"button",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteClicked())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.interview.orderNo),e.xp6(2),e.Oqu(e.xi3(5,7,t.interview.orderDate,"ddMMMyy")),e.xp6(3),e.Oqu(t.interview.customerName),e.xp6(2),e.Oqu(t.interview.interviewVenues),e.xp6(2),e.Oqu(e.xi3(12,10,t.interview.interviewDateFrom,"dd-MMM")),e.xp6(3),e.Oqu(e.xi3(15,13,t.interview.interviewDateUpto,"dd-MMM")),e.xp6(3),e.Oqu(t.interview.interviewStatus)}}let f=(()=>{class r{constructor(t,i){this.service=t,this.toastr=i,this.deleteEvent=new e.vpe,this.editEvent=new e.vpe,this.attendanceEvent=new e.vpe}editClicked(){this.editEvent.emit(this.interview?.orderNo)}deleteClicked(){this.deleteEvent.emit(this.interview.id)}attendanceClicked(){this.attendanceEvent.emit(this.interview?.id)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(v.n),e.Y36(m._W))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-line"]],inputs:{interview:"interview"},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent",attendanceEvent:"attendanceEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","w100"],[1,"stdd","w200"],["title","edit this interview schedule",1,"btn","fa","fa-pencil",3,"click"],["title","display attendance for this interview",1,"btn","fa","fa-users",3,"click"],["title","delete this interview",1,"btn","fa","fa-trash","red",3,"click"]],template:function(i,n){1&i&&e.YNc(0,Z,21,16,"div",0),2&i&&e.Q6J("ngIf",n.interview)},dependencies:[o.O5,o.uU],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:top;word-wrap:break-word}.red[_ngcontent-%COMP%]{color:red}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return r})();const P=["search"];function E(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"pagination",10),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(1,"\n>"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function N(r,l){1&r&&(e.TgZ(0,"div",11),e._uU(1," No interview schedule on record\n"),e.qZA())}function Y(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-interview-line",12),e.NdJ("editEvent",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interviewEdit(n))})("deleteEvent",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interviewDelete(n))})("attendanceEvent",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.attendance(n))}),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.Q6J("interview",t)}}let W=(()=>{class r{constructor(t,i,n,a,s,x){this.service=t,this.activatedRoute=i,this.toastr=n,this.modalService=a,this.router=s,this.confirm=x,this.interviews=[],this.iParams=new T.j,this.orderNoToGet=0,this.totalCount=0}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.interviews=t.interviews.result,this.pagination=t.interviews.pagination,this.totalCount=t.interviews.totalCount})}getInterviewsPaged(t){this.service.setParams(this.iParams),this.service.getInterviewsPaged(t).subscribe({next:i=>{this.interviews=i.result,this.pagination=i.pagination,this.totalCount=i.totalCount}})}interviewEdit(t){this.router.navigateByUrl("/interviews/editintervw/"+t)}attendance(t){this.router.navigateByUrl("/interviews/attendance/"+t)}interviewDelete(t){var i=t;console.log("interview id:",i);const a=this.service.deleteInterview(i);this.confirm.confirm("confirm Delete","confirm delete this Interview. WARNING: If there are more than one venues for this interview, then only the interview for the venue selected will be deleted.  This cannot be undone").pipe((0,S.h)(x=>x),(0,g.w)(()=>a)).subscribe(x=>{if(x){this.toastr.success("Interview deleted","deletion successful");var y=this.interviews.findIndex(M=>M.id===i);-1!==y&&this.interviews.splice(y,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}onPageChanged(t){const i=this.service.getParams()??new T.j;i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setParams(i),this.getInterviewsPaged(!0))}onSearch(){const t=this.service.getParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getInterviewsPaged(!1)}onReset(){this.searchTerm.nativeElement.value="";const t=this.service.getParams();this.service.setParams(t),this.getInterviewsPaged(!1)}getInterviewR(){0!==this.orderNoToGet?this.router.navigateByUrl("/interviews/editintervw/"+this.orderNoToGet):this.toastr.warning("No Order No provided","Invalid Order No")}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(v.n),e.Y36(u.gz),e.Y36(m._W),e.Y36(_.tT),e.Y36(u.F0),e.Y36(h.z))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-list"]],viewQuery:function(i,n){if(1&i&&e.Gf(P,5),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first)}},decls:24,vars:4,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"stdd",2,"width","250px","margin-left","30px","text-align","right"],["type","text","title","enter order number to get the interview data",1,"stdd","form-control","w100",2,"margin-left","20px",3,"ngModel","ngModelChange"],["type","button",1,"mx-5","fa","fa-search","fa-2x",3,"click"],["type","button",1,"fa","fa-refresh","fa-2x","mx-2",3,"click"],["type","button","routerLink","/",1,"fa","fa-window-close","fa-2x"],[1,"lbl","w100"],[1,"lbl","w200"],["class","my-2",4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[3,"interview","editEvent","deleteEvent","attendanceEvent"]],template:function(i,n){1&i&&(e.YNc(0,E,2,3,"pagination",0),e.TgZ(1,"label",1),e._uU(2,"Enter Order No to generate new schedule"),e.qZA(),e.TgZ(3,"input",2),e.NdJ("ngModelChange",function(s){return n.orderNoToGet=s}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.getInterviewR()}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.onReset()}),e.qZA(),e._UZ(6,"button",5)(7,"br"),e.TgZ(8,"label",6),e._uU(9,"Order No"),e.qZA(),e.TgZ(10,"label",6),e._uU(11,"Dated"),e.qZA(),e.TgZ(12,"label",7),e._uU(13,"Customer"),e.qZA(),e.TgZ(14,"label",7),e._uU(15,"Interview Venues"),e.qZA(),e.TgZ(16,"label",6),e._uU(17,"Date From"),e.qZA(),e.TgZ(18,"label",6),e._uU(19,"Date Upto"),e.qZA(),e.TgZ(20,"label",6),e._uU(21,"Interview Status"),e.qZA(),e.YNc(22,N,2,0,"div",8),e.YNc(23,Y,2,1,"div",9)),2&i&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(3),e.Q6J("ngModel",n.orderNoToGet),e.xp6(19),e.Q6J("ngIf",0===n.interviews.length),e.xp6(1),e.Q6J("ngForOf",n.interviews))},dependencies:[o.sg,o.O5,p.Qt,c.Fj,c.JJ,c.On,u.rH,f],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle}.stddML60[_ngcontent-%COMP%]   .stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 30px;font-size:small;vertical-align:middle}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle;font-weight:700}"]})}return r})();var L=d(3593),$=d(1571);function X(r,l){1&r&&(e.TgZ(0,"div")(1,"label",9),e._uU(2,"Choose"),e.qZA(),e.TgZ(3,"label",10),e._uU(4,"App No"),e.qZA(),e.TgZ(5,"label",10),e._uU(6,"Source"),e.qZA(),e.TgZ(7,"label",11),e._uU(8,"Candidate Name"),e.qZA(),e.TgZ(9,"label",12),e._uU(10,"City"),e.qZA(),e.TgZ(11,"label",12),e._uU(12,"Mobile No"),e.qZA(),e.TgZ(13,"label",11),e._uU(14,"Profession"),e.qZA()())}function ee(r,l){1&r&&(e.TgZ(0,"div"),e._uU(1," No CVs found with desired Profession "),e.qZA())}function te(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"input",13),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.checked=n)})("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.SelectCVs(a))}),e.qZA(),e.TgZ(2,"div",14),e._uU(3),e.qZA(),e.TgZ(4,"div",15),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e._uU(7),e.qZA(),e.TgZ(8,"div",15),e._uU(9),e.qZA(),e.TgZ(10,"div",15),e._uU(11),e.qZA(),e.TgZ(12,"div",16),e._uU(13),e.qZA()()}if(2&r){const t=l.$implicit;e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(2),e.Oqu(t.applicationNo>0?t.applicationNo:"-"),e.xp6(2),e.Oqu(t.source),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.city),e.xp6(2),e.Oqu(t.mobileNo),e.xp6(2),e.Oqu(t.professionName)}}let ie=(()=>{class r{constructor(t,i){this.service=t,this.bsModalRef=i,this.emittedEvent=new e.vpe,this.professionid=0,this.cvs=[],this.cvsSelected=[]}ngOnInit(){this.service.getMatchingCandidates(this.professionid).subscribe({next:t=>this.cvs=t})}SelectCVs(t){if(t.checked){var i=this.cvsSelected.findIndex(n=>n.candidateId===t.candidateId);-1!==i&&this.cvsSelected.splice(i,1)}else this.cvsSelected.push(t)}emitCVs(){this.cvsSelected.length>0&&(this.emittedEvent.emit(this.cvsSelected),this.bsModalRef.hide())}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(v.n),e.Y36(_.UZ))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-candidates-available-modal"]],outputs:{emittedEvent:"emittedEvent"},decls:12,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn","btn-success","fa","fa-check",2,"margin-left","50px",3,"click"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"lbl","w55"],[1,"lbl","w75"],[1,"lbl","w150"],[1,"lbl","w100"],["type","checkbox",1,"form-check-input","hAlignCenter",2,"width","20px","margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w75",2,"text-align","center"],[1,"stdd","w100"],[1,"stdd","w150"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Select Candidates"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.emitCVs()}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5),e.YNc(8,X,15,0,"div",6),e.YNc(9,ee,2,0,"div",6),e.YNc(10,te,14,7,"div",7),e.qZA(),e._UZ(11,"div",8)),2&i&&(e.xp6(8),e.Q6J("ngIf",n.cvs),e.xp6(1),e.Q6J("ngIf",0===n.cvs.length),e.xp6(1),e.Q6J("ngForOf",n.cvs))},dependencies:[o.sg,o.O5,c.Wl,c.JJ,c.On],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;word-wrap:break-word;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.w15[_ngcontent-%COMP%]{width:15px}.w20[_ngcontent-%COMP%]{width:20px}.w55[_ngcontent-%COMP%]{width:55px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return r})(),ne=(()=>{class r{ngOnInit(){this.displayCopy=this.displayText}constructor(t){this.bsModalRef=t,this.textChangedEvent=new e.vpe,this.displayText="",this.title="",this.displayCopy="",this.stream=new Blob}emitText(){this.textChangedEvent.emit(this.displayCopy!==this.displayText?this.displayText:""),this.bsModalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(_.UZ))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-display-text-modal"]],outputs:{textChangedEvent:"textChangedEvent"},decls:12,vars:2,consts:[[1,"modal-header"],["type","button",1,"fa","fa-check","fa-2x","mx-5",3,"click"],["type","button",1,"close","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"modal-body"],["name","displaytext","id","displaytext","cols","90","rows","15",3,"ngModel","ngModelChange"],["id","startButton"],["id","stopButton","disabled",""],[1,"modal-footer"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.emitText()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.qZA()(),e.TgZ(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"textarea",4),e.NdJ("ngModelChange",function(s){return n.displayText=s}),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Start Recording"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Stop Recording"),e.qZA()(),e._UZ(11,"div",7)),2&i&&(e.xp6(5),e.Oqu(n.title),e.xp6(1),e.Q6J("ngModel",n.displayText))},dependencies:[c.Fj,c.JJ,c.On]})}return r})();var k=d(4807),q=d(7114),re=d(4104),ae=d(3574);function oe(r,l){1&r&&(e.TgZ(0,"div"),e._uU(1," No selection progress records available\n"),e.qZA())}function se(r,l){if(1&r&&(e.TgZ(0,"div")(1,"div",3),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.qZA()()),2&r){const t=l.$implicit;e.xp6(2),e.Oqu(e.xi3(3,2,t.createdOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.status)}}function de(r,l){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,se,6,5,"div",2),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.callRecordDtos)}}let le=(()=>{class r{constructor(t){this.service=t,this.callRecordDtos=[],this.personType="",this.personId="",this.closeEvent=new e.vpe}ngOnInit(){this.service.getCallRecordsOfACandidate(this.personType,this.personId).subscribe({next:t=>this.callRecordDtos=t})}close(){this.closeEvent.emit(!0)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(ae.C))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-selection-history"]],inputs:{personType:"personType",personId:"personId"},outputs:{closeEvent:"closeEvent"},decls:3,vars:2,consts:[[4,"ngIf"],[1,"btn","fa","fa-window-close",3,"click"],[4,"ngFor","ngForOf"],[1,"stdd","w90"],[1,"stdd","w125"]],template:function(i,n){1&i&&(e.YNc(0,oe,2,0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.close()}),e.qZA(),e.YNc(2,de,2,1,"div",0)),2&i&&(e.Q6J("ngIf",null===n.callRecordDtos||0===n.callRecordDtos.length),e.xp6(2),e.Q6J("ngIf",null!==n.callRecordDtos&&n.callRecordDtos.length>0))},dependencies:[o.sg,o.O5,o.uU],styles:[".w90[_ngcontent-%COMP%]{width:90px}.w125[_ngcontent-%COMP%]{width:125px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px}"]})}return r})();function ce(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"input",33),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onFileInputChange(n))}),e.qZA(),e.TgZ(2,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.upload=!n.upload)}),e.qZA()()}}function pe(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-selection-history",48),e.NdJ("closeEvent",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.hideSelectionProgress())}),e.qZA()()}if(2&r){const t=e.oxw().index,i=e.oxw(2);e.xp6(1),e.Q6J("personType","candidate")("personId",i.findCandidateId(t))}}function he(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",35)(2,"app-text-input",36),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.addInterviewItemCandidate(a))}),e.qZA(),e._UZ(3,"app-text-input",37)(4,"app-text-input",38),e.TgZ(5,"input",39),e.NdJ("dblclick",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.registerReportedAt(a))}),e.qZA(),e.TgZ(6,"app-text-input",40),e.NdJ("dblclick",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.setInterviewedAt(a))}),e.qZA(),e._UZ(7,"ng-select",41),e.TgZ(8,"app-text-input",42),e.NdJ("dblclick",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.displayInterviewerRemarks(a))}),e.qZA(),e.TgZ(9,"button",43),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.downloadattachment(a))}),e.qZA(),e.TgZ(10,"button",44),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.uploadattachment(a))}),e.qZA(),e.TgZ(11,"button",45),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.removeInterviewItem(a))}),e.qZA(),e.TgZ(12,"div",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.displayHistory=!n.displayHistory)}),e._uU(13),e.qZA(),e.TgZ(14,"app-register-call-records",46),e.NdJ("callStatusEvent",function(n){const s=e.CHM(t).index,x=e.oxw(2);return e.KtG(x.callStatusChanged(s,n))}),e.qZA(),e.YNc(15,pe,2,2,"div",47),e.qZA()()}if(2&r){const t=l.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("label","application No"),e.xp6(1),e.Q6J("label","Candidate Name"),e.xp6(1),e.Q6J("type","datetime-local")("label","Scheduled time"),e.xp6(2),e.Q6J("type","datetime-local")("label","Interviewed At"),e.xp6(1),e.Q6J("items",i.interviewResults),e.xp6(1),e.Q6J("label","Interviewer Remarks"),e.xp6(5),e.Oqu(i.displayHistory?"hide Selection Progress":"display Selection Progress"),e.xp6(1),e.Q6J("id",i.findIntervwItemCandidateId(t))("status",i.findCandidateStatus(t))("categoryRef",i.interviewItem.categoryRef)("personId",i.getCandidateId(t))("personType","Candidate"),e.xp6(1),e.Q6J("ngIf",i.displayHistory)}}function ue(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.formChanged())}),e.TgZ(2,"h4",3),e._uU(3,"Interview Category details"),e.qZA(),e._UZ(4,"hr",4),e.TgZ(5,"label",5),e._uU(6,"Category:"),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.TgZ(9,"label",7),e._uU(10,"Intervw Mode:"),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA(),e.TgZ(13,"label",9),e._uU(14,"Venue: "),e.qZA(),e.TgZ(15,"app-text-input",10),e.NdJ("dblclick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.copyDefaultVenueAddress())}),e.qZA(),e.TgZ(16,"label",9),e._uU(17,"Address: "),e.qZA(),e._UZ(18,"app-text-input",11),e.TgZ(19,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.savewithattachments())}),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getMatchingCVs(n.interviewItem))}),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"label",9),e._uU(23,"Address2: "),e.qZA(),e._UZ(24,"app-text-input",14),e.TgZ(25,"label",15),e._uU(26,"City: "),e.qZA(),e._UZ(27,"app-text-input",16),e.TgZ(28,"label",17),e._uU(29,"Site Rep Name: "),e.qZA(),e._UZ(30,"app-text-input",18),e.TgZ(31,"label",17),e._uU(32,"Site Phone No: "),e.qZA(),e._UZ(33,"app-text-input",19),e.TgZ(34,"label",20),e._uU(35,"Interviewer Name:"),e.qZA(),e._UZ(36,"app-text-input",21),e.TgZ(37,"div",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.interviewItem.visible=!n.interviewItem.visible)}),e.TgZ(38,"div",23),e._UZ(39,"hr",24)(40,"br"),e.TgZ(41,"label",25),e._uU(42,"App No"),e.qZA(),e.TgZ(43,"label",26),e._uU(44,"Candidate Name"),e.qZA(),e.TgZ(45,"label",27),e._uU(46,"Scheduled From"),e.qZA(),e.TgZ(47,"label",27),e._uU(48,"Reported At"),e.qZA(),e.TgZ(49,"label",27),e._uU(50,"Interviewed At"),e.qZA(),e.TgZ(51,"label",28),e._uU(52,"Interview Result"),e.qZA(),e.TgZ(53,"label",26),e._uU(54,"Interviewer Remarks"),e.qZA(),e.TgZ(55,"div",29),e.YNc(56,ce,3,0,"div",30),e.YNc(57,he,16,16,"div",31),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(7),e.Oqu(t.interviewItem.professionName),e.xp6(4),e.hij("",t.interviewItem.interviewMode," "),e.xp6(3),e.Q6J("label","Venue"),e.xp6(3),e.Q6J("label","Venue Address"),e.xp6(1),e.Q6J("disabled",!t.form.dirty),e.xp6(5),e.Q6J("label","Address2"),e.xp6(3),e.Q6J("label","City and PIN"),e.xp6(3),e.Q6J("label","Site Rep Name"),e.xp6(3),e.Q6J("label","Site Phone No"),e.xp6(3),e.Q6J("label","Interviewer Name"),e.xp6(20),e.Q6J("ngIf",t.upload),e.xp6(1),e.Q6J("ngForOf",t.interviewItemCandidates.controls)}}let J=(()=>{class r{constructor(t,i,n,a,s){this.fb=t,this.activatedRoute=i,this.service=n,this.toastr=a,this.bsModalService=s,this.personType="",this.personId="",this.lastTimeCalled=Date.now(),this.userFiles=[],this.selectedIndex=0,this.upload=!1,this.displayHistory=!1,this.interviewResults=[{result:"Not Interviewed"},{result:"Selected"},{result:"Rejected-Exp irrelevant"},{result:"Rejected-Low Exp"},{result:"Rejected-Overage"},{result:"Rejected-No communication"},{result:"Rejected-other reasons"},{result:"Shortlisted"}],this.bsValueDate=new Date,this.form=new c.cw({}),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let M=new FormData;this.userFiles.length>0&&this.userFiles.forEach(C=>{M.append("file",C,C.name)}),M.append("data",JSON.stringify(this.form.value)),this.service.editOrInsertInterviewItemWithFile(M).subscribe({next:C=>{console.log(C),""!==C.error?this.toastr.error(C.error,"failed to save the interview Item data"):(this.toastr.success("interview Item saved","success"),this.form.markAsPristine())},error:C=>this.toastr.error(C.error.details,"Error encountered")}),this.userFiles=[]}}ngOnInit(){if(this.interviewDateFrom){var t=new Date(this.interviewDateFrom);this.interviewDateFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),10,30)}this.InitializeForm(this.interviewItem)}InitializeForm(t){this.form=this.fb.group({id:t.id,intervwId:t.intervwId,orderItemId:[t.orderItemId,c.kI.required],professionId:[t.professionId,c.kI.required],professionName:[t.professionName,c.kI.required],interviewMode:[t.interviewMode,c.kI.required],interviewerName:t.interviewerName,interviewVenue:[t.interviewVenue,c.kI.required],venueAddress:[t.venueAddress],venueAddress2:[t.venueAddress2],venueCityAndPIN:[t.venueCityAndPIN],siteRepName:[t.siteRepName],sitePhoneNo:[t.sitePhoneNo],interviewItemCandidates:this.fb.array(t.interviewItemCandidates.map(i=>this.fb.group({id:i.id,intervwItemId:[i.interviewItemId??t.id,c.kI.required],candidateId:[i.candidateId,c.kI.required],personId:[i.personId],applicationNo:i.applicationNo,candidateName:[i.candidateName,c.kI.required],passportNo:i.passportNo,scheduledFrom:[i.scheduledFrom,c.kI.required],reportedAt:i.reportedAt,interviewedAt:i.interviewedAt,interviewStatus:[i.interviewStatus,c.kI.required],interviewerRemarks:i.interviewerRemarks,attachmentFileNameWithPath:i.attachmentFileNameWithPath})))})}findCandidateId(t){return this.interviewItemCandidates.at(t).get("candidateId")?.value}findIntervwItemCandidateId(t){return this.interviewItemCandidates.at(t).get("id")?.value??0}findCandidateStatus(t){return this.interviewItemCandidates.at(t).get("interviewStatus")?.value??""}get interviewItemCandidates(){return this.form.get("interviewItemCandidates")}newInterviewItemCandidate(){return this.fb.group({id:0,intervwItemId:this.interviewItem?.id,candidateId:[0,c.kI.required],applicationNo:0,candidateName:["",c.kI.required],passportNo:"",scheduledFrom:["",c.kI.required],reportedAt:"",interviewedAt:"",interviewStatus:["",c.kI.required],interviewerRemarks:"",intervwCandAttachmentId:""})}addInterviewItemCandidate(t){this.interviewItemCandidates.push(this.newInterviewItemCandidate())}removeInterviewItem(t){this.interviewItemCandidates.removeAt(t)}formChanged(){}onFileInputChange(t){const i=this.interviewItemCandidates.at(this.selectedIndex)?.value,s=t.target.files[0];s.size>0&&(this.userFiles.push(s),i.attachmentFileNameWithPath=s.name)}update(){var t=this.form.value;0!==t.id?this.service.updateInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to update the interview item","failure"):this.toastr.success("Interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error encountered")}):this.service.insertInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to insert the interview item","failure"):this.toastr.success("The interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error in inserting the interview category")})}displayInterviewerRemarks(t){const n={class:"modal-dialog-centered modal-lg",initialState:{displayText:this.interviewItemCandidates.at(t).get("interviewerRemarks").value,title:this.interviewItemCandidates.at(t).get("candidateName").value+" - edit Interviewer Remarks"}};this.bsModalRef=this.bsModalService.show(ne,n),this.bsModalRef.content.textChangedEvent.subscribe({next:a=>{""!==a&&this.interviewItemCandidates.at(t).get("interviewerRemarks")?.setValue(a)}})}downloadattachment(t){const i=this.interviewItemCandidates.at(t).get("attachmentFileNameWithPath")?.value;""!==i&&null!=i?this.service.downloadInterviewerCommentFile(i).subscribe({next:n=>{const a=document.createElement("a"),s=URL.createObjectURL(n);a.href=s;var x=i.lastIndexOf("\\");a.download=-1!==x?i.substring(x+1):"filename.ext",a.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("no file exists for downloading","Bad Request")}uploadattachment(t){this.itemCandidateSelected=this.interviewItemCandidates.at(t).value,this.selectedIndex=t,this.upload=!this.upload}registerReportedAt(t){this.interviewItemCandidates.at(t).get("reportedAt")?.setValue((0,o.p6)(new Date,"yyyy-MM-ddThh:mm","en")),this.form.markAsDirty()}setInterviewedAt(t){this.interviewItemCandidates.at(t).get("interviewedAt")?.setValue((0,o.p6)(new Date,"yyyy-MM-ddThh:mm","en")),this.form.markAsDirty()}getMatchingCVs(t){var i=t.professionId;if(0!==i)if(void 0===this.interviewDateFrom||new Date(this.interviewDateFrom).getFullYear()<2e3)this.toastr.warning("Interview Begin and End Dates not defined","Interview dates not defined");else{var n=this.form.get("interviewVenue")?.value,a=this.form.get("interviewerName")?.value;if(""!==n&&"To Be Annoounced"!==n&&""!==a&&"To Be Announced"!==a){var s=0===this.interviewItemCandidates.length?this.interviewDateFrom:this.interviewItemCandidates.at(this.interviewItemCandidates.length-1).get("scheduledFrom")?.value;this.bsModalRef=this.bsModalService.show(ie,{class:"modal-dialog-centered modal-lg",initialState:{professionid:i}}),this.bsModalRef.content.emittedEvent.subscribe({next:M=>{null!==M?(M.forEach(C=>{this.interviewItemCandidates.push(this.fb.group({id:0,intervwItemId:this.interviewItem?.id??0,candidateId:[C.candidateId??0,c.kI.required],applicationNo:C.applicationNo,candidateName:[C.fullName,c.kI.required],passportNo:"",scheduledFrom:[s,c.kI.required],reportedAt:null,interviewedAt:null,interviewStatus:["Not Interviewed",c.kI.required],interviewerRemarks:"",prospectiveCandidateId:[C.prospectiveCandidateId]})),s=function me(r,l){let t=new Date(r);return t.setMinutes(t.getMinutes()+l),t}(s,30)}),this.toastr.success(M.length+" candidates assigned.  Pl note the form needs to be saved for changes to take effect","Success")):this.toastr.warning("No candidates found - either registered or in prospective list - matching the profession "+t.professionName,"Not Found")},error:M=>this.toastr.error(M.error.details,"error encountered")})}else this.toastr.warning("Interview Venue and Interviewer Name not provided")}else this.toastr.warning("No Task object returned from Task line")}copyDefaultVenueAddress(){var t=new $.e;this.form.get("interviewVenue")?.setValue(t.venue),this.form.get("venueAddress")?.setValue(t.address),this.form.get("venueAddress2")?.setValue(t.address2),this.form.get("venueCityAndPIN")?.setValue(t.city),this.form.get("siteRepName")?.setValue(t.siteRepName),this.form.get("sitePhoneNo")?.setValue(t.sitePhoneNo)}hideSelectionProgress(){}getCandidateId(t){return this.interviewItemCandidates.at(t).get("candidateId")?.value.toString()}callStatusChanged(t,i){this.interviewItemCandidates.at(t).setValue(i)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(c.qu),e.Y36(u.gz),e.Y36(v.n),e.Y36(m._W),e.Y36(_.tT))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-schedule"]],inputs:{interviewItem:"interviewItem",interviewDateFrom:"interviewDateFrom",interviewDateUpto:"interviewDateUpto"},decls:1,vars:1,consts:[["style","margin-left: 5px;",4,"ngIf"],[2,"margin-left","5px"],[3,"formGroup","change"],[1,"stdd"],[2,"margin","0","border-width","2px","border-color","aqua"],[1,"lbl","w75"],[1,"stdd","w250","mx-3"],[1,"lbl","w100"],[1,"stdd","w75","mx-3"],[1,"lbl","w75","mx-2"],["formControlName","interviewVenue","title","double click to copy default venue address",1,"stdd","w100",3,"label","dblclick"],["formControlName","venueAddress",1,"stdd","w300",3,"label"],["title","saves the interview item with assignments, along with attachments",1,"btn","fa","fa-save","green",2,"color","aliceblue","vertical-align","top",3,"disabled","click"],["title","gets candidates available and matching this profession.  Sources from candidates as well as prospetive candidates",1,"btn","fa","fa-users","w15",2,"color","aliceblue",3,"click"],["formControlName","venueAddress2",1,"stdd","w200",3,"label"],[1,"lbl","w50","mx-2"],["formControlName","venueCityAndPIN",1,"stdd","w150",3,"label"],[1,"lbl","w100","mx-2"],["formControlName","siteRepName",1,"stdd","w100",3,"label"],["formControlName","sitePhoneNo",1,"stdd","w100",3,"label"],[1,"lbl","w125","mx-2"],["formControlName","interviewerName",1,"stdd","w150",3,"label"],[1,"cursor",3,"click"],[2,"margin-left","10px"],[2,"margin","0"],[1,"lbl","w75",2,"margin-left","25px"],[1,"lbl","w150"],[1,"dt"],[1,"lbl","w200"],["formArrayName","interviewItemCandidates",1,"my-2",2,"margin-left","25px"],["style","font-size: x-small;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"],[3,"formGroupName"],["formControlName","applicationNo",1,"stdd","w75",3,"label","click"],["formControlName","candidateName",1,"stdd","w150",3,"label"],["formControlName","scheduledFrom",1,"dt",3,"type","label"],["type","datetime-local","formControlName","reportedAt",1,"dt",3,"dblclick"],["formControlName","interviewedAt",1,"dt",3,"type","label","dblclick"],["bindLabel","result","bindValue","result","labelForId","result","clearAllText","Clear","formControlName","interviewStatus",1,"dropdown",3,"items"],["formControlName","interviewerRemarks","title","double click to edit in a larger window",1,"stdd","w150",3,"label","dblclick"],["type","button","title","download interviewer comments",1,"btn","w15","fa","fa-download",2,"color","aliceblue",3,"click"],["type","button","title","upload a new interviewer comment.  Any existing attachment will be REPLACED",1,"btn","w15","fa","fa-upload",2,"color","aliceblue",3,"click"],[1,"btn","w15","fa","fa-trash","red",3,"click"],[3,"id","status","categoryRef","personId","personType","callStatusEvent"],[4,"ngIf"],[3,"personType","personId","closeEvent"]],template:function(i,n){1&i&&e.YNc(0,ue,58,13,"div",0),2&i&&e.Q6J("ngIf",n.interviewItem)},dependencies:[o.sg,o.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,k.w9,q.t,re.N,le],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;margin:0 2px;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;font-weight:400}.dropdown[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;width:200px;word-wrap:break-word}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top;width:160px}.w15[_ngcontent-%COMP%]{width:15px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.cursor[_ngcontent-%COMP%]{cursor:pointer;color:#ff0;font-size:x-small;display:inline-block;margin:0 2px;vertical-align:top;font-weight:700}"]})}return r})();function _e(r,l){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-edit-schedule",16),e.qZA()),2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("interviewItem",t)("interviewDateFrom",i.interview.interviewDateFrom)("interviewDateUpto",i.interview.interviewDateUpto)}}const H=function(){return{dateInputFormat:"YYYY-MM-DD"}};function ve(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"h4",1),e._uU(2,"Interview Schedule"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateInterview())}),e.qZA(),e._UZ(4,"button",3),e.TgZ(5,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteInterview())}),e.qZA(),e._UZ(6,"hr",5),e.TgZ(7,"label",6),e._uU(8,"Customer Name"),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.customerName=n)}),e.qZA(),e.TgZ(10,"label",8),e._uU(11,"Order No"),e.qZA(),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.orderNo=n)}),e.qZA(),e.TgZ(13,"label",8),e._uU(14,"Dated"),e.qZA(),e.TgZ(15,"div",10),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"label",11),e._uU(19,"From: "),e.qZA(),e.TgZ(20,"input",12),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.interviewDateFrom=n)}),e.qZA(),e.TgZ(21,"label",8),e._uU(22,"Upto:"),e.qZA(),e.TgZ(23,"input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.interview.interviewDateUpto=n)}),e.qZA(),e._UZ(24,"hr",14),e.YNc(25,_e,2,3,"div",15),e.qZA()}if(2&r){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.interview.customerName),e.xp6(3),e.Q6J("ngModel",t.interview.orderNo),e.xp6(4),e.Oqu(e.xi3(17,10,t.interview.orderDate,"dd-MMM-yy")),e.xp6(4),e.Q6J("ngModel",t.interview.interviewDateFrom)("bsValue",t.bsValueDate)("bsConfig",e.DdM(13,H)),e.xp6(3),e.Q6J("ngModel",t.interview.interviewDateUpto)("bsValue",t.bsValueDate)("bsConfig",e.DdM(14,H)),e.xp6(2),e.Q6J("ngForOf",t.interview.interviewItems)}}let ge=(()=>{class r{constructor(t,i,n,a,s,x){this.fb=t,this.activatedRoute=i,this.router=n,this.service=a,this.toastr=s,this.confirm=x,this.bsValueDate=new Date}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.interview=t.interview})}updateInterview(){this.service.updateInterviewHeader(this.interview).subscribe({next:t=>{null===t?this.toastr.warning("Failed to update the interview","failure"):this.toastr.success("Updated the interview","Success")},error:t=>this.toastr.error(t.error.details,"Error encountered")})}deleteInterview(){const i=this.service.deleteInterview(this.interview.id);this.confirm.confirm("confirm Delete","confirm delete this Interview?. WARNING: this cannot be undone").pipe((0,S.h)(a=>a),(0,g.w)(()=>i)).subscribe(a=>{a?(this.toastr.success("Interview deleted","deletion successful"),this.router.navigateByUrl("/interviews")):this.toastr.error("Error in deleting the interview","failed to delete")})}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(c.qu),e.Y36(u.gz),e.Y36(u.F0),e.Y36(v.n),e.Y36(m._W),e.Y36(h.z))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[2,"display","inline-block"],[1,"btn","fa","fa-save","fa-2x",2,"margin-left","150px",3,"click"],["type","button","routerLink","/interviews",1,"btn","fa","fa-window-close","fa-2x","mx-5",2,"color","darkturquoise"],["type","button","routerLink","/interviews",1,"btn","fa","fa-trash","fa-2x",3,"click"],[2,"margin","0","padding","0","border-width","thick","border-color","beige"],[1,"lbl","w100","mx-2"],["type","text","name","customerName",1,"stdd","w250","mx-3",3,"ngModel","ngModelChange"],[1,"lbl","w75","mx-2"],["type","text","name","orderNo",1,"stdd","w75","mx-3",3,"ngModel","ngModelChange"],[1,"stdd","w100"],[1,"lbl","w75"],["name","interviewDateFrom","type","text","placeholder","Date From","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","interviewDateUpto","type","text","placeholder","Date Upto","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],[2,"margin","0","padding","0","border-width","thick","border-color","darkturquoise"],[4,"ngFor","ngForOf"],[3,"interviewItem","interviewDateFrom","interviewDateUpto"]],template:function(i,n){1&i&&e.YNc(0,ve,26,15,"div",0),2&i&&e.Q6J("ngIf",n.interview)},dependencies:[o.sg,o.O5,L.Np,L.Y5,c.Fj,c.JJ,c.On,u.rH,J,o.uU],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.red[_ngcontent-%COMP%]{color:red}"]})}return r})();var z=d(2096);const B=r=>{var l=r.paramMap.get("orderno");return null===l||""===l?(0,z.of)(null):(0,e.f3M)(v.n).getOrGenerateinterviewnew(+l)};class D{constructor(){this.interviewCandidateId=0,this.reportedAt=new Date,this.interviewedAt=new Date,this.interviewStatus="",this.interviewStatusDate=new Date,this.interviewRemarks=""}}class U{constructor(){this.orderId=0,this.search="",this.pageNumber=1,this.pageSize=15}}var R=d(9862),fe=d(7328),we=d(7398),xe=d(5516),Ce=d(1436);let Q=(()=>{class r{constructor(t){this.http=t,this.apiUrl=xe.N.apiUrl,this.currentUserSource=new fe.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.aParams=new U,this.cache=new Map}getAttendancePaged(t=!1){if(t){const n=this.cache.get(Object.values(this.aParams).join("-"));if(n)return(0,z.of)(n)}let i=new R.LE;return i=i.append("orderId",this.aParams.orderId.toString()),i=i.append("pageNumber",this.aParams.pageNumber.toString()),i=i.append("pageSize",this.aParams.pageSize.toString()),(0,Ce.Tr)(this.apiUrl+"interview/pagedAttendance",i,this.http).pipe((0,we.U)(n=>(this.cache.set(Object.values(this.aParams).join("-"),n),n)))}updateAttendances(t){return this.http.put(this.apiUrl+"interview/updateAttendance",t)}UploadInterviewerNote(t){return this.http.post(this.apiUrl+"FileUpload/InterviewerNote",t)}downloadInterviewerNote(t){let i=new R.LE;return i=i.append("fullpath",t),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:i,responseType:"blob"})}getAttendanceStatus(t){return this.http.get(this.apiUrl+"interview/candidateattendances/"+t)}composeInvitationMsgs(t){return this.http.post(this.apiUrl+"Help/insertIds",t)}deleteAttendance(t){return this.http.delete(this.apiUrl+"interview/deleteinterviewItemCandidate/"+t)}setAParams(t){this.aParams=t}getAParams(){return this.aParams}static#e=this.\u0275fac=function(i){return new(i||r)(e.LFG(R.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var j=d(3391);function be(r,l){if(1&r&&(e.TgZ(0,"div",7)(1,"div",8),e._uU(2,"Candidate:"),e.qZA(),e.TgZ(3,"div",9),e._uU(4),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.AsE("",t.itemCandidate.applicationNo," - ",t.itemCandidate.candidateName,"")}}function Ie(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",18)(1,"input",19),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onFileInputChange(n))}),e.qZA(),e.TgZ(2,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.upload=!n.upload)}),e.qZA()()}}function Me(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",11),e._uU(2,"Scheduled At:"),e.qZA(),e.TgZ(3,"input",12),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemCandidate.scheduledFrom=n)}),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"label",11),e._uU(6,"Reported At:"),e.qZA(),e.TgZ(7,"input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemCandidate.reportedAt=n)}),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"label",11),e._uU(10,"Interviewed At:"),e.qZA(),e.TgZ(11,"input",14),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemCandidate.interviewedAt=n)}),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label",11),e._uU(14,"Interview Status:"),e.qZA(),e.TgZ(15,"ng-select",15),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.statusChanged())})("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.itemCandidate.interviewStatus=n)}),e.qZA(),e.TgZ(16,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.upload=!n.upload)}),e.qZA(),e.YNc(17,Ie,3,0,"div",17),e.qZA()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.itemCandidate.scheduledFrom),e.xp6(4),e.Q6J("ngModel",t.itemCandidate.reportedAt),e.xp6(4),e.Q6J("ngModel",t.itemCandidate.interviewedAt),e.xp6(4),e.Q6J("items",t.selectionStatuses)("ngModel",t.itemCandidate.interviewStatus),e.xp6(2),e.Q6J("ngIf",t.upload)}}let Te=(()=>{class r{constructor(t,i,n,a,s){this.bsModalRef=t,this.confirm=i,this.toastr=n,this.service=a,this.cvrefservice=s,this.updateAttendanceEvent=new e.vpe,this.deleteAttendanceData=new e.vpe,this.deleteInterviwItemCandidate=new e.vpe,this.userFiles=[],this.upload=!1,this.bsValueDate=new Date,this.lastTimeCalled=Date.now(),this.selectionStatuses=[],this.selectionStatuses=this.cvrefservice.selectionStatuses}ngOnInit(){console.log(this.itemCandidate)}updateAttendance(){if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let n=new FormData;this.userFiles.length>0&&this.userFiles.forEach(a=>{n.append("file",a,a.name)}),n.append("data",JSON.stringify(this.itemCandidate)),this.service.UploadInterviewerNote(n).subscribe({next:a=>{console.log("response",a),""!==a?(this.toastr.error(a,"failed to save the interview data"),this.updateAttendanceEvent.emit(null)):(this.toastr.success("interview saved","success"),this.updateAttendanceEvent.emit(this.itemCandidate))},error:a=>{this.toastr.error(a.error?.details,"Error encountered"),this.updateAttendanceEvent.emit(null)}}),this.userFiles=[],this.bsModalRef.hide()}eraseAttendanceData(){this.confirm.confirm("Confirm Erase attendance","This will set to null all dates and interview Status.  It will take effect only after this form is saved.  Please Press OK to proceed, Cancel to Abort").subscribe({next:t=>{t?this.toastr.info("candidate detail schedules and status erased.  Changes will be lost if not saved"):this.toastr.info("Aborted","Aborted by user")}})}deleteItemCandidate(){}toggleUpload(){this.upload=!this.upload}onFileInputChange(t){const a=t.target.files[0];a.size>0&&(this.userFiles.push(a),this.itemCandidate.attachmentFileNameWithPath=a.name)}statusChanged(){this.itemCandidate&&(this.itemCandidate.interviewedAt=new Date,new Date(this.itemCandidate.reportedAt).getFullYear()<2e3&&(this.itemCandidate.reportedAt=new Date),this.itemCandidate.interviewedAt=this.itemCandidate.interviewedAt,this.itemCandidate.reportedAt=this.itemCandidate.reportedAt),new Date(this.itemCandidate.scheduledFrom).getFullYear()<2e3&&(this.itemCandidate.scheduledFrom=this.itemCandidate.interviewedAt)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(_.UZ),e.Y36(h.z),e.Y36(m._W),e.Y36(Q),e.Y36(j.Z))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-attendance-modal"]],outputs:{updateAttendanceEvent:"updateAttendanceEvent",deleteAttendanceData:"deleteAttendanceData",deleteInterviwItemCandidate:"deleteInterviwItemCandidate"},decls:7,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-success","fa","fa-save",2,"margin-left","200px",3,"click"],["title","Erase attendance data like Reported At, Interviewed At and Interview Status",1,"btn","fa","fa-erase","fa-2x","mx-2",3,"click"],["aria-label","close",1,"btn","btn-close","close","mx-2",3,"click"],["title","deletes the candidate assignment entirely",1,"btn","fa","fa-trash","red",3,"click"],[1,"modal-header","my-0"],[1,"stdd","w75","b"],[1,"stdd","w200","mx-2"],[1,"modal-body"],[1,"lbl"],["type","text","placeholder","Scheduled At",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Reported At",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Interviewed At",1,"stdd","w150",3,"ngModel","ngModelChange"],["bindLabel","name","bindValue","name","labelForId","name","clearAllText","Clear",1,"stdd","w200",3,"items","ngModel","change","ngModelChange"],["type","button","title","upload a new interviewer comment.  Any existing attachment will be REPLACED",1,"btn","mx-5","w15","fa","fa-upload",3,"click"],["style","font-size: x-small;",4,"ngIf"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"]],template:function(i,n){1&i&&(e.YNc(0,be,5,2,"div",0),e.YNc(1,Me,18,6,"div",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.updateAttendance()}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.eraseAttendanceData()}),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.deleteItemCandidate()}),e.qZA()()),2&i&&(e.Q6J("ngIf",n.itemCandidate),e.xp6(1),e.Q6J("ngIf",n.itemCandidate))},dependencies:[o.O5,c.Fj,c.JJ,c.On,k.w9],styles:[".w15[_ngcontent-%COMP%]{width:15px}.w75[_ngcontent-%COMP%]{width:75px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;margin:0 2px;width:125px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return r})();const Se=["search"];function ye(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"pagination",14),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(1,"\n>"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Ae(r,l){1&r&&(e.TgZ(0,"div",15),e._uU(1," No Candidates assigned for the interview\n"),e.qZA())}function Ee(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",34)(1,"input",35),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onFileInputChange(n,a))}),e.qZA(),e.TgZ(2,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.upload=!n.upload)}),e.qZA()()}}function Ze(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"input",16),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.checked=n)})("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.selectionChanged(a))}),e.qZA(),e.TgZ(2,"div",17),e._uU(3),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA(),e.TgZ(6,"app-text-input",18),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.interviewVenue=n)}),e.qZA(),e.TgZ(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",19),e._uU(10),e.qZA(),e.TgZ(11,"div",20),e._uU(12),e.qZA(),e.TgZ(13,"input",21),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.scheduledFrom=n)}),e.qZA(),e.TgZ(14,"input",22),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.reportedAt=n)}),e.qZA(),e.TgZ(15,"input",23),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.interviewedAt=n)}),e.qZA(),e.TgZ(16,"div",24),e._uU(17),e.qZA(),e.TgZ(18,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.uploadNote(a))}),e.qZA(),e.TgZ(19,"button",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.reported(a.interviewItemCandidateId))}),e.qZA(),e.TgZ(20,"button",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.downloadInterviewerNote(a))}),e.qZA(),e.TgZ(21,"button",28),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.attendanceDelete(a.interviewItemCandidateId))}),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"label",29),e._uU(24,"Interview Status"),e.qZA(),e.TgZ(25,"ng-select",30),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.interviewStatus=n)})("change",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.statusChanged(a))}),e.qZA(),e.TgZ(26,"textarea",31),e.NdJ("ngModelChange",function(n){const s=e.CHM(t).$implicit;return e.KtG(s.interviewerRemarks=n)}),e.qZA(),e.YNc(27,Ee,3,0,"div",32),e._UZ(28,"hr",33),e.qZA()}if(2&r){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(2),e.Oqu(t.orderNo),e.xp6(2),e.Oqu(t.customerName),e.xp6(1),e.Q6J("label","Venue")("ngModel",t.interviewVenue),e.xp6(2),e.Oqu(t.professionName),e.xp6(2),e.Oqu(t.applicationNo),e.xp6(1),e.Q6J("ngClass","Not Interviewed"===t.interviewStatus?"stdd red":"stdd"),e.xp6(1),e.Oqu(t.candidateName),e.xp6(1),e.Q6J("ngModel",t.scheduledFrom),e.xp6(1),e.Q6J("ngModel",t.reportedAt),e.xp6(1),e.Q6J("ngModel",t.interviewedAt),e.xp6(2),e.hij(" ",null===t.attachmentFileNameWithPath?"NO":"YES",""),e.xp6(8),e.Q6J("items",i.selectionStatuses)("ngModel",t.interviewStatus),e.xp6(1),e.Q6J("ngModel",t.interviewerRemarks),e.xp6(1),e.Q6J("ngIf",i.upload&&t.interviewItemCandidateId===i.selectedIndex)}}const Pe=[{path:"",component:W,resolve:{interviews:()=>{var r=(0,e.f3M)(v.n),l=new T.j;return r.setParams(l),r.getInterviewsPaged(!1)}}},{path:"editintervw/:orderno",component:ge,resolve:{interview:B}},{path:"editschedule/:orderno",component:J,resolve:{interview:B}},{path:"attendance/:orderid",component:(()=>{class r{constructor(t,i,n,a,s){this.service=t,this.toastr=i,this.activatedRoute=n,this.cvrefservice=a,this.bsModalService=s,this.orderId=0,this.attendances=[],this.attendancesSelected=[],this.totalCount=0,this.selectionStatuses=[],this.lastTimeCalled=Date.now(),this.userFiles=[],this.selectedIndex=0,this.upload=!1,this.attendancesToUpdate=[],this.aParams=new U,this.savewWithattachments=()=>{if((void 0===this.att||0===this.userFiles.length)&&this.toastr.warning("the  object to upload is not defined"),Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let M=new FormData;this.userFiles.length>0&&this.userFiles.forEach(C=>{M.append("file",C,C.name)}),M.append("data",JSON.stringify(this.attendancesToUpdate)),console.log("att in savewithattachments after stringify:",M),this.service.UploadInterviewerNote(M).subscribe({next:C=>{""!==C?this.toastr.error(C,"failed to save the interview data"):this.toastr.success("interview saved","success")},error:C=>this.toastr.error(C.error?.details,"Error encountered")}),this.userFiles=[],this.att=void 0},this.orderId=this.activatedRoute.snapshot.params.orderid,0!==this.orderId&&(this.aParams.orderId=this.orderId),this.selectionStatuses=this.cvrefservice.selectionStatuses}ngOnInit(){0!==this.aParams.orderId&&this.getAttendancePaged(!1)}getAttendancePaged(t){this.service.setAParams(this.aParams),this.service.getAttendancePaged(t).subscribe({next:i=>{this.attendances=i.result,this.pagination=i.pagination,this.totalCount=i.totalCount,console.log("attendances:",this.attendances)}})}updateAttendances(){console.log("attendancesToUpdate",this.attendancesToUpdate,"att",this.att),this.service.updateAttendances(this.attendancesToUpdate).subscribe({next:t=>{null!==t?(t.forEach(i=>{var n=this.attendances.findIndex(a=>a.interviewItemCandidateId==i.interviewCandidateId);-1!==n&&(this.attendances[n].interviewedAt=i.interviewedAt,this.attendances[n].reportedAt=i.reportedAt,this.attendances[n].interviewStatus=i.interviewStatus,this.attendances[n].interviewerRemarks=i.interviewRemarks)}),this.toastr.success("Interview Attendance updated","Success"),this.attendancesToUpdate=[]):this.toastr.warning("Failed to update the attendance data","Failure")},error:t=>this.toastr.error(t.error?.details,"Error encountered")})}attendanceEdit(t){var i=new D;i.interviewCandidateId=t.interviewItemCandidateId,i.interviewRemarks=t.interviewerRemarks,i.interviewStatus=t.interviewStatus,i.interviewedAt=t.interviewedAt,console.log("attUpdate.interviewedAt",i.interviewedAt,"att",t.interviewedAt),i.reportedAt=t.reportedAt,this.attendancesToUpdate.push(i),console.log("attendanceToUpdate",this.attendancesToUpdate)}attendanceDelete(t){this.service.deleteAttendance(t).subscribe({next:i=>{if(i){var n=this.attendances.findIndex(a=>a.interviewItemCandidateId===t);-1!==n&&this.attendances.splice(n,1),this.toastr.success("Deleted","Attendance Deleted")}else this.toastr.warning("Failed to delete","Failed to delete the candidate attendance")},error:i=>this.toastr.error(i.error.details,"Error encountered in deleting the attendance record")})}onPageChanged(t){const i=this.service.getAParams()??new U;i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setAParams(i),this.getAttendancePaged(!0))}onSearch(){const t=this.service.getAParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setAParams(t),this.getAttendancePaged(!0)}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value="");const t=this.service.getAParams();this.service.setAParams(t),this.getAttendancePaged(!1)}statusChanged(t){if(console.log("statusChanged att:",t),t){t.interviewedAt=new Date,new Date(t.reportedAt).getFullYear()<2e3&&(t.reportedAt=new Date);var i=new D,n=this.attendancesToUpdate.findIndex(a=>a.interviewCandidateId==t.interviewItemCandidateId);-1!==n?(this.attendancesToUpdate[n].interviewStatus=t.interviewStatus,this.attendancesToUpdate[n].interviewedAt=t.interviewedAt,this.attendancesToUpdate[n].reportedAt=t.reportedAt,this.attendancesToUpdate[n].interviewRemarks=t.interviewerRemarks,this.attendancesToUpdate[n].interviewStatus=t.interviewStatus):((i=new D).interviewCandidateId=t.interviewItemCandidateId,i.interviewStatus=t.interviewStatus,i.interviewedAt=t.interviewedAt,i.reportedAt=t.reportedAt,i.interviewRemarks=t.interviewerRemarks,this.attendancesToUpdate.push(i)),console.log("atttoUpdate",this.attendancesToUpdate,"att",t.interviewedAt)}}reported(t){var i=this.attendances.findIndex(n=>n.interviewItemCandidateId===t);-1!==i&&(this.attendances[i].reportedAt=new Date)}selectionChanged(t){var i;i=!0!==t.checked;var n=this.attendancesSelected.findIndex(a=>a.interviewItemCandidateId===t.interviewItemCandidateId);i?this.attendancesSelected.push(t):this.attendancesSelected.splice(n,1)}inviteCandidatesForInterview(){if(0!==this.attendancesSelected.length){var t=this.attendancesSelected.map(i=>i.interviewItemCandidateId);console.log("ids",t),this.service.composeInvitationMsgs(t).subscribe({next:i=>{i.length>0?(this.toastr.success("Messages composed and available to view/edit/send from the Messages folder","Success"),i.forEach(n=>{var a=this.attendances.findIndex(s=>s.applicationNo==s.applicationNo);-1!==a&&(this.attendances[a].applicationNo=n.applicationNo)})):this.toastr.warning("Warning","Failed to compose invitation messages")},error:i=>this.toastr.error(i.error.details,"Error encountered")})}}uploadNote(t){var i={id:t.interviewItemCandidateId,interviewItemId:0,intervwItemId:t.intervwItemId,candidateId:t.interviewItemCandidateId,personId:t.personId,prospectiveCandidateId:0,applicationNo:t.applicationNo,candidateName:t.candidateName,passportNo:"",scheduledFrom:t.scheduledFrom,reportedAt:t.reportedAt,interviewedAt:t.interviewedAt,interviewerRemarks:t.interviewerRemarks,interviewStatus:t.interviewStatus,attachmentFileNameWithPath:t.attachmentFileNameWithPath};new Date(Date.UTC(2024,10,2,12,30,0)),this.bsModalRef=this.bsModalService.show(Te,{class:"modal-dialog-centered modal-md",initialState:{itemCandidate:i}}),this.bsModalRef.content.updateAttendanceEvent.subscribe({next:a=>{console.log("response in attendance",a),null===a?this.toastr.info("Failed to update the candidate assignment, Or aborted by user","Failed to update the assignment"):this.toastr.success("Candidate Assignment updated","Success")},error:a=>this.toastr.error(a.error?.details,"Error encountered")})}downloadInterviewerNote(t){const i=t.attachmentFileNameWithPath;""!==i&&null!=i?this.service.downloadInterviewerNote(i).subscribe({next:n=>{const a=document.createElement("a"),s=URL.createObjectURL(n);a.href=s;var x=i.lastIndexOf("\\");a.download=-1!==x?i.substring(x+1):"filename.ext",a.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("no file exists for downloading","Bad Request")}uploadattachment(t){this.upload=!this.upload}onFileInputChange(t,i){this.selectedIndex=i.interviewItemCandidateId;const s=t.target.files[0];if(s.size>0){this.userFiles.push(s),this.att.attachmentFileNameWithPath=s.name;var x=this.attendancesSelected.findIndex(y=>y.interviewItemCandidateId===i.interviewItemCandidateId);-1!==x&&(this.attendancesSelected[x].attachmentFileNameWithPath=s.name)}}FilesUploaded(t){this.userFiles=t}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(Q),e.Y36(m._W),e.Y36(u.gz),e.Y36(j.Z),e.Y36(_.tT))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-interview-attendance"]],viewQuery:function(i,n){if(1&i&&e.Gf(Se,5),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first)}},decls:38,vars:5,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","updates ALL the attendances edited",1,"btn","fa","fa-save","fa-2x",3,"disabled","click"],["title","invite selected candidates for the interview - by email",1,"btn","fa","fa-envelope","fa-2x",3,"disabled","click"],["type","button",1,"fa","fa-refresh","fa-2x","mx-2",3,"click"],["type","button","routerLink","/interviews",1,"fa","fa-window-close","fa-2x"],[1,"stddML50","w50"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w70"],[1,"stdd","w160"],[1,"stdd","w110"],[1,"stdd","w200"],["class","my-2",4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],["type","checkbox",1,"form-check-input","w15","hAlignCenter",2,"margin-left","15px","margin-right","15px",3,"ngModel","ngModelChange","click"],[1,"stdd","w50"],["title","Candidate Name - will be displayed in red if still not interviewed","id","interviewVenue",1,"stdd","w100",3,"label","ngModel","ngModelChange"],[1,"stdd","w60",2,"text-align","center"],[2,"width","150px",3,"ngClass"],["type","text","id","scheduledFDrom","placeholder","Scheduled At",1,"dt",3,"ngModel","ngModelChange"],["type","text","id","reportedAt","placeholder","Reported at",1,"dt",3,"ngModel","ngModelChange"],["type","text","id","interviewedAt","placeholder","Interviewed At",1,"dt",3,"ngModel","ngModelChange"],[1,"w50","mx-2",2,"display","inline-block","font-size","x-small","vertical-align","top"],["title","edit this assignment.  Also, upload interview comment attachment",1,"btn","w15","fa","fa-pencil",2,"margin-left","60px",3,"click"],["title","mark the candidate as reported for interview",1,"btn","w15","fa","fa-bars",3,"click"],["type","button","title","download interviewer comments",1,"btn","w15","fa","fa-download",2,"color","aliceblue",3,"click"],["title","delete attendance - not the candidate",1,"btn","w15","fa","fa-trash",3,"click"],[2,"margin","0 15px 0 575px","padding-top","0px","font-size","smaller"],["bindLabel","name","bindValue","name","labelForId","id","clearAllText","Clear",1,"stdd","w200",3,"items","ngModel","ngModelChange","change"],["name","remarks","id","remarks","rows","1","cols","40","title","remarks by interviewer","placeholder","Remarks by interviewer",1,"stdd",3,"ngModel","ngModelChange"],["style","font-size: x-small;",4,"ngIf"],[1,"my-0"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"]],template:function(i,n){1&i&&(e.YNc(0,ye,2,3,"pagination",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.savewWithattachments()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.inviteCandidatesForInterview()}),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onReset()}),e.qZA(),e._UZ(4,"button",4)(5,"br"),e.TgZ(6,"label",5),e._uU(7,"Order"),e._UZ(8,"br"),e._uU(9,"No"),e.qZA(),e.TgZ(10,"label",6),e._uU(11,"Customer"),e.qZA(),e.TgZ(12,"label",7),e._uU(13,"Venues"),e.qZA(),e.TgZ(14,"label",7),e._uU(15,"Category"),e.qZA(),e.TgZ(16,"label",8),e._uU(17,"Applicn"),e._UZ(18,"br"),e._uU(19,"No"),e.qZA(),e.TgZ(20,"label",9),e._uU(21,"Candidate Name"),e.qZA(),e.TgZ(22,"label",10),e._uU(23,"Scheduled"),e._UZ(24,"br"),e._uU(25,"at"),e.qZA(),e.TgZ(26,"label",10),e._uU(27,"Reported"),e._UZ(28,"br"),e._uU(29," at"),e.qZA(),e.TgZ(30,"label",10),e._uU(31,"Interviewd"),e._UZ(32,"br"),e._uU(33,"at"),e.qZA(),e.TgZ(34,"label",11),e._uU(35,"File Uploaded"),e.qZA(),e.YNc(36,Ae,2,0,"div",12),e.YNc(37,Ze,29,17,"div",13)),2&i&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(1),e.Q6J("disabled",0===n.attendancesToUpdate.length),e.xp6(1),e.Q6J("disabled",0===n.attendancesSelected.length),e.xp6(34),e.Q6J("ngIf",0===n.attendances.length),e.xp6(1),e.Q6J("ngForOf",n.attendances))},dependencies:[o.mk,o.sg,o.O5,p.Qt,c.Fj,c.Wl,c.JJ,c.On,k.w9,q.t,u.rH],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:middle;font-weight:700;word-wrap:break-word}.stddML50[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px 0 50px;vertical-align:middle;font-weight:700;word-wrap:break-word}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top;width:160px}.w15[_ngcontent-%COMP%]{width:15px}.w50[_ngcontent-%COMP%]{width:50px}.w60[_ngcontent-%COMP%]{width:60px}.w70[_ngcontent-%COMP%]{width:70px}.w85[_ngcontent-%COMP%]{width:85px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.red[_ngcontent-%COMP%]{color:red}.stddX[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;vertical-align:top;font-size:x-small;line-height:1.5em;word-wrap:break-word;width:110px}"]})}return r})()}];let Oe=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[o.ez,u.Bz.forChild(Pe),u.Bz]})}return r})();var Ne=d(8484),ke=d(9388);let De=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[ke.vT]})}return r})();var O=d(3680),Ue=d(617),Re=d(8645);d(6825);let F=(()=>{class r{constructor(){this.changes=new Re.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Ke={provide:F,deps:[[new e.FiY,new e.tp0,F]],useFactory:function Ve(r){return r||new F}};let We=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({providers:[Ke,O.rD],imports:[O.BQ,o.ez,Ne.eL,De,Ue.Ps,O.si,O.BQ]})}return r})(),$e=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[o.ez,I.m,We,Oe]})}return r})()},7328:(A,b,d)=>{d.d(b,{t:()=>T});var o=d(8645),I=d(4552);class T extends o.x{constructor(g=1/0,e=1/0,v=I.l){super(),this._bufferSize=g,this._windowTime=e,this._timestampProvider=v,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,g),this._windowTime=Math.max(1,e)}next(g){const{isStopped:e,_buffer:v,_infiniteTimeWindow:u,_timestampProvider:m,_windowTime:_}=this;e||(v.push(g),!u&&v.push(m.now()+_)),this._trimBuffer(),super.next(g)}_subscribe(g){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(g),{_infiniteTimeWindow:v,_buffer:u}=this,m=u.slice();for(let _=0;_<m.length&&!g.closed;_+=v?1:2)g.next(m[_]);return this._checkFinalizedStatuses(g),e}_trimBuffer(){const{_bufferSize:g,_timestampProvider:e,_buffer:v,_infiniteTimeWindow:u}=this,m=(u?1:2)*g;if(g<1/0&&m<v.length&&v.splice(0,v.length-m),!u){const _=e.now();let h=0;for(let p=1;p<v.length&&v[p]<=_;p+=2)h=p;h&&v.splice(0,h+1)}}}}}]);