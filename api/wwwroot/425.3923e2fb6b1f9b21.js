"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[425],{1425:(P,d,i)=>{i.r(d),i.d(d,{TaskModule:()=>C});var o=i(6814),m=i(3568),t=i(5879),u=i(7133),g=i(7783),p=i(4038),h=i(8763),T=i(7012);const k=["search"];function f(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"h4",7),t._uU(2,"Selections based on parameters"),t.qZA(),t.TgZ(3,"pagination",8),t.NdJ("pageChanged",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onPageChanged(n))}),t._uU(4," >"),t.qZA(),t.TgZ(5,"div",9)(6,"input",10,11),t.NdJ("keyup.enter",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSearch())}),t.qZA(),t.TgZ(8,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSearch())}),t.qZA(),t.TgZ(9,"button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onReset())}),t.qZA()(),t._UZ(10,"button",14),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",10)}}function v(a,c){if(1&a){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",16),t._uU(5),t.qZA(),t.TgZ(6,"div",16),t._uU(7),t.qZA(),t.TgZ(8,"div",17),t._uU(9),t.qZA(),t.TgZ(10,"div",16),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",16),t._uU(14),t.qZA(),t.TgZ(15,"button",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.markAsCompleted(r.id))}),t.qZA(),t.TgZ(16,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeTask(r.id))}),t.qZA()()}if(2&a){const e=c.$implicit;t.xp6(2),t.Oqu(t.xi3(3,6,e.taskDate,"dd-MMM-yy")),t.xp6(3),t.Oqu(e.assignedByUsername),t.xp6(2),t.Oqu(e.assignedToUsername),t.xp6(2),t.Oqu(e.taskDescription),t.xp6(2),t.Oqu(t.xi3(12,9,e.completeBy,"dd-MMM-yy")),t.xp6(3),t.Oqu(e.taskStatus)}}let x=(()=>{class a{constructor(e,s,n,r){this.activatedRoute=e,this.accountService=s,this.service=n,this.toastr=r,this.tasks=[],this.sParams=new m.p,this.totalCount=0,s.currentUser$.subscribe({next:l=>this.user=l})}ngOnInit(){this.sParams.assignedByUsername=this.user?.userName,this.sParams.assignedToUsername=this.user?.userName,this.getTasksPaged()}getTasksPaged(){this.service.setParams(this.sParams),this.service.getPaginatedTasks().subscribe({next:e=>{e.result&&e.pagination&&(this.tasks=e.result,this.pagination=e.pagination,this.totalCount=e.count)},error:e=>this.toastr.error(e.error.details,"Error")})}markAsCompleted(e){this.service.completeTask(e).subscribe({next:s=>{s?this.toastr.success("Task Marked as Completed","Task Completed"):this.toastr.warning("Failed to mark the task as completed","Failure")},error:s=>{this.toastr.error(s.error.details,"Error in marking the task as completed")}})}removeTask(e){this.service.deleteTask(e).subscribe({next:s=>{s?this.toastr.success("Task Deleted","Success"):this.toastr.warning("Faileed to delete the task","Failure")},error:s=>this.toastr.error(s.error.details,"Error encountered")})}onPageChanged(e){this.service.getParams(),this.sParams.pageNumber!==e.page&&(this.sParams.pageNumber=e.page,this.service.setParams(this.sParams),this.getTasksPaged())}onSearch(){const e=this.service.getParams();e.search=this.searchTerm.nativeElement.value,e.pageNumber=1,this.service.setParams(e),this.getTasksPaged()}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new m.p,this.sParams.assignedByUsername=this.user?.userName,this.sParams.assignedToUsername=this.user?.userName,this.service.setParams(this.sParams),this.getTasksPaged()}static#t=this.\u0275fac=function(s){return new(s||a)(t.Y36(u.gz),t.Y36(g.B),t.Y36(p.M),t.Y36(h._W))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-user-tasks"]],viewQuery:function(s,n){if(1&s&&t.Gf(k,5),2&s){let r;t.iGM(r=t.CRH())&&(n.searchTerm=r.first)}},decls:17,vars:3,consts:[[2,"font-weight","bold"],["class","d-flex justify-contents-between align-items-center","style","display: inline-block; margin-left: 15px; vertical-align: top;",4,"ngIf"],["routerLink","",1,"btn","fa","fa-window-close","fa-2x"],[1,"lbl","w125"],[1,"lbl","w300"],["class","container",4,"ngFor","ngForOf"],[1,"d-flex","justify-contents-between","align-items-center",2,"display","inline-block","margin-left","15px","vertical-align","top"],[1,"mx-5",2,"display","inline-block","font-weight","bold"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"form-inline",2,"margin-left","50px !important"],["type","text","placeholder","Search",1,"stdd","form-control","w200",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","fa","fa-search","mx-1",3,"click"],[1,"btn","btn-outline-success","fa","fa-refresh","mx-1",3,"click"],["routerLink","/administration",1,"btn","fa","fa-window-close","fa-2x","mx-2"],[1,"container"],[1,"stdd","w125"],[1,"stdd","w300"],["title","mark as completed",1,"btn","fa","fa-check","green",3,"click"],["title","Delete this task",1,"btn","fa","fa-trash","red",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"h4",0),t._uU(1),t.qZA(),t.YNc(2,f,11,3,"div",1),t._UZ(3,"button",2),t.TgZ(4,"label",3),t._uU(5,"Date"),t.qZA(),t.TgZ(6,"label",3),t._uU(7,"Assigned By"),t.qZA(),t.TgZ(8,"label",3),t._uU(9,"Assigned To"),t.qZA(),t.TgZ(10,"label",4),t._uU(11,"Task Description"),t.qZA(),t.TgZ(12,"label",3),t._uU(13,"Complete By"),t.qZA(),t.TgZ(14,"label",3),t._uU(15,"Status"),t.qZA(),t.YNc(16,v,17,12,"div",5)),2&s&&(t.xp6(1),t.hij("Tasks assigned by/to ",null==n.user?null:n.user.userName,""),t.xp6(1),t.Q6J("ngIf",n.tasks&&n.pagination),t.xp6(14),t.Q6J("ngForOf",n.tasks))},dependencies:[o.sg,o.O5,u.rH,T.Qt,o.uU],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;margin:0 2px;vertical-align:middle}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;word-wrap:break-word}.w125[_ngcontent-%COMP%]{width:125px}.w300[_ngcontent-%COMP%]{width:300px}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00f}"]})}return a})();var b=i(8180);const U=[{path:"",component:x,resolve:{tasks:()=>{const a=(0,t.tBr)(p.M);var c;(0,t.f3M)(g.B).currentUser$.pipe((0,b.q)(1)).subscribe({next:s=>s});var e=new m.p;return e.assignedToUsername=c.userName,e.assignedByUsername=c.userName,a.setOParams(e),a.getPendingTasksOfLoggedInUser()}}}];let Z=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275mod=t.oAB({type:a});static#s=this.\u0275inj=t.cJS({imports:[o.ez,u.Bz.forChild(U),u.Bz]})}return a})();var _=i(4849);let C=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275mod=t.oAB({type:a});static#s=this.\u0275inj=t.cJS({imports:[o.ez,Z,_.m]})}return a})()}}]);