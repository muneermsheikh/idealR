"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[868],{7868:(nn,j,m)=>{m.r(j),m.d(j,{AdministrationModule:()=>tn});var c=m(6814),$=m(4849),e=m(9468),g=m(8397);let X=(()=>{class i{close(){}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-menu"]],decls:24,vars:0,consts:[[1,"container","d-flex","justify-contents-between","align-items-center","mt-5"],["routerLink","/administration/selections","title","Orders Index",1,"stdd"],["routerLink","/administration/pendingSelections","title","Orders Index",1,"stdd"],["routerLink","/administration/orders","title","Orders Index",1,"stdd"],["routerLink","/administration/ordersforwarded","title","Orders Forwarded Listing",1,"stdd"],["routerLink","/administration/cvforward","title","forward shortlited CVs to customers",1,"stdd"],["routerLink","/administration/selections","title","register selections or rejections by clients",1,"stdd"],["routerLink","/administration/employment","title","edit employment details of selected candidates",1,"stdd"],["title","Categories","routerLink","/administration/categories",1,"stdd"],["title","Qualifications","routerLink","/administration/qualifications",1,"stdd"],["title","Industry Types","routerLink","/administration/industries",1,"stdd"],["title","Customers, Associates and Vendors","routerLink","/administration/customers",1,"stdd"],["title","go back to home",1,"stdd","fa","fa-undo",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2,"Selections"),e.qZA(),e.TgZ(3,"button",2),e._uU(4,"Pending Selections"),e.qZA(),e.TgZ(5,"button",3),e._uU(6,"Orders Listing"),e.qZA(),e.TgZ(7,"button",4),e._uU(8,"Orders Forwarded Listing"),e.qZA(),e.TgZ(9,"button",5),e._uU(10,"Submit CVs to clients"),e.qZA(),e.TgZ(11,"button",6),e._uU(12,"Selections"),e.qZA(),e.TgZ(13,"button",7),e._uU(14,"Employments"),e.qZA(),e.TgZ(15,"button",8),e._uU(16,"Categories"),e.qZA(),e.TgZ(17,"button",9),e._uU(18,"Qualifications"),e.qZA(),e.TgZ(19,"button",10),e._uU(20,"Industry Types"),e.qZA(),e.TgZ(21,"button",11),e._uU(22,"Clients, Associates, Vendors"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return r.close()}),e.qZA()())},dependencies:[g.rH],styles:[".stdd[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px;font-size:medium}"]})}return i})();var L=m(3655),ee=m(1730),q=m(2181),T=m(4664);class I{constructor(){this.id=0,this.orderItemId=0,this.candidateId=0,this.orderId=0,this.orderNo=0,this.applicationNo=0,this.customerName="",this.professionId=0,this.professionName="",this.referredOn=new Date,this.cVRefId=0,this.includeSelection=!1,this.includeEmployment=!1,this.includeDeployment=!1,this.pageNumber=1,this.pageSize=5,this.sort="",this.search=""}}var s=m(95),v=m(2051),f=m(8763),O=m(7411),y=m(7328),h=m(2096),Z=m(7398),A=m(5516);class te{constructor(){this.approved="null",this.selDecisionId=0,this.cvRefId=0,this.orderItemId=0,this.categoryId=0,this.orderId=0,this.orderNo=0,this.candidateId=0,this.applicationNo=0,this.customerId=0,this.customerName="",this.categoryName="",this.candidateName="",this.selectionDateFrom=new Date("1900-01-01"),this.selectionDateUpto=new Date("1900-01-01"),this.sort="orderitemid",this.searchOn="appno",this.pageNumber=1,this.pageSize=10,this.search=""}}var _=m(3976),w=m(9862);let ne=(()=>{class i{constructor(t){this.http=t,this.apiUrl=A.N.apiUrl,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.eParams=new te,this.cache=new Map}getEmployments(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.aP)(t);return(0,_.Tr)(this.apiUrl+"Employment",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}GetEmploymentObject(t){return this.http.get(this.apiUrl+"employment/generate/"+t)}updateEmployment(t){return this.http.put(this.apiUrl+"employment/employment",t)}deleteEmployment(t){return this.http.delete(this.apiUrl+"employment/"+t)}setEParams(t){this.eParams=t}getEParams(){return this.eParams}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var b=m(3593),M=m(8806);function re(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"h6"),e._uU(2,"Employment details"),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateEmployment())}),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()()}}const ie=function(){return{dateInputFormat:"YYYY-MM-DD"}};function oe(i,d){if(1&i&&(e.TgZ(0,"div",6)(1,"form",7)(2,"label",8),e._uU(3,"Application No:"),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"label",10),e._uU(8,"Customer Name"),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"label",10),e._uU(13,"Category Ref"),e.qZA(),e.TgZ(14,"div",9),e._uU(15),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"label",11),e._uU(18,"Offer Acceptance"),e.qZA(),e.TgZ(19,"div",12),e._UZ(20,"ng-select",13),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"label",14),e._uU(23,"Accept/Decline `On"),e.qZA(),e.TgZ(24,"div",15),e._UZ(25,"input",16),e.qZA(),e._UZ(26,"hr",17),e.TgZ(27,"label",11),e._uU(28,"Currency & Salary"),e.qZA(),e._UZ(29,"input",18)(30,"input",19)(31,"hr"),e.TgZ(32,"label",11),e._uU(33,"Perks"),e.qZA(),e.TgZ(34,"label",20),e._uU(35,"Allowance"),e.qZA(),e.TgZ(36,"label",20),e._uU(37,"Provided Free"),e.qZA(),e.TgZ(38,"label",20),e._uU(39,"Not Provided"),e.qZA(),e._UZ(40,"br"),e.TgZ(41,"label",21),e._uU(42,"Housing"),e.qZA(),e._UZ(43,"input",22)(44,"input",23)(45,"input",24)(46,"br"),e.TgZ(47,"label",25),e._uU(48,"Food"),e.qZA(),e._UZ(49,"input",26)(50,"input",27)(51,"input",28)(52,"br"),e.TgZ(53,"label",29),e._uU(54,"Transportation"),e.qZA(),e._UZ(55,"input",30)(56,"input",31)(57,"input",32)(58,"br"),e.TgZ(59,"label",33),e._uU(60,"Other Allowance"),e.qZA(),e._UZ(61,"input",34),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(t.candidateName),e.xp6(5),e.Oqu(t.companyName),e.xp6(5),e.Oqu(t.categoryRef),e.xp6(5),e.Q6J("items",t.statuses),e.xp6(5),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(7,ie))}}let se=(()=>{class i{constructor(t,n,r,o,a){this.bsModalRef=t,this.toastr=n,this.confirmService=r,this.fb=o,this.service=a,this.updateEmp=new e.vpe,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.categoryRef="",this.companyName="",this.candidateName="",this.form=new s.cw({}),this.statuses=[{status:"Accepted"},{status:"Declined - Salary Low"},{status:"Declined - Company history suspicious"},{status:"Declined - Work Hours too long"},{status:"Declined - Cannot pay Services Charges"},{status:"Declined - Family problems"}]}ngOnInit(){this.emp&&this.InitializeForm(this.emp)}InitializeForm(t){this.form=this.fb.group({id:[t.id],selDecisionId:[t.selectionDecisionId],cvRefId:[t.cvRefId],selectionDecisionId:[t.selectionDecisionId],selectedOn:[t.selectedOn],charges:[t.charges],salaryCurrency:[t.salaryCurrency,s.kI.required],salary:[t.salary,s.kI.required],contractPeriodInMonths:[t.contractPeriodInMonths,s.kI.required],weeklyHours:[t.weeklyHours,s.kI.required],housingProvidedFree:[t.housingProvidedFree],housingNotProvided:[t.housingNotProvided??!1],housingAllowance:[t.housingAllowance],foodProvidedFree:[t.foodProvidedFree],foodNotProvided:[t.foodNotProvided??!1],foodAllowance:[t.foodAllowance],transportProvidedFree:[t.transportProvidedFree],transportNotProvided:[t.transportNotProvided??!1],transportAllowance:[t.transportAllowance],otherAllowance:[t.otherAllowance],leavePerYearInDays:[t.leavePerYearInDays],leaveAirfareEntitlementAfterMonths:[t.leaveAirfareEntitlementAfterMonths],offerAccepted:[t.offerAccepted],offerAcceptanceConcludedOn:[t.offerAcceptanceConcludedOn]})}updateEmployment(){var t=this.form.value;t.housingAllowance=t.housingAllowance??0,t.foodAllowance=t.foodAllowance??0,t.transportAllowance=t.transportAllowance??0;var n="";t.foodAllowance>0&&(t.foodNotProvided||t.foodProvidedFree)&&(n="only one value allowed : either Food Allowance, Food Not Provided Or Food Provided "),t.housingAllowance>0&&(t.housingProvidedFree||t.housingNotProvided)&&(n+="only one value allowed : either Housing Allowance, Housing Not Provided Or Housing Provided "),t.transportAllowance>0&&(t.transportProvidedFree||t.transportNotProvided)&&(n+="only one value allowed : either Transport Allowance, Transport Not Provided Or Transport Provided "),null===t.cVRefId&&(t.cVRefId=0),""===n?(this.updateEmp.emit(t),this.bsModalRef.hide()):this.toastr.warning(n,"Invalid data")}close(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(v.UZ),e.Y36(f._W),e.Y36(O.z),e.Y36(s.qu),e.Y36(ne))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-employment-modal"]],inputs:{emp:"emp",updateEmp:"updateEmp"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer","my-0"],[1,"modal-header","my-0"],["title","edit emp data",1,"w35","btn","btn-success","fa","fa-save",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-close","pull-right",3,"click"],[1,"modal-body","my-0"],[3,"formGroup"],["for","applicationNo",1,"stdd","w150","b"],[1,"stdd","w200"],["for","customerName",1,"stdd","w150","b"],[1,"stdd","w150","b"],[1,"stdd","w175"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","offerAccepted",2,"border","color(from color srgb r g b)","font-size","smaller",3,"items"],[1,"stdd","b","w150"],[2,"display","inline-block","width","110px"],["type","text","placeholder","Offer accepted On","formControlName","offerAcceptanceConcludedOn","bsDatepicker","",1,"stdd","w110",3,"bsValue","bsConfig"],[2,"border","double","margin-top","2px","margin-bottom","2px"],["type","text","title","salary currency","formControlName","salaryCurrency",1,"stdd","w50","ml-10"],["type","number","title","salary","formControlName","salary",1,"stdd","w75"],[1,"stdd","w100","b"],["for","housingAllowance",1,"stdd","w150"],["type","number","title","housing allowance","formControlName","housingAllowance",1,"stdd","w75"],["type","checkbox","formControlName","housingProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","housingNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],[1,"stdd","w150"],["type","number","title","Food Allowance","formControlName","foodAllowance",1,"stdd","w75"],["type","checkbox","formControlName","foodProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","foodNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","Transportation",1,"stdd","w150"],["type","number","title","Transportation allowance","formControlName","transportAllowance",1,"stdd","w75"],["type","checkbox","formControlName","transportProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","transportNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","otherAllowance",1,"stdd","w150"],["type","number","title","Other allowance","formControlName","otherAllowance",1,"stdd","w75"]],template:function(n,r){1&n&&(e.YNc(0,re,5,0,"div",0),e.YNc(1,oe,62,8,"div",1),e._UZ(2,"div",2)),2&n&&(e.Q6J("ngIf",r.emp),e.xp6(1),e.Q6J("ngIf",r.emp))},dependencies:[c.O5,b.Np,b.Y5,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.sg,s.u,M.w9],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.bordernone[_ngcontent-%COMP%]{border:none}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.mL5[_ngcontent-%COMP%]{margin-right:5px!important}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle}.b[_ngcontent-%COMP%]{font-weight:700}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}"]})}return i})();var P=m(6306),K=m(9397),E=m(8180),J=m(7783);let F=(()=>{class i{constructor(t,n){this.http=t,this.accountService=n,this.apiUrl=A.N.apiUrl,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.sParams=new I,this.cache=new Map,this.cacheSel=new Map,this.accountService.currentUser$.pipe((0,E.q)(1)).subscribe(r=>{this.user=r})}setParams(t){this.sParams=t}getParams(){return this.sParams}getPendingSelections(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.Wc)(t);return(0,_.Tr)(this.apiUrl+"CVRef/cvsreferred",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}registerSelectionDecisions(t){return this.http.post(this.apiUrl+"Selection",t)}getSelectionRecords(t){const n=this.cacheSel.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.Wc)(t);return(0,_.Tr)(this.apiUrl+"Selection",r,this.http).pipe((0,Z.U)(o=>(this.cacheSel.set(Object.values(t).join("-"),o),o)))}editSelectionDecision(t){return this.http.put(this.apiUrl+"selection",t)}deleteSelectionDecision(t){return this.http.delete(this.apiUrl+"selection/"+t)}getEmployment(t){return this.http.get(this.apiUrl+"selection/employmentbycvrefid/"+t)}getEmploymentFromEmploymentId(t){return this.http.get(this.apiUrl+"selection/employment/"+t)}getEmploymentDtoFromSelectionId(t){return this.http.get(this.apiUrl+"selection/employmentfromSelId/"+t)}getEmploymentFromSelectionId(t){return this.http.get(this.apiUrl+"selection/employmentfromSelId/"+t)}updateEmployment(t){return this.http.put(this.apiUrl+"employment/employment",t)}getSelectionDtoByOrderNo(t){}registerOfferAccepted(t){return this.http.put(this.apiUrl+"selection/offeraccepted",t)}getSelectionBySelDecisionId(t){return this.http.get(this.apiUrl+"selection/selectionBySelDecisionId/"+t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN),e.LFG(J.B))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function de(i,d){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Candidate:"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.candidateName)}}const ae=function(){return{dateInputFormat:"YYYY-MM-DD"}};function le(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e._uU(2,"Customer"),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"div",11)(6,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.update())}),e.qZA(),e.TgZ(7,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.bsModalRef.hide())}),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteSel())}),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"div",9),e._uU(11,"Category Selected"),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",9),e._uU(16,"Selected On"),e.qZA(),e._UZ(17,"input",15)(18,"br"),e.TgZ(19,"label",9),e._uU(20,"Selection Status"),e.qZA(),e.TgZ(21,"div",10),e._UZ(22,"ng-select",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.customerName),e.xp6(9),e.Oqu(t.categoryRefAndName),e.xp6(4),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(5,ae)),e.xp6(5),e.Q6J("items",t.statuses)}}let ce=(()=>{class i{constructor(t,n,r,o,a){this.bsModalRef=t,this.confirmService=n,this.toastr=r,this.fb=o,this.service=a,this.updateObj=new e.vpe,this.candidateName="",this.customerName="",this.categoryRefAndName="",this.form=new s.cw({}),this.bsValueDate=new Date,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.statuses=[{status:"selected"},{status:"Rejected - Profile does not match"},{status:"Rejected - High Salary expectation"},{status:"Rejected - over-age"},{status:"Rejected - Qualification does not match"},{status:"Rejected - Low Exp"},{status:"Rejected - Exp not relevant"},{status:"Rejected - profile not relevant"}]}ngOnInit(){this.sel&&this.Initialize(this.sel),console.log("recd in in modal ngOnINit:",this.sel)}Initialize(t){this.form=this.fb.group({id:[t.id],candidateId:t.candidateId??0,candidateName:[t.candidateName],applicationNo:[t.applicationNo??0],customerName:[t.customerName],professionName:[t.professionName],cvRefId:[t.cvRefId],orderItemId:t.orderItemId??0,professionId:t.professionId??0,selectedOn:[t.selectedOn],selectionStatus:[t.selectionStatus],remarks:t.remarks})}update(){this.updateObj.emit(this.form.value),this.bsModalRef.hide()}deleteSel(){if(this.sel){const n=this.service.deleteSelectionDecision(this.sel.id);this.confirmService.confirm("Confirm Delete","This will delete this selection record, along with all related records like Employments and all deployment records.  Or, depending upon settings, the deletion might fail if there are related records").pipe((0,T.w)(o=>n.pipe((0,P.K)(a=>(console.log("Error in deleting the order",a),(0,h.of)())),(0,K.b)(a=>this.toastr.success("deleted Selection record")))),(0,P.K)(o=>(this.toastr.error("Error in getting delete confirmation",o),(0,h.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},o=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",o)}),this.bsModalRef.hide()}}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(v.UZ),e.Y36(O.z),e.Y36(f._W),e.Y36(s.qu),e.Y36(F))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-selection-modal"]],inputs:{updateObj:"updateObj"},decls:5,vars:3,consts:[["class","modal-header my-0",4,"ngIf"],[1,"modal-body","my-0"],[3,"formGroup"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"stdd","w100","b"],[1,"stdd","w400","blue","mx-1"],[1,"mt-2"],[1,"stdd","w150","b"],[1,"stdd","w175"],[1,"stdd","pull-right"],["type","button",1,"btn","fa","fa-save","green",3,"click"],["type","button","aria-label","Close",1,"btn","btn-close",3,"click"],["title","Delete this Selection",1,"btn","red","fa","fa-trash","fa-sm",3,"click"],["type","text","placeholder","Selected On","formControlName","selectedOn","bsDatepicker","",1,"stdd","w150",3,"bsValue","bsConfig"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","selectionStatus",2,"border","color(from color srgb r g b)",3,"items"]],template:function(n,r){1&n&&(e.YNc(0,de,5,1,"div",0),e.TgZ(1,"div",1)(2,"form",2),e.YNc(3,le,23,6,"div",3),e.qZA()(),e._UZ(4,"div",4)),2&n&&(e.Q6J("ngIf",r.sel),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("ngIf",r.sel))},dependencies:[c.O5,b.Np,b.Y5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,M.w9],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:2px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}"]})}return i})();var S=m(7012);function me(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.remindCandidateForDecision())}),e._uU(4),e.qZA(),e.TgZ(5,"div",3),e._uU(6),e.qZA(),e.TgZ(7,"div",3),e._uU(8),e.qZA(),e.TgZ(9,"div",4),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.displayEmployment())}),e._uU(13),e.qZA(),e.TgZ(14,"div",6),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editSelection())}),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteSelection())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.selection.applicationNo),e.xp6(2),e.Oqu(t.selection.candidateName),e.xp6(2),e.Oqu(t.selection.customerName),e.xp6(2),e.Oqu(t.selection.categoryRef),e.xp6(2),e.Oqu(e.xi3(11,7,t.selection.referredOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.selection.selectionStatus),e.xp6(2),e.hij("",e.xi3(16,10,t.selection.selectedOn,"dd-MMM-yy")," ")}}let pe=(()=>{class i{constructor(t){this.service=t,this.editEmploymentEvent=new e.vpe,this.deleteSelectionEvent=new e.vpe,this.editSelectionEvent=new e.vpe,this.remindCandidateForDecisionEvent=new e.vpe}displayEmployment(){this.service.getEmploymentFromSelectionId(this.selection.id).subscribe({next:t=>{this.editEmploymentEvent.emit(null!==t?t:null)}})}editSelection(){this.service.getSelectionBySelDecisionId(this.selection?.id).subscribe({next:t=>{console.log("response from selection-line",t),this.editSelectionEvent.emit(t)}})}deleteSelection(){this.selection&&this.deleteSelectionEvent.emit(this.selection.id)}remindCandidateForDecision(){this.selection&&this.remindCandidateForDecisionEvent.emit(this.selection.id)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(F))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-selection-line"]],inputs:{selection:"selection"},outputs:{editEmploymentEvent:"editEmploymentEvent",deleteSelectionEvent:"deleteSelectionEvent",editSelectionEvent:"editSelectionEvent",remindCandidateForDecisionEvent:"remindCandidateForDecisionEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","w50"],["title","email reminder to the candidate for his selection decision",1,"stdd","w150","cursorPointer",3,"click"],[1,"stdd","w200"],[1,"stdd","w100"],["title","register candidate interest in the offer",1,"stdd","w150","cursorPointer",3,"click"],["title","display selection data",1,"stdd","w100","cursorPointer"],["title","edit selection detais of this candidate",1,"btn","fa","fa-pencil",3,"click"],["title","delete this selection data",1,"btn","fa","fa-trash","fa-sm","red",3,"click"]],template:function(n,r){1&n&&e.YNc(0,me,19,13,"div",0),2&n&&e.Q6J("ngIf",r.selection)},dependencies:[c.O5,c.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.green[_ngcontent-%COMP%]{color:#006400}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00008b}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}"]})}return i})();const ue=["search"];function ge(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," No selection records found matching your criteria\n"),e.qZA())}function he(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"h6",8),e._uU(2,"Selections based on parameters"),e.qZA(),e.TgZ(3,"pagination",9),e.NdJ("pageChanged",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onPageChanged(r))}),e._uU(4," >"),e.qZA(),e.TgZ(5,"div",10)(6,"input",11,12),e.NdJ("keyup.enter",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e.qZA(),e.TgZ(8,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e._uU(9,"Search"),e.qZA(),e.TgZ(10,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onReset())}),e._uU(11,"Reset"),e.qZA()(),e.TgZ(12,"button",15),e._uU(13,"Close"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function _e(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"app-selection-line",17),e.NdJ("editEmploymentEvent",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.displayEmploymentModal(r,a))})("deleteSelectionEvent",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteSelection(r))})("editSelectionEvent",function(r){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.displaySelectionModal(r,a))})("remindCandidateForDecisionEvent",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.remindCandidateForDecision(r))}),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(1),e.Q6J("selection",t)}}let fe=(()=>{class i{constructor(t,n,r,o,a,l){this.service=t,this.confirmService=n,this.toastr=r,this.router=o,this.activatedRoute=a,this.bsModalService=l,this.selections=[],this.sParams=new I,this.totalCount=0,this.pageIndex=1,this.todayDate=new Date(Date.now()),this.loading=!1,this.SelMsgsToCandidates=!1,this.SelSMSToCandidates=!1,this.RejMsgsToCandidates=!1,this.RejSMSToCandidates=!1,this.MsgsToClient=!1,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-Low Salary"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}]}ngOnInit(){this.getSelectionsPaged(this.sParams)}getSelectionsPaged(t){this.service.getSelectionRecords(t).subscribe({next:n=>{n.result&&n.pagination&&(this.selections=n.result,this.pagination=n.pagination,this.totalCount=n.count)},error:n=>console.log(n)})}registerCandidateAcceptance(t){}updateSelection(t){return this.service.editSelectionDecision(t).subscribe(()=>{this.toastr.success("selection decision updated")},n=>{this.toastr.error(n)})}remindCandidateForDecision(t){}deleteSelection(t){return this.service.deleteSelectionDecision(t).subscribe(n=>{this.toastr.success("the chosen selection deleted")},n=>{this.toastr.error(n)})}displayEmploymentModal(t,n){null!==t?(this.bsModalRef=this.bsModalService.show(se,{class:"modal-dialog-centered modal-md",initialState:{emp:t,candidateName:n.applicationNo+"-"+n.candidateName,categoryRef:n.categoryRef,companyName:n.customerName}}),this.bsModalRef.content.updateEmp.pipe((0,q.h)(a=>null!==a),(0,T.w)(a=>{var l=this.selections.findIndex(u=>u.id==n.id);l>=0&&(this.selections[l].selectionStatus=a.offerAccepted);let p=new Date(a.offerAcceptanceConcludedOn);return p.setHours(p.getHours()+9),a.offerAcceptanceConcludedOn=p,this.service.updateEmployment(a)})).subscribe(a=>{a?this.toastr.success("Employment updated","Success"):this.toastr.warning("Failed to update the Employment Object","Failure")})):this.toastr.warning("No Employment object returned from the modal form")}displaySelectionModal(t,n){this.bsModalRef=this.bsModalService.show(ce,{class:"modal-dialog-centered modal-md",initialState:{sel:t,candidateName:n.applicationNo+"-"+n.candidateName,customerName:n.customerName,categoryRefAndName:n.categoryRef}}),this.bsModalRef.content.updateObj.pipe((0,q.h)(a=>null!==a),(0,T.w)(a=>{var l=this.selections.findIndex(p=>p.id==n.id);return l>=0&&(this.selections[l].selectedOn=a.selectedOn,this.selections[l].selectionStatus=a.selectionStatus),a.selectedOn.setHours(a.selectedOn.getHours()+9),this.service.editSelectionDecision(a)})).subscribe(a=>{a?this.toastr.success("Selection model edited","Success"):this.toastr.warning("Failed to update the selection model","Failure")})}onPageChanged(t){this.service.getParams(),this.sParams.pageNumber!==t&&(this.sParams.pageNumber=t.page,this.getSelectionsPaged(this.sParams))}onSortSelected(t){var n=t.value;const r=this.service.getParams();r.sort=n,r.pageNumber=1,r.pageSize=10,this.service.setParams(r),this.getSelectionsPaged(r)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getSelectionsPaged(t)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new I,this.service.setParams(this.sParams),this.getSelectionsPaged(this.sParams)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(F),e.Y36(O.z),e.Y36(f._W),e.Y36(g.F0),e.Y36(g.gz),e.Y36(v.tT))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-selections"]],viewQuery:function(n,r){if(1&n&&e.Gf(ue,5),2&n){let o;e.iGM(o=e.CRH())&&(r.searchTerm=o.first)}},decls:19,vars:3,consts:[[4,"ngIf"],["class","d-flex justify-contents-between align-items-center","style","display: inline-block; margin-left: 15px; vertical-align: top;",4,"ngIf"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","row",4,"ngFor","ngForOf"],[1,"d-flex","justify-contents-between","align-items-center",2,"display","inline-block","margin-left","15px","vertical-align","top"],[1,"mx-5"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"form-inline",2,"margin-left","50px !important"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"btn","btn-outline-success","mx-1",3,"click"],["routerLink","/administration",1,"btn","btn-outline-success","mx-5"],[1,"row"],[3,"selection","editEmploymentEvent","deleteSelectionEvent","editSelectionEvent","remindCandidateForDecisionEvent"]],template:function(n,r){1&n&&(e.YNc(0,ge,2,0,"div",0),e.YNc(1,he,14,3,"div",1),e.TgZ(2,"label",2),e._uU(3,"App No"),e.qZA(),e.TgZ(4,"label",3),e._uU(5,"Candidate Name"),e.qZA(),e.TgZ(6,"label",4),e._uU(7,"Customer Name"),e.qZA(),e.TgZ(8,"label",4),e._uU(9,"Category Ref"),e.qZA(),e.TgZ(10,"label",5),e._uU(11,"Referred On"),e.qZA(),e.TgZ(12,"label",3),e._uU(13,"Selection Status"),e.qZA(),e.TgZ(14,"label",5),e._uU(15,"Sel/Rej"),e._UZ(16,"br"),e._uU(17,"Date"),e.qZA(),e.YNc(18,_e,2,1,"div",6)),2&n&&(e.Q6J("ngIf",!r.selections),e.xp6(1),e.Q6J("ngIf",r.selections&&r.pagination),e.xp6(17),e.Q6J("ngForOf",r.selections))},dependencies:[c.sg,c.O5,g.rH,S.Qt,pe],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;font-weight:700;vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}"]})}return i})(),ve=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-employments"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"employments works!"),e.qZA())}})}return i})(),we=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-customers"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"customers works!"),e.qZA())}})}return i})(),be=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-categories"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"categories works!"),e.qZA())}})}return i})(),xe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-industries"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"industries works!"),e.qZA())}})}return i})(),Ce=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-qualifications"]],decls:2,vars:0,template:function(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"qualifications works!"),e.qZA())}})}return i})();var Ze=m(4408),D=m(4769),k=m(8241);class z{constructor(){this.taskId=0,this.taskType="",this.taskDate=new Date("1900-01-01"),this.candidateId=0,this.applicationNo=0,this.resumeId="",this.assignedToUsername="",this.taskOwnerUsername="",this.taskStatus="",this.orderId=0,this.sort="taskDate",this.pageNumber=1,this.pageSize=15,this.search=""}}let B=(()=>{class i{constructor(t,n){this.http=t,this.toastr=n,this.apiUrl=A.N.apiUrl,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.oParams=new z,this.tasks=[],this.cache=new Map,this.cacheTasks=new Map}createOrderAssignmentTasks(t){return this.http.post(this.apiUrl+"Task/assignToHRExecs",t)}addTask(t){return this.http.post(this.apiUrl+"Task",t)}getTasks(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.hD)(t);return(0,_.Tr)(this.apiUrl+"Task/pagedTasks",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}getTask(t){return this.http.get(this.apiUrl+"Task/taskbyid/"+t)}getTaskByOrderIdAndTaskType(t,n){return this.http.get(this.apiUrl+"Task/task/"+t+"/"+n)}getTaskFromResumeId(t){return this.http.get(this.apiUrl+"task/getorcreatebyresumeid/"+t)}getOrCreateTaskFromParams(t,n){var r=this.oParams;return r.resumeId=t,r.taskType="Prosective",r.assignedToUsername=n,this.http.post(this.apiUrl+"Task/prospectivetaskForResumeId",r)}createNewTask(t){return this.http.post(this.apiUrl+"Task/task",t)}UpdateTask(t){return this.http.put(this.apiUrl+"Task/task",t)}deleteTaskFromCache(t){this.cacheTasks.delete(t),this.pagination.totalItems--}deleteTask(t){return this.http.delete(this.apiUrl+"Task/task/"+t)}completeTask(t){return this.http.put(this.apiUrl+"Task/completeTask/"+t,{})}deleteTaskItem(t){return this.http.delete(this.apiUrl+"Task/taskitem/"+t).subscribe(()=>{},n=>{this.toastr.error(n),console.log("error in deleting task",n)})}getTaskFromAny(t){return this.http.get(this.apiUrl+"task/fromany/"+t)}getPendingTasksOfLoggedInUser(){var t=new z;return t.pageNumber=1,t.pageSize=15,this.oParams=t,this.getTasks(t)}setOParams(t){this.oParams=t}getOParams(){return this.oParams}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN),e.LFG(f._W))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Q=m(8482);class Ae{constructor(){this.orderId=0,this.recipientUsername="",this.dateForwarded=new Date}}class H{constructor(){this.orderNo=0,this.orderId=0,this.fwdDateFrom=new Date,this.fwdDateUpto=new Date,this.customerId=0,this.professionId=0,this.sort="orderno",this.pageNumber=1,this.pageSize=10,this.search=""}}let N=(()=>{class i{constructor(t){this.http=t,this.apiUrl=A.N.apiUrl,this.orderFwds=[],this.fwdParams=new H,this.cache=new Map}getForwardsBriefPaginated(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=function Te(i){let d=new w.LE;return d=d.append("pageNumber",i.pageNumber),d=d.append("pageSize",i.pageSize),0!==i.customerId&&(d=d.append("customerId",i.customerId.toString())),0!==i.orderId&&(d=d.append("orderId",i.orderId.toString())),i.fwdDateFrom&&i.fwdDateUpto&&(d=d.append("orderDateFrom",i.fwdDateFrom.toString()),d=d.append("orderDateUpto",i.fwdDateUpto.toString())),i.search&&(d=d.append("search",i.search)),d=d.append("sort",i.sort),d}(t);return(0,_.Tr)(this.apiUrl+"OrderForward/pagedlist",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}forwardDLtoSelectedAgents(t){return this.http.post(this.apiUrl+"Orderforward",t)}getOrderForwardOfAnOrder(t){return this.http.get(this.apiUrl+"Orderforward/getOrGenerateOrderFwdToAgent/"+t)}getAssociatesForwardedForADL(t){return this.http.get(this.apiUrl+"Orderforward/associatesforwardedForOrderId/"+t)}generateObjToForwarOrderToAgent(t){return this.http.get(this.apiUrl+"OrderForward/generateOrderFwdToAgent/"+t,{})}insertForwarOrderToAgent(t){return this.http.post(this.apiUrl+"OrderForward/insertOrderFwdToAgent",t)}updateForwarOrderToAgent(t){return this.http.put(this.apiUrl+"OrderForward/updateOrderFwdToAgent",t)}forwarOrderToHR(t){return this.http.post(this.apiUrl+"OrderForward/updateOrderFwdToHR",{model:t})}generateObjToForwardDLtoHR(t){return this.http.get(this.apiUrl+"OrderForward/generateOrderFwdToHR/"+t,{})}setFwdParams(t){this.fwdParams=t}getFwdParams(){return this.fwdParams}deleteForward(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwd/"+t)}deleteOrderFwdCategory(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwdCategory/"+t)}deleteOrderFwdCatOfficial(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwdCatOfficial/"+t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Oe(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," No Order data available\n"),e.qZA())}function Me(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.editClicked())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.order.customerName," ")}}function Ie(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.forwardOrderToHRDept())}),e._uU(1," Not forwarded"),e.qZA()}}function ye(i,d){if(1&i&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.order.forwardedToHRDeptOn,"dd-MMM-yy")," ")}}function ke(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"date"),e.qZA(),e.YNc(7,Me,2,1,"div",4),e.TgZ(8,"div",5),e._uU(9),e.qZA(),e.TgZ(10,"div",6),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.contractReviewClicked())}),e._uU(11),e.qZA(),e.TgZ(12,"div",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.contractReviewClicked())}),e._uU(13),e.ALo(14,"date"),e.qZA(),e.YNc(15,Ie,2,0,"div",8),e.YNc(16,ye,3,4,"div",9),e.TgZ(17,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.dlForwardToAssociatesClicked())}),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.AcknowledgeClicked())}),e.qZA(),e.TgZ(19,"div",12)(20,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editClicked())}),e.qZA(),e.TgZ(21,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cvReferredClicked())}),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteClicked())}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.order.orderNo),e.xp6(2),e.Oqu(e.xi3(6,9,t.order.orderDate,"dd-MMM-yy")),e.xp6(2),e.Q6J("ngIf","concluded"!=t.order.status),e.xp6(2),e.Oqu(t.order.cityOfWorking),e.xp6(1),e.Q6J("ngClass","Accepted"===t.order.contractReviewStatus?"green":"Accepted with regrets"===t.order.contractReviewStatus?"blue":"red"),e.xp6(1),e.hij(" ",t.order.contractReviewStatus," "),e.xp6(2),e.hij(" ",e.xi3(14,12,t.order.contractReviewedOn,"dd-MMM-yy")," "),e.xp6(2),e.Q6J("ngIf",null===t.order.forwardedToHRDeptOn),e.xp6(1),e.Q6J("ngIf",null!==t.order.forwardedToHRDeptOn)}}let Ne=(()=>{class i{constructor(t,n){this.orderFwdService=t,this.toastr=n,this.editEvent=new e.vpe,this.contractReviewEvent=new e.vpe,this.orderFwdToAssociatesEvent=new e.vpe,this.deleteEvent=new e.vpe,this.acknowledgeToClientEvent=new e.vpe,this.cvreferredEvent=new e.vpe,this.orderAssessmentItemEvent=new e.vpe,this.menuTopLeftPosition={x:0,y:0}}ngOnInit(){}contractReviewClicked(){this.contractReviewEvent.emit(this.order.id)}orderAssessmentItemClicked(){this.order&&this.orderAssessmentItemEvent.emit(this.order.id)}editClicked(){console.log("order iin orderitem",this.order),console.log("orderitem edit id emitted:",this.order?.id),this.editEvent.emit(this.order.id)}deleteClicked(){this.deleteEvent.emit(this.order?.id)}forwardOrderToHRDept(){if(this.order){var t=new Ae;t.dateForwarded=new Date,t.orderId=this.order?.id,this.orderFwdService.forwarOrderToHR(t).subscribe({next:n=>{n?this.toastr.success("task created for HR Dept","success"):this.toastr.warning("failed to forward the Order to HR Dept","failure")},error:n=>this.toastr.error(n,"error encountered")})}}dlForwardToAssociatesClicked(){this.orderFwdToAssociatesEvent.emit(this.order?.id)}AcknowledgeClicked(){this.acknowledgeToClientEvent.emit(this.order?.id)}cvReferredClicked(){this.cvreferredEvent.emit(this.order?.id)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(N),e.Y36(f._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-item"]],inputs:{order:"order"},outputs:{editEvent:"editEvent",contractReviewEvent:"contractReviewEvent",orderFwdToAssociatesEvent:"orderFwdToAssociatesEvent",deleteEvent:"deleteEvent",acknowledgeToClientEvent:"acknowledgeToClientEvent",cvreferredEvent:"cvreferredEvent",orderAssessmentItemEvent:"orderAssessmentItemEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[2,"display","inline-block","width","max-content"],[1,"stdd","w80"],[1,"stdd","w90"],["class","stdd w200","title","this order cannot be edited as it is concluded",3,"click",4,"ngIf"],[1,"stdd","w100"],[1,"stdd","w150","cursorpointer",3,"ngClass","click"],["title","click for technical & commercial review of this order",1,"stdd","w100",3,"click"],["class","stdd w100 fontSmall red cursorpointer","title","click to forward this Order to HR Dept Head",3,"click",4,"ngIf"],["class","stdd w100",4,"ngIf"],["title","Forward this order to Associates (to be selected)",1,"stdd","w15","fa","fa-users",3,"click"],["title","compose email message of acknowldgement to client",1,"stdd","w15","fa","fa-envelope",3,"click"],[2,"display","inline-block","width","250px"],["title","edit this DL","type","button",1,"stdd","w15","fa","fa-pencil",3,"click"],["title","cvs forwarded","type","button","title","CVs already referrED to clients for this Order",1,"stdd","w15","fa","fa-circle",3,"click"],["title","delete the DL","type","button",1,"stdd","fa","fa-trash","red",3,"click"],["title","this order cannot be edited as it is concluded",1,"stdd","w200",3,"click"],["title","click to forward this Order to HR Dept Head",1,"stdd","w100","fontSmall","red","cursorpointer",3,"click"]],template:function(n,r){1&n&&(e.YNc(0,Oe,2,0,"div",0),e.YNc(1,ke,23,15,"div",0)),2&n&&(e.Q6J("ngIf",null===r.order),e.xp6(1),e.Q6J("ngIf",null!=r.order))},dependencies:[c.mk,c.O5,c.uU],styles:[".stdd[_ngcontent-%COMP%]{margin:1px;padding-left:1px;padding-right:1px;display:inline-block!important;line-height:1em;vertical-align:top}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.alignR[_ngcontent-%COMP%]{text-align:right}.w30[_ngcontent-%COMP%]{width:30px}.w80[_ngcontent-%COMP%]{width:80px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}.green[_ngcontent-%COMP%]{color:green}.vAlignMiddle[_ngcontent-%COMP%]{vertical-align:middle}.fontSmall[_ngcontent-%COMP%]{font-size:small}.borderAqua[_ngcontent-%COMP%]{border:aqua}.w15[_ngcontent-%COMP%]{width:25px}"]})}return i})();const Ue=["search"];function qe(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"pagination",14),e.NdJ("pageChanged",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onPageChanged(r))}),e._uU(2," >"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Pe(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"input",16,17),e.NdJ("keyup.enter",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e.qZA(),e.TgZ(3,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onReset())}),e._uU(6,"Reset"),e.qZA(),e.TgZ(7,"button",20),e._uU(8,"Add"),e.qZA()()}}function Fe(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1,"No orders on record"),e.qZA())}function Se(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"app-order-item",23),e.NdJ("editEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.editOrder(r))})("contractReviewEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.contractReviewOrder(r))})("orderFwdToAssociatesEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.orderForwardToAssociates(r))})("orderForwardedToAssociatesEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.orderForwardedToAssociates(r))})("deleteEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.deleteOrder(r))})("acknowledgeToClientEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.acknowledgeToClient(r))})("cvreferredEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cvsReferred(r))})("orderAssessmentItemEvent",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.orderAssessmentItem(r))}),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(1),e.Q6J("order",t)}}function Re(i,d){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Se,2,1,"div",21),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.orders)}}let Ee=(()=>{class i{constructor(t,n,r,o,a,l,p,u){this.service=t,this.accountsService=n,this.taskService=r,this.router=o,this.activatedRoute=a,this.toastr=l,this.customerService=p,this.confirmService=u,this.orders=[],this.oParams=new D.R,this.totalCount=0,this.customers=[],this.title="context-menu",this.sortOptions=[{name:"By Order No Asc",value:"orderno"},{name:"By Order No Desc",value:"ordernodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Contract Reviewed Asc",value:"reviewed"},{name:"By Contract Rvwd Desc",value:"reveiweddesc"}],this.orderStatus=[{name:"Not Reviewed",value:"NotReviewed"},{name:"Reviewed and Approved",value:"ReviewedAndApproved"},{name:"Reviewed and declined",value:"ReviewedAndDeclined"}],this.accountsService.currentUser$.pipe((0,E.q)(1)).subscribe(x=>this.user=x)}ngOnInit(){this.getOrders(this.oParams),this.activatedRoute.data.subscribe({next:t=>{this.customers=t.customers}})}getOrders(t){this.service.getOrdersBrief(t).subscribe({next:n=>{n.result&&n.pagination&&(this.orders=n.result,this.pagination=n.pagination,this.totalCount=n.count)},error:n=>console.log(n)})}onSearch(){const t=this.service.getOParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setOParams(t),this.getOrders(t)}onReset(){this.searchTerm.nativeElement.value="",this.oParams=new D.R,this.service.setOParams(this.oParams),this.getOrders(this.oParams)}onSortSelected(t){var n=t?.target.value;this.oParams.pageNumber=1,this.oParams.sort=n,this.getOrders(this.oParams)}onPageChanged(t){const n=this.service.getOParams()??new D.R;n.pageNumber!==t&&(n.pageNumber=t.page,this.service.setOParams(n),this.getOrders(n))}deleteOrder(t){this.confirmService.confirm("confirm delete this Order","confirm delete order").pipe((0,T.w)(n=>this.service.deleteOrder(t).pipe((0,P.K)(r=>(console.log("Error in deleting the order",r),(0,h.of)())),(0,K.b)(r=>this.toastr.success("deleted Order")))),(0,P.K)(n=>(this.toastr.error("Error in getting delete confirmation",n),(0,h.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("order deleted")},n=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",n)})}editOrder(t){console.log("edit order event:",t),this.navigateByRoute(t,"/administration/orders/edit",!0)}contractReviewOrder(t){this.navigateByRoute(t,"orders/review",!0)}orderAssessmentItem(t){this.navigateByRoute(t,"administration/orderassessmentitem",!0)}orderForwardToAssociates(t){this.navigateByRoute(t,"administration/orderfwd",!0)}orderForwardedToAssociates(t){this.navigateByRoute(t,"Administration/ordersforwarded",!0)}acknowledgeToClient(t){this.service.acknowledgeOrderToClient(t).subscribe({next:n=>{n?this.toastr.success("message of acknowledgement composed and saved in Messages Draft"):this.toastr.warning("failed to compose message of acknowledgement")},error:n=>this.toastr.error("Error in composing acknowldgement message to client",n)})}cvsReferred(t){this.navigateByRoute(t,"admin/cvreferred",!1)}navigateByRoute(t,n,r){this.router.navigate([n+"/"+t],{state:{user:this.user,toedit:r,returnUrl:"/administration/orders"}})}documentClick(){}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(k.p),e.Y36(J.B),e.Y36(B),e.Y36(g.F0),e.Y36(g.gz),e.Y36(f._W),e.Y36(Q.v),e.Y36(O.z))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-orders-listing"]],viewQuery:function(n,r){if(1&n&&e.Gf(Ue,5),2&n){let o;e.iGM(o=e.CRH())&&(r.searchTerm=o.first)}},hostBindings:function(n,r){1&n&&e.NdJ("click",function(){return r.documentClick()},!1,e.evT)},decls:27,vars:4,consts:[[2,"display","inline-block"],["style","display: inline-block; margin-left: 15px; vertical-align: top;",4,"ngIf"],[1,"row",2,"margin-left","5px"],[1,"d-flex","justify-contents-between","align-items-center"],["class","form-inline","style","margin-left: 50px;",4,"ngIf"],["routerLink","/admin",1,"btn","btn-outline-success","mx-5"],["routerLink","/admin",1,"btn","btn-outline-success","pull-right"],[1,"form-inline","b"],[1,"stdd","w70","b"],[1,"stdd","w100","b"],[1,"stdd","w200","b"],[1,"stdd","w150","b"],[4,"ngIf"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"form-inline",2,"margin-left","50px"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"btn","btn-outline-success","mx-1",3,"click"],["routerLink","/orders/add",1,"btn","btn-outline-success"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"order","editEvent","contractReviewEvent","orderFwdToAssociatesEvent","orderForwardedToAssociatesEvent","deleteEvent","acknowledgeToClientEvent","cvreferredEvent","orderAssessmentItemEvent"]],template:function(n,r){1&n&&(e.TgZ(0,"h6",0),e._uU(1,"Orders Listing"),e.qZA(),e.YNc(2,qe,3,3,"div",1),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,Pe,9,0,"div",4),e.TgZ(6,"button",5),e._uU(7,"Close"),e.qZA(),e.TgZ(8,"button",6),e._uU(9,"Back"),e.qZA()(),e.TgZ(10,"div",7)(11,"div",8),e._uU(12,"Order No"),e.qZA(),e.TgZ(13,"div",9),e._uU(14,"Order Date"),e.qZA(),e.TgZ(15,"div",10),e._uU(16,"Customer Name"),e.qZA(),e.TgZ(17,"div",9),e._uU(18,"City"),e.qZA(),e.TgZ(19,"div",11),e._uU(20,"Review status"),e.qZA(),e.TgZ(21,"div",9),e._uU(22,"Reviewed On"),e.qZA(),e.TgZ(23,"div",9),e._uU(24,"Forwarded To HR On"),e.qZA()(),e.YNc(25,Fe,2,0,"div",12),e.YNc(26,Re,2,1,"div",12),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",void 0!==r.pagination),e.xp6(3),e.Q6J("ngIf",r.orders),e.xp6(20),e.Q6J("ngIf",!r.orders),e.xp6(1),e.Q6J("ngIf",r.orders))},dependencies:[c.sg,c.O5,g.rH,S.Qt,Ne],styles:[".stdd[_ngcontent-%COMP%]{margin:1px;padding:1px;display:inline-block!important;font-size:small}.alignR[_ngcontent-%COMP%]{text-align:right}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}.vAlignMiddle[_ngcontent-%COMP%]{vertical-align:middle}.fontSmall[_ngcontent-%COMP%]{font-size:small}.borderAqua[_ngcontent-%COMP%]{border:aqua}"]})}return i})();class Je{constructor(){this.id=0,this.orderNo=0,this.orderDate=new Date("1900-01-01"),this.customerId=0,this.customerName="",this.buyerEmail="",this.orderRef="",this.orderRefDate=new Date,this.salesmanId=0,this.salesmanName="",this.projectManagerId=0,this.medicalProcessInchargeEmpId=0,this.visaProcessInchargeEmpId=0,this.emigProcessInchargeId=0,this.travelProcessInchargeId=0,this.completeBy=new Date,this.country="",this.cityOfWorking="",this.contractReviewStatus="",this.estimatedRevenue=0,this.status="",this.forwardedToHRDeptOn=new Date("1900-01-01"),this.orderItems=[]}}function De(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20),e._uU(4),e.qZA(),e.TgZ(5,"div",21),e._uU(6),e.qZA(),e.TgZ(7,"span",18)(8,"input",22),e.NdJ("change",function(){const o=e.CHM(t).$implicit;return e.KtG(o.checked=!o.checked)}),e.qZA()(),e.TgZ(9,"span",23),e._uU(10),e.qZA(),e.TgZ(11,"span",24)(12,"input",22),e.NdJ("change",function(){const o=e.CHM(t).$implicit;return e.KtG(o.checkedMobile=!o.checkedMobile)}),e.qZA()(),e.TgZ(13,"span",25),e._uU(14),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(2),e.Oqu(t.officialName),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.city),e.xp6(2),e.Q6J("checked",t.checked)("disabled",t.customerIsBlacklisted||void 0===t.officialEmailId),e.xp6(2),e.Oqu(t.officialEmailId),e.xp6(2),e.Q6J("checked",t.checkedMobile)("disabled",t.customerIsBlacklisted&&void 0===t.mobileNo),e.xp6(2),e.Oqu(t.mobileNo)}}function Qe(i,d){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2,"Official Name"),e.qZA(),e.TgZ(3,"div",11),e._uU(4,"Customer Name"),e.qZA(),e.TgZ(5,"div",12),e._uU(6,"City"),e.qZA(),e.TgZ(7,"div",13),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"div",14),e._uU(10,"SMS"),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"form",15,16),e.YNc(14,De,15,9,"div",17),e.qZA()()),2&i){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.agents)}}let He=(()=>{class i{constructor(t){this.bsModalRef=t,this.updateSelectedOfficialIds=new e.vpe,this.agents=[],this.title=""}updateAgentsSelected(){this.updateSelectedOfficialIds.emit(this.agents),this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(v.UZ))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-choose-agents-modal"]],inputs:{updateSelectedOfficialIds:"updateSelectedOfficialIds"},decls:13,vars:2,consts:[[1,"modal-header"],[1,"stdd",2,"font-weight","bold"],[1,"pull-right"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"modal-body"],[1,"stdd","headerTitle","w120",2,"margin-left","3px"],[1,"stdd","headerTitle","mx-1","w200"],[1,"stdd","headerTitle","mx-1","w75"],[1,"stdd","headerTitle","w170"],[1,"stdd","headerTitle","mx-1","w100"],["id","agentsForm"],["agentsForm","ngForm"],["class","form-check stdd",4,"ngFor","ngForOf"],[1,"form-check","stdd"],[1,"stdd","w100",2,"padding-left","0px"],[1,"stdd","mx-1","w200"],[1,"stdd","form-check-label","w75"],["type","checkbox",1,"form-check-input",3,"checked","disabled","change"],[1,"stdd","form-check-label","mx-1","w150"],[1,"form-check","stdd","w35"],[1,"stdd","w100","mx-1"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return r.bsModalRef.hide()}),e._uU(5,"Cancel"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return r.updateAgentsSelected()}),e._uU(7,"Submit"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return r.bsModalRef.hide()}),e.TgZ(9,"span",6),e._uU(10,"\xd7"),e.qZA()()()(),e.YNc(11,Qe,15,1,"div",7),e._UZ(12,"div",8)),2&n&&(e.xp6(2),e.Oqu(r.title),e.xp6(9),e.Q6J("ngIf",void 0!==r.agents))},dependencies:[c.sg,c.O5,s._Y,s.JL,s.F],styles:[".windowlarge[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{height:1200px;width:1700px;margin:auto;position:absolute;inset:0}.stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:small;margin:0!important}.headerTitle[_ngcontent-%COMP%]{display:inline-block!important;vertical-align:middle;text-decoration:underline;font-weight:700}.w3[_ngcontent-%COMP%]{width:3px}.w5[_ngcontent-%COMP%]{width:5px}.w10[_ngcontent-%COMP%]{width:10px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w120[_ngcontent-%COMP%]{width:120px}.w150[_ngcontent-%COMP%]{width:150px}.w170[_ngcontent-%COMP%]{width:170px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return i})();function Ye(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div")(3,"strong"),e._uU(4,"Customer: "),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"strong"),e._uU(8,"Order No.:"),e.qZA(),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div")(12,"strong"),e._uU(13,"Category: "),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"div",3)(16,"form",4,5)(18,"strong"),e._uU(19,"Qualification"),e.qZA(),e.TgZ(20,"input",6),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.qualificationDesired=r)}),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"label",7),e._uU(23,"Exp (in yrs):"),e.qZA(),e.TgZ(24,"label",8),e._uU(25,"From: "),e.qZA(),e.TgZ(26,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.expDesiredMin=r)}),e.qZA(),e.TgZ(27,"label",10),e._uU(28,"to: "),e.qZA(),e.TgZ(29,"input",11),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.expDesiredMax=r)}),e.qZA(),e._UZ(30,"br"),e.TgZ(31,"label",7),e._uU(32,"Age (in yrs):"),e.qZA(),e.TgZ(33,"label",12),e._uU(34,"From: "),e.qZA(),e.TgZ(35,"input",13),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.minAge=r)}),e.qZA(),e.TgZ(36,"label",14),e._uU(37,"to: "),e.qZA(),e.TgZ(38,"input",15),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.maxAge=r)}),e.qZA(),e._UZ(39,"br"),e.TgZ(40,"strong"),e._uU(41,"Job Description"),e.qZA(),e._UZ(42,"br"),e.TgZ(43,"textarea",16),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.jd.jobDescInBrief=r)}),e._uU(44," "),e.qZA()()(),e.TgZ(45,"div",17)(46,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirm())}),e.qZA(),e.TgZ(47,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.decline())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(5),e.hij(" ",t.jd.customerName," "),e.xp6(4),e.AsE(" ",t.jd.orderNo," dt ",e.lcZ(10,10,t.jd.orderDate)," "),e.xp6(5),e.hij("",t.jd.categoryName," "),e.xp6(6),e.Q6J("ngModel",t.jd.qualificationDesired),e.xp6(6),e.Q6J("ngModel",t.jd.expDesiredMin),e.xp6(3),e.Q6J("ngModel",t.jd.expDesiredMax),e.xp6(6),e.Q6J("ngModel",t.jd.minAge),e.xp6(3),e.Q6J("ngModel",t.jd.maxAge),e.xp6(5),e.Q6J("ngModel",t.jd.jobDescInBrief)}}let Ge=(()=>{class i{constructor(t,n,r){this.service=t,this.bsModalRef=n,this.fb=r,this.updateSelectedJD=new e.vpe,this.title="",this.closeBtnName="",this.form=new s.cw({})}ngOnInit(){}confirm(){this.updateSelectedJD.emit(this.jd),this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(k.p),e.Y36(v.UZ),e.Y36(s.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-jd-modal"]],inputs:{updateSelectedJD:"updateSelectedJD"},decls:1,vars:1,consts:[["class","mx-2 my-1",4,"ngIf"],[1,"mx-2","my-1"],[1,"mx-2"],[1,"modal-body"],["id","jdForm"],["jdForm","ngForm"],["id","qualificationDesired","name","qualificationDesired","type","text",1,"form-text-input",2,"width","400px",3,"ngModel","ngModelChange"],[2,"font-weight","bold","margin-right","2px"],["for","expDesiredMin",2,"font-weight","bold","margin-right","2px"],["type","text","id","expDesiredMin","name","expDesiredMin",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","expDesiredMax",2,"font-weight","bold","margin-left","2px"],["type","text","id","expDesiredMax","name","expDesiredMax",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","minAge",2,"font-weight","bold","margin-right","2px"],["type","text","id","minAge","name","minAge",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","maxAge",2,"font-weight","bold","margin-left","2px"],["type","text","id","maxAge","name","maxAge",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["type","text","id","jobDescInBrief","name","jobDescInBrief","cols","50","rows","9",1,"form-text-input",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success","fa","fa-save",3,"click"],["type","button",1,"btn","btn-secondary","btn-danger","fa","fa-close",3,"click"]],template:function(n,r){1&n&&e.YNc(0,Ye,48,12,"div",0),2&n&&e.Q6J("ngIf",null!=r.jd)},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,c.uU],styles:[".stdd[_ngcontent-%COMP%]{margin:2px;padding:2px;display:inline-block!important}.w100[_ngcontent-%COMP%]{width:100px}.w250[_ngcontent-%COMP%]{width:250px}.w50[_ngcontent-%COMP%]{width:50px}.tAlignR[_ngcontent-%COMP%]{text-align:right}"]})}return i})();function je(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div")(3,"strong",6),e._uU(4,"Remuneration details for: "),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"strong",7),e._uU(8,"Customer: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div")(11,"strong",7),e._uU(12,"Order No.:"),e.qZA(),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"div",8)(16,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirm())}),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.decline())}),e.qZA()()(),e._UZ(18,"hr",11),e.TgZ(19,"form",12,13)(21,"label",14),e._uU(22,"DETAILS"),e.qZA(),e._UZ(23,"hr"),e.TgZ(24,"label",15),e._uU(25,"Salary"),e.qZA(),e.TgZ(26,"input",16),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.salaryCurrency=r)}),e.qZA(),e.TgZ(27,"input",17),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.salaryMin=r)}),e.qZA(),e.TgZ(28,"label",18),e._uU(29,"to"),e.qZA(),e.TgZ(30,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.salaryMax=r)}),e.qZA(),e._UZ(31,"br"),e.TgZ(32,"label",15),e._uU(33,"Daily Work hrs"),e.qZA(),e.TgZ(34,"input",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.workHours=r)}),e.qZA(),e.TgZ(35,"label",21),e._uU(36,"Contract Period"),e.qZA(),e.TgZ(37,"input",22),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.contractPeriodInMonths=r)}),e.qZA(),e.TgZ(38,"label",23),e._uU(39,"months"),e.qZA(),e._UZ(40,"br"),e.TgZ(41,"label",15),e._uU(42,"Leave/Year"),e.qZA(),e.TgZ(43,"input",24),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.leavePerYearInDays=r)}),e.qZA(),e.TgZ(44,"label",21),e._uU(45,"days vacation, after"),e.qZA(),e.TgZ(46,"input",25),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.leaveAirfareEntitlementAfterMonths=r)}),e.qZA(),e.TgZ(47,"label",26),e._uU(48,"months"),e.qZA(),e._UZ(49,"hr",11),e.TgZ(50,"label",27),e._uU(51,"Perks"),e.qZA(),e.TgZ(52,"label",28),e._uU(53,"Amount"),e.qZA(),e.TgZ(54,"label",29),e._uU(55,"Provided"),e._UZ(56,"br"),e._uU(57,"free"),e.qZA(),e.TgZ(58,"label",28),e._uU(59,"Not"),e._UZ(60,"br"),e._uU(61,"Provided"),e.qZA(),e._UZ(62,"hr",11),e.TgZ(63,"label",14),e._uU(64,"Accommodation"),e.qZA(),e.TgZ(65,"input",30),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.housingAllowance=r)}),e.qZA(),e.TgZ(66,"input",31),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.housingProvidedFree=r)}),e.qZA(),e.TgZ(67,"input",32),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.housingNotProvided=r)}),e.qZA(),e._UZ(68,"br"),e.TgZ(69,"label",14),e._uU(70,"Food"),e.qZA(),e.TgZ(71,"input",33),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.foodAllowance=r)}),e.qZA(),e.TgZ(72,"input",34),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.foodProvidedFree=r)}),e.qZA(),e.TgZ(73,"input",35),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.foodNotProvided=r)}),e.qZA(),e._UZ(74,"br"),e.TgZ(75,"label",14),e._uU(76,"Transport"),e.qZA(),e.TgZ(77,"input",36),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.transportAllowance=r)}),e.qZA(),e.TgZ(78,"input",37),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.transportProvidedFree=r)}),e.qZA(),e.TgZ(79,"input",38),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.transportNotProvided=r)}),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"label",14),e._uU(82,"Other Allowance"),e.qZA(),e.TgZ(83,"input",39),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.remun.otherAllowance=r)}),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.remun.categoryName," "),e.xp6(4),e.hij(" ",t.remun.customerName," "),e.xp6(4),e.AsE(" ",t.remun.orderNo," dt ",e.lcZ(14,21,t.remun.orderDate)," "),e.xp6(13),e.Q6J("ngModel",t.remun.salaryCurrency),e.xp6(1),e.Q6J("ngModel",t.remun.salaryMin),e.xp6(3),e.Q6J("ngModel",t.remun.salaryMax),e.xp6(4),e.Q6J("ngModel",t.remun.workHours),e.xp6(3),e.Q6J("ngModel",t.remun.contractPeriodInMonths),e.xp6(6),e.Q6J("ngModel",t.remun.leavePerYearInDays),e.xp6(3),e.Q6J("ngModel",t.remun.leaveAirfareEntitlementAfterMonths),e.xp6(19),e.Q6J("ngModel",t.remun.housingAllowance),e.xp6(1),e.Q6J("ngModel",t.remun.housingProvidedFree),e.xp6(1),e.Q6J("ngModel",t.remun.housingNotProvided),e.xp6(4),e.Q6J("ngModel",t.remun.foodAllowance),e.xp6(1),e.Q6J("ngModel",t.remun.foodProvidedFree),e.xp6(1),e.Q6J("ngModel",t.remun.foodNotProvided),e.xp6(4),e.Q6J("ngModel",t.remun.transportAllowance),e.xp6(1),e.Q6J("ngModel",t.remun.transportProvidedFree),e.xp6(1),e.Q6J("ngModel",t.remun.transportNotProvided),e.xp6(4),e.Q6J("ngModel",t.remun.otherAllowance)}}function Le(i,d){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",2),e.YNc(2,je,84,23,"div",3),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",void 0!==t.remun)}}let Ke=(()=>{class i{constructor(t,n,r){this.service=t,this.bsModalRef=n,this.fb=r,this.updateSelectedRemuneration=new e.vpe,this.closeBtnName="",this.form=new s.cw({})}ngOnInit(){console.log("remun in modal",this.remun)}confirm(){this.updateSelectedRemuneration.emit(this.remun),this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(k.p),e.Y36(v.UZ),e.Y36(s.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-remuneration-modal"]],inputs:{updateSelectedRemuneration:"updateSelectedRemuneration"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"modal-footer"],[1,"b","w200","modal-header",2,"font-size","medium"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"mx-2"],[1,"stdd","w150"],[1,"stdd","w75"],[1,"pull-right"],["type","button",1,"btn","btn-success","mx-2","fa","fa-save",3,"click"],["type","button",1,"btn","btn-danger","fa","fa-window-close","red",3,"click"],[2,"border","double","margin","0px","padding","0px"],["id","remunForm"],["remunForm","ngForm"],[1,"lbl","w150"],[1,"lbl","w100"],["type","text","id","salaryCurrency","name","salaryCurrency",1,"stdd","w50","form-text-input",3,"ngModel","ngModelChange"],["type","text","id","salaryMin","name","salaryMin",1,"stdd","w50","ml5","form-text-input",3,"ngModel","ngModelChange"],[1,"lbl","w25","ml10",2,"text-align","center"],["type","text","id","salaryMax","name","salaryMax",1,"stdd","w50","form-text-input",3,"ngModel","ngModelChange"],["type","text","id","workHours","name","workHours",1,"stdd","w25","tAlignR",3,"ngModel","ngModelChange"],[1,"lbl","w150","tAlignR"],["type","text","id","contractPeriodInMonths","name","contractPeriodInMonths",1,"stdd","w25","tAlignR",3,"ngModel","ngModelChange"],[1,"lbl","w50","tAlignR"],["type","text","id","leavePerYearInDays","name","leavePerYearIDays",1,"stdd","w25","form-text-input","tAlignR",3,"ngModel","ngModelChange"],["type","text","id","leaveAirfareEntitlementAfterMonths","name","leaveAirfareEntitlementAfterMonths",1,"stdd","w25","form-text-input","tAlignR",3,"ngModel","ngModelChange"],[1,"lbl","w25"],[1,"lbl","w150","vAlignM"],[1,"lbl","w100","vAlignM"],[1,"lbl","w75","vAlignM"],["type","text","id","housingAllowance","name","housingAllowance",1,"stdd","w75","ml5","tAlignR",3,"ngModel","ngModelChange"],["type","checkbox","id","housingProvidedFree","name","housingProvidedFree",1,"stdd","w75","ml15",3,"ngModel","ngModelChange"],["type","checkbox","id","housingNotProvided","name","housingNotProvided",1,"stdd","w75","ml5",2,"padding-left","10px","padding-right","10px","text-align","center",3,"ngModel","ngModelChange"],["type","text","id","foodAllowance","name","foodAllowance",1,"stdd","w75","ml5","tAlignR",3,"ngModel","ngModelChange"],["type","checkbox","id","foodProvidedFree","name","foodProvidedFree",1,"stdd","w75","ml15",3,"ngModel","ngModelChange"],["type","checkbox","id","foodNotProvided","name","foodNotProvided",1,"stdd","w75","ml5",2,"padding-left","10px","padding-right","10px","text-align","center",3,"ngModel","ngModelChange"],["type","text","id","transportAllowance","name","transportAllowance",1,"stdd","w75","ml5","tAlignR",3,"ngModel","ngModelChange"],["type","checkbox","id","transportProvidedFree","name","transportProvidedFree",1,"stdd","w75","ml15",3,"ngModel","ngModelChange"],["type","checkbox","id","transportNotProvided","name","transportNotProvided",1,"stdd","w75","ml5",2,"padding-left","10px","padding-right","10px","text-align","center",3,"ngModel","ngModelChange"],["type","text","id","otherAllowance","name","otherAllowance",1,"stdd","w75","ml5","tAlignR",3,"ngModel","ngModelChange"]],template:function(n,r){1&n&&(e.YNc(0,Le,3,1,"div",0),e._UZ(1,"div",1)),2&n&&e.Q6J("ngIf",null!=r.remun)},dependencies:[c.O5,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.On,s.F,c.uU],styles:[".stdd[_ngcontent-%COMP%]{margin:2px;padding:2px;display:inline-block!important;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;font-weight:700}.ml10[_ngcontent-%COMP%]{margin-left:10px}.ml5[_ngcontent-%COMP%]{margin-left:5px}.tAlignR[_ngcontent-%COMP%]{text-align:right}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.red[_ngcontent-%COMP%]{color:red}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w25[_ngcontent-%COMP%]{width:25px}"]})}return i})(),V=(()=>{class i{constructor(t){this.http=t,this.apiUrl=A.N.apiUrl,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.agents=[],this.cache=new Map}getEmployeeIdAndKnownAs(){return this.http.get(this.apiUrl+"employees/idandknownas")}getEmployeesPagnated(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.Mb)(t);return(0,_.Tr)(this.apiUrl+"Employees/employeespaged",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}getEmployeeById(t){return this.http.get(this.apiUrl+"Employees/byId/"+t)}updateEmployee(t){return this.http.put(this.apiUrl+"Employee",t)}deleteEmployee(t){return this.http.delete(this.apiUrl+"Employees/"+t)}addNewEmployee(t){return this.http.post(this.apiUrl+"Employees/employee",t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ze{constructor(){this.orderId=0,this.orderDate=new Date,this.customerId=0,this.customerNameLike="",this.city="",this.categoryId=0,this.orderidInts=[],this.orderids="",this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}let Y=(()=>{class i{constructor(t){this.http=t,this.apiUrl=A.N.apiUrl,this.reviewItemStatuses=[],this.cache=new Map,this.cacheS=new Map,this.oParams=new ze}getContractReview(t){return this.http.get(this.apiUrl+"ContractReview/contractreviewfromOrderId"+t)}getContractReviewItem(t){return this.http.get(this.apiUrl+"ContractReview/reviewitem/"+t)}getContractReviewItems(t){return this.http.get(this.apiUrl+"contractreview/reviewitems/"+t)}updateContractReviewItem(t){return this.http.put(this.apiUrl+"ContractReview/reviewitem",t)}getContractReviews(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,h.of)(n);let r=(0,_.v1)(t);return(0,_.Tr)(this.apiUrl+"ContractReview/contractreviewspaged",r,this.http).pipe((0,Z.U)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}getContractReviewStddQsData(){return this.http.get(this.apiUrl+"contractreview/reviewstddq")}generateContractReviewObject(t){return this.http.get(this.apiUrl+"ContractReview/generate/"+t)}saveContractReview(t){return this.http.post(this.apiUrl+"ContractReview/contractreview",t)}updateContractReview(t){return this.http.put(this.apiUrl+"ContractReview/contractreview",t)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(w.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var U=m(7114);function Be(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ng-select",25),e.NdJ("change",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.employeeChanged(r))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("items",t.empIdAndNames)}}function Ve(i,d){1&i&&(e.TgZ(0,"div",14),e._uU(1,"No HR Skills defined for the employee"),e.qZA())}function We(i,d){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.skills.flat())}}function $e(i,d){if(1&i&&e._UZ(0,"ng-select",27),2&i){const t=e.oxw(2);e.Q6J("items",t.reviewStatus)}}function Xe(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",12)(2,"h6"),e._uU(3,"Edit Contract review of a category"),e.qZA(),e.TgZ(4,"h5",13),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"div",14)(8,"strong"),e._uU(9,"Customer:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div",14)(12,"strong"),e._uU(13,"Order No:"),e.qZA(),e._uU(14),e.TgZ(15,"strong"),e._uU(16,"dtd"),e.qZA(),e._uU(17),e.ALo(18,"date"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"strong",15),e._uU(21,"Assigned to HR Exec"),e.qZA(),e.YNc(22,Be,1,1,"ng-select",16),e.YNc(23,Ve,2,0,"div",17),e.YNc(24,We,2,1,"div",18),e._UZ(25,"br"),e.TgZ(26,"strong",15),e._uU(27,"reviewItem status"),e.qZA(),e.YNc(28,$e,1,1,"ng-select",19),e._UZ(29,"br"),e.TgZ(30,"label",20),e._uU(31,"Assessment Reqd"),e.qZA(),e._UZ(32,"input",21),e._uU(33,"Yes "),e._UZ(34,"input",22),e._uU(35,"No "),e.TgZ(36,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirm())}),e.qZA(),e.TgZ(37,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.decline())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.reviewItem.professionName),e.xp6(5),e.hij(" ",t.reviewItem.customerName,""),e.xp6(4),e.hij(" ",t.reviewItem.orderNo," "),e.xp6(3),e.hij(":",e.lcZ(18,8,t.reviewItem.orderDate),""),e.xp6(5),e.Q6J("ngIf",t.empIdAndNames),e.xp6(1),e.Q6J("ngIf",!t.skills.length),e.xp6(1),e.Q6J("ngIf",t.skills.length),e.xp6(4),e.Q6J("ngIf",t.reviewStatus)}}function et(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"div",29),e._UZ(3,"app-text-input",30),e.qZA(),e._UZ(4,"input",31),e.TgZ(5,"div",32),e._UZ(6,"app-text-input",33),e.qZA(),e._UZ(7,"input",34),e.TgZ(8,"div",15),e._UZ(9,"app-text-input",35),e.qZA(),e.TgZ(10,"button",36),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw();return e.KtG(a.removeQ(o))}),e.qZA()()()}if(2&i){const t=d.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Sr#"),e.xp6(3),e.Q6J("label","Parameter"),e.xp6(3),e.Q6J("label","Remarks")}}let tt=(()=>{class i{constructor(t,n,r,o,a){this.bsModalRef=t,this.empService=n,this.fb=r,this.router=o,this.service=a,this.updateModalReview=new e.vpe,this.form=new s.cw({}),this.isAddMode=!1,this.reviewStatus=[{name:"Not Reviewed"},{name:"Accepted"},{name:"Rejected"}],this.empIdAndNames=[],this.skills=[];let l=this.router.getCurrentNavigation();l?.extras&&l.extras.state&&l.extras.state.user&&(this.user=l.extras.state.user),n.getEmployeeIdAndKnownAs().subscribe({next:p=>this.empIdAndNames=p})}ngOnInit(){this.reviewItem&&this.createAndInitializeForm(this.reviewItem)}createAndInitializeForm(t){this.form=this.fb.group({id:t.id??0,orderId:t.orderId??0,orderItemId:t.orderItemId??0,professionName:t.professionName??"",quantity:t.quantity??0,ecnr:t.ecnr??!1,contractReviewId:[t.contractReviewId??0,s.kI.required],sourceFrom:t.sourceFrom??"India",requireAssess:[t.requireAssess??!1,s.kI.required],charges:t.charges??0,hrExecUsername:[t.hrExecUsername??"",s.kI.required],reviewItemStatus:[t.reviewItemStatus??"Not Reviewed",s.kI.required],orderDate:t.orderDate??new Date,customerName:[t.customerName??"",s.kI.required],contractReviewItemQs:this.fb.array(t.contractReviewItemQs.map(n=>this.fb.group({id:n.id??0,orderItemId:n.orderItemId??0,contractReviewItemId:[n.contractReviewItemId??0,s.kI.required],srNo:n.srNo??0,reviewParameter:[n.reviewParameter??"",s.kI.required],response:n.response??!1,responseText:n.responseText??"",isResponseBoolean:n.isResponseBoolean??!1,isMandatoryTrue:n.isMandatoryTrue??!1,remarks:n.remarks??""})))})}get contractReviewItemQs(){return this.form.get("contractReviewItemQs")}newQ(){var t=0===this.contractReviewItemQs.length?1:Math.max(...this.contractReviewItemQs.value.map(n=>n.srNo))+1;return this.fb.group({id:0,orderItemId:this.reviewItem.orderItemId??0,contractReviewItemId:[this.reviewItem.id??0,s.kI.required],srNo:t,reviewParameter:["",s.kI.required],response:!1,responseText:"",isResponseBoolean:!1,isMandatoryTrue:!1,remarks:""})}addQ(){this.contractReviewItemQs.push(this.newQ())}removeQ(t){this.contractReviewItemQs.removeAt(t),this.contractReviewItemQs.markAsDirty(),this.contractReviewItemQs.markAsTouched()}confirm(){this.service.updateContractReviewItem(this.form.value).subscribe(t=>{this.updateModalReview.emit(t)}),this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}employeeChanged(t){console.log("clicked",t),this.skills=t.hrSkills.map(n=>n.professionName)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(v.UZ),e.Y36(V),e.Y36(s.qu),e.Y36(g.F0),e.Y36(Y))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-item-review-modal"]],inputs:{updateModalReview:"updateModalReview"},decls:24,vars:6,consts:[[2,"margin-left","20px",3,"formGroup"],["class","mx-2",4,"ngIf"],[2,"font-size","small","vertical-align","middle"],[1,"lbl","w35"],[1,"lbl","mL10","w350"],[1,"lbl","w75"],[1,"lbl","w150"],[1,"btn","btn-primary","fa","fa-plus",3,"click"],["formArrayName","contractReviewItemQs",1,"mt-2","my-1","px-0"],[4,"ngFor","ngForOf"],[2,"font-size","smaller"],[1,"mx-2"],[2,"font-size","medium","font-weight","bold","vertical-align","top"],[2,"margin-left","2px","display","inline-block","vertical-align","top"],[1,"stdd"],[1,"stdd","w150"],["class","stdd w150","bindLabel","knownAs","bindValue","username","labelForId","username","clearAllText","Clear","formControlName","hrExecUsername",3,"items","change",4,"ngIf"],["class","stdd",4,"ngIf"],["class","stdd","style","width: 450px; font-size: smaller",4,"ngIf"],["class","stdd w150","bindLabel","name","bindValue","name","labelForId","reviewItemStatus","clearAllText","Clear","formControlName","reviewItemStatus",3,"items",4,"ngIf"],[1,"lbl","w150","b","my-2"],["type","radio","value","1","formControlName","requireAssess",1,"stdd","inputcheck","form-check-input","mx-2"],["type","radio","value","0","formControlName","requireAssess",1,"stdd","inputcheck","form-check-input","mx-2"],["type","button",1,"mL15","btn","btn-success","fa","fa-save",3,"click"],["type","button",1,"btn","pull-right","fa","fa-window-close","fa-2x",3,"click"],["bindLabel","knownAs","bindValue","username","labelForId","username","clearAllText","Clear","formControlName","hrExecUsername",1,"stdd","w150",3,"items","change"],[1,"stdd",2,"width","450px","font-size","smaller"],["bindLabel","name","bindValue","name","labelForId","reviewItemStatus","clearAllText","Clear","formControlName","reviewItemStatus",1,"stdd","w150",3,"items"],[3,"formGroupName"],[1,"stdd","w35"],["formControlName","srNo",3,"label"],["type","checkbox","formControlName","isMandatoryTrue",1,"stdd","w35"],[1,"stdd","w350"],["formControlName","reviewParameter",2,"font-size","small",3,"label"],["type","checkbox","formControlName","response",1,"stdd","w75"],["formControlName","remarks",2,"font-size","small",3,"label"],[1,"btn","mL10","fa","fa-trash","fa-sm","red",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"form",0),e.YNc(1,Xe,38,10,"div",1),e._UZ(2,"br"),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Sr#"),e.qZA(),e.TgZ(6,"label",3),e._uU(7,"Manda-"),e._UZ(8,"br"),e._uU(9,"tory"),e.qZA(),e.TgZ(10,"label",4),e._uU(11,"Parameter"),e.qZA(),e.TgZ(12,"label",5),e._uU(13,"Response"),e._UZ(14,"br"),e._uU(15,"YES"),e.qZA(),e.TgZ(16,"label",6),e._uU(17,"Remarks"),e.qZA(),e.TgZ(18,"button",7),e.NdJ("click",function(){return r.addQ()}),e.qZA(),e.TgZ(19,"div",8),e.YNc(20,et,11,4,"div",9),e.qZA()()(),e.TgZ(21,"div",10),e._uU(22),e.ALo(23,"json"),e.qZA()),2&n&&(e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("ngIf",void 0!==r.reviewItem),e.xp6(19),e.Q6J("ngForOf",r.contractReviewItemQs.controls),e.xp6(2),e.hij(" ",e.lcZ(23,4,r.form.value),"\n"))},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.Wl,s._,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,M.w9,U.t,c.Ts,c.uU],styles:['.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin-left:2px;margin-right:2px;vertical-align:middle}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-left:2px;margin-right:2px;font-weight:400}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w350[_ngcontent-%COMP%]{width:350px}.mL15[_ngcontent-%COMP%]{margin-left:15px}.mL10[_ngcontent-%COMP%]{margin-left:10px}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin-right:10px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return i})();const nt=["editForm"];function rt(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," Order Not found or loaded\n"),e.qZA())}function it(i,d){if(1&i&&(e.TgZ(0,"div",48),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.member.forwardedToHRDeptOn)," ")}}function ot(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.forwardOrderToHRDept())}),e._uU(1," 'Not Forwarded' "),e.qZA()}}function st(i,d){if(1&i&&(e.TgZ(0,"div",42)(1,"label",43),e._uU(2,"Contract Review Status"),e.qZA(),e.TgZ(3,"div",44),e._uU(4),e.qZA(),e.TgZ(5,"label",45),e._uU(6,"Forwarded to HR On"),e.qZA(),e.YNc(7,it,3,3,"div",46),e.YNc(8,ot,2,0,"div",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngClass","Accepted"===t.member.contractReviewStatus?"green":"Accepted with regrets"===t.member.contractReviewStatus?"blue":"red"),e.xp6(1),e.hij(" ",t.member.contractReviewStatus," "),e.xp6(3),e.Q6J("ngIf",null!=t.member.forwardedToHRDeptOn),e.xp6(1),e.Q6J("ngIf",void 0===t.member.forwardedToHRDeptOn)}}function dt(i,d){1&i&&e._UZ(0,"span",50)}function at(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.assignTasksToHRExecs())}),e.qZA()()}}function lt(i,d){if(1&i&&e._UZ(0,"ng-select",67),2&i){const t=e.oxw(3);e.Q6J("items",t.categories)}}function ct(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",42)(1,"button",68),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw(2);return e.KtG(o.assessItem(r))}),e._uU(2,"Q"),e.qZA(),e.TgZ(3,"button",69),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw(2);return e.KtG(o.openContractReviewItemModal(r))}),e.qZA(),e.TgZ(4,"button",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw(2);return e.KtG(o.openJDModal(r))}),e.qZA(),e.TgZ(5,"button",71),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw(2);return e.KtG(o.openRemunerationModal(r))}),e.qZA()()}}const G=function(){return{dateInputFormat:"YYYY-MM-DD"}};function mt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",53),e._UZ(2,"input",54),e.TgZ(3,"div",55),e._UZ(4,"app-text-input",56),e.qZA(),e.YNc(5,lt,1,1,"ng-select",57),e._UZ(6,"input",58),e.TgZ(7,"div",59),e._UZ(8,"app-text-input",60),e.qZA(),e.TgZ(9,"div",55),e._UZ(10,"app-text-input",61),e.qZA(),e.TgZ(11,"div",55),e._UZ(12,"app-text-input",62),e.qZA(),e.TgZ(13,"div",55),e._UZ(14,"app-text-input",63),e.qZA(),e._UZ(15,"input",64)(16,"input",65),e.YNc(17,ct,6,0,"div",23),e.TgZ(18,"button",66),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.removeItem(o))}),e.qZA()()()}if(2&i){const t=d.index,n=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("label","SrNo"),e.xp6(1),e.Q6J("ngIf",n.categories),e.xp6(3),e.Q6J("label","Source From"),e.xp6(2),e.Q6J("label","quantity"),e.xp6(2),e.Q6J("label","Min CVs"),e.xp6(2),e.Q6J("label","max CVs"),e.xp6(1),e.Q6J("bsValue",n.bsValueDate)("bsConfig",e.DdM(10,G)),e.xp6(2),e.Q6J("ngIf",!n.isAddMode)}}function pt(i,d){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=d.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ut(i,d){if(1&i&&(e.TgZ(0,"ul",72),e.YNc(1,pt,2,1,"li",40),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.errors)}}function gt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formChanged())}),e._UZ(2,"input",5),e.TgZ(3,"label",6),e._uU(4,"Order No"),e.qZA(),e.TgZ(5,"label",7),e._uU(6,"Dated"),e.qZA(),e.TgZ(7,"label",7),e._uU(8,"Complete By"),e.qZA(),e.TgZ(9,"label",8),e._uU(10,"Customer"),e.qZA(),e.TgZ(11,"label",6),e._uU(12,"City"),e.qZA(),e.TgZ(13,"label",9),e._uU(14,"Country"),e.qZA(),e.TgZ(15,"label",9),e._uU(16,"Order Ref"),e.qZA(),e.TgZ(17,"label",10),e._uU(18,"Project Head"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"div",11),e._UZ(21,"app-text-input",12),e.qZA(),e._UZ(22,"input",13)(23,"input",14),e.TgZ(24,"div",15),e._UZ(25,"ng-select",16),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"app-text-input",17),e.qZA(),e.TgZ(28,"div",18),e._UZ(29,"app-text-input",19),e.qZA(),e.TgZ(30,"div",18),e._UZ(31,"app-text-input",20),e.qZA(),e.TgZ(32,"div",21),e._UZ(33,"ng-select",22),e.qZA(),e._UZ(34,"br"),e.YNc(35,st,9,4,"div",23),e.TgZ(36,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA(),e.TgZ(37,"label",25),e._uU(38,"Status"),e.qZA(),e.TgZ(39,"div",26),e._uU(40),e.qZA(),e.TgZ(41,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit())}),e.YNc(42,dt,1,0,"span",28),e.qZA(),e.YNc(43,at,2,0,"div",29),e._UZ(44,"br")(45,"hr",30),e.TgZ(46,"div",31)(47,"label",32),e._uU(48,"Sel"),e.qZA(),e.TgZ(49,"label",32),e._uU(50,"Sr#"),e.qZA(),e.TgZ(51,"label",33),e._uU(52,"Category"),e.qZA(),e.TgZ(53,"label",34),e._uU(54,"ECNR"),e.qZA(),e.TgZ(55,"label",35),e._uU(56,"Source"),e._UZ(57,"br"),e._uU(58,"From"),e.qZA(),e.TgZ(59,"label",32),e._uU(60,"Qnty"),e.qZA(),e.TgZ(61,"label",32),e._uU(62,"Min"),e._UZ(63,"br"),e._uU(64,"CVs"),e.qZA(),e.TgZ(65,"label",32),e._uU(66,"Max"),e._UZ(67,"br"),e._uU(68,"CVs"),e.qZA(),e.TgZ(69,"label",36),e._uU(70,"Complete by "),e.qZA(),e.TgZ(71,"label",32),e._uU(72,"Review"),e._UZ(73,"br"),e._uU(74,"Status"),e.qZA(),e.TgZ(75,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addItem())}),e.qZA()(),e._UZ(76,"hr",38),e.TgZ(77,"div",39),e.YNc(78,mt,19,11,"div",40),e.qZA()(),e.YNc(79,ut,2,1,"ul",41),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(20),e.Q6J("label","Order No"),e.xp6(1),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(18,G)),e.xp6(1),e.Q6J("bsValue",t.bsValueDate)("bsConfig",e.DdM(19,G)),e.xp6(2),e.Q6J("items",t.customers),e.xp6(2),e.Q6J("label","City"),e.xp6(2),e.Q6J("label","Country"),e.xp6(2),e.Q6J("label","Order Ref"),e.xp6(2),e.Q6J("items",t.employees),e.xp6(2),e.Q6J("ngIf",!t.isAddMode),e.xp6(5),e.Oqu(t.member.status),e.xp6(1),e.Q6J("disabled",!t.form.dirty),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.isAddMode),e.xp6(35),e.Q6J("ngForOf",t.orderItems.controls),e.xp6(1),e.Q6J("ngIf",t.errors)}}let ht=(()=>{class i{constructor(t,n,r,o,a,l,p,u,x){this.service=t,this.orderFwdService=n,this.modalService=r,this.activatedRoute=o,this.router=a,this.toastr=l,this.taskService=p,this.contractRvwService=u,this.fb=x,this.form=new s.cw({}),this.selectedCategoryIds=[],this.categories=[],this.employees=[],this.customers=[],this.associates=[],this.fileToUpload=null,this.events=[],this.isAddMode=!1,this.loading=!1,this.submitted=!1,this.errors=[],this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.defaultCompleteByTargetDays=7,this.defaultProjectManagerId=1,this.defaultOrderDate=new Date,this.dt=new Date,this.defaultCompleteby=new Date(this.dt.setDate(this.defaultOrderDate.getDate()+this.defaultCompleteByTargetDays)),this.uploadProgress=0,this.selectedFiles=[],this.uploading=!1,this.fileErrorMsg="",this.bsValueDate=new Date,this.mySelect=0,this.hasEditRole=!1,this.hasHRRole=!1,this.bolNavigationExtras=!1,this.returnUrl="/orders",this.orderReviewItemStatuses=["under review","approved","rejected"],this.existingOfficialIds=[],this.statuses=[{id:1,status:"Not Reviewed"},{id:4,status:"Accepted"},{id:2,status:"Accepted with regrets"},{id:3,status:"Regretted"}],this.routeId=this.activatedRoute.snapshot.params.id,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let C=this.router.getCurrentNavigation();C?.extras&&C.extras.state&&(this.bolNavigationExtras=!0,C.extras.state.returnUrl&&(this.returnUrl=C.extras.state.returnUrl),C.extras.state.user&&(this.user=C.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.member=t.order,this.associates=t.associates,this.customers=t.customers,this.employees=t.employees,this.categories=t.professions}),this.isAddMode=0===this.member?.id,this.isAddMode&&(this.member=new Je),null==this.member&&this.toastr.error("failed to retrieve order data","no data available"),this.member&&this.createAndInitializeForm(this.member)}createAndInitializeForm(t){this.form=this.fb.group({id:[t.id],orderNo:[t.orderNo,s.kI.required],orderDate:[t.orderDate,s.kI.required],customerId:[t.customerId,s.kI.required],orderRef:[t.orderRef],salesmanId:[t.salesmanId],projectManagerId:[t.projectManagerId,s.kI.required],cityOfWorking:[t.cityOfWorking,s.kI.required],country:[t.country,s.kI.required],completeBy:[t.completeBy,s.kI.required],status:[t.status],forwardedToHRDeptOn:[t.forwardedToHRDeptOn],contractReviewStatus:[t.contractReviewStatus],orderItems:this.fb.array(t.orderItems.map(n=>this.fb.group({selected:!1,id:n.id,orderId:n.orderId,srNo:n.srNo,professionId:[n.professionId,s.kI.required],ecnr:n.ecnr,sourceFrom:n.sourceFrom,quantity:n.quantity,minCVs:n.minCVs,maxCVs:n.maxCVs,completeBefore:n.completeBefore,status:n.status,reviewItemStatus:n.reviewItemStatus})))})}get orderItems(){return this.form.get("orderItems")}newItem(){var t=0===this.orderItems.length?1:Math.max(...this.orderItems.value.map(r=>r.srNo))+1,n=this.isAddMode?this.form.get("completeBy")?.value:"";return this.fb.group({selected:[!1],id:0,orderId:0,srNo:t,professionId:[0,[s.kI.required,s.kI.min(1)]],ecnr:!1,sourceFrom:"India",quantity:[0,s.kI.min(1)],completeBefore:[n,s.kI.required],status:"Not Started",reviewItemStatus:"Not Reviewed"})}addItem(){this.orderItems.push(this.newItem())}removeItem(t){this.orderItems.removeAt(t),this.orderItems.markAsDirty(),this.orderItems.markAsTouched()}onSubmit(){this.isAddMode?this.CreateOrder():(this.toastr.warning("updating order ..."),this.UpdateOrder())}acknowledgeToClient(){}CreateOrder(){this.service.register(this.form.value).subscribe({next:t=>{null==t?this.toastr.info("Failed to creat the order"):this.toastr.success("Created the Order, with Order No. "+t.orderNo)},error:t=>this.toastr.error("Error in creating the Order",t)})}UpdateOrder(){this.service.UpdateOrder(this.form.value).subscribe(t=>{this.toastr.success("order updated"),this.router.navigateByUrl("/orders")},t=>{console.log(t)})}handleFileInput(t){this.fileToUpload=t.item(0)}getJD(t){return this.service.getJD(t).subscribe(n=>{this.jd=n},n=>{this.toastr.error("failed to retrieve job description")})}getName(t){return this.getControls()[t].value.id}getSrNo(t){return this.getControls()[t].value.srNo}getQnty(t){return this.getControls()[t].value.quantity}getMinCVs(t){return this.getControls()[t].value.minCVs}getMaxCVs(t){return this.getControls()[t].value.maxCVs}getReviewItemStatusId(t){return this.getControls()[t].value.reviewItemStatusId}setMinCVs(t,n){this.orderItems.at(t).get("minCVs").setValue(n)}setMaxCVs(t,n){this.orderItems.at(t).get("maxCVs").setValue(n)}getControls(){return this.form.get("orderItems").controls}openJDModal(t){if(!this.isAddMode){var n=this.getName(t);this.service.getJD(n).subscribe(r=>{this.bsModalRef=this.modalService.show(Ge,{initialState:{class:"modal-dialog-centered modal-lg",title:"job description",jd:r}}),this.bsModalRef.content.updateSelectedJD.subscribe(l=>{this.service.updateJD(l).subscribe(()=>{this.toastr.success("job description updated")},p=>{this.toastr.error("failed to update the job description")})})},r=>{this.toastr.warning("failed to retrieve job description")})}}openRemunerationModal(t){if(!this.isAddMode){var n=this.getName(t);this.service.getRemuneration(n).subscribe(r=>{this.bsModalRef=this.modalService.show(Ke,{initialState:{class:"modal-dialog-centered modal-lg",remun:r}}),this.bsModalRef.content.updateSelectedRemuneration.subscribe(l=>{this.service.updateRemuneration(l).subscribe(()=>{this.toastr.success("Remuneration updated")},p=>{this.toastr.error("failed to update the Remuneration")})})},r=>{this.toastr.warning("failed to retrieve Remuneration data")})}}forwardOrderToAgents(){if(this.isAddMode)return void this.toastr.warning("Only an order that is contract reviewed can be sent to ASsociates");if(null==this.member)return;var t=this.orderItems.value.filter(u=>!0===u.selected&&(1===u.reviewItemStatusId||2===u.reviewItemStatusId));if(0===t.length&&0===(t=this.orderItems.value.filter(u=>7===u.reviewItemStatusId)).length)return void this.toastr.error("only items that are reviewed and accepted can be forwarded to agents");let n=this.associates;if(this.bsModalRef=this.modalService.show(He,{class:"modal-dialog-centered modal-lg windowlarge",initialState:{title:"Choose Associates",agents:n}}),this.bsModalRef.content.updateSelectedOfficialIds.subscribe(u=>{u.filter(C=>!0===C.checked);for(var x=0;x<n.length;x++)n[x].checked&&n.splice(x,1)}),0===n.length)return void this.toastr.warning("no associates selected","abort");var a=[],l=[];let p;t.forEach(u=>{a.push(u.id)}),n.forEach(u=>{l.push(u.officialId)}),p.officialIds=l,p.orderItemIds=a}forwardOrderToHRDept(){}assignTasksToHRExecs(){if(!this.isAddMode)if(0!==this.member?.projectManagerId){if(!this.isAddMode){var n=this.form.value.orderItems.filter(r=>!0===r.checked).map(r=>r.id);return this.taskService.createOrderAssignmentTasks(n).subscribe(r=>{""===r?this.toastr.success("tasks created for the chosen order items","Success"):this.toastr.warning("failed to create the tasks","Failure")},r=>{this.toastr.error(r,"failed to create tasks for the chosen order items")})}this.toastr.error("tasks cannot be assigned while in add mode.  Save the data first and then comeback to this form in edit mode to assign HR Executive tasks")}else this.toastr.warning("Project Manager needs to be defined before tasks can be assiged")}customerChange(t){null!==t&&(this.form.get("cityOfWorking").setValue(t.city),this.form.get("country").setValue(t.country))}openContractReviewItemModal(t){var n=this.getControls()[t].value;this.contractRvwService.getContractReviewItem(n.id).subscribe(o=>{o?(this.bsModalRef=this.modalService.show(tt,{class:"modal-dialog-centered modal-lg",initialState:{reviewItem:o}}),this.bsModalRef.content.updateModalReview.subscribe(l=>{""!==l?this.toastr.warning("Failed to update the Checklist object -"+l):this.toastr.success("Updated the checklist object")})):this.toastr.warning("Failed to get the contract review item object from api")})}openAssessmentModal(t){void 0===t||0===t||this.router.navigateByUrl("/orders/itemassess/"+t)}showProspectives(t){this.router.navigateByUrl("/prospectives/prospectivelist/"+this.member?.orderNo+"-"+t)}close(){this.router.navigateByUrl(this.returnUrl)}assessItem(t){var n=this.orderItems.at(t).get("id")?.value;console.log("orderitembrief",n),this.navigateByRoute("/administration/orderassessmentitem/"+n,null,!0)}formChanged(){console.log("form changed event")}qntyChanged(t){if(!(+this.getMinCVs(t)>0||+this.getMaxCVs(t)>0)){var n=+this.getQnty(t);this.setMinCVs(t,3*n),this.setMaxCVs(t,3*n)}}navigateByRoute(t,n,r){this.router.navigate([t],{state:{user:this.user,object:n,toedit:r,returnUrl:"/orders/edit/"+this.routeId}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(k.p),e.Y36(N),e.Y36(v.tT),e.Y36(g.gz),e.Y36(g.F0),e.Y36(f._W),e.Y36(B),e.Y36(Y),e.Y36(s.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-edit"]],viewQuery:function(n,r){if(1&n&&e.Gf(nt,5),2&n){let o;e.iGM(o=e.CRH())&&(r.editForm=o.first)}},decls:5,vars:5,consts:[[4,"ngIf"],["class","col-12 mt-5",4,"ngIf"],[2,"float","inline-end","margin-top","5px","font-size","smaller"],[1,"col-12","mt-5"],[3,"formGroup","change"],["type","hidden","formControlName","id",1,"stdd","w50"],[1,"lbl","w100","mx-2"],[1,"lbl","w110","mx-2"],[1,"lbl","w300","mx-2"],[1,"lbl","w150","mx-2"],[1,"lbl","w200","mx-2"],[1,"stdd","w100","mx-2"],["formControlName","orderNo",3,"label"],["type","text","placeholder","Order Date","formControlName","orderDate","bsDatepicker","",1,"stdd","w110","mx-2",3,"bsValue","bsConfig"],["type","text","placeholder","Complete By","formControlName","completeBy","bsDatepicker","",1,"stdd","w110","mx-2",3,"bsValue","bsConfig"],[1,"stdd","w300","mx-2"],["bindLabel","customerName","bindValue","customerId","labelForId","id","clearAllText","Clear","formControlName","customerId",2,"border","color(from color srgb r g b)",3,"items"],["formControlName","cityOfWorking",3,"label"],[1,"stdd","w150","mx-2"],["formControlName","country",3,"label"],["formControlName","orderRef",3,"label"],[1,"stdd","w125","mx-2"],["bindLabel","knownAs","bindValue","id","labelForId","projectManagerId","clearAllText","Clear","formControlName","projectManagerId",3,"items"],["class","stdd",4,"ngIf"],["title","Return to calling procedure",1,"stdd","btn","btn-primary","pull-right","fa","fa-2x","fa-undo",3,"click"],[1,"stdd","w100","b"],[1,"stdd","fontSmaller","w120"],["type","submit","title","Save the requirement",1,"stdd","btn","btn-success","fa","fa-save",2,"margin-left","25px!important",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["style","display: inline-block;","class","pull-right",4,"ngIf"],[2,"margin","1px","padding","1px","border-width","2px"],[2,"font-weight","bold","margin-left","0px","font-size","smaller"],[1,"lbl","w50"],[1,"lbl","w240"],[1,"w30","mx-2",2,"display","inline-block"],[1,"lbl","w100"],["title","Date by which the shortlisting of candidates is to be completed by the HR Executive",1,"lbl","w100"],["type","button",1,"stdd","w50","fa","fa-plus","blue",3,"click"],[2,"margin","0px","padding","0px"],["formArrayName","orderItems",1,"mt-2","my-1","px-0"],[4,"ngFor","ngForOf"],["class","text-danger list-unstyled",4,"ngIf"],[1,"stdd"],[1,"stdd","w150","b","mx-2"],[1,"stdd","w100","cursorpointer",2,"border","btn-primary",3,"ngClass"],[1,"stdd","w150","b"],["id","forwardedToHRDeptOn","class","stdd w110","style","border:btn-primary;",4,"ngIf"],["class","stdd w100 cursorpointer",3,"click",4,"ngIf"],["id","forwardedToHRDeptOn",1,"stdd","w110",2,"border","btn-primary"],[1,"stdd","w100","cursorpointer",3,"click"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"pull-right",2,"display","inline-block"],["disabled","member.contractReviewStatusId===1 || member.contractReviewStatusId===2 ","title","assign selected categories once Contract Review is done",1,"btn","btn-primary","stdd","fa","fa-users",3,"click"],[3,"formGroupName"],["type","checkbox","formControlName","selected",1,"chk","w30"],[1,"stdd","w50"],["formControlName","srNo",3,"label"],["class","stdd w240","bindLabel","professionName","bindValue","id","labelForId","categoryId","clearAllText","Clear","formControlName","professionId",3,"items",4,"ngIf"],["type","checkbox","formControlName","ecnr",1,"chk","w30"],[1,"stdd","w100"],["formControlName","sourceFrom",3,"label"],["formControlName","quantity",3,"label"],["formControlName","minCVs",3,"label"],["formControlName","maxCVs",3,"label"],["type","text","placeholder","Complete By","formControlName","completeBefore","bsDatepicker","",1,"stdd","w110",3,"bsValue","bsConfig"],["type","text","formControlName","reviewItemStatus",1,"stdd","w150"],["title","remove this item",1,"w10","btn","fa","fa-trash","fa-sm",3,"click"],["bindLabel","professionName","bindValue","id","labelForId","categoryId","clearAllText","Clear","formControlName","professionId",1,"stdd","w240",3,"items"],["title","design Assessment Questions for this category",1,"w10","btn","fa","fa-question-mark",3,"click"],["title","Contract Review",1,"w10","btn","fa","fa-bars",3,"click"],["title","Open Job Description",1,"w10","btn","fa","fa-list",3,"click"],["title","Open Remuneration",1,"w10","btn","fa","fa-dollar",3,"click"],[1,"text-danger","list-unstyled"]],template:function(n,r){1&n&&(e.YNc(0,rt,2,0,"div",0),e.YNc(1,gt,80,20,"div",1),e.TgZ(2,"div",2),e._uU(3),e.ALo(4,"json"),e.qZA()),2&n&&(e.Q6J("ngIf",!r.member),e.xp6(1),e.Q6J("ngIf",r.member),e.xp6(2),e.hij(" ",e.lcZ(4,3,r.form.value),"\n"))},dependencies:[c.mk,c.sg,c.O5,b.Np,b.Y5,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,M.w9,U.t,c.Ts,c.uU],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block!important;vertical-align:top;margin:1px 3px;font-size:smaller}label[_ngcontent-%COMP%]{display:inline-block}.dropdown[_ngcontent-%COMP%]{display:inline-block!important;vertical-align:top;margin:1px}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b;font-weight:700}.pullright[_ngcontent-%COMP%]{text-align:right}.ml80[_ngcontent-%COMP%]{margin-left:80px}.lbl[_ngcontent-%COMP%]{display:inline-block!important;font-size:small;font-weight:700;margin:1px 2px}.chk[_ngcontent-%COMP%]{display:inline-block!important;text-align:center;margin-left:5px;margin-right:5px;vertical-align:middle}.tAlignLeft[_ngcontent-%COMP%]{text-align:left}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.vAlignMiddle[_ngcontent-%COMP%]{vertical-align:middle!important}.vAlignTop[_ngcontent-%COMP%]{vertical-align:top}.fontSmall[_ngcontent-%COMP%]{font-size:small}.fontSmaller[_ngcontent-%COMP%]{font-size:smaller}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w30[_ngcontent-%COMP%]{width:30px}.w35[_ngcontent-%COMP%]{width:35px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w65[_ngcontent-%COMP%]{width:65px}.w75[_ngcontent-%COMP%]{width:75px}.w80[_ngcontent-%COMP%]{width:80px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w115[_ngcontent-%COMP%]{width:115px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w225[_ngcontent-%COMP%]{width:225px}.w240[_ngcontent-%COMP%]{width:240px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w400[_ngcontent-%COMP%]{width:400px}.w500[_ngcontent-%COMP%]{width:500px}.b[_ngcontent-%COMP%]{font-weight:700}.alignR[_ngcontent-%COMP%]{float:right}.blue[_ngcontent-%COMP%]{color:#00f}.black[_ngcontent-%COMP%]{color:#000}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:green}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;border-bottom:1px dotted black}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:50%;left:100%;margin-top:-5px;border-width:5px;border-style:solid;border-color:transparent transparent transparent black}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}']})}return i})();const W=i=>(0,e.f3M)(Q.v).getClientIdAndNames();class vt{constructor(){this.orderItemId=0,this.orderId=0,this.categoryId=0,this.search=""}}let R=(()=>{class i{constructor(t,n,r,o){this.activatedRoute=t,this.router=n,this.accountService=r,this.http=o,this.apiUrl=A.N.apiUrl,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.qParams=new vt,this.routeId="",this.accountService.currentUser$.pipe((0,E.q)(1)).subscribe(a=>this.user=a)}getOrderAssessmentItem(t){return this.http.get(this.apiUrl+"OrderAssessment/orderassessmentitem/"+t)}getOrderAssessment(t){return this.http.get(this.apiUrl+"OrderAssessment/orderAssessment/"+t)}updateOrderAssessment(t){return this.http.put(this.apiUrl+"OrderAssessment/assessment",t)}deleteAssessmentQ(t){return this.http.delete(this.apiUrl+"orderassessment/assessmentq/"+t)}deleteAssessment(t){return this.http.delete(this.apiUrl+"orderassessment/assessment/"+t)}AddNewAssessment(t){return this.http.post(this.apiUrl+"OrderAssessment/assessment",t)}getOrderAssessmentItemQs(t){return this.http.get(this.apiUrl+"OrderAssessment/orderassessmentQs/"+t)}updateOrderAssessmentItem(t){return this.http.put(this.apiUrl+"OrderAssessment/assessmentitem",t)}deleteOrderAssessmentItem(t){return this.http.delete(this.apiUrl+"OrderAssessment/assessmentitemq/"+t)}InsertOrderAssessmentItem(t){return this.http.post(this.apiUrl+"OrderAssessment/assessmentitem",t)}getAssessmentQBankOfCategoryId(t){return this.http.get(this.apiUrl+"OrderAssessment/questionsFromQBank/"+t)}getAssessmentQStandard(){return this.http.get(this.apiUrl+"OrderAssessment/assessmentStddQs")}getContractReviewItemDto(t){return this.http.get(this.apiUrl+"ContractReview/")}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(g.gz),e.LFG(g.F0),e.LFG(J.B),e.LFG(w.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function wt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"div",12),e.TgZ(2,"div",3),e._UZ(3,"app-text-input",19),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-text-input",20),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"app-text-input",14),e.qZA(),e.TgZ(8,"div",3),e._UZ(9,"app-text-input",4),e.qZA(),e.TgZ(10,"div",21),e._UZ(11,"app-text-input",22),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"app-text-input",23),e.qZA(),e.TgZ(14,"div",24),e._UZ(15,"app-text-input",25),e.qZA(),e.TgZ(16,"div",21),e._UZ(17,"app-text-input",26),e.qZA(),e._UZ(18,"input",27),e.TgZ(19,"button",16),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw().index,l=e.oxw(2);return e.KtG(l.removeOrderAssessmentItemQ(a,o))}),e.qZA()()}if(2&i){const t=d.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(10),e.Q6J("label","Question No"),e.xp6(2),e.Q6J("label","subject"),e.xp6(2),e.Q6J("label","Question"),e.xp6(2),e.Q6J("type","number")("label","Max Points")}}function bt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",12)(2,"div",3),e._UZ(3,"app-text-input",13),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-text-input",4),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"app-text-input",14),e.qZA(),e.TgZ(8,"div",3),e._UZ(9,"app-text-input",4),e.qZA(),e.TgZ(10,"div",6),e._UZ(11,"app-text-input",15),e.qZA(),e.TgZ(12,"button",16),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.removeOrderAssessmentItem(o))}),e.qZA(),e.TgZ(13,"div",17)(14,"button",18),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.addNewOrderAssessmentItemQ(o))}),e.qZA(),e.YNc(15,wt,20,6,"div",11),e.qZA()()()}if(2&i){const t=d.index,n=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(10),e.Q6J("label","Profession Name"),e.xp6(4),e.Q6J("ngForOf",n.orderAssessmentItemQs(t).controls)}}function xt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.valid&&r.updateAssessment())}),e.TgZ(1,"div",2)(2,"div",3),e._UZ(3,"app-text-input",4),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-text-input",5),e.qZA(),e.TgZ(6,"div",6),e._UZ(7,"app-text-input",7),e.qZA(),e.TgZ(8,"label",8),e._uU(9,"Order Assessment Items"),e.qZA(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addOrderAssessmentItem())}),e.qZA(),e.YNc(12,bt,16,3,"div",11),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("label","Customer Name"),e.xp6(5),e.Q6J("ngForOf",t.orderAssessmentItems.controls)}}let Ct=(()=>{class i{constructor(t,n,r,o,a){this.fb=t,this.router=n,this.activatedRoute=r,this.service=o,this.toastr=a,this.form=new s.cw({}),this.returnUrl="";let l=this.router.getCurrentNavigation();l?.extras&&l.extras.state&&(l.extras.state.returnUrl&&(this.returnUrl=l.extras.state.returnUrl),l.extras.state.user&&(this.user=l.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.orderAssessment=t.orderAssessment}),void 0!==this.orderAssessment&&this.CreateAndInitializeFormArray(this.orderAssessment)}CreateAndInitializeFormArray(t){this.form=this.fb.group({orderId:[t.orderId,s.kI.required],orderNo:[t.orderNo,s.kI.required],customerName:[t.customerName,s.kI.required],orderAssessmentItems:this.fb.array(t.orderAssessmentItems.map(n=>this.fb.group({id:[n.id],orderAssessmentId:[n.orderAssessmentId],orderItemId:[n.orderItemId,s.kI.required],orderId:[t.orderId,s.kI.required],professionId:[n.professionId,s.kI.required],professionName:[n.professionName,s.kI.required],orderAssessmentItemQs:this.fb.array(n.orderAssessmentItemQs.map(r=>this.fb.group({id:[r.id??0],orderAssessmentItemId:n.id??0,orderItemId:[n.orderItemId,s.kI.required],orderId:n.orderId,questionNo:[r.questionNo,s.kI.required],subject:[r.subject,s.kI.required],question:[r.question,s.kI.required],maxPoints:[r.maxPoints,s.kI.required],isMandatory:[r.isMandatory,s.kI.required]})))})))})}get orderAssessmentItems(){return this.form?.get("orderAssessmentItems")}newOrderAssessmentItem(){return this.fb.group({id:0,orderAssessmentItemId:0,orderItemId:0})}addOrderAssessmentItem(){this.orderAssessmentItems.push(this.newOrderAssessmentItem)}removeOrderAssessmentItem(t){this.orderAssessmentItems.removeAt(t)}orderAssessmentItemQs(t){return this.orderAssessmentItems.at(t).get("orderAssessmentItemQs")}newOrderAssessmentItemQ(t){return this.fb.group({id:0,orderAssessmentItemId:this.orderAssessmentItems.at(t).get("id"),orderItemId:[this.orderAssessmentItems.at(t).get("orderItemId"),s.kI.required],orderId:[this.orderAssessmentItems.at(t).get("orderId"),s.kI.required],questionNo:[0,s.kI.required],subject:["",s.kI.required],question:["",s.kI.required],maxPoints:[0,s.kI.required],isMandatory:[!1,s.kI.required]})}addNewOrderAssessmentItemQ(t){this.orderAssessmentItemQs(t).push(this.newOrderAssessmentItemQ(t))}removeOrderAssessmentItemQ(t,n){this.orderAssessmentItemQs(t).removeAt(n)}updateAssessment(){this.service.updateOrderAssessment(this.form.value).subscribe({next:t=>{t?this.toastr.success("Updated the Order Assessment data","success"):this.toastr.warning("Failed to update the order assessment data","Failure")},error:t=>this.toastr.error(t,"Error in updating the Order Assessment")})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.qu),e.Y36(g.F0),e.Y36(g.gz),e.Y36(R),e.Y36(f._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-assessment"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","mt-2",2,"border-style","groove","margin-left","15px"],[1,"stdd","w15"],["formControlName","orderId"],["formControlName","orderNo"],[1,"stdd","w150"],["formControlName","customerName",3,"label"],[1,"stdd","w100"],["formArrayName","orderAssessmentItems",1,"formArray"],["type","button",1,"my-1","fa","fa-plus",2,"color","blue",3,"click"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","orderAssessmentId"],["formControlName","orderItemId"],["formControlName","professionName",3,"label"],[1,"stdd","fa","fa-trash","red",2,"margin-left","20px",3,"click"],["formArrayName","orderAssessmentItemQs",1,"formArray",2,"margin-left","15px"],[1,"my-1","fa","fa-plus",3,"click"],["formControlName","id"],["formControlName","orderAssessmentItemId"],[1,"stdd","w50"],["formControlName","questionNo",3,"label"],["formControlName","subject",3,"label"],[1,"stdd","w200"],["formControlName","question",3,"label"],["formControlName","maxPoints",3,"type","label"],["type","checkbox","formControlName","isMandatory",1,"stdd","w15"]],template:function(n,r){1&n&&e.YNc(0,xt,13,3,"form",0),2&n&&e.Q6J("ngIf",r.orderAssessment)},dependencies:[c.sg,c.O5,s._Y,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,U.t],styles:[".w15[_ngcontent-%COMP%]{width:15px}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w2090[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;vertical-align:top;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;vertical-align:top;font-size:small;font-weight:700}"]})}return i})();function Tt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",23)(2,"div",24),e._UZ(3,"app-text-input",25),e.qZA(),e.TgZ(4,"div",6),e._UZ(5,"app-text-input",26),e.qZA(),e.TgZ(6,"div",27),e._UZ(7,"app-text-input",28),e.qZA(),e.TgZ(8,"input",29),e.NdJ("change",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.calcualteTotals())}),e.qZA(),e._UZ(9,"input",30),e.TgZ(10,"button",31),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.removeOrderAssessmentItemQ(o))}),e.qZA()()()}if(2&i){const t=d.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Question No"),e.xp6(2),e.Q6J("label","Subject"),e.xp6(2),e.Q6J("label","question")}}function Ot(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.valid&&r.update())}),e.TgZ(1,"h1"),e._uU(2,"Order Assessment - design questions for Order Item Category"),e.qZA(),e.TgZ(3,"label",2),e._uU(4,"Order No"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"app-text-input",4),e.qZA(),e.TgZ(7,"label",5),e._uU(8,"Customer Name"),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-text-input",7),e.qZA(),e.TgZ(11,"label",5),e._uU(12,"Category"),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-text-input",8),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"label",5),e._uU(17,"Designed By"),e.qZA(),e.TgZ(18,"div",3),e._UZ(19,"app-text-input",9),e.qZA(),e.TgZ(20,"label",5),e._uU(21,"Approved By"),e.qZA(),e.TgZ(22,"input",10),e.NdJ("dblclick",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateApprovedBy())}),e.qZA(),e.TgZ(23,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.populateStddAssessmentQuestions())}),e.qZA(),e.TgZ(24,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.populateCustomAssessmentQuestions(r.professionId))}),e.qZA(),e.TgZ(25,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.update())}),e.qZA(),e.TgZ(26,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancel())}),e.qZA(),e.TgZ(27,"div",15)(28,"label",16),e._uU(29,"Qstn No"),e.qZA(),e.TgZ(30,"label",17),e._uU(31,"Subject"),e.qZA(),e.TgZ(32,"label",18),e._uU(33,"Question"),e.qZA(),e.TgZ(34,"label",16),e._uU(35,"Points"),e.qZA(),e.TgZ(36,"label",19),e._uU(37,"Mandatory"),e.qZA(),e.TgZ(38,"button",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewOrderAssessmentItemQ())}),e.qZA(),e.YNc(39,Tt,11,4,"div",21),e.TgZ(40,"div",22),e._uU(41),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("label","Order No"),e.xp6(4),e.Q6J("label","Customer Name"),e.xp6(4),e.Q6J("label","Category Name"),e.xp6(5),e.Q6J("label","Designed By"),e.xp6(20),e.Q6J("ngForOf",t.orderAssessmentItemQs.controls),e.xp6(2),e.hij("Total: ",t.totalMarks,"")}}let Mt=(()=>{class i{constructor(t,n,r,o,a,l){this.fb=t,this.router=n,this.activatedRoute=r,this.confirmService=o,this.service=a,this.toastr=l,this.form=new s.cw({}),this.cancelRegister=new e.vpe,this.returnUrl="",this.professionId=0,this.totalMarks=0;let p=this.router.getCurrentNavigation();p?.extras&&p.extras.state&&(p.extras.state.returnUrl&&(this.returnUrl=p.extras.state.returnUrl),p.extras.state.user&&(this.user=p.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.orderAssessmentItem=t.assessmentItem}),this.orderAssessmentItem&&(this.CreateAndInitializeFormArray(this.orderAssessmentItem),this.calcualteTotals(),this.professionId=this.orderAssessmentItem?.professionId)}CreateAndInitializeFormArray(t){this.form=this.fb.group({id:[t.id],orderAssessmentId:[t.orderAssessmentId],orderItemId:[t.orderItemId,s.kI.required],orderId:[t.orderId,s.kI.required],orderNo:[t.orderNo,s.kI.required],customerName:[t.customerName,s.kI.required],professionId:[t.professionId,s.kI.required],professionName:[t.professionName,s.kI.required],designedBy:[t.designedBy],approvedBy:[t.approvedBy],orderAssessmentItemQs:this.fb.array(t.orderAssessmentItemQs.map(n=>this.fb.group({id:[n.id??0],orderAssessmentItemId:n.orderAssessmentItemId,orderItemId:[n.orderItemId,s.kI.required],orderId:n.orderId,questionNo:[n.questionNo,s.kI.required],subject:[n.subject,s.kI.required],question:[n.question,s.kI.required],maxPoints:[n.maxPoints,s.kI.required],isMandatory:[n.isMandatory,s.kI.required]})))})}get orderAssessmentItemQs(){return this.form.get("orderAssessmentItemQs")}newOrderAssessmentItemQ(){return this.fb.group({id:0,orderAssessmentItemId:this.form.get("id"),orderItemId:[this.form.get("orderItemId"),s.kI.required],orderId:[this.form.get("orderId"),s.kI.required],questionNo:[0,s.kI.required],subject:["",s.kI.required],question:["",s.kI.required],maxPoints:[0,s.kI.required],isMandatory:[!1,s.kI.required]})}newOrderAssessmentItemQFromStddQ(t){t.forEach(n=>{this.orderAssessmentItemQs.push(this.fb.group({id:n.id,orderAssessmentItemId:n.orderAssessmentItemId,orderItemId:[n.orderItemId,s.kI.required],orderId:[n.orderId,s.kI.required],questionNo:[n.questionNo,s.kI.required],subject:[n.subject,s.kI.required],question:[n.question,s.kI.required],maxPoints:[n.maxPoints,s.kI.required],isMandatory:[n.isMandatory,s.kI.required]}))})}addNewOrderAssessmentItemQ(){this.orderAssessmentItemQs.push(this.newOrderAssessmentItemQ())}removeOrderAssessmentItemQ(t){this.orderAssessmentItemQs.removeAt(t)}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}update(){this.service.updateOrderAssessmentItem(this.form.value).subscribe({next:t=>{t?this.toastr.success("Order Assessment Item successfully updated","success"):this.toastr.warning("failed to update the order assessment item","Failed to update")}})}calcualteTotals(){this.totalMarks=this.form.get("orderAssessmentItemQs")?.value.map(t=>t.maxPoints).reduce((t,n)=>t+n)}GetConfirmation(t){var n=!1;return this.confirmService.confirm("confirm OVER-WRITE existing Assessment Questions","Currently, there are "+t+" assessment Questions relating to this Category.If you continue, these questions will be replaced with new set of standard assessment quetions").subscribe(r=>n=r),n}populateStddAssessmentQuestions(){this.GetConfirmation(this.orderAssessmentItemQs.length)?this.service.getAssessmentQStandard().subscribe({next:n=>{if(n.length>0){if(this.orderAssessmentItemQs.clear(),!n.length)return void this.toastr.warning("No standard Questions retrieved","Failure");this.newOrderAssessmentItemQFromStddQ(n)}else this.toastr.warning("Failed to retrieve the standard assessment Questions")},error:n=>this.toastr.error(n,"Error in retrieving Standard Questions")}):this.toastr.info("User aborted","abort")}populateCustomAssessmentQuestions(t){this.GetConfirmation(this.orderAssessmentItemQs.length)?this.service.getAssessmentQBankOfCategoryId(t).subscribe({next:r=>{r.length>0?(this.orderAssessmentItemQs.clear(),r.forEach(o=>{this.orderAssessmentItem?.orderAssessmentItemQs.push(o)})):this.toastr.warning("Failed to retrieve the standard assessment Questions")},error:r=>this.toastr.error(r,"Error in retrieving Standard Questions")}):this.toastr.info("User aborted","abort")}updateApprovedBy(){this.user&&(this.form.value.approvedBy=this.user.userName,this.form.get("approvedBy")?.setValue(this.user.userName))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.qu),e.Y36(g.F0),e.Y36(g.gz),e.Y36(O.z),e.Y36(R),e.Y36(f._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-assessment-item"]],outputs:{cancelRegister:"cancelRegister"},decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"lbl","b","w100"],[1,"stdd","w75"],["formControlName","orderNo",3,"label"],[1,"lbl","w100"],[1,"stdd","w250"],["formControlName","customerName",3,"label"],["formControlName","professionName",3,"label"],["formControlName","designedBy",2,"font-size","small",3,"label"],["type","text","formControlName","approvedBy",1,"stdd","w75",3,"dblclick"],["title","imports standard assessment questions",1,"btn","btn-primary","mx-2","fa","fa-download",3,"click"],["title","imports custom assessment questions matching the profession",1,"btn","fa","fa-download","mx-2",3,"click"],["title","Save this data",1,"btn","btn-success","mx-2","fa","fa-save",3,"click"],["title","close this form and return to the calling program",1,"btn","fa","fa-undo","fa-lg",3,"click"],["formArrayName","orderAssessmentItemQs"],[1,"lbl","w50"],[1,"lbl","w250"],[1,"lbl","w400"],[1,"lbl","w75"],["type","button",1,"stdd","btn","btn-priamry","fa","fa-plus","fa-lg",2,"margin-left","15px",3,"click"],[4,"ngFor","ngForOf"],[2,"margin-left","700px"],[3,"formGroupName"],[1,"stdd","w50"],["formControlName","questionNo",3,"label"],["formControlName","subject",3,"label"],[1,"stdd","w400"],["formControlName","question",3,"label"],["type","number","formControlName","maxPoints",1,"stdd","w50",3,"change"],["type","checkbox","formControlName","isMandatory",1,"stdd","mx-4"],[1,"mx-4","btn","fa","fa-trash","red",3,"click"]],template:function(n,r){1&n&&e.YNc(0,Ot,42,7,"form",0),2&n&&e.Q6J("ngIf",r.orderAssessmentItem)},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,U.t],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-left:3px;margin-right:3px;color:#00f}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin-left:3px;margin-right:3px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w400[_ngcontent-%COMP%]{width:400px}.w500[_ngcontent-%COMP%]{width:500px}.b[_ngcontent-%COMP%]{font-weight:700}.blue[_ngcontent-%COMP%]{color:#00f}.red[_ngcontent-%COMP%]{color:red}"]})}return i})();function kt(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," No order forward data available for selected Order\n"),e.qZA())}function Nt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div",11),e._uU(7),e.qZA(),e.TgZ(8,"button",12),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.deleteOff(o.id))}),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(2),e.Oqu(e.xi3(3,3,t.dateTimeForwarded,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.agentName),e.xp6(2),e.Oqu(t.emailIdForwardedTo)}}function Ut(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",6)(2,"div",3),e._uU(3),e.qZA(),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){const o=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteCat(o.id))}),e.qZA(),e.YNc(7,Nt,9,6,"div",8),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(3),e.Oqu(t.professionName),e.xp6(2),e.Oqu(t.charges),e.xp6(2),e.Q6J("ngForOf",t.orderForwardCategoryOfficials)}}function qt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",3),e._uU(8),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteOrder(r.fwd.id))}),e.qZA(),e.YNc(10,Ut,8,3,"div",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.fwd.orderNo),e.xp6(2),e.Oqu(e.xi3(6,4,t.fwd.orderDate,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.fwd.customerName),e.xp6(2),e.Q6J("ngForOf",t.fwd.orderForwardCategories)}}let Pt=(()=>{class i{constructor(){this.editEvent=new e.vpe,this.deleteEventMain=new e.vpe,this.deleteEventCat=new e.vpe,this.deleteEventOff=new e.vpe}editClicked(){this.editEvent.emit(this.fwd.id)}deleteOrder(t){this.deleteEventMain.emit(t)}deleteCat(t){this.deleteEventCat.emit(t)}deleteOff(t){this.deleteEventOff.emit(t)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-orderfwd-line"]],inputs:{fwd:"fwd"},outputs:{editEvent:"editEvent",deleteEventMain:"deleteEventMain",deleteEventCat:"deleteEventCat",deleteEventOff:"deleteEventOff"},decls:2,vars:2,consts:[[4,"ngIf"],[2,"display","inline-block","width","max-content"],[1,"stdd","w50","mx-2"],[1,"stdd","w100","mx-2"],[1,"btn","btn-sm","fa","fa-trash","red",3,"click"],[4,"ngFor","ngForOf"],[2,"margin-left","50px"],[1,"stdd","w75","mx-2"],["style","margin-left: 100px;",4,"ngFor","ngForOf"],[2,"margin-left","100px"],[1,"stddS","blue","w100"],[1,"stddS","blue","w100","mx-2"],[1,"btn","btn-sm","fa","fa-trash",3,"click"]],template:function(n,r){1&n&&(e.YNc(0,kt,2,0,"div",0),e.YNc(1,qt,11,7,"div",0)),2&n&&(e.Q6J("ngIf",!r.fwd),e.xp6(1),e.Q6J("ngIf",r.fwd))},dependencies:[c.sg,c.O5,c.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small}.stddS[_ngcontent-%COMP%]{display:inline-block;font-size:smaller}.blue[_ngcontent-%COMP%]{color:#00008b}.red[_ngcontent-%COMP%]{color:red}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}"]})}return i})();const Ft=["search"];function St(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"pagination",17),e.NdJ("pageChanged",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onPageChanged(r))}),e._uU(2," >"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Rt(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," No Order Forwarding data available "),e.qZA())}function Et(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"app-orderfwd-line",19),e.NdJ("editEvent",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.OrderFwdEdit(r))})("deleteEventMain",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.orderFwdDelete(r))})("deleteEventCat",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.orderCategoryDelete(r))})("deleteEventOff",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.orderCatOfficialDelete(r))}),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(1),e.Q6J("fwd",t)}}let Jt=(()=>{class i{constructor(t,n,r){this.fb=t,this.activatedRouter=n,this.service=r,this.form=new s.cw({}),this.data=[],this.fwdsToAgent=[],this.fwdParams=new H,this.totalCount=0}ngOnInit(){this.service.setFwdParams(this.fwdParams),this.loadFwdRecords(this.fwdParams)}loadFwdRecords(t){this.service.setFwdParams(t),this.service.getForwardsBriefPaginated(t).subscribe({next:n=>{n.result&&n.pagination&&(this.fwdsToAgent=n.result,this.pagination=n.pagination,this.totalCount=n.count)},error:n=>console.log(n)})}onSearch(){const t=this.service.getFwdParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setFwdParams(t),this.loadFwdRecords(t)}onPageChanged(t){const n=this.service.getFwdParams();n.pageNumber!==t&&(n.pageNumber=t,this.service.setFwdParams(n),this.loadFwdRecords(n))}onReset(){const t=new H;this.service.setFwdParams(t),this.loadFwdRecords(t)}OrderFwdEdit(t){}orderFwdDelete(t){}orderCategoryDelete(t){}orderCatOfficialDelete(t){}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.qu),e.Y36(g.gz),e.Y36(N))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-fwds"]],viewQuery:function(n,r){if(1&n&&e.Gf(Ft,5),2&n){let o;e.iGM(o=e.CRH())&&(r.searchTerm=o.first)}},decls:32,vars:3,consts:[[2,"display","inline-block"],["style","display: inline-block; margin-left: 15px;",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-success","mx-1",3,"click"],["routerLink","/administration/forwards/add",1,"btn","btn-outline-success"],["routerLink","/administration",1,"btn","btn-outline-success","mx-5"],[1,"form-inline","b"],[1,"stdd","w70","b"],[1,"stdd","w100","b"],[1,"stdd","w150","b"],[1,"stddC","w100","b"],[1,"stddC","w70","b"],[1,"stddF","w150","b"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[2,"display","inline-block","margin-left","15px"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"row"],[3,"fwd","editEvent","deleteEventMain","deleteEventCat","deleteEventOff"]],template:function(n,r){1&n&&(e.TgZ(0,"h6",0),e._uU(1,"Listing of Orders Forwarded to Agents"),e.qZA(),e.YNc(2,St,3,3,"div",1),e.TgZ(3,"input",2,3),e.NdJ("keyup.enter",function(){return r.onSearch()}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.onReset()}),e._uU(6,"Reset"),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Add"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Close"),e.qZA(),e.TgZ(11,"div",7)(12,"label",8),e._uU(13,"Order No"),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Order Dated"),e.qZA(),e.TgZ(16,"label",10),e._uU(17,"Customer Name"),e.qZA(),e.TgZ(18,"label",11),e._uU(19,"Category Name"),e.qZA(),e.TgZ(20,"label",12),e._uU(21,"Charges"),e.qZA(),e.TgZ(22,"label",13),e._uU(23,"Agent Name"),e.qZA(),e.TgZ(24,"label",13),e._uU(25,"Official Name"),e.qZA(),e.TgZ(26,"label",13),e._uU(27,"Date Forwarded"),e.qZA(),e.TgZ(28,"label",13),e._uU(29,"User Name"),e.qZA(),e.YNc(30,Rt,2,0,"div",14),e.YNc(31,Et,2,1,"div",15),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",void 0!==r.pagination),e.xp6(28),e.Q6J("ngIf",null==r.fwdsToAgent),e.xp6(1),e.Q6J("ngForOf",r.fwdsToAgent))},dependencies:[c.sg,c.O5,g.rH,S.Qt,Pt],styles:[".stdd[_ngcontent-%COMP%], .stddC[_ngcontent-%COMP%]{display:inline-block;font-size:small;vertical-align:top;margin-left:2px;margin-right:2px}.stddF[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;vertical-align:top;margin-left:2px;margin-right:2px}.mL320[_ngcontent-%COMP%]{margin-left:326x}.ml170[_ngcontent-%COMP%]{margin-left:174px}.b[_ngcontent-%COMP%]{font-weight:700}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w300[_ngcontent-%COMP%]{width:300px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return i})();const Dt=function(){return{dateInputFormat:"YYYY-MM-DD"}};function Qt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",29),e._UZ(2,"input",30),e.TgZ(3,"ng-select",31),e.NdJ("change",function(r){const a=e.CHM(t).index,l=e.oxw().index,p=e.oxw();return e.KtG(p.officialClicked(r,l,a))}),e.qZA(),e.TgZ(4,"div",32),e._UZ(5,"app-text-input",33),e.qZA(),e.TgZ(6,"button",34),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw().index,l=e.oxw();return e.KtG(l.removeOfficial(a,o))}),e.qZA()()()}if(2&i){const t=d.index,n=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("bsValue",n.bsValueDate)("bsConfig",e.DdM(5,Dt)),e.xp6(1),e.Q6J("items",n.customers),e.xp6(2),e.Q6J("label","Official Name")}}function Ht(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",18)(2,"div",19),e._UZ(3,"app-text-input",20),e.qZA(),e.TgZ(4,"div",21),e._UZ(5,"app-text-input",22),e.qZA(),e.TgZ(6,"div",23)(7,"label",24),e._uU(8,"Date Forwarded"),e.qZA(),e.TgZ(9,"label",25),e._uU(10,"Agent"),e.qZA(),e.TgZ(11,"label",26),e._uU(12,"Official Name"),e.qZA(),e.TgZ(13,"button",27),e.NdJ("click",function(){const o=e.CHM(t).index,a=e.oxw();return e.KtG(a.addOfficial(o))}),e.qZA(),e.YNc(14,Qt,7,6,"div",16),e.qZA(),e._UZ(15,"hr",28),e.qZA()()}if(2&i){const t=d.index,n=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Category"),e.xp6(2),e.Q6J("label","Charges"),e.xp6(9),e.Q6J("ngForOf",n.orderForwardCategoryOfficials(t).controls)}}let Yt=(()=>{class i{constructor(t,n,r,o,a,l){this.fb=t,this.toastr=n,this.router=r,this.service=o,this.activatedRoute=a,this.confirm=l,this.form=new s.cw({}),this.customers=[],this.bsValueDate=new Date}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.orderFwd=t.orderfwd,this.customers=t.customers}}),this.orderFwd&&this.CreateAndInitializeForm(this.orderFwd)}CreateAndInitializeForm(t){console.log("fwd: ",t),this.form=this.fb.group({id:[t.id??0],orderId:[t.orderId??0,s.kI.required],orderNo:[t.orderNo??0,s.kI.required],orderDate:[t.orderDate??new Date,s.kI.required],customerId:[t.customerId??0,s.kI.required],customerName:[t.customerName??""],customerCity:[t.customerCity],projectManagerId:[t.projectManagerId??0],orderForwardCategories:this.fb.array(t.orderForwardCategories.map(n=>this.fb.group({id:[n.id??0],orderId:[n.orderId??0,s.kI.required],orderItemId:[n.orderItemId??0,s.kI.required],orderForwardToAgentId:[n.orderForwardToAgentId??0,s.kI.required],professionId:[n.professionId??0,s.kI.required],professionName:[n.professionName??""],charges:[n.charges??0],orderForwardCategoryOfficials:this.fb.array(n.orderForwardCategoryOfficials.map(r=>this.fb.group({id:[r.id],orderForwardCategoryId:[r.orderForwardCategoryId??0,s.kI.required],orderItemId:[r.orderItemId??0,s.kI.required],customerOfficialId:[r.customerOfficialId??0,s.kI.required],officialName:[r.officialName??""],agentName:[r.agentName??"",s.kI.required],dateTimeForwarded:[r.dateTimeForwarded??new Date],emailIdForwardedTo:[r.emailIdForwardedTo??""],phoneNoForwardedTo:[r.phoneNoForwardedTo??""],whatsAppNoForwardedTo:[r.whatsAppNoForwardedTo??""],username:[r.username??""]})))})))})}orderForwards(){return this.form.get("orderForwards")}newForward(){return this.fb.group({orderNo:"",orderDate:"",customerName:"",dlForwardCategories:this.fb.array([])})}addForward(){this.orderForwards().push(this.newForward())}removeForward(){const r=this.service.deleteForward(this.orderFwd?.orderId??0);this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").pipe((0,q.h)(a=>a),(0,T.w)(a=>(console.log("switchmap confirmed vaue:",a),r))).subscribe(a=>{console.log("subscribed response:",a),this.router.navigateByUrl("administration/orders")})}orderForwardCategories(){return this.form.get("orderForwardCategories")}newCategory(){return this.fb.group({categoryName:"",charges:0,dlForwardCategoryOfficials:this.fb.array([])})}addCategory(){this.orderForwardCategories().push(this.newCategory())}removeCategory(t){this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").subscribe(o=>{o&&(this.orderForwardCategoryOfficials(t).clear(),this.orderForwardCategories().removeAt(t))})}removeSWitchMapAndFilterEx(t){const r=this.service.deleteOrderFwdCategory(t);this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").pipe((0,q.h)(a=>a),(0,T.w)(a=>r)).subscribe(a=>{this.orderForwardCategoryOfficials(t).clear(),this.orderForwardCategories().removeAt(t),this.router.navigateByUrl("administration/orders")})}orderForwardCategoryOfficials(t){return this.orderForwardCategories().at(t).get("orderForwardCategoryOfficials")}newOfficial(t){return this.fb.group({id:0,agentName:"",customerOfficialId:0,dateTimeForwarded:new Date,emailIdForwardedTo:"",orderForwardCategoryId:this.orderForwardCategories().at(t).get("id"),orderItemId:this.orderForwardCategories().at(t).get("orderItemId"),officialName:""})}addOfficial(t){this.orderForwardCategoryOfficials(t).push(this.newOfficial(t))}removeOfficial(t,n){this.orderForwardCategoryOfficials(t).removeAt(n)}onSubmit(){var t=this.formContainsError();""===t?0===this.form.get("id")?.value?this.service.insertForwarOrderToAgent(this.form.value).subscribe({next:n=>{this.toastr.success("Order Forward registered successfully","success"),this.close()},error:n=>{this.toastr.error("error encountered",n)}}):this.service.updateForwarOrderToAgent(this.form.value).subscribe({next:n=>{this.toastr.success("Order Forward registered successfully","success"),this.close()},error:n=>{this.toastr.error("Error encountered",n)}}):this.toastr.info(t,"Form contains error")}formContainsError(){var n="";return this.form.value.orderForwardCategories.forEach(r=>{r.orderForwardCategoryOfficials.forEach(o=>{0===o.customerOfficialId&&(n+="Customer Not Selected"),void 0!==o.dateOnlyForwarded&&(n+="Date forwarded not selected")})}),this.toastr.info(n,"info"),n}officialClicked(t,n,r){this.orderForwardCategoryOfficials(n).at(r).get("officialName")?.setValue(t.officialName)}close(){this.router.navigateByUrl("/administration/orders")}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.qu),e.Y36(f._W),e.Y36(g.F0),e.Y36(N),e.Y36(g.gz),e.Y36(O.z))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-order-forward"]],decls:29,vars:11,consts:[[1,"mt-5",3,"formGroup","ngSubmit"],[1,"stdd","w150","b"],[1,"stdd","w250","mx-2","blue"],[1,"stdd","w100","b"],[1,"stdd","w755","mx-2","blue"],[1,"stdd","w125","b"],[1,"stdd","w125","mx-2"],["title","Save this form","type","submit",1,"btn","fa-success","fa","fa-save","fa-2x","green"],["title","Close this form","type","button",1,"btn","fa-primary","fa","fa-undo","fa-2x",3,"click"],["title","Delete this Order Forard","type","button",1,"btn","fa-primary","fa","fa-trash","red","pull-right",3,"click"],[2,"border","double","color","darkblue","margin","0px","padding","0px"],["formArrayName","orderForwardCategories"],[1,"stdd","b","w250"],[1,"stdd","b","w100","mx-2"],["title","add a category",1,"btn","btn-primary","stdd","fa","fa-plus",3,"click"],[2,"margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],[4,"ngFor","ngForOf"],[1,"ml-5",2,"font-size","smaller"],[3,"formGroupName"],[1,"stdd","w250"],["readonly","","formControlName","professionName",3,"label"],[1,"stdd","mx-2","w100"],["formControlName","charges",3,"label"],["formArrayName","orderForwardCategoryOfficials",2,"margin","0px","padding","0px"],[1,"stdd","mL355","w110","b"],[1,"stdd","mx-2","w300","b"],[1,"stdd","b","mx-2","w250"],["type","button",1,"stdd","mx-20","fa","fa-plus",3,"click"],[2,"border-bottom","blue","border-bottom-style","solid","border-width","2px","color","darkblue","margin","0px","padding","0px"],[2,"margin-left","355px",3,"formGroupName"],["bsDatepicker","","type","text","placeholder","Forwarded On","formControlName","dateTimeForwarded",1,"mx-2",2,"display","inline-block","width","100px","font-size","small",3,"bsValue","bsConfig"],["bindLabel","officialName","bindValue","id","labelForId","customerId","clearAllText","Clear","formControlName","customerOfficialId",2,"display","inline-block","font-size","small","width","300px",3,"items","change"],[1,"stdd","mx-2","w250"],["formControlName","officialName",2,"font-size","small",3,"label"],[1,"btn","fa","fa-sm","fa-trash","red",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(1,"label",1),e._uU(2,"Customer Name"),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Order No"),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.TgZ(9,"label",5),e._uU(10,"Order Dated"),e.qZA(),e.TgZ(11,"div",6),e._uU(12),e.ALo(13,"date"),e.qZA(),e._UZ(14,"button",7),e.TgZ(15,"button",8),e.NdJ("click",function(){return r.close()}),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){return r.removeForward()}),e.qZA(),e._UZ(17,"hr",10),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Category"),e.qZA(),e.TgZ(21,"label",13),e._uU(22,"Charges"),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return r.addCategory()}),e.qZA(),e._UZ(24,"br",15),e.YNc(25,Ht,16,4,"div",16),e.qZA()(),e.TgZ(26,"div",17),e._uU(27),e.ALo(28,"json"),e.qZA()),2&n&&(e.Q6J("formGroup",r.form),e.xp6(4),e.Oqu(null==r.orderFwd?null:r.orderFwd.customerName),e.xp6(4),e.Oqu(null==r.orderFwd?null:r.orderFwd.orderNo),e.xp6(4),e.Oqu(e.xi3(13,6,null==r.orderFwd?null:r.orderFwd.orderDate,"dd-MMM-yy")),e.xp6(13),e.Q6J("ngForOf",r.orderForwardCategories().controls),e.xp6(2),e.hij(" ",e.lcZ(28,9,r.form.value),"\n"))},dependencies:[c.sg,b.Np,b.Y5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,M.w9,U.t,c.Ts,c.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.mL355[_ngcontent-%COMP%]{margin-left:355px}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:green}.blue[_ngcontent-%COMP%]{color:#00008b}"]})}return i})();var jt=m(6125);function Lt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",1),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.SelectedClicked())})("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pending.checked=r)}),e.qZA(),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA(),e.TgZ(6,"div",4),e._uU(7),e.qZA(),e.TgZ(8,"div",5),e._uU(9),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",6),e._uU(14),e.ALo(15,"timeago"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.pending.checked)("ngModel",t.pending.checked),e.xp6(2),e.Oqu(t.pending.applicationNo),e.xp6(2),e.Oqu(t.pending.candidateName),e.xp6(2),e.Oqu(t.pending.customerName),e.xp6(2),e.Oqu(t.pending.categoryRefAndName),e.xp6(2),e.Oqu(e.xi3(12,8,t.pending.referredOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(e.lcZ(15,11,t.pending.referredOn))}}let Kt=(()=>{class i{constructor(){this.selectedEvent=new e.vpe}ngOnInit(){}SelectedClicked(){this.selectedEvent.emit(this.pending)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-selection-pending-line"]],inputs:{pending:"pending"},outputs:{selectedEvent:"selectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["type","checkbox",1,"form-check-input","stdd","mL85",2,"border","aliceblue","border","inset",3,"checked","ngModel","change","ngModelChange"],[2,"display","inline-block","vertical-align","top","margin-left","30px !important","width","50px"],[1,"stdd","w150","mL10"],[1,"stdd","w200"],[1,"stdd","w150"],[1,"stdd","w100"]],template:function(n,r){1&n&&e.YNc(0,Lt,16,13,"div",0),2&n&&e.Q6J("ngIf",r.pending)},dependencies:[c.O5,s.Wl,s.JJ,s.On,c.uU,jt.wr],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL85[_ngcontent-%COMP%]{margin-left:85px!important}.mL10[_ngcontent-%COMP%]{margin-left:10px!important}"]})}return i})();const zt=["search"];function Bt(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1," No referrals pending for selection\n"),e.qZA())}function Vt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"pagination",9),e.NdJ("pageChanged",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.onPageChanged(r))}),e._uU(2," >"),e.qZA(),e.TgZ(3,"div",10)(4,"input",11,12),e.NdJ("keyup.enter",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e.qZA(),e.TgZ(6,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSearch())}),e._uU(7,"Search"),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onReset())}),e._uU(9,"Reset"),e.qZA(),e.TgZ(10,"div",15)(11,"ng-select",16),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectionStatus=r)})("change",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.changeSelectionStatus(r))}),e.qZA()()(),e.TgZ(12,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.UpdateSelections())}),e.qZA(),e._UZ(13,"button",18),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10),e.xp6(10),e.Q6J("items",t.rejectionStatuses)("ngModel",t.selectionStatus),e.xp6(1),e.Q6J("disabled",""===t.selectionStatus||0===t.pendingSelectionsSelected.length)}}function Wt(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"app-selection-pending-line",20),e.NdJ("selectedEvent",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.pendingSelected(r))}),e.qZA()()}if(2&i){const t=d.$implicit;e.xp6(1),e.Q6J("pending",t)}}const Xt=[{path:"",component:X},{path:"orders",component:Ee,resolve:{professions:L.h,customers:W}},{path:"orders/edit/:id",component:ht,resolve:{order:i=>{var d=i.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.f3M)(k.p).getOrder(+d)},associates:ee.Y,customers:W,employees:()=>(0,e.f3M)(V).getEmployeeIdAndKnownAs(),professions:L.h,contractReviewItemDto:i=>{var d=i.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.f3M)(Y).getContractReviewItem(+d)}}},{path:"ordersforwarded",component:Jt},{path:"orderfwd/:orderid",component:Yt,resolve:{orderfwd:i=>{var d=i.paramMap.get("orderid");return null===d?(0,h.of)(null):(0,e.f3M)(N).getOrderForwardOfAnOrder(+d)},customers:()=>(0,e.f3M)(Q.v).getOfficialAndCustomerName()}},{path:"orderassessmentitem/:id",component:Mt,resolve:{assessmentItem:i=>{var d=i.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.f3M)(R).getOrderAssessmentItem(+d)}}},{path:"orderassessment/:id",component:Ct,resolve:{orderAssessment:i=>{var d=i.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.f3M)(R).getOrderAssessment(+d)}}},{path:"selections",component:fe},{path:"pendingSelections",component:(()=>{class i{constructor(t,n){this.service=t,this.toastr=n,this.selectionsPending=[],this.pendingSelectionsSelected=[],this.selectionStatus="",this.cvsSelected=[],this.sParams=new I,this.pageIndex=1,this.totalCount=0,this.todayDate=new Date(Date.now()),this.rejectionStatuses=[{name:"Selected"},{name:"Rejected-Low Salary"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}]}ngOnInit(){this.getPendingSelectionsPaged(this.sParams)}getPendingSelectionsPaged(t){this.service.getPendingSelections(t).subscribe({next:n=>{n.result&&n.pagination?(this.selectionsPending=n.result,this.totalCount=n.count,this.pagination=n.pagination):this.toastr.warning("There are no pending selections","No record found")},error:n=>this.toastr.error(n)})}convertSelDecisionToDto(t){if(0!==t.length){var n=[];return t.forEach(r=>{n.push({cVRefId:r.cvRefId,selectionStatus:this.selectionStatus??"",decisionDate:this.todayDate,remarks:r.remarks??""})}),n}this.toastr.warning("no selections made to save")}UpdateSelections(){if(0!==this.pendingSelectionsSelected.length){if(this.pendingSelectionsSelected=this.pendingSelectionsSelected.filter(n=>n.checked),""===this.selectionStatus||0===this.pendingSelectionsSelected.length)return void this.toastr.warning("Please press the MARK AS SELECTED Button, or choose one of the rejectioon reasons to proceed. also, atleast one candidate must be selected","Selection Status not chosen");var t=this.convertSelDecisionToDto(this.pendingSelectionsSelected);return this.service.registerSelectionDecisions(t).subscribe({next:n=>{this.toastr.success("selection decisions registered"),0!==n.length&&n.forEach(o=>{var a=this.selectionsPending.findIndex(p=>p.cvRefId===o);if(a>=0){this.selectionsPending.splice(a,1);var l=this.pendingSelectionsSelected.findIndex(p=>p.cvRefId===o);l>=0&&this.pendingSelectionsSelected.splice(l,1)}})},error:n=>{console.log("error:",n),this.toastr.error(n.details,n.message)}})}}onPageChanged(t){const n=this.service.getParams();n.pageNumber!==t&&(n.pageNumber=t.page,this.service.setParams(n),this.getPendingSelectionsPaged(n))}onSortSelected(t){var n=t.value;const r=this.service.getParams();r.sort=n,r.pageNumber=1,r.pageSize=10,this.service.setParams(r),this.getPendingSelectionsPaged(r)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getPendingSelectionsPaged(t)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new I,this.service.setParams(this.sParams),this.getPendingSelectionsPaged(this.sParams)}changeSelectionStatus(t){this.selectionStatus=t.name,console.log("selection status",this.selectionStatus)}pendingSelected(t){if(t.checked){var n=this.pendingSelectionsSelected.find(o=>o.cvRefId===t.cvRefId);n?n.checked=t.checked:this.pendingSelectionsSelected.push(t)}else{var r=this.pendingSelectionsSelected.findIndex(o=>o.cvRefId===t.cvRefId);r>=0&&this.pendingSelectionsSelected.splice(r,1)}}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(F),e.Y36(f._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-selection-pending"]],viewQuery:function(n,r){if(1&n&&e.Gf(zt,5),2&n){let o;e.iGM(o=e.CRH())&&(r.searchTerm=o.first)}},decls:17,vars:3,consts:[[4,"ngIf"],["class","d-flex justify-contents-between align-items-center","style","display: inline-block; margin-left: 15px; vertical-align: top;",4,"ngIf"],[1,"stdd","w50","mL80"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","row",4,"ngFor","ngForOf"],[1,"d-flex","justify-contents-between","align-items-center",2,"display","inline-block","margin-left","15px","vertical-align","top"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"form-inline",2,"margin-left","50px !important"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-1",3,"click"],[1,"btn","btn-outline-success","mx-1",3,"click"],["title","Choose the rejection Status.  Press the UPDATE SELECTION button to save these changes",1,"stdd","w200","mx-2"],["bindLabel","name","bindValue","name","labelForId","selectionStatus","clearAllText","Clear",2,"border-style","double",3,"items","ngModel","ngModelChange","change"],["title","update the selections/rejections",1,"btn","btn-outline-success","fa","fa-check","mx-5",3,"disabled","click"],["routerLink","/administration","title","return to Administration Menu",1,"btn","btn-outline-close","fa","fa-undo","mx-5"],[1,"row"],[3,"pending","selectedEvent"]],template:function(n,r){1&n&&(e.YNc(0,Bt,2,0,"div",0),e.YNc(1,Vt,14,6,"div",1),e.TgZ(2,"label",2),e._uU(3,"Check"),e.qZA(),e.TgZ(4,"label",3),e._uU(5,"App No"),e.qZA(),e.TgZ(6,"label",4),e._uU(7,"Candidate Name"),e.qZA(),e.TgZ(8,"label",5),e._uU(9,"Customer Name"),e.qZA(),e.TgZ(10,"label",4),e._uU(11,"Category Ref"),e.qZA(),e.TgZ(12,"label",6),e._uU(13,"Referred On"),e.qZA(),e.TgZ(14,"label",6),e._uU(15,"Days since"),e.qZA(),e.YNc(16,Wt,2,1,"div",7)),2&n&&(e.Q6J("ngIf",!r.selectionsPending),e.xp6(1),e.Q6J("ngIf",r.selectionsPending&&r.pagination),e.xp6(15),e.Q6J("ngForOf",r.selectionsPending))},dependencies:[c.sg,c.O5,g.rH,S.Qt,s.JJ,s.On,M.w9,Kt],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle;font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.b[_ngcontent-%COMP%]{font-weight:700}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}"]})}return i})()},{path:"employment",component:ve},{path:"categories",component:be},{path:"industries",component:xe},{path:"qualifications",component:Ce},{path:"customers",component:we},{path:"userroles",component:Ze.T}];let en=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[c.ez,g.Bz.forChild(Xt),g.Bz]})}return i})(),tn=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[c.ez,en,$.m]})}return i})()}}]);