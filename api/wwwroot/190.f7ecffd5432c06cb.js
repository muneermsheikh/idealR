"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[190],{5490:(P,x,o)=>{o.d(x,{n:()=>e});class e{constructor(){this.id=0,this.section="",this.divn="",this.accountType="",this.accountName="",this.accountClass="",this.opBalance=0}}},9183:(P,x,o)=>{o.d(x,{G:()=>e});class e{constructor(){this.id=0,this.accountName="",this.cOAId=0,this.divn="",this.accountType="",this.divisionToExclude="",this.pageNumber=1,this.pageSize=20,this.sort="accountName",this.search=""}}},7411:(P,x,o)=>{o.d(x,{z:()=>h});var e=o(5879),b=o(2051);let Z=(()=>{class p{constructor(_){this.bsModalRef=_,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#t=this.\u0275fac=function(r){return new(r||p)(e.Y36(b.UZ))};static#e=this.\u0275cmp=e.Xpm({type:p,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,f){1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA()(),e.TgZ(3,"div",2)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return f.confirm()}),e._uU(8),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return f.decline()}),e._uU(10),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(f.title),e.xp6(3),e.Oqu(f.message),e.xp6(3),e.Oqu(f.btnOkText),e.xp6(2),e.Oqu(f.btnCancelText))}})}return p})();var E=o(7398),m=o(5516),t=o(9862);let h=(()=>{class p{constructor(_,r){this.modalService=_,this.http=r,this.baseUrl=m.N.apiUrl}confirm(_="Confirmation",r="Are you sure you want to do this?",f="Ok",s="Cancel"){return this.bsModelRef=this.modalService.show(Z,{initialState:{title:_,message:r,btnOkText:f,btnCancelText:s}}),this.bsModelRef.onHidden.pipe((0,E.U)(()=>this.bsModelRef.content.result))}getHelp(_){return this.http.get(this.baseUrl+"Help/help/"+_)}static#t=this.\u0275fac=function(r){return new(r||p)(e.LFG(b.tT),e.LFG(t.eN))};static#e=this.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},2556:(P,x,o)=>{o.d(x,{s:()=>_});var e=o(7328),b=o(2096),Z=o(7398),E=o(5516),m=o(9183);class t{constructor(){this.applicationNo=0,this.passportNo="",this.mobileNo=""}}var h=o(1436),p=o(5879),g=o(9862);let _=(()=>{class r{constructor(s){this.http=s,this.apiUrl=E.N.apiUrl,this.currentUserSource=new e.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.sParams=new m.G,this.coalists=[],this.cache=new Map,this.candidateCOAParams=new t}getCoaList(){return this.http.get(this.apiUrl+"finance/coalist")}createCandidateCOA(s){return this.http.get(this.apiUrl+"finance/candidateCOA/"+s+"/"+!0)}getCoas(s=!0){var M=this.sParams;if(s){const w=this.cache.get(Object.values(M).join("-"));if(w)return(0,b.of)(w)}let d=(0,h.SU)(M);return console.log("sParams",d),(0,h.Tr)(this.apiUrl+"Finance/coapagedlist",d,this.http).pipe((0,Z.U)(w=>(this.cache.set(Object.values(M).join("-"),w),w)))}editCOA(s){return 0===s.id?this.http.post(this.apiUrl+"finance/coa",s):this.http.put(this.apiUrl+"finance/coa",s)}addNewCOA(s){return this.http.post(this.apiUrl+"finance/coa",s)}deleteCOA(s){return this.http.delete(this.apiUrl+"finance/coa/"+s)}updateCOA(s){return this.http.put(this.apiUrl+"finance/coa",s)}getMatchingCOAs(s){return this.http.get(this.apiUrl+"finance/matchingcoas/"+s)}deleteFromCache(s){this.cache.delete(s),this.pagination.totalItems--}getGroupOfCOAs(s){return this.http.get(this.apiUrl+"Finance/coabygroup/"+s)}getCandidateCOAs(s){return this.http.get(this.apiUrl+"Finance/coasforpayment/"+s)}setParams(s){this.sParams=s}getParams(){return this.sParams}static#t=this.\u0275fac=function(M){return new(M||r)(p.LFG(g.eN))};static#e=this.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},9462:(P,x,o)=>{o.d(x,{w:()=>M});var e=o(5879),b=o(2051),Z=o(2556),E=o(8763),m=o(6814),t=o(6223),h=o(4807);function p(d,w){if(1&d){const c=e.EpF();e.TgZ(0,"ng-select",17),e.NdJ("click",function(){e.CHM(c);const C=e.oxw(2);return e.KtG(C.classChanged())})("ngModelChange",function(C){e.CHM(c);const T=e.oxw(2);return e.KtG(T.coa.accountClass=C)}),e.qZA()}if(2&d){const c=e.oxw(2);e.Q6J("items",c.accountClasses)("ngModel",c.coa.accountClass)}}function g(d,w){1&d&&(e.TgZ(0,"div"),e._uU(1,"No matching Accounts exist"),e.qZA())}function _(d,w){if(1&d&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&d){const c=w.$implicit;e.xp6(1),e.hij(" ",c," ")}}function r(d,w){if(1&d&&(e.TgZ(0,"div"),e.YNc(1,_,2,1,"div",18),e.qZA()),2&d){const c=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",c.matchingNames)}}function f(d,w){if(1&d&&(e.TgZ(0,"div"),e.YNc(1,g,2,0,"div",12),e.YNc(2,r,2,1,"div",12),e.qZA()),2&d){const c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===c.matchingNames.length),e.xp6(1),e.Q6J("ngIf",c.matchingNames.length>0)}}function s(d,w){if(1&d){const c=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"label",8),e._uU(3,"Section"),e.qZA(),e.TgZ(4,"input",9),e.NdJ("ngModelChange",function(C){e.CHM(c);const T=e.oxw();return e.KtG(T.coa.section=C)}),e.qZA(),e.TgZ(5,"label",8),e._uU(6,"Account Class"),e.qZA(),e.YNc(7,p,1,2,"ng-select",10),e._UZ(8,"br"),e.TgZ(9,"label",8),e._uU(10,"Account Name: "),e.qZA(),e.TgZ(11,"input",11),e.NdJ("change",function(){e.CHM(c);const C=e.oxw();return e.KtG(C.checkExists())})("ngModelChange",function(C){e.CHM(c);const T=e.oxw();return e.KtG(T.coa.accountName=C)}),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"div",7),e.YNc(14,f,3,2,"div",12),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"label",8),e._uU(17,"Account Type: "),e.qZA(),e.TgZ(18,"input",13),e.NdJ("ngModelChange",function(C){e.CHM(c);const T=e.oxw();return e.KtG(T.coa.accountType=C)}),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"label",8),e._uU(21,"Division: "),e.qZA(),e.TgZ(22,"input",13),e.NdJ("ngModelChange",function(C){e.CHM(c);const T=e.oxw();return e.KtG(T.coa.divn=C)}),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"label",8),e._uU(25,"Opening Balance"),e.qZA(),e.TgZ(26,"input",14),e.NdJ("ngModelChange",function(C){e.CHM(c);const T=e.oxw();return e.KtG(T.coa.opBalance=C)}),e.qZA(),e.TgZ(27,"label",15),e._uU(28,"Use -ve prefix for credit amounts"),e.qZA()(),e._UZ(29,"div",16),e.qZA()}if(2&d){const c=e.oxw();e.xp6(4),e.Q6J("ngModel",c.coa.section),e.xp6(3),e.Q6J("ngIf",c.accountClasses),e.xp6(4),e.Q6J("ngModel",c.coa.accountName),e.xp6(3),e.Q6J("ngIf",!c.coa.accountName),e.xp6(4),e.Q6J("ngModel",c.coa.accountType),e.xp6(4),e.Q6J("ngModel",c.coa.divn),e.xp6(4),e.Q6J("ngModel",c.coa.opBalance)}}let M=(()=>{class d{constructor(c,A,C){this.bsModalRef=c,this.coaService=A,this.toastr=C,this.editCOAEvent=new e.vpe,this.matchingCOA="",this.matchingNames=[],this.title="",this.accountClasses=[{accountClass:"exp"},{accountClass:"banks"},{accountClass:"salesiata"},{accountClass:"personalaccount"},{accountClass:"sales"},{accountClass:"candidate"},{accountClass:"asset"},{accountClass:"employees"},{accountClass:"vendors"}]}ngOnInit(){this.checkExists()}checkExists(){null===this.coa||""===this.coa.accountName||(this.matchingNames=[],this.coaService.getMatchingCOAs(this.coa.accountName).subscribe(c=>{this.matchingNames=c},c=>{this.matchingNames=[]}))}updateCOA(){""!==this.coa.accountClass&&""!==this.coa.accountName&&""!==this.coa.accountType&&""!==this.coa.divn?(this.editCOAEvent.emit(this.coa),this.bsModalRef.hide()):this.toastr.warning("all properties except Opening Balance are mandatory")}classChanged(){}static#t=this.\u0275fac=function(A){return new(A||d)(e.Y36(b.UZ),e.Y36(Z.s),e.Y36(E._W))};static#e=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-coa-edit-modal"]],outputs:{editCOAEvent:"editCOAEvent"},decls:7,vars:2,consts:[[1,"modal-header"],[1,"b"],["type","button","title","submit",1,"stdd","btn","btn-default","green","fa","fa-2x","fa-save",2,"margin-left","20px",3,"click"],["type","button","aria-label","Close",1,"stdd","close","pull-right","fa","fa-2x","fa-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"modal-body"],[1,"stdd"],[1,"stdd","w150","b"],["type","text","title","Section",3,"ngModel","ngModelChange"],["class","stdd w150","bindLabel","accountClass","bindValue","accountClass","labelForId","accountClass","placeholder","Select Account Class","clearAllText","Clear",3,"items","ngModel","click","ngModelChange",4,"ngIf"],["type","text",1,"stdd","w250",3,"ngModel","change","ngModelChange"],[4,"ngIf"],["type","text",1,"stdd","w25",3,"ngModel","ngModelChange"],["type","text",1,"stdd","w90",3,"ngModel","ngModelChange"],[1,"stdd","w150"],[1,"stdd","col-4",2,"vertical-align","top"],["bindLabel","accountClass","bindValue","accountClass","labelForId","accountClass","placeholder","Select Account Class","clearAllText","Clear",1,"stdd","w150",3,"items","ngModel","click","ngModelChange"],[4,"ngFor","ngForOf"]],template:function(A,C){1&A&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return C.updateCOA()}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return C.bsModalRef.hide()}),e.qZA()(),e.YNc(5,s,30,7,"div",4),e._UZ(6,"div",5)),2&A&&(e.xp6(2),e.Oqu(C.title),e.xp6(3),e.Q6J("ngIf",void 0!==C.coa))},dependencies:[m.sg,m.O5,t.Fj,t.JJ,t.On,h.w9],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:2px 1px 1px 2px}.w25[_ngcontent-%COMP%]{width:25px}.w90[_ngcontent-%COMP%]{width:90px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.b[_ngcontent-%COMP%]{font-weight:700}.green[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:red}"]})}return d})()},1190:(P,x,o)=>{o.d(x,{Z:()=>I,v:()=>J});var e=o(5490),b=o(9183),Z=o(9462),E=o(2181),m=o(4664),t=o(5879),h=o(8763),p=o(2051),g=o(6223);let _=(()=>{class u{constructor(n,a){this.toastr=n,this.bsModalRef=a,this.outputEvent=new t.vpe,this.inputValue="",this.title=""}ngOnInit(){}returnInputValue(){""!==this.inputValue?(this.outputEvent.emit(this.inputValue),this.bsModalRef.hide()):this.toastr.warning("no value entered")}static#t=this.\u0275fac=function(a){return new(a||u)(t.Y36(h._W),t.Y36(p.UZ))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-input-modal"]],outputs:{outputEvent:"outputEvent"},decls:10,vars:2,consts:[[1,"modal-header"],[1,"b"],["type","button","title","submit",1,"stdd","btn","btn-default","green","fa","fa-2x","fa-check",3,"click"],["type","button","aria-label","Close",1,"stdd","close","pull-right","fa","fa-2x","fa-close",3,"click"],[1,"modal-body"],[1,"stdd","w75","b"],["type","text",1,"stdd","w110",3,"ngModel","ngModelChange"],[1,"modal-footer"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.returnInputValue()}),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.bsModalRef.hide()}),t.qZA()(),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Enter the value: "),t.qZA(),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(v){return i.inputValue=v}),t.qZA()(),t._UZ(9,"div",7)),2&a&&(t.xp6(2),t.Oqu(i.title),t.xp6(6),t.Q6J("ngModel",i.inputValue))},dependencies:[g.Fj,g.JJ,g.On],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:medium}.w75[_ngcontent-%COMP%]{width:75px}.w110[_ngcontent-%COMP%]{width:110px}"]})}return u})();var r=o(5676),f=o(2556),s=o(7133),M=o(7411),d=o(6814),w=o(7012);function c(u,D){1&u&&(t.TgZ(0,"div"),t._uU(1," No Chart of Accounts data on record "),t.qZA())}function A(u,D){if(1&u){const n=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.updateCandidateAccountName())}),t.qZA()}}function C(u,D){if(1&u){const n=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.viewCOA(i.t))}),t._uU(5),t.qZA(),t.TgZ(6,"div",4),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.updateCOA(i.t))}),t._uU(7),t.qZA(),t.TgZ(8,"div",5),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.statementOfAccount(i.t.id))}),t._uU(9),t.qZA(),t.TgZ(10,"div",6),t._uU(11),t.qZA(),t.TgZ(12,"div",7),t._uU(13),t.qZA(),t.TgZ(14,"div",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.statementOfAccount(i.t.id))}),t.qZA(),t.YNc(15,A,1,0,"div",9),t.qZA()()}if(2&u){const n=t.oxw();t.xp6(3),t.Oqu(n.t.section.substring(0,12)),t.xp6(2),t.Oqu(n.t.divn),t.xp6(2),t.Oqu(n.t.accountName),t.xp6(2),t.Oqu(n.t.accountType),t.xp6(2),t.Oqu(n.t.accountClass),t.xp6(2),t.hij("",n.t.opBalance.toLocaleString()," "),t.xp6(2),t.Q6J("ngIf","candidate"===n.t.accountClass)}}let T=(()=>{class u{constructor(n){this.confirmService=n,this.editEvent=new t.vpe,this.viewEvent=new t.vpe,this.deleteEvent=new t.vpe,this.statementOfAccountEvent=new t.vpe,this.updateCandidateAccountEvent=new t.vpe}statementOfAccount(n){this.statementOfAccountEvent.emit(n)}updateCandidateAccountName(){this.updateCandidateAccountEvent.emit(this.t)}updateCOA(n){this.editEvent.emit(n)}viewCOA(n){this.viewEvent.emit(n)}deleteCOA(n){this.confirmService.confirm("deleting this account will also delete all its transactions.  Do you really want to continue with the deletion?","confirm DELETE a chart of account along with all its transactions").subscribe(a=>{}),this.deleteEvent.emit(n)}static#t=this.\u0275fac=function(a){return new(a||u)(t.Y36(M.z))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-coa-item"]],inputs:{t:"t"},outputs:{editEvent:"editEvent",viewEvent:"viewEvent",deleteEvent:"deleteEvent",statementOfAccountEvent:"statementOfAccountEvent",updateCandidateAccountEvent:"updateCandidateAccountEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"stdd","row","mb-0"],["title","view this account",1,"stdd","w125"],["title","view this account",1,"stdd","w75",3,"click"],["title","edit this account",1,"stdd","w250","cursorPointer",3,"click"],[1,"stdd","w40","alignRight",3,"click"],[1,"stdd","w100","alignRight"],[1,"stdd","w75","pr5","rAlign",2,"border","aqua"],["title","statement of account",1,"stdd","w30","fa","fa-table","cursorPointer",3,"click"],["class","stdd w30 green fa fa-pencil","title","update accountname to include application number",3,"click",4,"ngIf"],["title","update accountname to include application number",1,"stdd","w30","green","fa","fa-pencil",3,"click"]],template:function(a,i){1&a&&(t.YNc(0,c,2,0,"div",0),t.YNc(1,C,16,7,"div",0)),2&a&&(t.Q6J("ngIf",null===i.t),t.xp6(1),t.Q6J("ngIf",null!=i.t))},dependencies:[d.O5],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;vertical-align:top;color:#f0f8ff}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.red[_ngcontent-%COMP%]{color:pink}.rAlign[_ngcontent-%COMP%]{text-align:right}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w250[_ngcontent-%COMP%]{width:250px}"]})}return u})();const y=["search"];function N(u,D){if(1&u){const n=t.EpF();t.TgZ(0,"pagination",20),t.NdJ("pageChanged",function(i){t.CHM(n);const l=t.oxw();return t.KtG(l.onPageChanged(i))}),t._uU(1," >"),t.qZA()}if(2&u){const n=t.oxw();t.Q6J("totalItems",n.pagination.totalItems)("itemsPerPage",n.pagination.itemsPerPage)("maxSize",10)}}function U(u,D){if(1&u){const n=t.EpF();t.TgZ(0,"div",21)(1,"app-coa-item",22),t.NdJ("editEvent",function(i){t.CHM(n);const l=t.oxw();return t.KtG(l.editCOAModal(i))})("deleteEvent",function(i){t.CHM(n);const l=t.oxw();return t.KtG(l.deleteCoa(i))})("statementOfAccountEvent",function(i){t.CHM(n);const l=t.oxw();return t.KtG(l.statementOfAccount(i))}),t.qZA()()}if(2&u){const n=D.$implicit;t.xp6(1),t.Q6J("t",n)}}let I=(()=>{class u{constructor(n,a,i,l,v){this.service=n,this.toastr=a,this.router=i,this.confirmService=l,this.modalService=v,this.sParams=new b.G,this.totalCount=0,this.coas=[],this.bolNavigationExtras=!1,this.returnUrl="",this.inputApplicationNo=0,this.lastExclude="",this.sortOptions=[{name:"By Account Name Asc",value:"name"},{name:"By Account Name Desc",value:"namedesc"},{name:"By Account Type Asc",value:"type"},{name:"By Account Type Desc",value:"typedesc"},{name:"By Division Asc",value:"divn"},{name:"By Division Desc",value:"divndesc"}];let O=this.router.getCurrentNavigation();O?.extras&&O.extras.state&&(this.bolNavigationExtras=!0,O.extras.state.returnUrl&&(this.returnUrl=O.extras.state.returnUrl),O.extras.state.userobject&&(this.user=O.extras.state.userobject))}ngOnInit(){this.getCOAs()}getCOAs(n=!0){return this.service.setParams(this.sParams),this.service.getCoas(n).subscribe({next:a=>{null!=a&&(this.coas=a.result,this.totalCount=a.count,this.pagination=a.pagination)},error:a=>this.toastr.error(a.error.details,"Error encountered")})}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new b.G,this.service.setParams(this.sParams),this.getCOAs()}onPageChanged(n){const a=this.service.getParams();a.pageNumber!==n.page&&(a.pageNumber=n.page,this.service.setParams(a),this.getCOAs())}onSearch(){this.sParams.search!==this.searchTerm.nativeElement.value&&(this.sParams.search=this.searchTerm.nativeElement.value,this.sParams.pageNumber=1,this.service.setParams(this.sParams),this.getCOAs())}applyFilter(){this.sParams.divisionToExclude!==this.lastExclude&&(this.getCOAs(!1),this.lastExclude=this.sParams.divisionToExclude)}addNewCOA(){this.editCOAModal(null)}editCOAModal(n){null===n&&(n=new e.n),this.bsModalRef=this.modalService.show(Z.w,{class:"modal-dialog-centered modal-md",initialState:{title:"edit Chart of account",coa:n}}),this.bsModalRef.content.editCOAEvent.pipe((0,E.h)(i=>null!=i),(0,m.w)(i=>this.service.editCOA(i))).subscribe(i=>{if(console.log("returned from api:",i),null!==i)if(null==n)this.coas.push(i),this.toastr.success("COA was added","Success");else{var l=this.coas.findIndex(v=>v.id===n?.id);-1!==l&&(this.coas[l]=i),this.toastr.success("COA was edited","Success")}else this.toastr.warning("Failed to update the COA","Failure")})}updateCandidateAccountName(n){if(this.bsModalRef=this.modalService.show(_,{class:"modal-dialog-centered modal-md",initialState:{title:"get Application Number to include in the Account Name"}}),this.bsModalRef.content.outputEvent.subscribe(l=>{this.inputApplicationNo=l}),n.accountName.includes("Application")){var i=n.accountName.indexOf("Application");n.accountName=n.accountName.substring(1,i+10)+this.inputApplicationNo}else n.accountName=n.accountName+"-Application "+this.inputApplicationNo;this.service.editCOA(n).subscribe(l=>{var v=this.coas.findIndex(O=>O.id===n.id);-1!==v&&(this.coas[v]=l)})}statementOfAccount(n){this.bsModalRef=this.modalService.show(r.Z,{class:"modal-dialog-centered modal-md",initialState:{title:"get Date Range Input for a details for this Account"}}),this.bsModalRef.content.returnDateRangeEvent.subscribe(i=>{if(i.fromDate.getFullYear<2e3||i.uptoDate.getFullYear<2e3)this.toastr.warning("failed to get the date range");else{var l=this.convertDateToDateOnly(i.fromDate),v=this.convertDateToDateOnly(i.uptoDate);this.router.navigate(["/finance/soa/"+n+"/"+l+"/"+v],{state:{userobject:this.user,dateRange:i,returnUrl:"/finance/coalist"}})}},i=>{console.log("error in invoking Date Range input modal",i)})}convertDateToDateOnly(n){const i=new Date(+n),l=i.getFullYear(),v=i.getMonth()+1,O=i.getDate();return`${l}-${v.toString().padStart(2,"0")}-${O.toString().padStart(2,"0")}`}deleteCoa(n){this.confirmService.confirm("Do you want to delete the Chart of Account?  You may want to rename it, instead of deleting it!","confirm Delete Chart of account").subscribe(a=>{a||this.toastr.info("deletion request canceled")})&&this.service.deleteCOA(n).subscribe(a=>{a?this.removeFromCache(n):this.toastr.error("failed to delete the Chart of Account")},a=>{this.toastr.error("failed to delete the Chart of Account",a)})}removeFromCache(n){this.service.deleteFromCache(n);var a=this.coas.findIndex(i=>i.id==n);this.coas.splice(a,1),this.toastr.success("Chart of account deleted")}onSortSelected(n){this.sParams.sort!==n&&(this.sParams.sort=n,this.service.setParams(this.sParams),this.getCOAs())}returnToCaller(){this.router.navigateByUrl("/")}static#t=this.\u0275fac=function(a){return new(a||u)(t.Y36(f.s),t.Y36(h._W),t.Y36(s.F0),t.Y36(M.z),t.Y36(p.tT))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-coa-list"]],viewQuery:function(a,i){if(1&a&&t.Gf(y,5),2&a){let l;t.iGM(l=t.CRH())&&(i.searchTerm=l.first)}},decls:33,vars:4,consts:[[1,"stdd","b"],["class","stdd mx-3","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","w250",2,"display","inline-block",3,"keyup.enter"],["search",""],["title","search the text entered",1,"w20","btn","fa","fa-filter","fa-2x",2,"color","aliceblue",3,"click"],["title","Add a new Account",1,"btn","w20","fa","fa-plus","fa-2x",2,"color","aliceblue",3,"click"],["title","resets search parameters",1,"btn","w20","fa","fa-refresh","fa-2x",2,"color","aliceblue",3,"click"],[1,"lbl","w80",2,"text-align","right","margin-left","15px"],["type","radio","id","none","name","none","value","",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black","display","inline-block","vertical-align","top",3,"ngModel","ngModelChange"],[2,"vertical-align","top","font-size","smaller"],["type","radio","id","candidate","name","candidate","value","C",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black","display","inline-block","vertical-align","top",3,"ngModel","ngModelChange"],["title","Apply the filter",1,"btn","w20","fa","fa-check","green","fa-2x",2,"color","aliceblue",3,"click"],["title","close this page",1,"btn","w20","fa","fa-window-close","fa-2x",2,"color","aliceblue",3,"click"],[1,"container"],[1,"stdd","w125","b"],[1,"stdd","w75","b"],[1,"stdd","w250","b"],[1,"stdd","w40","b"],[1,"stdd","w100","b"],["class","row",4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd","mx-3",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"row"],[3,"t","editEvent","deleteEvent","statementOfAccountEvent"]],template:function(a,i){1&a&&(t.TgZ(0,"h4",0),t._uU(1,"Chart of Account Listing"),t.qZA(),t.YNc(2,N,2,3,"pagination",1),t.TgZ(3,"input",2,3),t.NdJ("keyup.enter",function(){return i.onSearch()}),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.onSearch()}),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.addNewCOA()}),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.onReset()}),t.qZA(),t.TgZ(8,"label",7),t._uU(9,"Exclude:"),t.qZA(),t.TgZ(10,"input",8),t.NdJ("ngModelChange",function(v){return i.sParams.divisionToExclude=v}),t.qZA(),t.TgZ(11,"span",9),t._uU(12,"None"),t.qZA(),t.TgZ(13,"input",10),t.NdJ("ngModelChange",function(v){return i.sParams.divisionToExclude=v}),t.qZA(),t.TgZ(14,"span",9),t._uU(15,"Candidate"),t.qZA(),t.TgZ(16,"button",11),t.NdJ("click",function(){return i.applyFilter()}),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return i.returnToCaller()}),t.qZA(),t._UZ(18,"hr"),t.TgZ(19,"div",13)(20,"div",14),t._uU(21,"Section"),t.qZA(),t.TgZ(22,"div",15),t._uU(23,"Divn"),t.qZA(),t.TgZ(24,"div",16),t._uU(25,"Account Name"),t.qZA(),t.TgZ(26,"div",17),t._uU(27,"Type"),t.qZA(),t.TgZ(28,"div",18),t._uU(29,"Class"),t.qZA(),t.TgZ(30,"div",15),t._uU(31,"Op Balance"),t.qZA(),t.YNc(32,U,2,1,"div",19),t.qZA()),2&a&&(t.xp6(2),t.Q6J("ngIf",void 0!==i.pagination),t.xp6(8),t.Q6J("ngModel",i.sParams.divisionToExclude),t.xp6(3),t.Q6J("ngModel",i.sParams.divisionToExclude),t.xp6(19),t.Q6J("ngForOf",i.coas))},dependencies:[d.sg,d.O5,w.Qt,g.Fj,g._,g.JJ,g.On,T],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.w20[_ngcontent-%COMP%]{width:20px}.w35[_ngcontent-%COMP%]{width:35px}.w40[_ngcontent-%COMP%]{width:40px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.b[_ngcontent-%COMP%]{font-weight:700}.green[_ngcontent-%COMP%]{color:#006400}.rAlign[_ngcontent-%COMP%]{text-align:right}.fontSmall[_ngcontent-%COMP%]{font-size:small}"]})}return u})();function J(u){const n=new Date(+u),a=n.getFullYear(),i=n.getMonth()+1,l=n.getDate();return new Date(a,i,l)}},5676:(P,x,o)=>{o.d(x,{Z:()=>p});var e=o(5879);class b{constructor(){this.fromDate=new Date,this.uptoDate=new Date}}var Z=o(8763),E=o(2051),m=o(3593),t=o(6223);const h=function(){return{dateInputFormat:"YYYY-MM-DD"}};let p=(()=>{class g{constructor(r,f){this.toastr=r,this.bsModalRef=f,this.returnDateRangeEvent=new e.vpe,this.title="",this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.minDate.setDate(this.minDate.getDate()-30)}returnDateRange(){if(this.minDate>this.maxDate)this.toastr.warning("End Date should be equal to or later than from Date");else{var r=new b;r.fromDate=this.minDate,r.uptoDate=this.maxDate,this.returnDateRangeEvent.emit(r),this.bsModalRef.hide()}}static#t=this.\u0275fac=function(f){return new(f||g)(e.Y36(Z._W),e.Y36(E.UZ))};static#e=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-date-input-range-modal"]],outputs:{returnDateRangeEvent:"returnDateRangeEvent"},decls:13,vars:9,consts:[[1,"modal-header"],[1,"b"],["type","button","title","submit",1,"stdd","btn","btn-default","green","fa","fa-2x","fa-check",3,"click"],["type","button","aria-label","Close",1,"stdd","close","pull-right","fa","fa-2x","fa-close",3,"click"],[1,"modal-body"],[1,"stdd","w75","b"],["type","text","placeholder","First Date","bsDatepicker","",1,"stdd","w110",3,"ngModel","bsValue","bsConfig","ngModelChange"],[1,"stdd","w90","b","rAlign","mx-2"],["type","text","placeholder","Second Date","bsDatepicker","",1,"stdd","w110",3,"ngModel","bsValue","bsConfig","ngModelChange"],[1,"modal-footer"]],template:function(f,s){1&f&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.returnDateRange()}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.bsModalRef.hide()}),e.qZA()(),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"First Date: "),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(d){return s.minDate=d}),e.qZA(),e.TgZ(9,"label",7),e._uU(10,"Second Date: "),e.qZA(),e.TgZ(11,"input",8),e.NdJ("ngModelChange",function(d){return s.maxDate=d}),e.qZA()(),e._UZ(12,"div",9)),2&f&&(e.xp6(2),e.Oqu(s.title),e.xp6(6),e.Q6J("ngModel",s.minDate)("bsValue",s.bsValueDate)("bsConfig",e.DdM(7,h)),e.xp6(3),e.Q6J("ngModel",s.maxDate)("bsValue",s.bsValueDate)("bsConfig",e.DdM(8,h)))},dependencies:[m.Np,m.Y5,t.Fj,t.JJ,t.On],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w90[_ngcontent-%COMP%]{width:90px}.w110[_ngcontent-%COMP%]{width:110px}.b[_ngcontent-%COMP%]{font-weight:700}.rAlign[_ngcontent-%COMP%]{text-align:right}.green[_ngcontent-%COMP%]{color:green}.stdd[_ngcontent-%COMP%]{display:inline-block}"]})}return g})()},7328:(P,x,o)=>{o.d(x,{t:()=>Z});var e=o(8645),b=o(4552);class Z extends e.x{constructor(m=1/0,t=1/0,h=b.l){super(),this._bufferSize=m,this._windowTime=t,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,m),this._windowTime=Math.max(1,t)}next(m){const{isStopped:t,_buffer:h,_infiniteTimeWindow:p,_timestampProvider:g,_windowTime:_}=this;t||(h.push(m),!p&&h.push(g.now()+_)),this._trimBuffer(),super.next(m)}_subscribe(m){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(m),{_infiniteTimeWindow:h,_buffer:p}=this,g=p.slice();for(let _=0;_<g.length&&!m.closed;_+=h?1:2)m.next(g[_]);return this._checkFinalizedStatuses(m),t}_trimBuffer(){const{_bufferSize:m,_timestampProvider:t,_buffer:h,_infiniteTimeWindow:p}=this,g=(p?1:2)*m;if(m<1/0&&g<h.length&&h.splice(0,h.length-g),!p){const _=t.now();let r=0;for(let f=1;f<h.length&&h[f]<=_;f+=2)r=f;r&&h.splice(0,r+1)}}}}}]);