"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[153],{7114:(w,b,o)=>{o.d(b,{t:()=>T});var n=o(5879),f=o(6223),g=o(6814);function e(l,m){if(1&l&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&l){const _=n.oxw();n.xp6(1),n.hij(" Please enter a ",_.label," ")}}function x(l,m){if(1&l&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&l){const _=n.oxw();n.xp6(1),n.AsE(" ",_.label," must be at least ",null==_.control.errors?null:_.control.errors.minlength.requiredLength," characters ")}}function h(l,m){if(1&l&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&l){const _=n.oxw();n.xp6(1),n.AsE(" ",_.label," must be at most ",null==_.control.errors?null:_.control.errors.maxlength.requiredLength," characters ")}}function v(l,m){if(1&l&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&l){const _=n.oxw();n.xp6(1),n.hij(" ",_.label," do not match ")}}let T=(()=>{class l{constructor(_){this.ngControl=_,this.label="",this.type="text",this.width="",this.ngControl.valueAccessor=this}writeValue(_){}registerOnChange(_){}registerOnTouched(_){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(r){return new(r||l)(n.Y36(f.a5,2))};static#t=this.\u0275cmp=n.Xpm({type:l,selectors:[["app-text-input"]],inputs:{label:"label",type:"type",width:"width"},decls:6,vars:10,consts:[[1,"mb-3",2,"vertical-align","middle"],[1,"form-control",2,"font-size","small","word-wrap","normal","height","auto","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px",3,"type","width","formControl","placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(r,p){1&r&&(n.TgZ(0,"div",0),n._UZ(1,"input",1),n.YNc(2,e,2,1,"div",2),n.YNc(3,x,2,2,"div",2),n.YNc(4,h,2,2,"div",2),n.YNc(5,v,2,1,"div",2),n.qZA()),2&r&&(n.xp6(1),n.ekj("is-invalid",p.control.touched&&p.control.invalid),n.s9C("type",p.type),n.s9C("width",p.width),n.s9C("placeholder",p.label),n.Q6J("formControl",p.control),n.xp6(1),n.Q6J("ngIf",null==p.control.errors?null:p.control.errors.required),n.xp6(1),n.Q6J("ngIf",null==p.control.errors?null:p.control.errors.minlength),n.xp6(1),n.Q6J("ngIf",null==p.control.errors?null:p.control.errors.maxlength),n.xp6(1),n.Q6J("ngIf",null==p.control.errors?null:p.control.errors.isMatching))},dependencies:[g.O5,f.Fj,f.JJ,f.oH]})}return l})()},4034:(w,b,o)=>{o.d(b,{a:()=>n});class n{constructor(){this.customerId=0,this.email="",this.phoneNo="",this.dateIssued=new Date,this.dateReceived=new Date,this.pageNumber=1,this.pageSize=1,this.search="",this.sort=""}}},9667:(w,b,o)=>{o.d(b,{o:()=>e});var n=o(5879),f=o(2096),g=o(639);const e=x=>{var h=x.paramMap.get("id")??"0",v=x.paramMap.get("customerId")??"0";return"0"===h&&"0"===v?(0,f.of)(null):(0,n.f3M)(g.T).getFeedbackObject(+h,+v)}},639:(w,b,o)=>{o.d(b,{T:()=>l});var n=o(7328),f=o(2096),g=o(7398),e=o(5516),x=o(4034),h=o(3976),v=o(5879),T=o(9862);let l=(()=>{class m{constructor(r){this.http=r,this.apiUrl=e.N.apiUrl,this.currentUserSource=new n.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.fParams=new x.a,this.cache=new Map}getFeedbacks(r){const p=this.cache.get(Object.values(r).join("-"));if(p)return(0,f.of)(p);let M=(0,h.UC)(r);return(0,h.Tr)(this.apiUrl+"Feedback/pagedlist",M,this.http).pipe((0,g.U)(Z=>(this.cache.set(Object.values(r).join("-"),Z),Z)))}getFeedbackWithItems(r){return this.http.get(this.apiUrl+"Feedback/FeedbackFromId/"+r)}updateFeedback(r){return this.http.put(this.apiUrl+"Feedback",r)}deleteFeedback(r){return this.http.delete(this.apiUrl+"Feedback/delete/"+r)}saveNewFeedback(r){return this.http.post(this.apiUrl+"Feedback/saveFeedback",r)}deleteFeedbackInput(r){return this.http.delete(this.apiUrl+"Feedback/deleteinput/"+r)}getFeedbackObject(r,p){return this.http.get(this.apiUrl+"Feedback/newfeedback/"+r+"/"+p)}getFeedbackHistory(r){return this.http.get(this.apiUrl+"Feedback/history/"+r)}sendFeedbackEmailToClient(r){return console.log("reached feedbackservice, URL","sample string"),this.http.get(this.apiUrl+"Feedback/history/"+r)}setParams(r){this.fParams=r}getParams(){return this.fParams}static#e=this.\u0275fac=function(p){return new(p||m)(v.LFG(T.eN))};static#t=this.\u0275prov=v.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},8431:(w,b,o)=>{o.d(b,{t:()=>u});var n=o(2181),f=o(4664),g=o(4034),e=o(5879),x=o(7133),h=o(639),v=o(7411),T=o(8763),l=o(6814),m=o(7012);function _(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e.TgZ(5,"div",3),e._uU(6),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",4),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",2),e._uU(14),e.qZA(),e.TgZ(15,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editClicked(s.fdbk.id))}),e.qZA(),e.TgZ(16,"button",6),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.generateEmail(s.fdbk.id))}),e.qZA(),e.TgZ(17,"button",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteClicked(s.fdbk.id))}),e.qZA()()}if(2&d){const t=e.oxw();e.xp6(2),e.Oqu(t.fdbk.customerName),e.xp6(2),e.Oqu(t.fdbk.city),e.xp6(2),e.Oqu(t.fdbk.officialName),e.xp6(2),e.Oqu(e.xi3(9,6,t.fdbk.dateIssued,"dd-MMM-yy")),e.xp6(3),e.Oqu(e.xi3(12,9,t.fdbk.dateReceived,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.fdbk.gradeAssessedByClient)}}let r=(()=>{class d{constructor(t){this.service=t,this.editEvent=new e.vpe,this.deleteEvent=new e.vpe,this.emailEvent=new e.vpe}editClicked(t){this.service.getFeedbackWithItems(t).subscribe({next:a=>{this.editEvent.emit(t)}})}deleteClicked(t){}generateEmail(t){this.emailEvent.emit(t)}static#e=this.\u0275fac=function(a){return new(a||d)(e.Y36(h.T))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-feedback-line"]],inputs:{fdbk:"fdbk"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",emailEvent:"emailEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","w200"],[1,"stdd","w75"],[1,"stdd","w125"],[1,"stdd","w100"],[1,"btn","fa","fa-pencil",3,"click"],[1,"btn","fa","fa-envelope",3,"click"],[1,"btn","fa","fa-trash","red",3,"click"]],template:function(a,s){1&a&&e.YNc(0,_,18,12,"div",0),2&a&&e.Q6J("ngIf",s.fdbk)},dependencies:[l.O5,l.uU],styles:[".w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px}.red[_ngcontent-%COMP%]{color:red}"]})}return d})();const p=["search"];function M(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div",7)(1,"pagination",8),e.NdJ("pageChanged",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e._uU(2," >"),e.qZA()()}if(2&d){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Z(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div",7)(1,"input",9,10),e.NdJ("keyup.enter",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearch())}),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearch())}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onReset())}),e._uU(6," Reset "),e.qZA(),e.TgZ(7,"h6",7),e._uU(8,"To add a new feedback, go to the customers listing, click a button to the right against a customer name"),e.qZA()()}}function I(d,i){1&d&&(e.TgZ(0,"div"),e._uU(1," No feedback data available as per your search conditions\n"),e.qZA())}function O(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div")(1,"app-feedback-line",14),e.NdJ("editEvent",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.editClicked(s))})("deleteEvent",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.deleteClicked(s))})("emailEvent",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.emailClicked(s))}),e.qZA()()}if(2&d){const t=i.$implicit;e.xp6(1),e.Q6J("fdbk",t)}}function F(d,i){if(1&d&&(e.TgZ(0,"div"),e.YNc(1,O,2,1,"div",13),e.qZA()),2&d){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.feedbacks)}}let u=(()=>{class d{constructor(t,a,s,c){this.router=t,this.service=a,this.confirm=s,this.toastr=c,this.feedbacks=[],this.fParams=new g.a,this.totalCount=0,this.returnUrl="";let k=this.router.getCurrentNavigation();k?.extras&&k.extras.state&&(k.extras.state.returnUrl&&(this.returnUrl=k.extras.state.returnUrl),k.extras.state.user&&(this.user=k.extras.state.user))}ngOnInit(){this.loadFeedbacks()}loadFeedbacks(){this.service.setParams(this.fParams??new g.a),this.service.getFeedbacks(this.fParams).subscribe({next:t=>{t.result&&t.pagination&&(this.feedbacks=t.result,this.totalCount=t.count,this.pagination=t.pagination)}})}navigateByUrl(t){this.router.navigate([t],{state:{user:this.user,returnUrl:"/feedback/list"}})}onSearch(){const t=this.service.getParams()??new g.a;t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.loadFeedbacks()}onReset(){this.searchTerm.nativeElement.value="",this.fParams=new g.a,this.service.setParams(this.fParams),this.loadFeedbacks()}onPageChanged(t){const a=this.service.getParams()??new g.a;a.pageNumber!==t.page&&(a.pageNumber=t.page,this.service.setParams(a),this.loadFeedbacks())}editClicked(t){this.navigateByUrl("/feedback/edit/"+t)}deleteClicked(t){var a=t;const c=this.service.deleteFeedback(a);this.confirm.confirm("confirm Delete","confirm delete this Feedback record?. WARNING: this cannot be undone").pipe((0,n.h)(C=>C),(0,f.w)(C=>c)).subscribe(C=>{if(C){this.toastr.success("Customer deleted","deletion successful");var P=this.feedbacks.findIndex(E=>E.id==a);P>=0&&this.feedbacks.splice(P,1)}else this.toastr.error("Error in deleting the Feedback","failed to delete")})}emailClicked(t){this.service.sendFeedbackEmailToClient(t)}static#e=this.\u0275fac=function(a){return new(a||d)(e.Y36(x.F0),e.Y36(h.T),e.Y36(v.z),e.Y36(T._W))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-feedback-list"]],viewQuery:function(a,s){if(1&a&&e.Gf(p,5),2&a){let c;e.iGM(c=e.CRH())&&(s.searchTerm=c.first)}},decls:18,vars:4,consts:[["class","stdd",4,"ngIf"],[1,"my-0"],[1,"stdd","w200"],[1,"stdd","w75"],[1,"stdd","w125"],[1,"stdd","w100"],[4,"ngIf"],[1,"stdd"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd","my-2",3,"totalItems","itemsPerPage","maxSize","pageChanged"],["type","text","title","enter text to search","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"stdd","btn","btn-outline-primary",3,"click"],["type","button",1,"stdd","btn","btn-outline-success","mx-3",3,"click"],[4,"ngFor","ngForOf"],[3,"fdbk","editEvent","deleteEvent","emailEvent"]],template:function(a,s){1&a&&(e.YNc(0,M,3,3,"div",0),e.YNc(1,Z,9,0,"div",0),e._UZ(2,"hr",1),e.TgZ(3,"div",2),e._uU(4,"Customer"),e.qZA(),e.TgZ(5,"div",3),e._uU(6,"City"),e.qZA(),e.TgZ(7,"div",4),e._uU(8,"Official Name"),e.qZA(),e.TgZ(9,"div",5),e._uU(10,"Issued On"),e.qZA(),e.TgZ(11,"div",5),e._uU(12,"Received On"),e.qZA(),e.TgZ(13,"div",3),e._uU(14,"Grade"),e.qZA(),e._UZ(15,"hr",1),e.YNc(16,I,2,0,"div",6),e.YNc(17,F,2,1,"div",6)),2&a&&(e.Q6J("ngIf",void 0!==s.pagination),e.xp6(1),e.Q6J("ngIf",s.feedbacks),e.xp6(15),e.Q6J("ngIf",!s.feedbacks),e.xp6(1),e.Q6J("ngIf",s.feedbacks))},dependencies:[l.sg,l.O5,m.Qt,r],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top;word-wrap:normal}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return d})()},8699:(w,b,o)=>{o.d(b,{A:()=>F});var n=o(6223),f=o(2181),g=o(4664),e=o(5879),x=o(7411),h=o(7133),v=o(639),T=o(8763),l=o(6814),m=o(3593),_=o(4807),r=o(7114);function p(u,d){1&u&&(e.TgZ(0,"div",6),e._uU(1," No feedback on record\n"),e.qZA())}function M(u,d){if(1&u){const i=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"input",44),e.TgZ(2,"input",45),e.NdJ("change",function(){e.CHM(i);const a=e.oxw().index,s=e.oxw(2);return e.KtG(s.gradeChanged(a))}),e.qZA(),e._UZ(3,"input",46),e.TgZ(4,"input",47),e.NdJ("change",function(){e.CHM(i);const a=e.oxw().index,s=e.oxw(2);return e.KtG(s.gradeChanged(a))}),e.qZA()()}}function Z(u,d){if(1&u){const i=e.EpF();e.TgZ(0,"div",32),e._UZ(1,"input",33),e.TgZ(2,"div",34),e._UZ(3,"app-text-input",35),e.qZA(),e._UZ(4,"input",36),e.TgZ(5,"input",37),e.NdJ("change",function(){const s=e.CHM(i).index,c=e.oxw(2);return e.KtG(c.gradeChanged(s))}),e.qZA(),e._UZ(6,"input",38),e.TgZ(7,"input",39),e.NdJ("change",function(){const s=e.CHM(i).index,c=e.oxw(2);return e.KtG(c.gradeChanged(s))}),e.qZA(),e.YNc(8,M,5,0,"div",40),e.TgZ(9,"div",41),e._UZ(10,"app-text-input",42),e.qZA(),e.TgZ(11,"button",43),e.NdJ("click",function(){const s=e.CHM(i).index,c=e.oxw(2);return e.KtG(c.removeFeedbackInput(s))}),e.qZA()()}if(2&u){const i=d.index;e.Q6J("formGroupName",i),e.xp6(3),e.Q6J("label","Question"),e.xp6(5),e.Q6J("ngIf",i<8),e.xp6(1),e.Q6J("ngClass",i<8?"":"mL185"),e.xp6(1),e.Q6J("label","Remarks")}}const I=function(){return{dateInputFormat:"YYYY-MM-DD"}};function O(u,d){if(1&u){const i=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"label",9),e._uU(3,"Customer Name"),e.qZA(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"label",9),e._uU(7,"Feedback No"),e.qZA(),e.TgZ(8,"div",11),e._uU(9),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"label",9),e._uU(12,"Official Name"),e.qZA(),e.TgZ(13,"div",10),e._uU(14),e.qZA(),e.TgZ(15,"label",12),e._uU(16,"Designation"),e.qZA(),e.TgZ(17,"div",13),e._uU(18),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"label",9),e._uU(21,"Email"),e.qZA(),e.TgZ(22,"div",10),e._uU(23),e.qZA(),e.TgZ(24,"label",12),e._uU(25,"Phone No"),e.qZA(),e.TgZ(26,"div",14),e._uU(27),e.qZA(),e.TgZ(28,"label",15),e._uU(29,"Grade"),e.qZA(),e.TgZ(30,"div",16),e._uU(31),e.qZA()(),e.TgZ(32,"div",17)(33,"ng-select",18),e.NdJ("ngModelChange",function(a){e.CHM(i);const s=e.oxw();return e.KtG(s.feedbackIdSelected=a)}),e.qZA(),e.TgZ(34,"button",19),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.showFeedback())}),e.qZA(),e.TgZ(35,"button",20),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.newFeedback())}),e.qZA(),e.TgZ(36,"button",21),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.sendEmail())}),e.qZA()(),e._UZ(37,"hr",22),e.TgZ(38,"form",23)(39,"label",24),e._uU(40,"Issued On"),e.qZA(),e._UZ(41,"input",25),e.TgZ(42,"label",9),e._uU(43,"Received On"),e.qZA(),e._UZ(44,"input",26)(45,"br"),e.TgZ(46,"label",27),e._uU(47,"Sr#"),e.qZA(),e.TgZ(48,"label",28),e._uU(49,"Parameter"),e.qZA(),e.TgZ(50,"label",29),e._uU(51,"Remarks"),e.qZA(),e._UZ(52,"hr",22),e.TgZ(53,"div",30),e.YNc(54,Z,12,5,"div",31),e.qZA()()()}if(2&u){const i=e.oxw();e.xp6(5),e.AsE(" ",i.feedback.customerName,", ",i.feedback.city,""),e.xp6(4),e.hij(" ",i.feedback.feedbackNo,""),e.xp6(5),e.hij(" ",i.feedback.officialName,""),e.xp6(4),e.hij(" ",i.feedback.designation,""),e.xp6(5),e.hij(" ",i.feedback.email,""),e.xp6(4),e.hij(" ",i.feedback.phoneNo,""),e.xp6(4),e.hij(" ",i.feedback.gradeAssessedByClient,""),e.xp6(2),e.Q6J("items",i.feedbackHistory)("ngModel",i.feedbackIdSelected),e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("bsValue",i.bsValueDate)("bsConfig",e.DdM(16,I)),e.xp6(3),e.Q6J("bsValue",i.bsValueDate)("bsConfig",e.DdM(17,I)),e.xp6(10),e.Q6J("ngForOf",i.feedbackInputItems.controls)}}let F=(()=>{class u{constructor(i,t,a,s,c,k){this.fb=i,this.confirm=t,this.activatedRoute=a,this.service=s,this.toastr=c,this.router=k,this.bsValueDate=new Date,this.bsValue=new Date,this.feedbackHistory=[],this.feedbackIdSelected=-1,this.lastFeedbackIdSelected=-1,this.form=new n.cw({}),this.returnUrl="";let C=this.router.getCurrentNavigation();C?.extras&&C.extras.state&&(C.extras.state.returnUrl&&(this.returnUrl=C.extras.state.returnUrl),C.extras.state.user&&(this.user=C.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(i=>{this.feedback=i.feedback,this.feedbackHistory=i.history,this.feedback&&this.InitializeForm(this.feedback)})}InitializeForm(i){this.form=this.fb.group({id:i.id,customerId:i.customerId,customerName:i.customerName,city:i.city,officialName:i.officialName,designation:i.designation,email:i.email,phoneNo:i.phoneNo,dateIssued:i.dateIssued,gradeAssessedByClient:i.gradeAssessedByClient,customerSuggestion:i.customerSuggestion,feedbackInputItems:this.fb.array(i.feedbackItems.map(t=>this.fb.group({id:t.id,customerFeedbackId:t.customerFeedbackId,feedbackGroup:t.feedbackGroup,questionNo:t.questionNo,question:[t.question,n.kI.required],response:[t.response,n.kI.required],prompt1:[t.prompt1,n.kI.required],prompt2:[t.prompt2,n.kI.required],prompt3:[t.prompt3],prompt4:t.prompt4,remarks:t.remarks})))})}get feedbackInputItems(){return this.form.get("feedbackInputItems")}newFeedbackItem(){var i=this.feedbackInputItems.at(this.feedbackInputItems.length-1);return this.fb.group({id:0,customerFeedbackId:this.feedback?.id,questionNo:i.get("questionNo")?.value+1,question:"",isMandatory:!1,prompt1:"",prompt2:"",prompt3:"",prompt4:"",remarks:"",response:""})}addNewFeedbackItem(){this.feedbackInputItems.push(this.newFeedbackItem)}removeFeedbackInput(i){this.confirm.confirm("Are you sure you want to delete this record?","confirm Delete").subscribe({next:t=>{t&&this.feedbackInputItems.removeAt(i)}})}updateFeedback(){var i=this.form.value;console.log("formdata:",i);const t=i.id>0?this.service.updateFeedback(i):this.service.saveNewFeedback(i);this.confirm.confirm("confirm Update","Do you want to update changes").pipe((0,f.h)(c=>c),(0,g.w)(()=>t)).subscribe(c=>{c?this.toastr.success("Feedback successfully updated","Insertion successful"):this.toastr.error("Error in updating the Feedback Input","failed to update")})}generateLinkForAddresses(){}close(){this.router.navigateByUrl(this.returnUrl)}gradeChanged(i){var a=100*this.feedbackInputItems.value.map(c=>+c.response).reduce((c,k)=>c+k,0)/(20*this.feedback.feedbackItems.length),s=a>90?"A+":a>80?"A":a>70?"B+":a>60?"B":a>50?"C":"D";this.form.get("gradeAssessedByClient")?.setValue(s+"("+Math.round(a)+"%)")}showFeedback(){this.feedbackIdSelected===this.lastFeedbackIdSelected&&-1===this.feedbackIdSelected||(this.service.getFeedbackObject(this.feedbackIdSelected,0).subscribe({next:i=>{this.feedback=i,this.InitializeForm(this.feedback)}}),this.lastFeedbackIdSelected=this.feedbackIdSelected)}newFeedback(){0!==this.feedback.customerId&&this.service.getFeedbackObject(0,this.feedback.customerId).subscribe({next:i=>{this.feedback=i,this.InitializeForm(this.feedback)}})}sendEmail(){0!==this.feedback.id?this.service.sendFeedbackEmailToClient(this.feedback.id):this.toastr.warning("This feedback needs to be saved before its link can be forwarded to the customer","feedback not saved")}static#e=this.\u0275fac=function(t){return new(t||u)(e.Y36(n.qu),e.Y36(x.z),e.Y36(h.gz),e.Y36(v.T),e.Y36(T._W),e.Y36(h.F0))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-feedback"]],decls:9,vars:6,consts:[[1,"stdd"],[1,"stdd","btn","fa","fa-check","mL600",3,"disabled","click"],[1,"stdd","btn","fa","fa-window-close","fa-2x","mx-2",3,"click"],["class","my-5",4,"ngIf"],["class","container stdd",4,"ngIf"],[2,"font-size","smaller"],[1,"my-5"],[1,"container","stdd"],[2,"vertical-align","top","display","inline-block"],[1,"lbl","w150","fSmall","b"],[1,"stdd","w250","fSmall"],[1,"stdd","w50","fSmall"],[1,"lbl","w120","fSmall","b"],[1,"stdd","w200","fSmall"],[1,"stdd","w150","fSmall"],[1,"lbl","w50","fSmall","b",2,"margin-left","5px"],[1,"stdd","w100","fSmall"],[2,"vertical-align","top","display","inline-block","margin-left","15px"],["bindLabel","feedbackIssueDate","bindValue","feedbackId","labelForId","feedbackId","clearAllText","Clear",2,"width","200px","display","inline-block",3,"items","ngModel","ngModelChange"],["title","click to display the selected Feedback",1,"btn","fa","fa-list",2,"display","inline-block","margin-left","5px",3,"click"],["title","click to add a new feedback for the customer",1,"btn","fa","fa-plus",2,"display","inline-block","margin-left","5px",3,"click"],["title","click to add a new feedback for the customer",1,"btn","fa","fa-envelope",2,"display","inline-block","margin-left","5px",3,"click"],[1,"my-0",2,"border-width","2px","border-color","black"],[3,"formGroup"],[1,"lbl","w100","fSmall","b"],["type","text","placeholder","Issued On","formControlName","dateIssued","bsDatepicker","",1,"stdd","fSmaller","w100",3,"bsValue","bsConfig"],["type","text","placeholder","Received On","formControlName","dateReceived","bsDatepicker","",1,"stdd","fSmaller","w100",3,"bsValue","bsConfig"],[1,"lbl","fSmaller","b","w50"],[1,"lbl","fSmaller","b","w370"],[1,"lbl","fSmaller","b","w250",2,"margin-left","325px !important"],["formArrayName","feedbackInputItems",1,"my-2"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","formControlName","questionNo",1,"stdd","w25","fSmaller"],[1,"stdd","w370"],["formControlName","question",3,"label"],["type","text","formControlName","prompt1",1,"prompt","w75"],["type","radio","id","i","value","20","checked","response==='20'","formControlName","response",1,"radio",3,"change"],["type","text","formControlName","prompt2",1,"prompt","w50"],["type","radio","id","i","value","15","checked","response==='15'","formControlName","response",1,"radio",3,"change"],["class","stdd",4,"ngIf"],[1,"stdd","w200",3,"ngClass"],["formControlName","remarks",3,"label"],[1,"btn","fa","fa-trash","red",3,"click"],["type","text","formControlName","prompt3",1,"prompt","w75"],["type","radio","id","i","value","10","checked","response==='10'","formControlName","response",1,"radio",3,"change"],["type","text","formControlName","prompt4",1,"prompt","w35"],["type","radio","id","i","value","5","checked","response==='5'","formControlName","response",1,"radio",3,"change"]],template:function(t,a){1&t&&(e.TgZ(0,"h4",0),e._uU(1,"Customer Feedback"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return a.updateFeedback()}),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.close()}),e.qZA(),e.YNc(4,p,2,0,"div",3),e.YNc(5,O,55,18,"div",4),e.TgZ(6,"div",5),e._uU(7),e.ALo(8,"json"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("disabled",!a.form.dirty),e.xp6(2),e.Q6J("ngIf",!a.feedback),e.xp6(1),e.Q6J("ngIf",a.feedback),e.xp6(2),e.hij(" ",e.lcZ(8,4,a.form.value),"\n"))},dependencies:[l.mk,l.sg,l.O5,m.Np,m.Y5,n._Y,n.Fj,n._,n.JJ,n.JL,n.On,n.sg,n.u,n.x0,n.CE,_.w9,r.t,l.Ts],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;padding:0;font-weight:700;vertical-align:top;word-wrap:normal}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;padding:0;word-wrap:normal}.hist[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;color:#00008b;font-size:small}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.mL185[_ngcontent-%COMP%]{margin-left:185px}.mL600[_ngcontent-%COMP%]{margin-left:600px!important}.mL50[_ngcontent-%COMP%]{margin-left:50px!important}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.radio[_ngcontent-%COMP%]{width:30px;display:inline-block;margin:0 2px;padding:0}md-content[_ngcontent-%COMP%]{position:absolute;height:100px}.prompt[_ngcontent-%COMP%]{font-size:x-small;margin-left:1px;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.w25[_ngcontent-%COMP%]{width:25px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w80[_ngcontent-%COMP%]{width:80px}.w100[_ngcontent-%COMP%]{width:100px}.w120[_ngcontent-%COMP%]{width:120px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w370[_ngcontent-%COMP%]{width:370px}"]})}return u})()}}]);