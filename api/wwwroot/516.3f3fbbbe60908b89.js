"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[516],{5275:(U,g,n)=>{n.d(g,{D:()=>e});class e{constructor(){this.customerType="customer",this.customerCityName="",this.customerIndustryId=0,this.includeOfficials=!1,this.includeIndustries=!1,this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},3056:(U,g,n)=>{n.d(g,{p:()=>e});class e{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},101:(U,g,n)=>{n.d(g,{_:()=>e});class e{constructor(){this.id=0,this.professionName="",this.professionGroup="",this.search="",this.pageNumber=1,this.pageSize=15}}},7450:(U,g,n)=>{n.d(g,{v:()=>M});var e=n(7328),h=n(2096),T=n(7398),P=n(5516),v=n(1436),x=n(5275),m=n(5879),t=n(9862);let M=(()=>{class _{constructor(a){this.http=a,this.apiUrl=P.N.apiUrl,this.currentUserSource=new e.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.custParams=new x.D,this.customerType="",this.customersBrief=[],this.cache=new Map}getCustomerNameFromId(a){if(this.customersBrief.length>0){var i=this.customersBrief.find(l=>l.id===a);if(null!==i)return(0,h.of)(i?.knownAs)}return this.http.get(this.apiUrl+"customers/customernamefromId/"+a)}getCustomers(a){const i=this.cache.get(Object.values(a).join("-"));if(i)return(0,h.of)(i);this.customerType=a.customerType??"customer";let l=(0,v.VY)(a);return(0,v.Tr)(this.apiUrl+"customers",l,this.http).pipe((0,T.U)(o=>(this.cache.set(Object.values(a).join("-"),o),o)))}getCustomerList(a){return this.customerType=a.customerType??"customer",this.http.get(this.apiUrl+"customers/list/"+a.customerType)}getClientIdAndNames(){return this.http.get(this.apiUrl+"customers/clientidandnames/customer")}getCustomer(a){return this.http.get(this.apiUrl+"customers/byid/"+a)}register(a){return this.http.post(this.apiUrl+"customers",a)}getCustomerCities(a){return this.http.get(this.apiUrl+"customers/customercities/"+a)}deleteCustomer(a){return this.http.delete(this.apiUrl+"Customers/customer/"+a)}deleteCustomerOfficial(a){return this.http.delete(this.apiUrl+"Customers/official/"+a)}setParams(a){this.custParams=a}getParams(){return this.custParams}updateCustomer(a){return this.http.put(this.apiUrl+"customers/edit",a)}getAgents(){return this.http.get(this.apiUrl+"customers/agentdetails/associate")}getOfficialAndCustomerName(){return this.http.get(this.apiUrl+"customers/officialidandcustomernames/customer")}getAgentIdAndNames(){return this.http.get(this.apiUrl+"customers/clientidandnames/associate")}getCustomerAndCities(){return this.http.get(this.apiUrl+"customers/customerCities/customer")}remindClientForSelections(a){return this.http.get(this.apiUrl+"CVRef/selDecisionReminder/"+a)}getFeedbackHistory(a){return this.http.get(this.apiUrl+"Feedback/history/"+a)}getOrCreateCustomerReview(a){return this.http.get(this.apiUrl+"CustomerReview/getOrCreateObject/"+a)}static#t=this.\u0275fac=function(i){return new(i||_)(m.LFG(t.eN))};static#e=this.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},70:(U,g,n)=>{n.d(g,{H:()=>M});var e=n(7328),h=n(2096),T=n(7398),P=n(5516),v=n(1436),x=n(101),m=n(5879),t=n(9862);let M=(()=>{class _{constructor(a){this.http=a,this.apiUrl=P.N.apiUrl,this.currentUserSource=new e.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.mParams=new x._,this.professions=[],this.cache=new Map}getCategoryList(){return this.http.get(this.apiUrl+"Profession/professionlist")}getVendorFacilityList(){return this.http.get(this.apiUrl+"masters/VendorFacilityList")}getCategoriesPaged(a,i=!0){if(i){const o=this.cache.get(Object.values(a).join("-"));if(o)return(0,h.of)(o)}else this.cache=new Map;let l=(0,v.eO)(a);return(0,v.Tr)(this.apiUrl+"Profession",l,this.http).pipe((0,T.U)(o=>(this.cache.set(Object.values(a).join("-"),o),o)))}getCategory(a){let i;return this.cache.forEach(l=>{i=l.find(o=>o.id===a)}),i?(0,h.of)(i):this.http.get(this.apiUrl+"Profession/profession/"+a)}deleteCategory(a){return this.http.delete(this.apiUrl+"Profession/deletebyid/"+a)}updateCategory(a){return 0===a.id?this.http.post(this.apiUrl+"Profession/add",a):this.http.put(this.apiUrl+"Profession/edit",a)}copyProfessionXLSFileToDB(a){return this.http.post(this.apiUrl+"ProfessionUpload/professionsFromXLS",a)}copyCandidateXLSFileToDB(a){return this.http.post(this.apiUrl+"FileUpload/candidateXLS",a)}setParams(a){this.mParams=a}getParams(){return this.mParams}static#t=this.\u0275fac=function(i){return new(i||_)(m.LFG(t.eN))};static#e=this.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},3298:(U,g,n)=>{n.d(g,{k:()=>C});var e=n(7328),h=n(8180),T=n(2096),P=n(7398);class v{constructor(){this.candidateId=0,this.orderItemId=0,this.orderId=0,this.pageNumber=0,this.pageSize=10}}var x=n(5516),m=n(9862),t=n(1436),M=n(5879),_=n(7783);let C=(()=>{class i{constructor(o,p){this.accountService=o,this.http=p,this.apiUrl=x.N.apiUrl,this.currentUserSource=new e.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.qParams=new v,this.routeId="",this.cache=new Map,this.accountService.currentUser$.pipe((0,h.q)(1)).subscribe(f=>this.user=f)}candidateAssessments(o){const p=this.cache.get(Object.values(o).join("-"));if(p)return(0,T.of)(p);let f=function a(i){let l=new m.LE;return l=l.append("pageNumber",i.pageNumber),l=l.append("pageSize",i.pageSize),l=l.append("orderId",i.orderId.toString()),l=l.append("orderItemId",i.orderItemId.toString()),l=l.append("candidateId",i.candidateId.toString()),l}(o);return(0,t.Tr)(this.apiUrl+"CandidateAssessment/assessmentspaged",f,this.http).pipe((0,P.U)(E=>(this.cache.set(Object.values(o).join("-"),E),E)))}updateCandidateAssessment(o){return this.http.put(this.apiUrl+"CandidateAssessment/assessment",o)}saveNewCandidateAssessment(o){return this.http.post(this.apiUrl+"CandidateAssessment/assessment",o)}deleteCandidateAssessment(o){return this.http.delete(this.apiUrl+"CandidateAssessment/assessment/"+o)}getCandidateChecklistAndAssessment(o,p){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentandchecklist/"+o+"/"+p).pipe((0,P.U)(f=>f))}getCandidateAssessmentById(o){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentById/"+o)}getCandidateAssessmentDto(o,p){return this.http.get(this.apiUrl+"CandidateAssessment/candidateAssessmentDto/"+o+"/"+p)}insertNewCVAssessment(o,p,f){return this.http.post(this.apiUrl+"CandidateAssessment/assess/"+o+"/"+p+"/"+f,{})}deleteAssessment(o){return this.http.delete(this.apiUrl+"candidateassessment/assessment/"+o)}generateCVAssessment(o,p){return this.http.get(this.apiUrl+"CandidateAssessment/generate/"+o+"/"+p)}categoriesOfCVsAvailableToRefer(){return this.http.get(this.apiUrl+"CandidateAssessment/categoryheaders")}static#t=this.\u0275fac=function(p){return new(p||i)(M.LFG(_.B),M.LFG(m.eN))};static#e=this.\u0275prov=M.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},3391:(U,g,n)=>{n.d(g,{Z:()=>a});var e=n(7328),h=n(8180),T=n(2096),P=n(7398),v=n(5516),x=n(3056),m=n(1436),t=n(5879),M=n(7850),_=n(7783),C=n(9862);let a=(()=>{class i{constructor(o,p,f){this.activatedRoute=o,this.accountService=p,this.http=f,this.apiUrl=v.N.apiUrl,this.currentUserSource=new e.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new x.p,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,h.q)(1)).subscribe(E=>this.user=E)}referCVs(o){return this.http.post(this.apiUrl+"CVRef",o)}referredCVsPaginated(o=!1){if(o){const f=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(f)return(0,T.of)(f)}else this.cacheReferred=new Map;let p=(0,m.R1)(this.cvRefParams);return(0,m.Tr)(this.apiUrl+"cvref/cvsreferred",p,this.http).pipe((0,P.U)(f=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),f),f)))}deleteCVRef(o){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+o)}getCVRefWithDeploys(o){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+o)}getCVRefWithCVRefId(o){return this.http.get(this.apiUrl+"CVRef/cvref/"+o)}registerSelectionDecisions(o){return this.http.post(this.apiUrl+"Selection",o)}getCVReferredOrderNosDto(o){return this.http.get(this.apiUrl+"CVRef/headers/"+o)}setParams(o){this.cvRefParams=o}getParams(){return this.cvRefParams}static#t=this.\u0275fac=function(p){return new(p||i)(t.LFG(M.gz),t.LFG(_.B),t.LFG(C.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},4503:(U,g,n)=>{n.d(g,{D:()=>P});var e=n(5516),h=n(5879),T=n(9862);let P=(()=>{class v{constructor(m){this.http=m,this.apiUrl=e.N.apiUrl}downloadFile(m){return this.http.get(this.apiUrl+"candidate/downloadfile/"+m,{responseType:"blob"})}downloadProspectiveFile(m){return this.http.get(this.apiUrl+"FileUpload/downloadprospectivefile/"+m)}static#t=this.\u0275fac=function(t){return new(t||v)(h.LFG(T.eN))};static#e=this.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},8344:(U,g,n)=>{n.d(g,{K:()=>_});var e=n(5879),h=n(6223),T=n(2051),P=n(3298),v=n(7850),x=n(6814);function m(C,a){1&C&&(e.TgZ(0,"div"),e._uU(1," No assessment record available for the candidate against the given Order item "),e.qZA())}function t(C,a){if(1&C&&(e.TgZ(0,"div")(1,"div",21),e._uU(2),e.qZA(),e.TgZ(3,"div",21),e._uU(4),e.qZA(),e.TgZ(5,"textarea",22),e._uU(6),e.qZA(),e.TgZ(7,"div",23),e._uU(8),e.qZA(),e.TgZ(9,"div",23),e._uU(10),e.qZA()()),2&C){const i=a.$implicit;e.xp6(2),e.Oqu(i.assessed?"Y":"N"),e.xp6(2),e.Oqu(i.questionNo),e.xp6(2),e.Oqu(i.question),e.xp6(2),e.Oqu(i.maxPoints),e.xp6(2),e.Oqu(i.points)}}function M(C,a){if(1&C){const i=e.EpF();e.TgZ(0,"form",7),e.NdJ("ngSubmit",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.form.valid)}),e.TgZ(1,"div",8)(2,"label",9),e._uU(3,"Application No"),e.qZA(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"label",11),e._uU(7,"Candidate Name"),e.qZA(),e.TgZ(8,"div",12),e._uU(9),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"label",9),e._uU(12,"Customer"),e.qZA(),e.TgZ(13,"div",12),e._uU(14),e.qZA(),e.TgZ(15,"label",9),e._uU(16,"Category Name"),e.qZA(),e.TgZ(17,"div",12),e._uU(18),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"label",9),e._uU(21,"Assessed On"),e.qZA(),e.TgZ(22,"div",13),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"label",14),e._uU(26,"Grade:"),e.qZA(),e.TgZ(27,"div",10),e._uU(28),e.qZA(),e._UZ(29,"hr",15),e.TgZ(30,"label",16),e._uU(31,"Ass'd"),e.qZA(),e.TgZ(32,"label",16),e._uU(33,"Q No."),e.qZA(),e.TgZ(34,"label",17),e._uU(35,"Question"),e.qZA(),e.TgZ(36,"label",16),e._uU(37,"Max"),e._UZ(38,"br"),e._uU(39,"Points"),e.qZA(),e.TgZ(40,"label",16),e._uU(41,"Points"),e.qZA(),e._UZ(42,"hr",15),e.YNc(43,t,11,5,"div",18),e.TgZ(44,"label",19),e._uU(45,"Total"),e.qZA(),e.TgZ(46,"div",20),e._uU(47),e.qZA(),e.TgZ(48,"div",20),e._uU(49),e.qZA()()()}if(2&C){const i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(5),e.Oqu(i.assess.applicationNo),e.xp6(4),e.Oqu(i.assess.candidateName),e.xp6(5),e.hij(" ",i.assess.customerName,""),e.xp6(4),e.hij(" ",i.assess.professionName,""),e.xp6(5),e.Oqu(e.xi3(24,10,i.assess.assessedOn,"dd-MMM-yy")),e.xp6(5),e.Oqu(i.assess.assessResult),e.xp6(15),e.Q6J("ngForOf",i.assess.assessmentItemsDto),e.xp6(4),e.Oqu(i.totalMaxPoints),e.xp6(2),e.Oqu(i.totalPoints)}}let _=(()=>{class C{constructor(i,l,o,p,f){this.bsModalRef=i,this.assessService=l,this.activatedRoute=o,this.fb=p,this.router=f,this.candAssessEvent=new e.vpe,this.totalPoints=0,this.totalMaxPoints=0,this.form=new h.cw({})}ngOnInit(){void 0!==this.assess&&(this.InitializeFormArray(this.assess),this.calculateTotalPoints())}InitializeFormArray(i){this.form=this.fb.group({applicationNo:[i.applicationNo,h.kI.required],candidateId:[i.candidateId,h.kI.required],candidateName:[i.candidateName,h.kI.required],customerName:[i.customerName,h.kI.required],orderItemId:[i.orderItemId,h.kI.required],categoryRef:[i.categoryRef,h.kI.required],orderId:[i.orderId,h.kI.required],requireInternalReview:i.requireInternalReview,assessedByUsername:i.assessedByUsername,professionName:[i.professionName,h.kI.required],assessResult:[i.assessResult,h.kI.required],assessedOn:i.assessedOn,checklistHRId:i.checklistHRId,checklistedByName:i.checklistedByName,items:this.fb.array(i.assessmentItemsDto.map(l=>this.fb.group({id:l.id,candidateAssessmentId:l.candidateAssessmentId,questionNo:[l.questionNo,h.kI.required],question:[l.question,h.kI.required],assessed:[l.assessed],maxPoints:[l.maxPoints,h.kI.required],points:[l.points],remarks:l.remarks})))})}get items(){return this.form.get("items")}close(){this.candAssessEvent.emit(this.assess),this.bsModalRef.hide()}calculateTotalPoints(){this.totalMaxPoints=this.items.value.map(i=>i.maxPoints).reduce((i,l)=>i+l,0),this.totalPoints=this.items.value.map(i=>i.points).reduce((i,l)=>i+l,0)}static#t=this.\u0275fac=function(l){return new(l||C)(e.Y36(T.UZ),e.Y36(P.k),e.Y36(v.gz),e.Y36(h.qu),e.Y36(v.F0))};static#e=this.\u0275cmp=e.Xpm({type:C,selectors:[["app-cv-assess-modal"]],outputs:{candAssessEvent:"candAssessEvent"},decls:8,vars:2,consts:[[1,"modal-header"],[1,"stdd","b"],["type","button",1,"pull-right","fa","fa-window-close",3,"click"],[1,"modal-body"],[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","mt-2"],[1,"stdd","w100"],[1,"stdd","w50","b"],[1,"stdd","w125"],[1,"stdd","w250","b"],[1,"stdd","w125","b"],[1,"stdd","w50"],[1,"b","my-0","py-0"],[1,"stdd","w50","vAlignM"],[1,"stdd","w425","vAlignM"],[4,"ngFor","ngForOf"],[1,"stdd","w50","b",2,"margin-left","465px"],[1,"stdd","w50","alignR","b"],[1,"stdd","w50","alignC"],["rows","1","cols","60","name","question","id","question",1,"stdd"],[1,"stdd","w50","alignR"]],template:function(l,o){1&l&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Candidate Assessment"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.bsModalRef.hide()}),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,m,2,0,"div",4),e.YNc(6,M,50,13,"form",5),e.qZA(),e._UZ(7,"div",6)),2&l&&(e.xp6(5),e.Q6J("ngIf",!o.assess),e.xp6(1),e.Q6J("ngIf",o.assess))},dependencies:[x.sg,x.O5,h._Y,h.JL,h.sg,x.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px}.alignR[_ngcontent-%COMP%]{text-align:right}.alignC[_ngcontent-%COMP%]{text-align:center}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w250[_ngcontent-%COMP%]{width:250px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w425[_ngcontent-%COMP%]{width:420px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return C})()},6355:(U,g,n)=>{n.d(g,{z:()=>Q});var e=n(2181),h=n(4664),T=n(6306),P=n(2096),v=n(9397),x=n(3056),m=n(8344),t=n(5879),M=n(7850),_=n(3391),C=n(8763),a=n(2051),i=n(3298),l=n(4503),o=n(7411),p=n(6814),f=n(7012),E=n(6223),b=n(4807),N=n(617),y=n(8983);function R(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"input",11),t.NdJ("change",function(){t.CHM(s);const r=t.oxw(2);return t.KtG(r.CVChecked())}),t.qZA()}if(2&c){const s=t.oxw(2);t.Q6J("checked",s.cv.checked)}}function D(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(s);const r=t.oxw(2);return t.KtG(r.deleteClicked(r.cv.id))}),t.qZA()}}function S(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(s);const r=t.oxw(2);return t.KtG(r.download(r.cv.candidateId))}),t.qZA()}}function L(c,A){if(1&c&&(t.TgZ(0,"div",1),t.YNc(1,R,1,1,"input",2),t.TgZ(2,"div",3),t._uU(3),t.qZA(),t.TgZ(4,"div",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5),t._uU(7),t.qZA(),t.TgZ(8,"div",6),t._uU(9),t.qZA(),t.TgZ(10,"div",7),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",7),t._uU(16),t.ALo(17,"date"),t.qZA(),t.YNc(18,D,1,0,"button",9),t.YNc(19,S,1,0,"button",10),t.qZA()),2&c){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.isPrintPdf),t.xp6(2),t.Oqu(s.cv.applicationNo),t.xp6(1),t.MGl("routerLink","/candidate/historyfromcvid/",s.cv.candidateId,""),t.xp6(1),t.Oqu(s.cv.candidateName),t.xp6(2),t.Oqu(s.cv.categoryRefAndName),t.xp6(2),t.Oqu(s.cv.customerName),t.xp6(2),t.Oqu(t.xi3(12,11,s.cv.referredOn,"dd-MMM-yy")),t.xp6(3),t.Oqu(s.cv.selectionStatus),t.xp6(2),t.Oqu(t.xi3(17,14,s.cv.selectionStatusDate,"dd-MMM-yy")),t.xp6(2),t.Q6J("ngIf",!s.isPrintPdf),t.xp6(1),t.Q6J("ngIf",!s.isPrintPdf)}}let F=(()=>{class c{constructor(){this.isPrintPdf=!1,this.msgEvent=new t.vpe,this.downloadEvent=new t.vpe,this.cvAssessEvent=new t.vpe,this.cvCheckedEvent=new t.vpe,this.deleteEvent=new t.vpe,this.currentId=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(s){return s.stopPropagation(),this.xPosTabMenu=s.clientX,this.yPosTabMenu=s.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(s){this.downloadEvent.emit(s)}deleteClicked(s){this.deleteEvent.emit(s)}onClickLoadDocument(s){this.msgEvent.emit(s)}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(s){this.currentId=s}showhistory(s){this.msgEvent.emit(s)}CVChecked(){this.cvCheckedEvent.emit(this.cv)}static#t=this.\u0275fac=function(d){return new(d||c)};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-cvreferred-line"]],inputs:{cv:"cv",isPrintPdf:"isPrintPdf"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["type","checkbox","class","stdd form-check-input","style","border-color: black ;","value","cv.id",3,"checked","change",4,"ngIf"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","fSmall","w70",2,"margin-left","10px"],["title","contact history of the candidate",1,"stdd","fSmall","w130",3,"routerLink"],[1,"stdd","fSmaller","w200"],[1,"stdd","fSmaller","w150"],[1,"stdd","fSmall","w100"],[1,"stdd","fSmaller","w100"],["type","button","class","btn fa fa-trash w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary fa fa-regular fa-download w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-trash","w20",3,"click"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-download","w20",3,"click"]],template:function(d,r){1&d&&t.YNc(0,L,20,17,"div",0),2&d&&t.Q6J("ngIf",null!=r.cv)},dependencies:[p.O5,M.rH,p.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 1px;vertical-align:top;word-wrap:break-word}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.btn[_ngcontent-%COMP%]{color:#ff0}.b[_ngcontent-%COMP%]{font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return c})();const K=["search"];function B(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"pagination",15),t.NdJ("pageChanged",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.onPageChanged(r))}),t._uU(1,"\n>"),t.qZA()}if(2&c){const s=t.oxw();t.Q6J("totalItems",s.pagination.totalItems)("itemsPerPage",s.pagination.itemsPerPage)("maxSize",10)}}function k(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"div",16)(1,"label",17),t._uU(2,"Order#"),t.qZA(),t.TgZ(3,"input",18,19),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.cvParams.orderNo=r)}),t.qZA(),t.TgZ(5,"button",20),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.onSearch())}),t.qZA(),t.TgZ(6,"input",21),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.cvParams.selectionStatus=r)}),t.qZA(),t._uU(7,"Selections Pending "),t.TgZ(8,"input",22),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.cvParams.selectionStatus=r)}),t.qZA(),t._uU(9,"all Status "),t.TgZ(10,"input",23),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.cvParams.selectionStatus=r)}),t.qZA(),t._uU(11,"Selected "),t.TgZ(12,"input",24),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.cvParams.selectionStatus=r)}),t.qZA(),t._uU(13,"Rejected "),t.TgZ(14,"button",25),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.onReset())}),t.qZA(),t.TgZ(15,"label",26),t._uU(16,"Choose Order No"),t.qZA(),t.TgZ(17,"div",27)(18,"ng-select",28),t.NdJ("ngModelChange",function(r){t.CHM(s);const u=t.oxw();return t.KtG(u.distinctOrderNo=r)})("change",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.distinctOrderNoChanged())}),t.qZA()(),t.TgZ(19,"button",29),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.generatePDF())}),t.TgZ(20,"mat-icon"),t._uU(21,"print"),t.qZA()(),t.TgZ(22,"button",30),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.close())}),t.qZA()()}if(2&c){const s=t.oxw();t.xp6(3),t.Q6J("ngModel",s.cvParams.orderNo),t.xp6(3),t.Q6J("ngModel",s.cvParams.selectionStatus),t.xp6(2),t.Q6J("ngModel",s.cvParams.selectionStatus),t.xp6(2),t.Q6J("ngModel",s.cvParams.selectionStatus),t.xp6(2),t.Q6J("ngModel",s.cvParams.selectionStatus),t.xp6(6),t.Q6J("items",s.headers)("ngModel",s.distinctOrderNo),t.xp6(1),t.Q6J("previewOnly",!1)("useExistingCss",!0)("disabled",""===s.distinctOrderNo)}}function J(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.isPrintPDF=!1)}),t.qZA()}}function q(c,A){if(1&c&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&c){const s=t.oxw();t.xp6(1),t.AsE(" CVs referred, with conditions: Order No.: ",s.distinctOrderNo,", and Status ",s.cvParams.selectionStatus," ")}}function V(c,A){1&c&&(t.TgZ(0,"div",33),t._uU(1,"Select"),t.qZA())}function H(c,A){1&c&&(t.TgZ(0,"div",34),t._uU(1," No candidates available to refer "),t.qZA())}function W(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"div")(1,"button",37),t.NdJ("click",function(){t.CHM(s);const r=t.oxw(3);return t.KtG(r.isPrintPDF=!1)}),t.qZA(),t._UZ(2,"app-cvreferred-line",38),t.qZA()}if(2&c){const s=t.oxw().$implicit;t.xp6(2),t.Q6J("cv",s)("isPrintPdf",!0)}}function Y(c,A){if(1&c){const s=t.EpF();t.TgZ(0,"div")(1,"app-cvreferred-line",39),t.NdJ("downloadEvent",function(r){t.CHM(s);const u=t.oxw(3);return t.KtG(u.downloadFileEvent(r))})("cvCheckedEvent",function(r){t.CHM(s);const u=t.oxw(3);return t.KtG(u.cvCheckedEvent(r))})("cvAssessEvent",function(r){t.CHM(s);const u=t.oxw(3);return t.KtG(u.displayAssessmentModalBySwitchMap(r))})("deleteEvent",function(r){t.CHM(s);const u=t.oxw(3);return t.KtG(u.deleteClicked(r))}),t.qZA()()}if(2&c){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("cv",s)("isPrintPdf",!1)}}function j(c,A){if(1&c&&(t.TgZ(0,"div",36),t.YNc(1,W,3,2,"div",14),t.YNc(2,Y,2,2,"div",14),t.qZA()),2&c){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.isPrintPDF),t.xp6(1),t.Q6J("ngIf",!s.isPrintPDF)}}function G(c,A){if(1&c&&(t.TgZ(0,"div"),t.YNc(1,j,3,2,"div",35),t.qZA()),2&c){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.cvs)}}let Q=(()=>{class c{constructor(s,d,r,u,O,w,I,z){this.router=s,this.service=d,this.toastr=r,this.modalService=u,this.candAssessService=O,this.downloadService=w,this.route=I,this.confirm=z,this.returnUrl="",this.cvParams=new x.p,this.cvs=[],this.selectedCVs=[],this.totalCount=0,this.paramNames="",this.id=0,this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctOrderNos=[],this.distinctOrderNo="";var $=this.route.snapshot.paramMap.get("id")??"0";this.id=+$;let Z=this.router.getCurrentNavigation();Z?.extras&&Z.extras.state&&(Z.extras.state.returnUrl&&(this.returnUrl=Z.extras.state.returnUrl),Z.extras.state.user&&(this.user=Z.extras.state.user))}ngOnInit(){this.service.setParams(this.cvParams),this.route.data.subscribe(s=>{this.cvs=s.cvrefPaged.result,this.pagination=s.cvrefPaged.pagination,this.totalCount=s.cvrefPaged.count,this.headers=s.headers,console.log("headers",this.headers)})}loadCVsReferred(){this.service.setParams(this.cvParams),this.service.referredCVsPaginated(!0).subscribe({next:s=>{s.result&&s.pagination&&(this.cvs=s.result,this.pagination=s.pagination)}})}onSearch(){const s=this.service.getParams()??new x.p;""!==this.searchTerm?.nativeElement.value&&(s.orderNo=this.searchTerm.nativeElement.value),s.pageNumber=1,this.service.setParams(s),this.loadCVsReferred()}onReset(){this.cvParams.pageNumber=1,this.service.setParams(this.cvParams),this.loadCVsReferred()}onPageChanged(s){this.cvParams&&this.cvParams.pageNumber!==s.page&&(this.cvParams.pageNumber=s.page,this.service.setParams(this.cvParams),this.loadCVsReferred())}downloadFileEvent(s){return this.downloadService.downloadFile(s).subscribe(()=>{this.toastr.success("document downloaded")},d=>{this.toastr.error("failed to download document",d)})}displayAssessmentModalBySwitchMap(s){this.candAssessService.getCandidateAssessmentDto(s.candidateId,s.orderItemId).pipe((0,e.h)(O=>void 0!==O),(0,h.w)(O=>(this.bsModalRef=this.modalService.show(m.K,{class:"modal-dialog-centered modal-lg",initialState:{assess:O,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(O=>{console.log("inner response:",O)})}navigateByUrl(s,d,r){this.router.navigate([s],{state:{cvbrief:d,userobject:this.service.user,toedit:r,returnUrl:"/candidates"}})}cvCheckedEvent(s){var d=this.selectedCVs.find(u=>u.candidateId==s.id),r=this.selectedCVs.findIndex(u=>u.candidateId===s.id);void 0!==d?d.checked?this.selectedCVs.push(s):this.selectedCVs.splice(r,1):this.selectedCVs.push(s)}deleteClicked(s){const d=this.service.deleteCVRef(s);this.confirm.confirm("Confirm Delete","This will delete this CV Referral").pipe((0,h.w)(O=>d.pipe((0,T.K)(w=>(console.log("Error in deleting the CV Referral",w),(0,P.of)())),(0,v.b)(w=>this.toastr.success("deleted the CV Referral")))),(0,T.K)(O=>(this.toastr.error("Error in getting delete confirmation",O),(0,P.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},O=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",O)})}close(){this.router.navigateByUrl(this.returnUrl||"/")}distinctOrderNoChanged(){var s=new x.p;s.orderNo=+this.distinctOrderNo,s.selectionStatus=this.cvParams.selectionStatus,this.service.setParams(s),this.service.referredCVsPaginated(!1).subscribe({next:d=>{void 0!==d?(this.cvs=d.result,this.pagination=d.pagination,this.totalCount=d.result.length):this.toastr.warning("Failed to retrieve headers","Failed")}})}generatePDF(){this.isPrintPDF=!this.isPrintPDF,this.printtitle="Listing of CVS Referred, with Order No."+this.distinctOrderNo+" and Selection Status "+this.cvParams.selectionStatus+", as on "+new Date}closePrintSection(){this.isPrintPDF=!1,this.distinctOrderNo=""}static#t=this.\u0275fac=function(d){return new(d||c)(t.Y36(M.F0),t.Y36(_.Z),t.Y36(C._W),t.Y36(a.tT),t.Y36(i.k),t.Y36(l.D),t.Y36(M.gz),t.Y36(o.z))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-cvsreferred"]],viewQuery:function(d,r){if(1&d&&t.Gf(K,5),2&d){let u;t.iGM(u=t.CRH())&&(r.searchTerm=u.first)}},decls:25,vars:7,consts:[[1,"my-0","mx-4",2,"display","inline-block","font-weight","bold"],["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],["class","btn fa fa-window-close fa-2x",3,"click",4,"ngIf"],["id","print-section"],[2,"margin-left","70px"],["class","b",4,"ngIf"],["class","lbl w30 mx-1",4,"ngIf"],[1,"lbl","w50","mx-1"],[1,"lbl","w130","mx-1"],[1,"lbl","w200","mx-1"],[1,"lbl","w150","mx-1"],[1,"lbl","w100","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],[1,"stdd","w75","fSmall","b",2,"text-align","right","vertical-align","middle !important"],["type","text","title","enter Order No to search","placeholder","Order No",1,"stdd","form-control","fSmall","w75",2,"margin-left","20px",3,"ngModel","ngModelChange"],["search",""],["type","button",1,"stdd","btn","fa","fa-search","mx-1",3,"click"],["type","radio","value","Pending",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Selected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Rejected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","button",1,"stdd","mx-1","fa","fa-refresh","fa-2x",3,"click"],[1,"lbl","w75","tAlignRight"],[1,"stdd","w100","mx-2"],["bindLabel","orderno","bindValue","orderno","labelForId","orderno","clearAllText","Clear",3,"items","ngModel","ngModelChange","change"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","disabled","click"],["title","close this page",1,"stdd","w40","mx-1","fa","fa-window-close","fa-2x",3,"click"],[1,"btn","fa","fa-window-close","fa-2x",3,"click"],[1,"b"],[1,"lbl","w30","mx-1"],[2,"margin-left","100px","margin-top","5px","font-weight","bold"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"btn","fa","fa-window-close",3,"click"],[3,"cv","isPrintPdf"],[3,"cv","isPrintPdf","downloadEvent","cvCheckedEvent","cvAssessEvent","deleteEvent"]],template:function(d,r){1&d&&(t.TgZ(0,"h4",0),t._uU(1,"CVs refferred to clients"),t.qZA(),t.YNc(2,B,2,3,"pagination",1),t.YNc(3,k,23,10,"div",2),t.YNc(4,J,1,0,"button",3),t.TgZ(5,"div",4)(6,"div",5),t.YNc(7,q,2,2,"div",6),t.YNc(8,V,2,0,"div",7),t.TgZ(9,"div",8),t._uU(10,"App No"),t.qZA(),t.TgZ(11,"div",9),t._uU(12,"Candidate Name"),t.qZA(),t.TgZ(13,"div",10),t._uU(14,"Category Ref"),t.qZA(),t.TgZ(15,"div",11),t._uU(16,"Customer Name"),t.qZA(),t.TgZ(17,"div",12),t._uU(18,"Referred On"),t.qZA(),t.TgZ(19,"div",12),t._uU(20,"Selection Decision"),t.qZA(),t.TgZ(21,"div",12),t._uU(22,"Sel Decision Dt"),t.qZA()(),t.YNc(23,H,2,0,"div",13),t.YNc(24,G,2,1,"div",14),t.qZA()),2&d&&(t.xp6(2),t.Q6J("ngIf",void 0!==r.pagination&&!r.isPrintPDF),t.xp6(1),t.Q6J("ngIf",r.cvs&&!r.isPrintPDF),t.xp6(1),t.Q6J("ngIf",r.isPrintPDF),t.xp6(3),t.Q6J("ngIf",r.isPrintPDF),t.xp6(1),t.Q6J("ngIf",r.isPrintPDF),t.xp6(15),t.Q6J("ngIf",0===r.cvs.length),t.xp6(1),t.Q6J("ngIf",r.cvs.length))},dependencies:[p.sg,p.O5,f.Qt,E.Fj,E._,E.JJ,E.On,b.w9,N.Hw,y.IH,F],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;color:hsl(from color h s l)}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.radio[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 2px;border-color:#000;width:20px;height:1em}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return c})()}}]);