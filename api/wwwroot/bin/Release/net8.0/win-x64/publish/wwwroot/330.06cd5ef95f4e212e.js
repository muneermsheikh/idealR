"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[330],{5330:(ri,H,c)=>{c.r(H),c.d(H,{ProfileModule:()=>ni});var l=c(6814);class D{constructor(){this.customerId=0,this.orderId=0,this.professionIds=[],this.orderItemIds=[],this.pageNumber=1,this.pageSize=10}}class f{constructor(){this.id=0,this.applicationNoFrom=0,this.applicationNoUpto=0,this.candidateName="",this.categoryName="",this.passportNo="",this.professionId=0,this.professionName="",this.agentId=0,this.typeOfCandidate="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}var e=c(5879),_=c(2051),d=c(6223);function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"span",16)(2,"input",17),e.NdJ("change",function(){const a=e.CHM(t).$implicit;return e.KtG(a.checked=!a.checked)}),e.qZA()(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",19),e._uU(6),e.qZA(),e.TgZ(7,"div",20),e._uU(8),e.qZA(),e.TgZ(9,"div",18),e._uU(10),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.checked)("disabled","closed"===t.status||"canceled"===t.status),e.xp6(2),e.Oqu(t.orderNo),e.xp6(2),e.Oqu(t.categoryName),e.xp6(2),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.status)}}let Y=(()=>{class n{constructor(t){this.bsModalRef=t,this.emitterObj=new e.vpe,this.title="",this.orderItems=[],this.ids=[]}ngOnInit(){}emitSelectedIds(){this.emitterObj.emit(this.ids),this.bsModalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(_.UZ))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-ids-modal"]],inputs:{emitterObj:"emitterObj"},decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left",2,"font-size","smaller","font-weight","bold"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"stdd","b","w100",2,"margin-left","17px"],[1,"stdd","b","w150"],[1,"stdd","b","w75"],[2,"display","inline-inline-block","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],["id","agentsForm"],["agentsForm","ngForm"],["class","form-check stdd",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"form-check","stdd"],[2,"width","3px","display","inline-block","padding","0px","vertical-align","top"],["type","checkbox",1,"form-check-input",3,"checked","disabled","change"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w75"]],template:function(i,s){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.bsModalRef.hide()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Order No"),e.qZA(),e.TgZ(9,"div",6),e._uU(10,"Category Name"),e.qZA(),e.TgZ(11,"div",7),e._uU(12,"Qnty"),e.qZA(),e.TgZ(13,"div",6),e._uU(14,"Status"),e.qZA(),e._UZ(15,"hr",8),e.TgZ(16,"form",9,10),e.YNc(18,se,11,6,"div",11),e.qZA()(),e.TgZ(19,"div",12)(20,"button",13),e.NdJ("click",function(){return s.bsModalRef.hide()}),e._uU(21,"Cancel"),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return s.emitSelectedIds()}),e._uU(23,"Submit"),e.qZA()()),2&i&&(e.xp6(2),e.hij("",s.title," "),e.xp6(16),e.Q6J("ngForOf",s.orderItems))},dependencies:[l.sg,d._Y,d.JL,d.F],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75p}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return n})();var V=c(7328),M=c(8180),g=c(2096),x=c(7398),P=c(5516),Z=c(9862),w=c(1436),N=c(7783);let b=(()=>{class n{constructor(t,i){this.http=t,this.accountService=i,this.apiUrl=P.N.apiUrl,this.currentUserSource=new V.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cities=[],this.cache=new Map,this.accountService.currentUser$.pipe((0,M.q)(1)).subscribe({next:s=>{s&&(this.cvParams=new f),this.user=s}})}onClickLoadDocument(){return this.http.get(this.apiUrl+"candidates/loaddocument")}getAvailableCandidateList(){return this.http.get(this.apiUrl+"CandidateAssessment/cvsAvailableList")}getAvailableCandidatesPaged(t,i=!0){if(i){const a=this.cache.get(Object.values(t).join("-"));if(a)return(0,g.of)(a)}else this.cache=new Map;let s=(0,w.ME)(t);return(0,w.Tr)(this.apiUrl+"candidate/cvsAvailable",s,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getCandidatesPaged(t,i=!0){if(i){const a=this.cache.get(Object.values(t).join("-"));if(a)return(0,g.of)(a)}else this.cache=new Map;let s=(0,w.ME)(t);return(0,w.Tr)(this.apiUrl+"candidate",s,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getCandidate(t){return this.http.get(this.apiUrl+"candidate/byid/"+t)}getCandidateBrief(t){const i=[...this.cache.values()].reduce((s,a)=>s.concat(a.result),[]).find(s=>s.id===t);return i?(0,g.of)(i):this.http.get(this.apiUrl+"candidate/briefdtobyid/"+t)}getCandidateBriefDtoFromAppNo(t){let i=new Z.LE;return i.append("applicationNo",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}getCandidateBriefDtoFromId(t){var i=new Z.LE;return i=i.append("candidateId",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}registerNewWithFiles(t){return this.http.post(this.apiUrl+"Candidate/RegisterByUpload",t)}UpdateCandidateWithFiles(t){return console.log("model in update service candidate",t),this.http.put(this.apiUrl+"candidate/updatecandidatewithfiles",t)}setCurrentUser(t){localStorage.setItem("token",t.token),this.currentUserSource.next(t)}setCVParams(t){this.cvParams=t}getCVParams(){return this.cvParams}getCandidateCities(){return this.cities.length>0?(0,g.of)(this.cities):this.http.get(this.apiUrl+"candidate/cities").pipe((0,x.U)(t=>(this.cities=t,t)))}downloadAttachmentFile(t){return this.http.get(this.apiUrl+"fileupload/downloadattachmentfile/"+t,{responseType:"blob"})}updateAttachments(t){var i=[];return i.push(t),this.http.post(this.apiUrl+"Candidate/attachment",i)}getAttachments(t){return this.http.get(this.apiUrl+"Candidate/userattachments"+t)}deleteAttachment(t){return this.http.delete(this.apiUrl+"Candidate/userattachment/"+t)}deleteCV(t){return this.http.delete(this.apiUrl+"Candidate/"+t)}setPhoto(t){return this.http.put(this.apiUrl+"userattachment/setPhoto",t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(Z.eN),e.LFG(N.B))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u=c(7850),q=c(8241),G=c(4503),C=c(8763),B=c(7012),ne=c(3340),O=c(7411);function ae(n,r){1&n&&(e.TgZ(0,"div",11),e._uU(1,"No interview categories found matching the candidate's professions'"),e.qZA())}function re(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"input",12),e.NdJ("ngModelChange",function(s){const o=e.CHM(t).$implicit;return e.KtG(o.checked=s)})("click",function(){const a=e.CHM(t).$implicit,o=e.oxw();return e.KtG(o.selectedClicked(a.id,a.checked))}),e.qZA(),e.TgZ(2,"div",13),e._uU(3),e.qZA(),e.TgZ(4,"div",14),e._uU(5),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.qZA(),e.TgZ(8,"div",15),e._uU(9),e.ALo(10,"date"),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngModel",t.checked),e.xp6(2),e.Oqu(t.categoryName),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(e.xi3(10,5,t.interviewDateFrom,"dd-MMM-yy"))}}let oe=(()=>{class n{constructor(t,i,s,a,o){this.service=t,this.toastr=i,this.modalService=s,this.confirm=a,this.candService=o,this.interviews=[],this.categoryMatching=[],this.candidateId=0,this.candidateName="",this.applicationNo=0,this.interviewDate=new Date,this.EmitEvent=new e.vpe,this.selected=[],this.orderNoToGet=0,this.totalCount=0}ngOnInit(){this.service.getInterviewItemsMatchingCategory(this.categoryMatching).subscribe({next:t=>{null!==t&&t.length>0&&(this.interviews=t)}})}selectedClicked(t,i){var s=this.selected.findIndex(o=>o.id===t);-1===s?this.selected.push({id:t,checked:i}):this.selected[s].checked=i,i&&(this.selected.filter(o=>o.id!==t)[0].checked=!1),this.interviews.find(o=>o.id==t).checked=i,this.interviews.find(o=>o.id===t).checked=i}close(){this.EmitEvent.emit(!1),this.modalService.hide()}assignToInterviewItem(){var t=this.interviews.filter(s=>s.checked)[0].id;this.service.insertInterviewItemCandidate({id:0,interviewItemId:t,intervwItemId:t,candidateId:this.candidateId,applicationNo:this.applicationNo,candidateName:this.candidateName,passportNo:"",scheduledFrom:this.interviewDate,reportedAt:void 0,interviewedAt:void 0,interviewStatus:"Not Interviewed",interviewerRemarks:"",prospectiveCandidateId:0,personId:"",attachmentFileNameWithPath:""}).subscribe({next:s=>this.EmitEvent.emit(s)}),this.modalService.hide()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(ne.n),e.Y36(C._W),e.Y36(_.tT),e.Y36(O.z),e.Y36(b))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-interview-brief-pending-modal"]],outputs:{EmitEvent:"EmitEvent"},decls:19,vars:3,consts:[[1,"modal-header"],[1,"b"],[1,"btn","fa","fa-check",3,"click"],[1,"btn","fa","fa-window-close",3,"click"],[1,"modal-body"],[1,"lbl","w50"],[1,"lbl","w200"],[1,"lbl","w100"],["class","text-danger",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"text-danger"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin","0 10px 0 10px",3,"ngModel","ngModelChange","click"],[1,"stdd","w200"],[1,"stdd","w50"],[1,"stdd","w100"]],template:function(i,s){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.assignToInterviewItem()}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Select"),e.qZA(),e.TgZ(8,"label",6),e._uU(9,"Interview Category"),e.qZA(),e.TgZ(10,"label",6),e._uU(11,"Customer"),e.qZA(),e.TgZ(12,"label",5),e._uU(13,"Order Ref"),e.qZA(),e.TgZ(14,"label",7),e._uU(15,"Interview On"),e.qZA(),e.YNc(16,ae,2,0,"div",8),e.YNc(17,re,11,8,"div",9),e.qZA(),e._UZ(18,"div",10)),2&i&&(e.xp6(2),e.hij("Interviews available matching the category ",s.categoryMatching,""),e.xp6(14),e.Q6J("ngIf",!s.interviews),e.xp6(1),e.Q6J("ngForOf",s.interviews))},dependencies:[l.sg,l.O5,d.Wl,d.JJ,d.On,l.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:2px 0;vertical-align:top;font-size:smaller;word-wrap:break-word}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}.b[_ngcontent-%COMP%]{font-weight:700}  .ng-select-container{height:5px!important;font-size:.8em!important}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();var E=c(617);function de(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," No candidate detail available\n"),e.qZA())}function ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.CVChecked(s.cv))}),e.qZA(),e.TgZ(2,"div",4),e._uU(3),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editCV(s.cv.id))}),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cvAssessClicked(s.cv))}),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.download(s.cv.id))}),e.qZA(),e.TgZ(15,"button",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.assignToInterview(s.cv.id))}),e.TgZ(16,"mat-icon"),e._uU(17,"forward"),e.qZA()(),e.TgZ(18,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteCV(s.cv.id))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.cv.checked),e.xp6(1),e.MGl("routerLink","/candidates/edit/",t.cv.id,""),e.xp6(1),e.Oqu(t.cv.applicationNo),e.xp6(1),e.MGl("routerLink","/candidate/historyfromcvid/",t.cv.id,""),e.xp6(1),e.Oqu(t.cv.fullName),e.xp6(2),e.Oqu(t.cv.city),e.xp6(2),e.Oqu(t.cv.referredByName),e.xp6(2),e.hij("",t.cv.userProfessions.flat()," ")}}let le=(()=>{class n{constructor(t,i){this.modalService=t,this.toastr=i,this.msgEvent=new e.vpe,this.downloadEvent=new e.vpe,this.cvAssessEvent=new e.vpe,this.cvCheckedEvent=new e.vpe,this.cvEditEvent=new e.vpe,this.cvDeleteEvent=new e.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){this.msgEvent.emit(t)}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}cvAssessClicked(t){this.cvAssessEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}editCV(t){this.cvEditEvent.emit(t)}deleteCV(t){this.cvDeleteEvent.emit(t)}assignToInterview(t){const i={class:"modal-dialog-centered modal-lg",initialState:{candidateId:this.cv?.id,candidateName:this.cv?.fullName,applicationNo:this.cv?.applicationNo,interviewDate:new Date,categoryMatching:this.cv?.userProfessions.flat()}};console.log("config",this.cv?.userProfessions,this.cv?.userProfessions.flat()),this.bsModalRef=this.modalService.show(oe,i),this.bsModalRef.content.EmitEvent.subscribe({next:s=>{s&&this.toastr.success("selected candidate added to the interview item  selected","Success")}})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(_.tT),e.Y36(C._W))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",cvEditEvent:"cvEditEvent",cvDeleteEvent:"cvDeleteEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 25px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","25px"],["type","checkbox","value","cv.id",1,"form-check-input",3,"checked","change"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","w70",3,"routerLink"],["title","contact history of the candidate",1,"stdd","mx-1","w160",3,"routerLink"],[1,"stdd","mx-1","w100"],[1,"stdd","mx-1","w200"],[1,"stdd","mx-1","w300",2,"border","aqua"],["type","button","type","button","title","edit the candidate profile",1,"btn","btn-outline-secondary","w10","fa","fa-solid","fa-pencil",3,"click"],["type","button","type","button","title","Assess the CV",1,"btn","btn-outline-secondary","w10","fa","fa-solid","fa-balance-scale",3,"click"],["type","button","type","button","title","download the CV",1,"btn","w10","fa","fa-download",3,"click"],["type","button","type","button","title","assign candidates to an open interview category",1,"btn","w10",3,"click"],["type","button","type","button","title","delete this CV along with all its attachments",1,"btn","w10","fa","fa-trash",3,"click"]],template:function(i,s){1&i&&(e.YNc(0,de,2,0,"div",0),e.YNc(1,ce,19,8,"div",1)),2&i&&(e.Q6J("ngIf",null===s.cv),e.xp6(1),e.Q6J("ngIf",null!=s.cv))},dependencies:[l.O5,u.rH,E.Hw],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;word-wrap:break-word;font-size:small}.compress[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;word-wrap:break-word;font-size:small;word-spacing:-2px}.fSmall[_ngcontent-%COMP%]{font-size:small;vertical-align:middle;margin:0 2px;word-break:break-word}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w15[_ngcontent-%COMP%]{width:15px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return n})();const pe=["search"],me=["searchCat"];function he(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",12),e._uU(2,"Name or App Nos to search, separated by commas"),e.qZA(),e._UZ(3,"input",13,14),e.TgZ(5,"label",15),e._uU(6,"Category Name to search"),e.qZA(),e._UZ(7,"input",16,17),e.TgZ(9,"button",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onSearch())}),e.qZA(),e.TgZ(10,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onReset())}),e.qZA(),e._UZ(11,"button",20)(12,"button",21),e.qZA()}}function ue(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," No compliant CVs available on record "),e.qZA())}function fe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"app-profile-item",24),e.NdJ("downloadEvent",function(s){const o=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.downloadFileEvent(s,o.fullName))})("cvAssessEvent",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvAssessEvent(s))})("cvCheckedEvent",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvCheckedEvent(s))})("cvEditEvent",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvEditClicked(s))})("cvDeleteEvent",function(s){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvDeleteClicked(s))}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("cv",t)}}function ge(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,fe,2,1,"div",22),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.cvs)}}function ve(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"h4",2),e._uU(2,"Listing of Candidates"),e.qZA(),e.TgZ(3,"pagination",3),e.NdJ("pageChanged",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(s))}),e._uU(4," >"),e.qZA(),e._UZ(5,"br"),e.YNc(6,he,13,0,"div",4),e.TgZ(7,"div",5),e._UZ(8,"div",6),e.TgZ(9,"div",7),e._uU(10,"Appl No"),e.qZA(),e.TgZ(11,"div",8),e._uU(12,"Candidate Name"),e.qZA(),e.TgZ(13,"div",9),e._uU(14,"City"),e.qZA(),e.TgZ(15,"div",10),e._uU(16,"Agent"),e.qZA(),e.TgZ(17,"div",11),e._uU(18,"Professions"),e.qZA()(),e.YNc(19,ue,2,0,"div",4),e.YNc(20,ge,2,1,"div",4),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10),e.xp6(3),e.Q6J("ngIf",t.cvs),e.xp6(13),e.Q6J("ngIf",!t.cvs),e.xp6(1),e.Q6J("ngIf",t.cvs.length)}}let _e=(()=>{class n{constructor(t,i,s,a,o,p,v){this.service=t,this.router=i,this.activatedRoute=s,this.modalService=a,this.orderService=o,this.downloadservice=p,this.toastr=v,this.cvs=[],this.selectedCVs=[],this.cvParams=new f,this.totalCount=0,this.professions=[],this.existingQBankCategories=[],this.agents=[],this.idFromChild=0,this.selectedProfIds=[],this.events=[],this.documentLoading=!1,this.sortOptions=[{name:"By Application No Asc",value:"appno"},{name:"By Application No Desc",value:"apppnodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Agent",value:"agent"},{name:"By Agent Desc",value:"agentdesc"}],this.cvParams=new f,this.service.setCVParams(this.cvParams)}ngOnInit(){this.service.setCVParams(this.cvParams),this.activatedRoute.data.subscribe(t=>{this.cvs=t.candidateBriefs.result,this.totalCount=t.candidateBriefs.count,this.pagination=t.candidateBriefs.pagination,this.professions=t.professions,this.agents=t.agents})}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,t).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination)}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination&&(this.cvs=t.result,this.totalCount=t.count)}}))}onSearch(){const t=this.service.getCVParams()??new f;var i=this.searchTerm.nativeElement.value;""!==i&&(t.search=i),""!==i&&(t.categoryName=i),t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new f,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var a=[];const o={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(Y,o),this.bsModalRef.content.updateSelectedRoles.subscribe(p=>{a=p})}onAgentSelected(t){const i=this.service.getCVParams()??new f;i.agentId=t,i.pageNumber=1,this.service.setCVParams(i),this.getCVs()}getOpenOrderItemsArray(){let i=[],a=new D;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadFileEvent(t,i){return this.downloadservice.downloadFile(t).subscribe({next:s=>{const a=document.createElement("a"),o=URL.createObjectURL(s);a.href=o,a.download="filename.ext",a.click(),URL.revokeObjectURL(o)},error:s=>this.toastr.error(s.error.details,"Error encountered while downloading the file ")})}cvAssessEvent(t){this.navigateByUrl("/candidates/cvassess/"+t.id,t,!1)}navigateByUrl(t,i,s){this.router.navigate([t],{state:{cvbrief:i,userobject:this.service.user,toedit:s,returnUrl:"/candidates/listing"}})}cvCheckedEvent(t){var i=this.selectedCVs.find(a=>a.id==t.id),s=this.selectedCVs.findIndex(a=>a.id===t.id);void 0!==i?i.checked?this.selectedCVs.push(t):this.selectedCVs.splice(s,1):this.selectedCVs.push(t)}cvEditClicked(t){this.navigateByUrl("/candidates/register/edit/"+t,void 0,!0)}cvAssessClicked(){this.navigateByUrl("/candidates/assessments",this.selectedCVs,!1)}cvDeleteClicked(t){this.service.deleteCV(t).subscribe({next:i=>{i?this.toastr.success("CV Deleted","Success"):this.toastr.warning("Failed to delete the CV","Failure")},error:i=>this.toastr.error(i.error.details,"Error in deleting the CV")})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(b),e.Y36(u.F0),e.Y36(u.gz),e.Y36(_.tT),e.Y36(q.p),e.Y36(G.D),e.Y36(C._W))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-list"]],viewQuery:function(i,s){if(1&i&&(e.Gf(pe,5),e.Gf(me,5)),2&i){let a;e.iGM(a=e.CRH())&&(s.searchTerm=a.first),e.iGM(a=e.CRH())&&(s.searchTermCat=a.first)}},decls:1,vars:1,consts:[["class","stdd",4,"ngIf"],[1,"stdd"],[1,"stdd","b"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd","mx-4",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[4,"ngIf"],[2,"margin-left","60px","margin-top","5px"],[1,"stddm","w15"],[1,"stddM","w70"],[1,"stddM","w160","mx-2"],[1,"stddM","w100","mx-1"],[1,"stddM","w200","mx-1"],[1,"stddM","w300","mx-1"],[1,"lbl","w160"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search on name or app nos",1,"stdd","form-control","w200",2,"margin-left","20px"],["search",""],[1,"lbl","w100","mx-2"],["type","text","title","enter category name to search","placeholder","Search on category",1,"stdd","form-control","mx-2","w150"],["searchCat",""],["type","button","title","Press this button after you enter the search criteria",1,"btn","fa","fa-search","fa-2x","mx-2",2,"color","aliceblue",3,"click"],["type","button","title","reset the search criteria",1,"btn","fa","fa-refresh","fa-2x","mx-2",2,"color","aliceblue",3,"click"],["type","button","title","Add a new candidate","routerLink","/candidates/register/edit/0",1,"btn","fa","fa-plus","fa-2x","mx-2",2,"color","aliceblue"],["type","button","title","return to calling program","routerLink","/",1,"stdd","btn","fa","fa-window-close","fa-2x",2,"color","aliceblue"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvAssessEvent","cvCheckedEvent","cvEditEvent","cvDeleteEvent"]],template:function(i,s){1&i&&e.YNc(0,ve,21,6,"div",0),2&i&&e.Q6J("ngIf",void 0!==s.pagination)},dependencies:[l.sg,l.O5,u.rH,B.Qt,le],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;text-align:right;font-weight:700;font-size:smaller;vertical-align:top;word-wrap:break-word}.stddlist[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:200px;font-size:medium}.stddM[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();var S=c(7208),Ce=c(7450);const R=()=>(0,e.f3M)(Ce.v).getAgentIdAndNames();var L=c(4825),A=c(4664),j=c(9537),z=c(138),K=c(612),W=c(4807),$=c(7114),X=c(3593);function be(n,r){if(1&n&&(e.TgZ(0,"div",3),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("",t.label," is required")}}let xe=(()=>{class n{constructor(t){this.ngControl=t,this.label="",this.ngControl.valueAccessor=this,this.bsConfig={containerClass:"theme-red",dateInputFormat:"DD MMM YY"}}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d.a5,2))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-date-picker"]],inputs:{label:"label",maxDate:"maxDate"},decls:3,vars:7,consts:[[1,"mb-3"],["type","text","bsDatepicker","",1,"form-control",3,"formControl","placeholder","bsConfig","maxDate"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,s){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,be,2,1,"div",2),e.qZA()),2&i&&(e.xp6(1),e.ekj("is-invalid",s.control.touched&&s.control.invalid),e.s9C("placeholder",s.label),e.Q6J("formControl",s.control)("bsConfig",s.bsConfig)("maxDate",s.maxDate),e.xp6(1),e.Q6J("ngIf",null==s.control.errors?null:s.control.errors.required))},dependencies:[l.O5,X.Np,X.Y5,d.Fj,d.JJ,d.oH]})}return n})();const we=["memberTabs"],Ae=["password"];function Ze(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," No valid Candidate object\n"),e.qZA())}function Te(n,r){if(1&n&&(e.TgZ(0,"div",66),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.strAddMode," ")}}function ke(n,r){1&n&&(e.TgZ(0,"div",67),e._UZ(1,"br"),e.TgZ(2,"label",68),e._uU(3,"Password"),e.qZA(),e._UZ(4,"app-text-input",69)(5,"app-text-input",70),e.qZA()),2&n&&(e.xp6(4),e.Q6J("label","Password")("type","password"),e.xp6(1),e.Q6J("label","Confirm Password")("type","password"))}function Ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",71),e._uU(2,"Referred By"),e.qZA(),e.TgZ(3,"ng-select",72),e.NdJ("change",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getAgentValue(s))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("items",t.agents)("searchable",!0)}}function ye(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",73)(2,"div",46),e._uU(3),e.qZA(),e.TgZ(4,"div",47),e._UZ(5,"app-text-input",74),e.qZA(),e.TgZ(6,"div",48),e._UZ(7,"input",75),e.qZA(),e.TgZ(8,"button",76),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserPhone(a))}),e.qZA()()()}if(2&n){const t=r.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Q6J("label","Mobile No")}}function Ue(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",73)(2,"div",46),e._uU(3),e.qZA(),e.TgZ(4,"ng-select",77),e.NdJ("change",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getProfessionValue(s))}),e.qZA(),e._UZ(5,"input",78),e.TgZ(6,"button",79),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserProfession(a))}),e.qZA()()()}if(2&n){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(1),e.Q6J("items",i.professions)("searchable",!0)}}function Ne(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",73)(2,"div",54),e._uU(3),e.qZA(),e.TgZ(4,"ng-select",80),e.NdJ("change",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getValues(s))}),e.qZA(),e._UZ(5,"input",75)(6,"input",81),e.TgZ(7,"button",79),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserQualification(a))}),e.qZA()()()}if(2&n){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(1),e.Q6J("items",i.qualifications)("searchable",!0)}}function Me(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",73)(2,"div",82),e._UZ(3,"app-text-input",83),e.qZA(),e.TgZ(4,"div",84),e._UZ(5,"app-text-input",85),e.qZA(),e.TgZ(6,"div",86),e._UZ(7,"app-text-input",87),e.qZA(),e.TgZ(8,"div",88),e._UZ(9,"app-date-picker",89),e.qZA(),e.TgZ(10,"div",88),e._UZ(11,"app-date-picker",90),e.qZA(),e.TgZ(12,"button",79),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserExp(a))}),e.qZA()()()}if(2&n){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Sr No"),e.xp6(2),e.Q6J("label","Position"),e.xp6(2),e.Q6J("label","Company"),e.xp6(2),e.Q6J("maxDate",i.maxDate)("label","Worked From"),e.xp6(2),e.Q6J("maxDate",i.maxDate)("label","Worked Upto")}}function Pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",73)(2,"div",91),e._UZ(3,"app-text-input",92),e.qZA(),e._UZ(4,"ng-select",93),e.TgZ(5,"button",94),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.downloadattachment(a))}),e.qZA(),e.TgZ(6,"button",95),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserAttachment(a))}),e.qZA()()()}if(2&n){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","File Name"),e.xp6(1),e.Q6J("items",i.attachmentTypes)("searchable",!0)}}function qe(n,r){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Oe(n,r){if(1&n&&(e.TgZ(0,"div",96)(1,"ul",97),e.YNc(2,qe,2,1,"li",50),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.validationErrors)}}function Ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.registerForm.valid&&s.savewithattachments())}),e.YNc(1,Te,2,1,"div",3),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e.qZA(),e._UZ(4,"button",6),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",7)(7,"label",8),e._uU(8,"Gender: "),e.qZA(),e._UZ(9,"input",9),e._uU(10,"Male "),e._UZ(11,"input",10),e._uU(12,"Female "),e._UZ(13,"br"),e.TgZ(14,"label",11),e._uU(15,"First Name"),e.qZA(),e._UZ(16,"app-text-input",12),e.TgZ(17,"label",13),e._uU(18,"Second Name"),e.qZA(),e._UZ(19,"app-text-input",14)(20,"br"),e.TgZ(21,"label",15),e._uU(22,"Family Name"),e.qZA(),e._UZ(23,"app-text-input",16),e.TgZ(24,"label",17),e._uU(25,"Known As"),e.qZA(),e._UZ(26,"app-text-input",18)(27,"br"),e.TgZ(28,"label",19),e._uU(29,"Aadhar No"),e.qZA(),e._UZ(30,"app-text-input",20),e.TgZ(31,"label",21),e._uU(32,"Passport No"),e.qZA(),e._UZ(33,"app-text-input",22)(34,"br"),e.TgZ(35,"label",8),e._uU(36,"ECR/ECNR: "),e.qZA(),e._UZ(37,"input",23),e._uU(38," ECNR "),e._UZ(39,"input",24),e._uU(40," ECR "),e._UZ(41,"br"),e.TgZ(42,"label",25),e._uU(43,"Date of Birth"),e.qZA(),e._UZ(44,"app-date-picker",26),e.TgZ(45,"label",27),e._uU(46,"Place of Birth"),e.qZA(),e._UZ(47,"app-text-input",28)(48,"br"),e.TgZ(49,"label",29),e._uU(50,"Address"),e.qZA(),e._UZ(51,"app-text-input",30)(52,"br"),e.TgZ(53,"label",31),e._uU(54,"City"),e.qZA(),e._UZ(55,"app-text-input",32),e.TgZ(56,"label",33),e._uU(57,"PIN"),e.qZA(),e._UZ(58,"app-text-input",34)(59,"br"),e.TgZ(60,"label",35),e._uU(61,"District"),e.qZA(),e._UZ(62,"app-text-input",36),e.TgZ(63,"label",37),e._uU(64,"Email"),e.qZA(),e._UZ(65,"app-text-input",38),e.YNc(66,ke,6,4,"div",39),e.YNc(67,Ie,4,2,"div",0),e._UZ(68,"br"),e.qZA(),e.TgZ(69,"div",40)(70,"tabset",41,42)(72,"tab",43),e.NdJ("selectTab",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(s))}),e.TgZ(73,"h4",44),e._uU(74,"Phones"),e.qZA(),e.TgZ(75,"div",45)(76,"div",46),e._uU(77,"Sr No"),e.qZA(),e.TgZ(78,"div",47),e._uU(79,"Phone"),e.qZA(),e.TgZ(80,"div",48),e._uU(81,"Is Main"),e.qZA(),e.TgZ(82,"button",49),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addPhone())}),e.qZA(),e.YNc(83,ye,9,3,"div",50),e.qZA(),e._UZ(84,"br"),e.TgZ(85,"label",8),e._uU(86,"Professions"),e.qZA(),e.TgZ(87,"div",51)(88,"div",46),e._uU(89,"Sr No"),e.qZA(),e.TgZ(90,"div",47),e._uU(91,"Category"),e.qZA(),e.TgZ(92,"div",48),e._uU(93,"Is Main"),e.qZA(),e.TgZ(94,"button",52),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addUserProfession())}),e.qZA(),e.YNc(95,Ue,7,4,"div",50),e.qZA(),e._UZ(96,"br"),e.TgZ(97,"label",8),e._uU(98,"Qualifications"),e.qZA(),e.TgZ(99,"div",53)(100,"div",54),e._uU(101,"Sr No"),e.qZA(),e.TgZ(102,"div",55),e._uU(103,"Qualification"),e.qZA(),e.TgZ(104,"div",56),e._uU(105,"Is Main"),e.qZA(),e.TgZ(106,"button",52),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addQualification())}),e.qZA(),e.YNc(107,Ne,8,4,"div",50),e.qZA()(),e.TgZ(108,"tab",57),e.NdJ("selectTab",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(s))}),e.TgZ(109,"label",8),e._uU(110,"Experiences"),e.qZA(),e.TgZ(111,"div",58)(112,"button",52),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addUserExp())}),e.qZA(),e.YNc(113,Me,13,8,"div",50),e.qZA()(),e.TgZ(114,"tab",59),e.NdJ("selectTab",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(s))}),e.TgZ(115,"div",60),e._uU(116,"File to upload"),e.qZA(),e.TgZ(117,"div",61),e._uU(118,"Type"),e.qZA(),e.TgZ(119,"div",62)(120,"div",63)(121,"input",64),e.NdJ("change",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileInputChange(s))}),e.qZA()(),e.YNc(122,Pe,7,4,"div",50),e.qZA()()()(),e.YNc(123,Oe,3,1,"div",65),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.registerForm),e.xp6(1),e.Q6J("ngIf",t.candidate),e.xp6(3),e.Q6J("disabled",!t.registerForm.valid),e.xp6(12),e.Q6J("label","First Name"),e.xp6(3),e.Q6J("label","Second Name"),e.xp6(4),e.Q6J("label","Family Name"),e.xp6(3),e.Q6J("label","Known As"),e.xp6(4),e.Q6J("label","Aadhar No"),e.xp6(3),e.Q6J("label","Passport No"),e.xp6(11),e.Q6J("maxDate",t.maxDate)("label","Date of birth"),e.xp6(3),e.Q6J("label","Place of birth"),e.xp6(4),e.Q6J("label","address"),e.xp6(4),e.Q6J("label","city"),e.xp6(3),e.Q6J("label","pin"),e.xp6(4),e.Q6J("label","district"),e.xp6(3),e.Q6J("label","email"),e.xp6(1),e.Q6J("ngIf",0===t.candidate.id),e.xp6(1),e.Q6J("ngIf",t.agents),e.xp6(16),e.Q6J("ngForOf",null==t.userPhones?null:t.userPhones.controls),e.xp6(12),e.Q6J("ngForOf",null==t.userProfessions?null:t.userProfessions.controls),e.xp6(12),e.Q6J("ngForOf",null==t.userQualifications?null:t.userQualifications.controls),e.xp6(6),e.Q6J("ngForOf",null==t.userExperiences?null:t.userExperiences.controls),e.xp6(9),e.Q6J("ngForOf",null==t.userAttachments?null:t.userAttachments.controls),e.xp6(1),e.Q6J("ngIf",t.validationErrors)}}let Se=(()=>{class n{constructor(t,i,s,a,o,p,v,T,k,I){this.accountService=t,this.toastrService=i,this.fb=s,this.activatedRoute=a,this.candidateService=o,this.router=p,this.toastr=v,this.qualService=k,this.downloadService=I,this.myPassword="",this.cancelRegister=new e.vpe,this.registerForm=new d.cw({}),this.maxDate=new Date,this.professions=[],this.agents=[],this.qualifications=[],this.errors=[],this.isAddMode=!1,this.strAddMode="",this.loading=!1,this.submitted=!1,this.bsValueDate=new Date,this.fileToUpload=null,this.filesToUpload=[],this.selectedProfession="",this.events=[],this.onUploadFinished=new e.vpe,this.progress={loaded:0,total:0},this.message="",this.isMultipleUploaded=!1,this.isSingleUploaded=!1,this.urlAfterUpload="",this.percentUploaded=0,this.attachmentType="",this.userFiles=[],this.attachmentid=0,this.routeId="",this.returnUrl="/",this.attachmentTypes=[{typeName:"CV"},{typeName:"Educational Certificate"},{typeName:"Experience Certificate"},{typeName:"Passport Copy"},{typeName:"Photograph"},{typeName:"affidavit"},{typeName:"Air Ticket"},{typeName:"Travel Insurance"},{typeName:"Medical Fit certificate"},{typeName:"Visa Copy"},{typeName:"Job Offer"}],this.lastTimeCalled=Date.now(),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();const U=new FormData;this.userFiles.length>0&&this.userFiles.forEach(h=>{U.append("file",h,h.name)}),U.append("data",JSON.stringify(this.registerForm.value)),this.candidate||void 0!==U.get("password")?0===this.candidate.id?(this.toastrService.info("inserting ..."),this.candidateService.registerNewWithFiles(U).subscribe({next:h=>{console.log("response in angular:",h),""!==h.errorMessage?this.toastrService.error("failed to save the candidate data",h.errorMessage):(this.toastrService.success("candidate saved, with Application No. "+h.returnInt.toString(),"Profile successfully inserted"),this.registerForm.setValue({applicationNo:h.returnInt}))},error:h=>{this.toastrService.error("failed to insert the candidate",h.error.details)}})):(this.toastrService.info("udating ..."),this.candidateService.UpdateCandidateWithFiles(U).subscribe({next:h=>{""!==h?.errorMessage?this.toastrService.error("failed to update the candidate",h.errorMessage):(this.toastrService.success("updated the candidate successfully"),this.router.navigateByUrl(this.returnUrl))},error:h=>{this.toastrService.error("failed to update the candidate",h),console.log(h)}})):this.toastrService.info("Password not provided")},this.uploadFinished=y=>{this.response=y},this.passwordElement=T,this.routeId=this.activatedRoute.snapshot.params.id,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let m=this.router.getCurrentNavigation();m?.extras&&m.extras.state&&(m.extras.state.returnUrl&&(this.returnUrl=m.extras.state.returnUrl),m.extras.state.user&&(this.user=m.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.professions=t.categories,this.qualifications=t.qualifications,this.agents=t.agents,this.candidate=t.candidate,this.isAddMode=0===this.candidate?.id,this.strAddMode=this.isAddMode?"Entering new candidate":"Editing Application No."+this.candidate?.applicationNo}),this.candidate&&this.InitializeAndPopulateFormArray(this.candidate)}InitializeAndPopulateFormArray(t){this.registerForm=this.fb.group({id:[t.id,d.kI.required],applicationNo:[t.applicationNo],gender:[t.gender,[d.kI.required,d.kI.maxLength(1)]],nationality:["Indian"],firstName:[t.firstName,d.kI.required],secondName:[t.secondName],familyName:[t.familyName],knownAs:[t.knownAs,d.kI.required],dOB:[t.dOB],placeOfBirth:[t.placeOfBirth],aadharNo:[t.aadharNo],ppNo:[t.ppNo],ecnr:[t.ecnr],customerId:[t.customerId],referredByName:[t.referredByName],address:[t.address],city:[t.city,d.kI.required],country:[t.country??"India"],pin:[t.pin],district:[t.district],email:[t.email,d.kI.required],userPhones:this.fb.array(t.userPhones.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],mobileNo:[i.mobileNo,[d.kI.required,d.kI.maxLength(15),d.kI.minLength(10)]],isMain:[i.isMain],remarks:[i.remarks],isValid:[i.isValid]}))),userQualifications:this.fb.array(t.userQualifications.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],qualificationId:[i.qualificationId,d.kI.required],isMain:[i.isMain]}))),userProfessions:this.fb.array(t.userProfessions.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,professionId:[i.professionId,d.kI.required],isMain:[i.isMain]}))),userExperiences:this.fb.array(t.userExperiences.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,employer:i.employer,position:i.position,salaryCurrency:i.salaryCurrency,monthlySalaryDrawn:i.monthlySalaryDrawn,workedFrom:i.workedFrom,workedUpto:i.workedUpto}))),userAttachments:this.fb.array(t.userAttachments.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,appUserId:i.appUserId,attachmentType:i.attachmentType,name:[i.name,d.kI.required],attachmentSizeInBytes:i.attachmentSizeInBytes,url:i.url})))}),this.registerForm.controls.password&&this.registerForm.controls.password.valueChanges.subscribe({next:()=>this.registerForm.controls.confirmPassword.updateValueAndValidity()})}get userPhones(){return this.registerForm.get("userPhones")}get userQualifications(){return this.registerForm.get("userQualifications")}get userProfessions(){return this.registerForm.get("userProfessions")}get userExperiences(){return this.registerForm.get("userExperiences")}newUserPhone(){return this.fb.group({candidateId:this.candidate?.id,mobileNo:["",[d.kI.required,d.kI.minLength(10),d.kI.maxLength(15)]],isMain:!1,remarks:""})}addPhone(){this.userPhones.push(this.newUserPhone())}removeUserPhone(t){this.userPhones.removeAt(t)}newQualification(){return this.fb.group({candidateId:this.candidate?.id,qualificationId:0,qualificationName:"",isMain:[!1]})}addQualification(){this.userQualifications.push(this.newQualification())}removeUserQualification(t){this.userQualifications.removeAt(t)}newUserProfession(){return this.fb.group({professionId:[0,d.kI.required],isMain:[!1,d.kI.required],candidateId:this.candidate?.id})}addUserProfession(){this.userProfessions.push(this.fb.group({candidateId:[0,d.kI.required],professionId:[0,d.kI.required],isMain:[!1,d.kI.required]}))}removeUserProfession(t){this.userProfessions.removeAt(t)}newUserExp(){return this.fb.group({candidateId:this.candidate?.id,srNo:[0,d.kI.required],position:["",d.kI.required],company:["",d.kI.required],workedFrom:"",workedUpto:""})}addUserExp(){this.userExperiences.push(this.newUserExp())}removeUserExp(t){this.userExperiences.removeAt(t)}get userAttachments(){return this.registerForm.get("userAttachments")}newUserAttachment(){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:[""],name:["",d.kI.required],attachmentSizeInBytes:0,url:""})}newUserAttachmentWithFile(t){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:["",d.kI.required],name:[t.name,d.kI.required],attachmentSizeInBytes:t.size,url:""})}addUserAttachment(){this.userAttachments.push(this.newUserAttachment())}removeUserAttachment(t){this.userAttachments.removeAt(t)}getCVById(t){return this.candidateService.getCandidate(t).subscribe({next:i=>{this.candidate=i,this.InitializeAndPopulateFormArray(this.candidate)},error:i=>this.toastrService.error("failed to get candidate to edit:",i)})}getQualifications(){return this.qualService.getQualificationList().subscribe({next:t=>this.qualifications=t,error:t=>this.toastrService.error("error in qualificatin",t)})}matchValues(t){return i=>i.value===i.parent?.get(t)?.value?null:{notMatching:!0}}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}selectTab(t){this.memberTabs.tabs[t].active=!0}onTabActivated(t){this.activeTab=t}validateEmailNotTaken(){return t=>(0,L.H)(10).pipe((0,A.w)(()=>t.value?this.accountService.checkEmailExists(t.value).pipe((0,x.U)(i=>i?{emailExists:!0}:null)):(0,g.of)(null)))}validatePPNotTaken(){return t=>(0,L.H)(10).pipe((0,A.w)(()=>t.value?this.accountService.checkPPExists(t.value).pipe((0,x.U)(i=>(null!==i&&this.toastrService.warning("that passport number is taken by "+i),i?{ppExists:!0}:null))):(0,g.of)(null)))}handleFileInput(t){this.fileToUpload=t[0],this.filesToUpload.push(t[0])}getAgentValue(t){console.log("agent selected",t)}getProfessionValue(t){console.log("ngx dropdown selected",t)}getValues(t){console.log("ngx dropdown selected",this.selectedProfession)}onFileInputChange(t){const a=t.target.files[0];a.size>0&&(this.userFiles.push(a),this.userAttachments.push(this.newUserAttachmentWithFile(a)))}downloadattachment(t){var i=this.userAttachments.at(t).value;if(0!==i.id){var a=i.name;this.downloadService.download(i.id).subscribe({next:o=>{const p=document.createElement("a"),v=URL.createObjectURL(o);p.href=v,p.download=a,p.click(),URL.revokeObjectURL(v)},error:o=>this.toastr.error(o.error.details,"Error while downloading")})}else this.toastrService.warning("this item has no primary key value")}IsNewAttachment(t){return void 0!==this.userAttachments.value.map(s=>s.id).findIndex(s=>0===s.id)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(N.B),e.Y36(C._W),e.Y36(d.qu),e.Y36(u.gz),e.Y36(b),e.Y36(u.F0),e.Y36(C._W),e.Y36(e.SBq),e.Y36(j.h),e.Y36(z.I))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-candidate-edit"]],viewQuery:function(i,s){if(1&i&&(e.Gf(we,7),e.Gf(Ae,7)),2&i){let a;e.iGM(a=e.CRH())&&(s.memberTabs=a.first),e.iGM(a=e.CRH())&&(s.passwordElement=a.first)}},outputs:{cancelRegister:"cancelRegister",onUploadFinished:"onUploadFinished"},decls:2,vars:2,consts:[[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],["class","my-0","style","font-weight: bold; display: inline-block;",4,"ngIf"],[1,"my-0",2,"margin-left","225px","display","inline-block","vertical-align","top"],["type","button",1,"btn","btn-default","fa","fa-window-close",2,"color","aliceblue",3,"click"],["title","Update","type","submit",1,"btn","btn-success","me-2","fa","fa-save",3,"disabled"],[1,"stdd","col-5","mt-1",2,"border-style","groove","margin-left","5px"],[1,"lbl"],["type","radio","value","m","formControlName","gender",1,"inputcheck","form-check-input"],["type","radio","value","f","formControlName","gender",1,"inputcheck","form-check-input"],["for","firstName",1,"lbl"],["formControlName","firstName",1,"stdd","w150",3,"label"],["for","secondName",1,"lbl"],["formControlName","secondName",1,"stdd","w150",3,"label"],["for","familyName",1,"lbl"],["formControlName","familyName",1,"stdd","w150",3,"label"],["for","knownAs",1,"lbl"],["formControlName","knownAs",1,"stdd","w150",3,"label"],["for","aadharNo",1,"lbl"],["formControlName","aadharNo",1,"stdd","w150",3,"label"],["for","ppNo",1,"lbl",2,"margin-left","5px"],["formControlName","ppNo",1,"stdd","w150",3,"label"],["type","radio","formControlName","ecnr","value","true",1,"form-check-input","inputcheck"],["type","radio","formControlName","ecnr","value","false",1,"form-check-input","inputcheck"],["for","dOB",1,"lbl"],["formControlName","dOB",1,"stdd","w150",3,"maxDate","label"],["for","placeOfBirth",1,"lbl"],["formControlName","placeOfBirth",1,"stdd","w150",3,"label"],["for","address",1,"lbl"],["formControlName","address",1,"stdd","w450",3,"label"],["for","city",1,"lbl"],["formControlName","city",1,"stdd","w150",3,"label"],["for","pin",1,"lbl"],["formControlName","pin",1,"stdd","w150",3,"label"],["for","district",1,"lbl"],["formControlName","district",1,"stdd","w150",3,"label"],["for","email",2,"display","inline-block","width","50px","font-size","small"],["formControlName","email",1,"stdd","w250",3,"label"],["class","stdd w500",4,"ngIf"],[1,"stdd","col-6","mt-1",2,"margin-left","5px"],[1,"member-tabset",2,"background-color","black","color","whitesmoke"],["memberTabs",""],["heading","Phones, Prof & Qualification",3,"selectTab"],[2,"background-color","auto !important"],["formArrayName","userPhones",1,"col-12","my-1","px-0",2,"font-size","small"],[1,"stdd","col-1"],[1,"stdd","col-4"],[1,"stdd","col-2"],["type","button",1,"stdd","my-1","fa","fa-plus",2,"color","blue",3,"click"],[4,"ngFor","ngForOf"],["formArrayName","userProfessions",1,"col-12","my-1","px-0",2,"font-size","small"],["type","button",1,"my-1","fa","fa-plus",2,"color","blue",3,"click"],["formArrayName","userQualifications",1,"my-1","px-0",2,"font-size","small"],[2,"width","50px","display","inline-block"],[2,"width","300px","display","inline-block"],[2,"width","50px","margin-left","10px","display","inline-block"],["heading","Experience",3,"selectTab"],["formArrayName","userExperiences",1,"col-12","my-1","px-0",2,"height","10px","font-size","small"],["heading","Attachments",3,"selectTab"],[1,"stdd","col-6"],[1,"stdd","col-3"],["formArrayName","userAttachments",2,"height","12px"],[1,"stdd",2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],["class","row",4,"ngIf"],[1,"my-0",2,"font-weight","bold","display","inline-block"],[1,"stdd","w500"],["for","password",1,"lbl"],["formControlName","password",3,"label","type"],[3,"label","type"],["for","referredBy",1,"lbl"],["bindLabel","customerName","bindValue","id","formControlName","customerId",2,"display","inline-block","font-size","smaller","width","300px",3,"items","searchable","change"],[3,"formGroupName"],["formControlName","mobileNo",3,"label"],["type","checkbox","formControlName","isMain",2,"width","50px","margin-left","30","display","inline-block"],[1,"btn","w25","fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","professionName","bindValue","id","formControlName","professionId",1,"stdd","col-4",3,"items","searchable","change"],["type","checkbox","formControlName","isMain",1,"stdd","col-2"],[1,"fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","qualificationName","bindValue","id","formControlName","qualificationId",1,"stdd","w300","py-0","my-0",3,"items","searchable","change"],["type","text","formControlName","candidateId",1,"stdd","w15"],[1,"stdd","w100"],["formControlName","srNo",3,"label"],[1,"stdd","w300"],["formControlName","position",3,"label"],[1,"stdd","w400"],["formControlName","company",3,"label"],[1,"stdd","w150"],["formControlName","workedFrom",3,"maxDate","label"],["formControlName","workedUpto",3,"maxDate","label"],[1,"stdd","col-5"],["formControlName","name",3,"label"],["bindLabel","typeName","bindValue","typeName","formControlName","attachmentType",1,"stdd","mx-10","w150","fSmaller",3,"items","searchable"],["type","button",1,"w25","mx-1","fa","fa-download",3,"click"],["type","button","title","remove the attachment",1,"w25","red","fa","fa-trash",2,"margin-left","20px",3,"click"],[1,"row"],[1,"text-danger"]],template:function(i,s){1&i&&(e.YNc(0,Ze,2,0,"div",0),e.YNc(1,Ee,124,25,"form",1)),2&i&&(e.Q6J("ngIf",!s.candidate),e.xp6(1),e.Q6J("ngIf",s.candidate))},dependencies:[l.sg,l.O5,K.wW,K.AH,d._Y,d.Fj,d.Wl,d._,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,W.w9,$.t,xe],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-left:5px;margin-top:5px;color:#f0f8ff;font-size:small}tab[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;color:#f0f8ff;background-color:gray}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin-right:10px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.lblS[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;vertical-align:top;font-weight:700;width:40px;margin-top:5px}.lbl[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;font-weight:700;width:80px;margin-top:5px;margin-left:5px;vertical-align:middle}.chkLabel[_ngcontent-%COMP%]{width:100px;margin-right:2px;padding-left:2px}.tAlignR[_ngcontent-%COMP%]{text-align:right}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.w450[_ngcontent-%COMP%]{width:450px}.red[_ngcontent-%COMP%]{color:red}']})}return n})();class Je{constructor(){this.id=0,this.applicationNo=0,this.gender="",this.firstName="",this.secondName="",this.familyName="",this.knownAs="",this.referredBy=0,this.referredByName="",this.placeOfBirth="",this.aadharNo="",this.ppNo="",this.ecnr="",this.address="",this.city="",this.pin="",this.district="",this.country="India",this.nationality="",this.email="",this.companyId=0,this.created=new Date,this.appUserIdNotEnforced="",this.appUserId=0,this.notificationDesired=!1,this.candidateStatus="",this.photoUrl="",this.lastActive=new Date,this.userPhones=[],this.userQualifications=[],this.userProfessions=[],this.userAttachments=[],this.userExperiences=[],this.userPhotos=[]}}var J=c(2181),Qe=c(8344),F=c(3298),Q=c(3391),ee=c(8983);function He(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," No candidate detail available\n"),e.qZA())}function De(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"input",14),e.NdJ("change",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.CVChecked(s.cv))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.cv.checked)}}function Ye(n,r){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t.professionName," - ")}}function Ve(n,r){1&n&&(e.TgZ(0,"div",15),e._UZ(1,"pre"),e.qZA())}function Ge(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.download(s.cv))}),e.qZA()}}function Be(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.YNc(1,De,2,1,"div",3),e.TgZ(2,"div",4),e._uU(3),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"div",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.displayAssessment())}),e._uU(16),e.qZA(),e.YNc(17,Ye,2,1,"div",10),e.YNc(18,Ve,2,0,"div",11),e.YNc(19,Ge,1,0,"button",12),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isPrintPDF),e.xp6(2),e.Oqu(t.cv.gender),e.xp6(1),e.MGl("routerLink","/candidates/edit/",t.cv.candidateId,""),e.xp6(1),e.Oqu(t.cv.applicationNo),e.xp6(1),e.MGl("routerLink","/candidate/historyfromcvid/",t.cv.candidateId,""),e.xp6(1),e.Oqu(t.cv.fullName),e.xp6(2),e.Oqu(t.cv.city),e.xp6(2),e.Oqu(t.cv.orderCategoryRef),e.xp6(2),e.Oqu(e.xi3(14,13,t.cv.assessedOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.cv.gradeAssessed),e.xp6(1),e.Q6J("ngForOf",t.cv.userProfessions),e.xp6(1),e.Q6J("ngIf",t.cv.userProfessions.length>0),e.xp6(1),e.Q6J("ngIf",!t.isPrintPDF)}}let Le=(()=>{class n{constructor(){this.isPrintPDF=!1,this.msgEvent=new e.vpe,this.downloadEvent=new e.vpe,this.cvAssessEvent=new e.vpe,this.cvCheckedEvent=new e.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){console.log(this.isPrintPDF)}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){this.msgEvent.emit(t)}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-available-item"]],inputs:{cv:"cv",isPrintPDF:"isPrintPDF"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["class","stdd",4,"ngIf"],[1,"stdd","fSmall","w25","mx-1",2,"text-align","center"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","fSmall","w50","mx-1",2,"margin-left","10px",3,"routerLink"],["title","contact history of the candidate",1,"stdd","fSmall","w130","mx-1",3,"routerLink"],[1,"stdd","fSmall","mx-1","w100"],[1,"stdd","fSmaller","mx-1","w300"],[1,"stdd","fSmall","w50","mx-1","cursorpointer",2,"text-align","center",3,"click"],["class","prof",4,"ngFor","ngForOf"],["class","prof",4,"ngIf"],["type","button","class","btn fa fa-download w20","type","button","title","download the CV",3,"click",4,"ngIf"],[1,"stdd"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],[1,"prof"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-download","w20",3,"click"]],template:function(i,s){1&i&&(e.YNc(0,He,2,0,"div",0),e.YNc(1,Be,20,16,"div",1)),2&i&&(e.Q6J("ngIf",null===s.cv),e.xp6(1),e.Q6J("ngIf",null!=s.cv))},dependencies:[l.sg,l.O5,u.rH,l.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#9acd32}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.blue[_ngcontent-%COMP%]{color:#00008b}.prof[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;border:aqua;width:200px}"]})}return n})();const je=["search"];function ze(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"pagination",13),e.NdJ("pageChanged",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(s))}),e._uU(1," >"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Ke(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"input",15,16),e.NdJ("keyup.enter",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearch())}),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearch())}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onReset())}),e._uU(6,"Reset"),e.qZA(),e.TgZ(7,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.referCVs())}),e.qZA(),e.TgZ(8,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.close())}),e.qZA(),e.TgZ(9,"button",21),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.generatePDF())}),e.TgZ(10,"mat-icon"),e._uU(11,"print"),e.qZA()()()}2&n&&(e.xp6(9),e.Q6J("previewOnly",!1)("useExistingCss",!0))}function We(n,r){1&n&&(e.TgZ(0,"div",22),e._uU(1,"Select"),e.qZA())}function $e(n,r){1&n&&(e.TgZ(0,"div",23),e._uU(1," No candidates available to refer "),e.qZA())}function Xe(n,r){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"app-available-item",26),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("isPrintPDF",!0)("cv",t)}}function et(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Xe,2,2,"div",24),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.printCVs)}}function tt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"app-available-item",27),e.NdJ("downloadEvent",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.downloadcv(s))})("cvCheckedEvent",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cvCheckedEvent(s))})("cvAssessEvent",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.displayAssessmentModalBySwitchMap(s))}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("isPrintPDF",!1)("cv",t)}}function it(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,tt,2,2,"div",24),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.cvs)}}let st=(()=>{class n{constructor(t,i,s,a,o,p,v,T,k,I){this.router=t,this.activatedRoute=i,this.service=s,this.candAssessService=a,this.referService=o,this.toastr=p,this.modalService=v,this.orderService=T,this.fileService=k,this.downloadService=I,this.professions=[],this.agents=[],this.cvs=[],this.selectedCVs=[],this.printCVs=[],this.returnUrl="",this.cvParams=new f,this.totalCount=0,this.ProspList=[],this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctRefCats=[],this.distinctRefCat="",this.cvParams.typeOfCandidate="available";let m=this.router.getCurrentNavigation();m?.extras&&m.extras.state&&(m.extras.state.returnUrl&&(this.returnUrl=m.extras.state.returnUrl),m.extras.state.user&&(this.user=m.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.cvs=t.cvs.result,this.pagination=t.cvs.pagination,this.professions=t.professions,this.agents=t.agents}),this.selectedCVs=[]}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,t).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination,console.log("cvs",this.cvs))}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination&&(this.cvs=t.result,this.totalCount=t.count)}}))}onSearch(){const t=this.service.getCVParams()??new f;t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new f,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var a=[];const o={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(Y,o),this.bsModalRef.content.updateSelectedRoles.subscribe(p=>{a=p})}getOpenOrderItemsArray(){let i=[],a=new D;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadcv(t){var i=t.fullName;this.fileService.downloadCV(t.candidateId).subscribe({next:s=>{console.log("downloadcv blob: ",s);const a=document.createElement("a"),o=URL.createObjectURL(s);a.href=o,a.download=i,a.click(),URL.revokeObjectURL(o)},error:s=>{this.toastr.error(s.error?.details,"Error while downloading"),console.log("error",s)}})}downloadFileEvent(t){return this.downloadService.downloadFile(t).subscribe(()=>{this.toastr.success("document downloaded")},i=>{this.toastr.error("failed to download document",i)})}displayAssessmentModalBySwitchMap(t){this.candAssessService.getCandidateAssessmentDto(t.candidateId,t.orderItemId).pipe((0,J.h)(o=>void 0!==o),(0,A.w)(o=>(this.bsModalRef=this.modalService.show(Qe.K,{class:"modal-dialog-centered modal-lg",initialState:{assess:o,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(o=>{console.log("inner response:",o)})}navigateByUrl(t,i,s){this.router.navigate([t],{state:{cvbrief:i,userobject:this.service.user,toedit:s,returnUrl:"/candidates"}})}cvCheckedEvent(t){var i=this.cvs.findIndex(o=>o.candAssessmentId==t.candAssessmentId);if(-1!==i){var s=this.cvs[i];if(s.checked)this.selectedCVs.push(s);else{var a=this.selectedCVs.findIndex(o=>o.candAssessmentId==s.candAssessmentId);-1!==a?this.selectedCVs.splice(a,1):this.selectedCVs.push(s)}}}referCVs(){if(0!==this.selectedCVs.length){var t=this.selectedCVs.map(i=>i.candAssessmentId);this.referService.referCVs(t).subscribe({next:i=>{console.log("refer cvs response:",i),""!==i.successString?(this.toastr.success(i.successString,"success"),this.clearSelections(t),this.toastr.success("CVs referred","Success")):""!==i.errorString&&(this.clearSelections(t),this.toastr.error(i.errorString,"Error in referrals"))},error:i=>{console.log("error in cvref",i),this.toastr.error(i.error?.details,i.length>0?"error in referring the CVs":"Error in referring the CVs;")}}),this.selectedCVs=[]}else this.toastr.warning("No CVs selected to forward to client","No selections made")}clearSelections(t){this.removeReferredRows(t)}removeReferredRows(t){t.forEach(i=>{var s=this.selectedCVs.findIndex(a=>a.candAssessmentId==a.candAssessmentId);-1!==s&&(console.log("deleted row",this.selectedCVs[s].applicationNo),this.selectedCVs.splice(s,1))})}close(){this.router.navigateByUrl(this.returnUrl)}generatePDF(){this.isPrintPDF=!this.isPrintPDF,this.printtitle="CVs Available to refer as on "+new Date,this.service.getAvailableCandidateList().subscribe({next:t=>{null!==t&&t.length>0?(this.printCVs=t,console.log("printCVs:",this.printCVs)):console.log("response is undefined")},error:t=>console.log(t)})}closePrintSection(){this.isPrintPDF=!1,this.distinctRefCat=""}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(b),e.Y36(F.k),e.Y36(Q.Z),e.Y36(C._W),e.Y36(_.tT),e.Y36(q.p),e.Y36(z.I),e.Y36(G.D))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-cvs-available-to-ref"]],viewQuery:function(i,s){if(1&i&&e.Gf(je,5),2&i){let a;e.iGM(a=e.CRH())&&(s.searchTerm=a.first)}},decls:24,vars:6,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],["id","print-section"],[2,"margin-left","70px"],["class","lbl w30 mx-1",4,"ngIf"],[1,"lbl","w25","mx-1"],[1,"lbl","w50","mx-1"],[1,"lbl","w130","mx-1"],[1,"lbl","w100","mx-1"],[1,"lbl","w300","mx-1"],[1,"lbl","w200","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; color: pink; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"stdd","btn","btn-outline-primary","mx-1",3,"click"],["type","button",1,"stdd","mx-1","fa-arrows-rotate","fa-2x",2,"font-size","small",3,"click"],["title","refers selected CVs to client",1,"stdd","w40","mx-1","fa","fa-arrow-right","fa-2x",3,"click"],["title","close this page",1,"stdd","w40","mx-1","fa","fa-window-close","fa-2x",3,"click"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","click"],[1,"lbl","w30","mx-1"],[2,"margin-left","100px","margin-top","5px","font-weight","bold","color","pink"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"isPrintPDF","cv"],[3,"isPrintPDF","cv","downloadEvent","cvCheckedEvent","cvAssessEvent"]],template:function(i,s){1&i&&(e.YNc(0,ze,2,3,"pagination",0),e.YNc(1,Ke,12,2,"div",1),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,We,2,0,"div",4),e.TgZ(5,"div",5),e._uU(6,"Gndr"),e.qZA(),e.TgZ(7,"div",6),e._uU(8,"App No"),e.qZA(),e.TgZ(9,"div",7),e._uU(10,"Candidate Name"),e.qZA(),e.TgZ(11,"div",8),e._uU(12,"City"),e.qZA(),e.TgZ(13,"div",9),e._uU(14,"Category Ref"),e.qZA(),e.TgZ(15,"div",8),e._uU(16,"Assessed On"),e.qZA(),e.TgZ(17,"div",6),e._uU(18,"Grade"),e.qZA(),e.TgZ(19,"div",10),e._uU(20,"Professions"),e.qZA()(),e.YNc(21,$e,2,0,"div",11),e.YNc(22,et,2,1,"div",12),e.YNc(23,it,2,1,"div",12),e.qZA()),2&i&&(e.Q6J("ngIf",void 0!==s.pagination),e.xp6(1),e.Q6J("ngIf",s.cvs),e.xp6(3),e.Q6J("ngIf",!s.isPrintPDF),e.xp6(17),e.Q6J("ngIf",0===s.cvs.length),e.xp6(1),e.Q6J("ngIf",s.isPrintPDF),e.xp6(1),e.Q6J("ngIf",s.cvs.length&&!s.isPrintPDF))},dependencies:[l.sg,l.O5,B.Qt,E.Hw,ee.IH,Le],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w45[_ngcontent-%COMP%]{width:45px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();var nt=c(6355),ot=c(8645),te=c(6306),dt=c(9397);function ct(n,r){if(1&n&&(e.TgZ(0,"ul")(1,"li",7),e._uU(2),e.qZA(),e.TgZ(3,"li",6),e._uU(4),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw(2).$implicit;e.xp6(2),e.AsE("",i.sequence,"-",t.sequence,""),e.xp6(2),e.Oqu(t.helpText)}}function lt(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ct,5,3,"ul",4),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.helpSubItems)}}function pt(n,r){if(1&n&&(e.TgZ(0,"div")(1,"ul")(2,"li",5),e._uU(3),e.qZA(),e.TgZ(4,"li",6),e._uU(5),e.qZA(),e.YNc(6,lt,2,1,"div",0),e.qZA()()),2&n){const t=r.$implicit;e.xp6(3),e.hij(" ",t.sequence," "),e.xp6(2),e.hij(" ",t.helpText," "),e.xp6(1),e.Q6J("ngIf",t.helpSubItems)}}function mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",1),e._uU(2),e.TgZ(3,"button",2),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.bsModalRef.hide())}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.YNc(6,pt,7,3,"div",4),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.help.topic," Help "),e.xp6(4),e.Q6J("ngForOf",t.help.helpItems)}}let ht=(()=>{class n{constructor(t){this.bsModalRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(_.UZ))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-help-modal"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container","stdd","b"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[1,"stdd","w20"],[1,"stdd","w700"],[1,"stdd","w30","ml-25"]],template:function(i,s){1&i&&e.YNc(0,mt,7,2,"div",0),2&i&&e.Q6J("ngIf",void 0!==s.help)},dependencies:[l.sg,l.O5],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;vertical-align:top}li[_ngcontent-%COMP%]{vertical-align:top;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w700[_ngcontent-%COMP%]{width:700px}"]})}return n})();var ut=c(675),ft=c(5619);let ie=(()=>{class n{constructor(t){this.http=t,this.apiUrl=P.N.apiUrl,this.checklistSource=new ft.X(null),this.checklist$=this.checklistSource.asObservable()}getChecklist(t,i){return this.http.get(this.apiUrl+"checklist/generateorget/"+t+"/"+i)}getOrComposeChecklist(t,i){return this.http.get(this.apiUrl+"checklist/")}updateChecklist(t){return this.http.put(this.apiUrl+"Checklist/checklisthr",t)}generateChecklistHR(t,i){return this.http.get(this.apiUrl+"Checklist/"+t+"/"+i)}saveNewChecklistHR(t){return this.http.post(this.apiUrl+"CandidateAssessment/newchecklist",t)}deleteChecklistHR(t){return this.http.delete(this.apiUrl+"Checklist/checklist/"+t)}getRemuneration(t){return this.http.get(this.apiUrl+"orders/remuneration/"+t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(Z.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"h4",6),e._uU(2,"Candidate Checklist"),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",7),e._uU(5,"Candidate:"),e.qZA(),e.TgZ(6,"div",8),e._uU(7),e.qZA(),e.TgZ(8,"button",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.Update())}),e.qZA(),e.TgZ(9,"button",10),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeModal())}),e.qZA(),e.TgZ(10,"button",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteChecklist())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(7),e.AsE("",t.chklst.applicationNo," - ",t.chklst.candidateName,"")}}function vt(n,r){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Not Defined"),e.qZA())}function _t(n,r){if(1&n&&(e.TgZ(0,"div",45),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.chklst.charges)}}function Ct(n,r){if(1&n&&(e.TgZ(0,"div",48)(1,"div",49),e._uU(2,"On: "),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",50),e._uU(7,"By:"),e.qZA(),e.TgZ(8,"div",51),e._uU(9),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(e.xi3(5,2,t.chklst.exceptionApprovedOn,"d-MMM-yy")),e.xp6(5),e.Oqu(t.chklst.exceptionApprovedBy)}}function bt(n,r){if(1&n&&(e.TgZ(0,"div",46),e._uU(1,"Fees Diff Approved: "),e.YNc(2,Ct,10,5,"div",47),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.chklst.exceptionApproved)}}function xt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",52),e._UZ(2,"input",53)(3,"input",54)(4,"input",55)(5,"input",56)(6,"input",57)(7,"input",58),e.TgZ(8,"button",59),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeChecklistItem(a))}),e.qZA()()()}if(2&n){const t=r.index;e.xp6(1),e.Q6J("formGroupName",t)}}function wt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._uU(2,"Category:"),e.qZA(),e.TgZ(3,"div",14),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",15),e._uU(7,"HR Exec assigned to:"),e.qZA(),e.TgZ(8,"div",16),e._uU(9),e.qZA(),e.TgZ(10,"div",17),e._uU(11,"Logged-In User:"),e.qZA(),e.TgZ(12,"div",16),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",18),e._uU(16,"Fees:"),e.qZA(),e.YNc(17,vt,2,0,"div",19),e.YNc(18,_t,2,1,"div",20),e.TgZ(19,"div",21),e._uU(20,"Agreed:"),e.qZA(),e.TgZ(21,"input",22),e.NdJ("dblclick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.ChargesDoubleClicked())}),e.qZA(),e.TgZ(22,"label",23),e._uU(23,"Charges Exception approved"),e.qZA(),e.TgZ(24,"input",24),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.chklst.exceptionApproved!=s.chklst.exceptionApproved)}),e.qZA(),e.YNc(25,bt,3,1,"div",25),e._UZ(26,"br"),e.TgZ(27,"label",17),e._uU(28,"Salary Offered"),e.qZA(),e.TgZ(29,"div",26),e.NdJ("dblclick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.displayRemunerationModal())}),e._uU(30),e.qZA(),e.TgZ(31,"label",27),e._uU(32,"Expected:"),e.qZA(),e._UZ(33,"app-text-input",28)(34,"br"),e.TgZ(35,"div",29),e._uU(36,"checklisted on:"),e.qZA(),e.TgZ(37,"div",30),e._uU(38),e.ALo(39,"date"),e.qZA(),e.TgZ(40,"div",31)(41,"span",6),e._uU(42,"Checklist Completed:"),e.qZA(),e.TgZ(43,"span",32),e._uU(44),e.qZA()(),e._UZ(45,"hr",33),e.TgZ(46,"label",34),e._uU(47,"Sr#"),e.qZA(),e.TgZ(48,"label",35),e._uU(49,"Parameter"),e.qZA(),e.TgZ(50,"label",36),e._uU(51,"Must"),e._UZ(52,"br"),e._uU(53,"accept"),e.qZA(),e.TgZ(54,"label",37),e._uU(55,"Candidt"),e._UZ(56,"br"),e._uU(57,"accepts"),e.qZA(),e.TgZ(58,"label",38),e._uU(59,"Candidt"),e._UZ(60,"br"),e._uU(61,"Response"),e.qZA(),e.TgZ(62,"label",39),e._uU(63,"Exception"),e.qZA(),e.TgZ(64,"button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addChecklistItem())}),e.qZA(),e._UZ(65,"hr",41),e.TgZ(66,"div",42),e.YNc(67,xt,9,1,"div",43),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.hij("",t.chklst.categoryRef," "),e.xp6(5),e.Oqu(t.chklst.hrExecUsername),e.xp6(4),e.Oqu(t.chklst.userLoggedName),e.xp6(4),e.Q6J("ngIf",void 0===(null==t.chklst?null:t.chklst.charges)||void 0===t.chklst.charges),e.xp6(1),e.Q6J("ngIf",null!==t.chklst.charges),e.xp6(3),e.Q6J("name","chargesAgreed"),e.xp6(3),e.Q6J("checked",t.chklst.exceptionApproved),e.xp6(1),e.Q6J("ngIf",t.chklst.charges!=t.chklst.chargesAgreed&&t.chklst.charges>0),e.xp6(5),e.Oqu(t.chklst.salaryOffered),e.xp6(3),e.Q6J("label","Salary Expectation"),e.xp6(5),e.Oqu(e.xi3(39,13,t.chklst.checkedOn,"d-MMM-yy")),e.xp6(6),e.hij(" ",t.chklst.checklistedOk?"Yes":"No",""),e.xp6(23),e.Q6J("ngForOf",t.checklistHRItems.controls)}}let At=(()=>{class n{constructor(t,i,s,a,o,p){this.bsmodalRef=t,this.confirmService=i,this.toastr=s,this.checklistService=a,this.fb=o,this.bsModalService=p,this.updateObj=new e.vpe,this.form=new d.cw({}),this.username=""}ngOnInit(){this.chklst&&this.Initialize(this.chklst)}verifyData(){var t="";if(this.chklst){t=this.form.value.charges>0&&this.form.get("charges")?.value!==this.form.get("chargesAgreed")?.value&&!this.form.value.exceptionApproved?"If Salary Agreed does not lie within the offered range, it is considered as an exception and this exception must be approved by choosing the option provided for this purpose":"";var i=this.form.value.checklistHRItems.filter(s=>s.mandatoryTrue&&!s.accepts).map(s=>s.parameter).join(", ");""!==i&&(t+="Mandatory parameters "+i+"  not accepted")}else this.chklst.checklistedOk=!0,this.chklst.checkedOn=new Date;return t}ChargesDoubleClicked(){void 0!==this.chklst&&0===this.form.value.chargesAgreed&&(this.form.value.chargesAgreed=this.chklst.charges,this.form.get("chargesAgreed")?.setValue(this.chklst.charges))}checkednoerror(){if(this.chklst?.exceptionApproved&&(""===this.chklst.exceptionApprovedBy||this.chklst.exceptionApprovedOn.getFullYear()<2e3))return!1;var t=this.chklst?.checklistHRItems.filter(i=>i.mandatoryTrue&&!i.response).map(i=>i.parameter).join(", ");return""!==t?this.confirmService.confirm("Mandatory parameters not accepted","Following mandatory parameters not accepted"+t,"Update as it is","Cancel and edit response").subscribe(i=>i?(this.chklst.checklistedOk=!1,this.chklst.checkedOn=new Date,console.log("result is:",i),!0):(console.log("result is:",i),!1)):(this.chklst.checklistedOk=!0,this.chklst.checkedOn=new Date),!0}Update(){var t=this.verifyData();if(""===t){this.form.get("checklistedOk")?.setValue(!0),this.form.get("userLoggedName")?.setValue(this.username);var i=this.form.value;0===i.id?this.checklistService.saveNewChecklistHR(i).subscribe({next:a=>{console.log("checlistmodal update return:",a),null===a?this.toastr.warning("Failed to insert the new checklist","Failure"):(this.toastr.success("saved the new checklist and retrieved related assessment","Success"),this.updateObj.emit(a),this.bsmodalRef.hide())},error:a=>this.toastr.error(a,"Error in saving the checklist")}):this.checklistService.updateChecklist({id:i.id,candidateId:i.candidateId,orderItemId:i.orderItemId,userName:i.userName,checkedOn:i.checkedOn,userComments:i.userComments,hRExecUsername:i.hrExecUsername,charges:i.charges,chargesAgreed:i.chargesAgreed,exceptionApproved:i.exceptionApproved,exceptionApprovedOn:i.exceptionApprovedOn,exceptionApprovedBy:i.exceptionApprovedBy,salaryOffered:i.salaryOffered,salaryExpectation:i.salaryExpectation,checklistedOk:i.checklistedOk,checklistHRItems:i.checklistHRItems}).subscribe({next:a=>{""===a?(this.updateObj.emit(""),this.bsmodalRef.hide()):this.toastr.warning(a,"Failed to update the checklist")},error:a=>{console.log("failed to update the Checklist data",a),this.updateObj.emit("failed to update the Checklist "+a),this.bsmodalRef.hide()}})}else this.toastr.warning(t)}Initialize(t){this.form=this.fb.group({id:t.id,candidateId:t.candidateId,applicationNo:t.applicationNo,candidateName:t.candidateName,categoryRef:t.categoryRef,OrderItemId:t.orderItemId,userLoggedName:t.userLoggedName,orderItemId:t.orderItemId,hrExecUsername:t.hrExecUsername,checkedOn:t.checkedOn,charges:t.charges,chargesAgreed:t.chargesAgreed,exceptionApproved:t.exceptionApproved,exceptionApprovedOn:t.exceptionApprovedOn,exceptionApprovedBy:t.exceptionApprovedBy,salaryOffered:t.salaryOffered,salaryExpectation:[t.salaryExpectation,d.kI.required],checklistedOk:t.checklistedOk,assessmentIsNull:t.assessmentIsNull,checklistHRItems:this.fb.array(t.checklistHRItems.map(i=>this.fb.group({id:i.id,checklistHRId:[i.checklistHRId,d.kI.required],srNo:i.srNo,parameter:[i.parameter,d.kI.required],accepts:[i.accepts],exceptions:i.exceptions,mandatoryTrue:[i.mandatoryTrue],response:i.response})))})}get checklistHRItems(){return this.form.get("checklistHRItems")}addChecklistItem(){this.checklistHRItems.push(this.newChecklistItem())}newChecklistItem(){return this.fb.group({id:0,checklistHRId:this.chklst?.id,srNo:[0,d.kI.required],parameter:["",d.kI.required],accepts:[!1],exceptions:"",mandatoryTrue:!1})}removeChecklistItem(t){this.checklistHRItems.removeAt(t),this.checklistHRItems.markAsDirty(),this.checklistHRItems.markAsTouched()}deleteChecklist(){const s=this.checklistService.deleteChecklistHR(this.chklst.id);this.confirmService.confirm("confirm Delete","confirm delete this Checklist. WARNING: this cannot be undone").pipe((0,J.h)(o=>o),(0,A.w)(()=>s)).subscribe(o=>{o?(this.toastr.success("Checklist deleted","deletion successful"),console.log("subscribed response:",o),this.bsmodalRef.hide()):this.toastr.error("Error in deleting the checklist","failed to delete")})}displayRemunerationModal(){var t=this.chklst?.orderItemId;this.checklistService.getRemuneration(t).pipe((0,J.h)(s=>null!==s),(0,A.w)(s=>(this.bsmodalRef=this.bsModalService.show(ut.l,{class:"modal-dialog-centered modal-lg",initialState:{remun:s,editable:!1}}),this.bsmodalRef.content.updateSelectedRemuneration))).subscribe(()=>{})}closeModal(){this.bsmodalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(_.UZ),e.Y36(O.z),e.Y36(C._W),e.Y36(ie),e.Y36(d.qu),e.Y36(_.tT))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-checklist-modal"]],inputs:{updateObj:"updateObj"},decls:5,vars:3,consts:[["class","modal-header my-0",4,"ngIf"],[1,"modal-body","my-0"],[3,"formGroup"],["class","mx-2 mt-2",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"b"],[1,"stdd","w70","b"],[1,"stdd","w200","blue","mx-1"],["type","button",1,"stdd","btn","btn-success","fa","fa-save",3,"click"],["type","button","aria-label","Close",1,"stdd","btn","btn-close","close","mx-10",3,"click"],["title","Delete this checklist",1,"btn","btn-danger","pull-right","fa","fa-trash","fa-sm",3,"click"],[1,"mx-2","mt-2"],[1,"stdd","w75","b"],[1,"stdd","w400","blue","mx-1"],[1,"stdd","w150","b"],[1,"stdd","w100","blue"],[1,"stdd","w100","b"],[1,"stdd","w75","b","my-0","mx-1"],["class","stdd mx-1 w100 text-danger",4,"ngIf"],["style","border: blue;","class","stdd blue w70",4,"ngIf"],[1,"stdd","b","mx-1"],["title","this is charges agreed box","formControlName","chargesAgreed",1,"form-text-input","blue","stdd","w70","mx-1",3,"name","dblclick"],[1,"stdd","w20",2,"margin-left","10px"],["type","checkbox","formControlName","exceptionApproved",1,"form-check-input","stdd","mx-1",2,"margin-left","80px","border","aliceblue","border","inset",3,"checked","change"],["class","stdd w150 b ml-5 mx-1","style","padding-right: 5px;",4,"ngIf"],["title","double-click to display the remuneration modal.  Once this form is displayed and closed, please click any where out of this modal form to close it.",1,"stdd","w150","blue",3,"dblclick"],[1,"stdd","w70","b",2,"margin-left","10px"],["title","Minimum Salary Expectation of the candidate","formControlName","salaryExpectation",1,"stdd","w70",3,"label"],[1,"stdd","b"],[1,"stdd","blue"],[1,"stdd","ml-5","b"],[1,"b","mx-2","blue"],[1,"mt-0","mb-0","b"],[1,"lbl","w40"],[1,"lbl","w250"],[1,"lbl","w50"],[1,"lbl","mx-2","fontSmall",2,"width","50px"],[1,"lbl","w100"],[1,"lbl","w125"],["title","Add an assessment item for the candidate",1,"stdd","btn","fa","fa-plus","blue","mx-1",3,"click"],[1,"mt-0","mb-0"],["formArrayName","checklistHRItems",1,"my-1"],[4,"ngFor","ngForOf"],[1,"stdd","mx-1","w100","text-danger"],[1,"stdd","blue","w70",2,"border","blue"],[1,"stdd","w150","b","ml-5","mx-1",2,"padding-right","5px"],["class","stdd",4,"ngIf"],[1,"stdd"],[1,"stdd","w50"],[1,"stdd","w75","ml-20","b"],[1,"stdd","w75","blue"],[1,"my-1",3,"formGroupName"],["type","number","title","Sr. No.","formControlName","srNo",1,"stddT","w40",2,"text-align","right"],["type","text","title","Parameter","formControlName","parameter",1,"stddT","w250"],["type","checkbox","formControlName","mandatoryTrue",1,"stddT","ML5","w50"],["type","checkbox","formControlName","accepts",1,"stddT","ML5","w50"],["type","text","title","Parameter","formControlName","response",1,"stddT","w100",2,"margin-left","10px"],["type","text","formControlName","exceptions",1,"stddT","w125"],[1,"btn","fa","fa-trash","red","mx-2",3,"click"]],template:function(i,s){1&i&&(e.YNc(0,gt,11,2,"div",0),e.TgZ(1,"div",1)(2,"form",2),e.YNc(3,wt,68,16,"div",3),e.qZA()(),e._UZ(4,"div",4)),2&i&&(e.Q6J("ngIf",s.chklst),e.xp6(2),e.Q6J("formGroup",s.form),e.xp6(1),e.Q6J("ngIf",s.chklst))},dependencies:[l.sg,l.O5,d._Y,d.Fj,d.wV,d.Wl,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,$.t,l.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:top;font-size:small}.stddT[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:middle;font-size:small;font-weight:700}.b[_ngcontent-%COMP%]{font-weight:700}.blue[_ngcontent-%COMP%]{color:#00f}.red[_ngcontent-%COMP%]{color:red}.fontSmall[_ngcontent-%COMP%]{font-size:small}.w15[_ngcontent-%COMP%]{width:15px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w275[_ngcontent-%COMP%]{width:275px}.w300[_ngcontent-%COMP%]{width:300px}.w400[_ngcontent-%COMP%]{width:400px}"]})}return n})();function Zt(n,r){1&n&&(e.TgZ(0,"div",12),e._uU(1," No Existing Assessments "),e.qZA())}function Tt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ul",28)(1,"li",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,o=e.oxw(3);return e.KtG(o.displayAssessment(a.candidateAssessmentId))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.lnq(" ",t.categoryRef," for ",t.customerName.substring(0,10)," on ",e.xi3(3,3,t.assessedOn,"ddMMM")," ")}}function kt(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Tt,4,6,"ul",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.existingAssessmentsDto)}}function It(n,r){1&n&&(e.TgZ(0,"div",30),e._uU(1," No Orders currently open"),e.qZA())}function yt(n,r){1&n&&(e.TgZ(0,"div",31),e._uU(1,"Requirement for which the candidate is to be assessed"),e.qZA())}function Ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ng-select",32),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw(2);return e.KtG(a.orderItemSelectedId=s)})("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.chooseSelectedOrderItem())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("items",t.openOrderItems)("ngModel",t.orderItemSelectedId)}}function Nt(n,r){1&n&&(e.TgZ(0,"div",33),e._uU(1," Order category Not Selected "),e.qZA())}function Mt(n,r){1&n&&(e.TgZ(0,"div",34),e._uU(1,"Order Item selected"),e.qZA())}function Pt(n,r){if(1&n&&(e.TgZ(0,"div",35)(1,"span",36),e._uU(2,"Category: "),e.qZA(),e.TgZ(3,"span",37),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"span",38),e._uU(7,"Order dated: "),e.qZA(),e.TgZ(8,"span",39),e._uU(9),e.ALo(10,"date"),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"span",10),e._uU(13,"Customer: "),e.qZA(),e.TgZ(14,"span",39),e._uU(15),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"span",10),e._uU(18,"Require Internal Review: "),e.qZA(),e.TgZ(19,"span",12),e._uU(20),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.orderItemSelected.categoryRefAndName," "),e.xp6(5),e.Oqu(e.lcZ(10,4,t.orderItemSelected.orderDate)),e.xp6(6),e.Oqu(t.orderItemSelected.customerName),e.xp6(5),e.hij(" ",void 0!==t.requireInternalReview&&t.requireInternalReview?"Yes":"No","")}}function qt(n,r){1&n&&(e.TgZ(0,"div",40),e._uU(1," Candidate not checklisted for above category "),e.qZA())}function Ot(n,r){if(1&n&&(e.TgZ(0,"div",41),e._uU(1," Checklist initiated by : "),e.TgZ(2,"label",42),e._uU(3),e.qZA(),e.TgZ(4,"label",42),e._uU(5),e.ALo(6,"date"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"label",10),e._uU(9,"Checklist Concluded: "),e.qZA(),e.TgZ(10,"span",43),e._uU(11),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij("",t.checklist.userLoggedName," "),e.xp6(2),e.hij("on: ",e.lcZ(6,4,t.checklist.checkedOn)," "),e.xp6(5),e.Q6J("ngClass",t.checklist.checklistedOk?"yellow":"red"),e.xp6(1),e.hij(" ",t.checklist.checklistedOk?" Yes":" No"," ")}}function Et(n,r){1&n&&(e.TgZ(0,"div",44),e._uU(1,' Assessment Questions for the Order Category selected not designed. In the Assessment form, you can press the + button to the right to create custom assessment questions, or add standard questions to the order category" '),e.qZA())}function St(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Candidate Assessment"),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openShortlistCandidateHelpModal())}),e.qZA(),e.TgZ(4,"button",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.returnToCalling())}),e.qZA(),e.TgZ(5,"div",8),e._uU(6,"Candidate Details"),e.qZA(),e.TgZ(7,"div",9)(8,"span",10),e._uU(9,"Application No.: "),e.qZA(),e.TgZ(10,"span",11),e._uU(11),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"span",10),e._uU(14,"Name: "),e.qZA(),e.TgZ(15,"span",11),e._uU(16),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"span",10),e._uU(19,"Referred By:"),e.qZA(),e.TgZ(20,"span",11),e._uU(21),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"span",12),e._uU(24,"Categories:"),e.qZA(),e.TgZ(25,"div",13),e._uU(26),e.qZA()(),e._UZ(27,"br"),e.TgZ(28,"div",14),e._uU(29,"Existing Assessments of the candidate:"),e.qZA(),e.YNc(30,Zt,2,0,"div",15),e.YNc(31,kt,2,1,"div",16),e.YNc(32,It,2,0,"div",17),e.YNc(33,yt,2,0,"div",18),e.YNc(34,Ut,2,2,"div",16),e._UZ(35,"br"),e.YNc(36,Nt,2,0,"div",19),e.TgZ(37,"div",20),e.YNc(38,Mt,2,0,"div",21),e.YNc(39,Pt,21,6,"div",22),e.YNc(40,qt,2,0,"div",23),e.YNc(41,Ot,12,6,"div",24),e.qZA(),e._UZ(42,"br"),e.YNc(43,Et,2,0,"div",25),e._UZ(44,"br"),e.TgZ(45,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openChecklistModal())}),e._uU(46," Show Checklist "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(11),e.Oqu(t.cvBrief.applicationNo),e.xp6(5),e.Oqu(t.cvBrief.fullName),e.xp6(5),e.Oqu(t.cvBrief.referredByName),e.xp6(5),e.hij(" ",t.cvBrief.userProfessions.flat(),", "),e.xp6(4),e.Q6J("ngIf",!t.existingAssessmentsDto),e.xp6(1),e.Q6J("ngIf",t.existingAssessmentsDto),e.xp6(1),e.Q6J("ngIf",void 0===t.openOrderItems),e.xp6(1),e.Q6J("ngIf",void 0!==t.openOrderItems),e.xp6(1),e.Q6J("ngIf",t.openOrderItems),e.xp6(2),e.Q6J("ngIf",!t.orderItemSelected),e.xp6(2),e.Q6J("ngIf",t.orderItemSelected),e.xp6(1),e.Q6J("ngIf",t.orderItemSelected),e.xp6(1),e.Q6J("ngIf",t.orderItemSelected&&!t.checklist),e.xp6(1),e.Q6J("ngIf",t.orderItemSelected&&t.checklist),e.xp6(2),e.Q6J("ngIf",t.orderItemSelected&&t.requireInternalReview&&!t.qDesigned)}}function Rt(n,r){1&n&&(e.TgZ(0,"div",11),e._uU(1," No internal review required "),e.qZA())}function Jt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",64),e._uU(2,"Result: "),e.qZA(),e.TgZ(3,"label",65),e._uU(4,"Excellent"),e.qZA(),e.TgZ(5,"input",66),e.NdJ("change",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.markAsDirty())}),e.qZA(),e.TgZ(6,"label",65),e._uU(7,"V Good"),e.qZA(),e.TgZ(8,"input",67),e.NdJ("change",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.markAsDirty())}),e.qZA(),e.TgZ(9,"label",65),e._uU(10,"Good"),e.qZA(),e.TgZ(11,"input",68),e.NdJ("change",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.markAsDirty())}),e.qZA(),e.TgZ(12,"label",65),e._uU(13,"Poor"),e.qZA(),e.TgZ(14,"input",69),e.NdJ("change",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.markAsDirty())}),e.qZA()()}}function Ft(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",84),e._UZ(2,"input",85)(3,"input",86)(4,"input",87)(5,"input",88),e.TgZ(6,"input",89),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(5);return e.KtG(s.maxMarksTotal())}),e.qZA(),e.TgZ(7,"input",90),e.NdJ("change",function(){const a=e.CHM(t).index,o=e.oxw(5);return e.KtG(o.pointsGainedTotal(a))}),e.qZA(),e._UZ(8,"input",91),e.TgZ(9,"button",92),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(5);return e.KtG(o.removeCandidateAssessmentItem(a))}),e.qZA()()()}if(2&n){const t=r.index;e.xp6(1),e.Q6J("formGroupName",t)}}function Qt(n,r){if(1&n&&(e.TgZ(0,"div",82),e.YNc(1,Ft,10,1,"div",83),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.candidateAssessmentItems.controls)}}function Ht(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",71),e._uU(2,"Q No."),e.qZA(),e.TgZ(3,"div",72),e._uU(4,"Asses-"),e._UZ(5,"br"),e._uU(6,"sed"),e.qZA(),e.TgZ(7,"div",73),e._uU(8,"Is Man-"),e._UZ(9,"br"),e._uU(10,"datory"),e.qZA(),e.TgZ(11,"div",74),e._uU(12,"Question"),e.qZA(),e.TgZ(13,"div",71),e._uU(14,"Max"),e._UZ(15,"br"),e._uU(16,"Points"),e.qZA(),e.TgZ(17,"div",71),e._uU(18,"Points"),e.qZA(),e.TgZ(19,"div",75),e._uU(20,"Remarks"),e.qZA(),e.TgZ(21,"button",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.addCandidateAssessmentItem())}),e.qZA(),e._UZ(22,"hr",60),e.YNc(23,Qt,2,1,"div",77),e.TgZ(24,"div",78),e._uU(25,"totals: "),e.qZA(),e.TgZ(26,"div",79),e._uU(27),e.qZA(),e.TgZ(28,"div",80),e._uU(29),e.qZA(),e.TgZ(30,"div",81),e._uU(31),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(23),e.Q6J("ngIf",t.cvAssessment.candidateAssessmentItems),e.xp6(4),e.Oqu(t.totalPoints),e.xp6(2),e.Oqu(t.totalGained),e.xp6(2),e.AsE("Grade: ",t.cvAssessment.assessResult," (",t.percentage,"%)")}}function Dt(n,r){if(1&n&&(e.TgZ(0,"div",70),e.YNc(1,Ht,32,5,"div",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.cvAssessment.requireInternalReview)}}function Yt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46)(2,"label",47),e._uU(3,"Customer Name: "),e.qZA(),e.TgZ(4,"span",48),e._uU(5),e.qZA(),e.TgZ(6,"label",49),e._uU(7,"Category:"),e.qZA(),e.TgZ(8,"span",50),e._uU(9),e.qZA(),e.TgZ(10,"div",11),e._uU(11),e.qZA()(),e._UZ(12,"br"),e.TgZ(13,"label",49),e._uU(14,"Order dated"),e.qZA(),e.TgZ(15,"div",51),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"label",52),e._uU(19,"Checklisted:"),e.qZA(),e.TgZ(20,"div",53),e._uU(21),e.qZA(),e.TgZ(22,"label",54),e._uU(23,"Internal Review Reqd:"),e.qZA(),e.TgZ(24,"span",53),e._uU(25),e.qZA(),e.TgZ(26,"label",47),e._uU(27,"Assessmt Q designed:"),e.qZA(),e.TgZ(28,"span",53),e._uU(29),e.qZA(),e.TgZ(30,"div",55)(31,"span"),e._uU(32,"Assessed by: "),e.qZA(),e._uU(33),e.ALo(34,"date"),e.qZA(),e.YNc(35,Rt,2,0,"div",56),e.TgZ(36,"div",57)(37,"button",58),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.updateAssessment())}),e.qZA(),e.TgZ(38,"button",59),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAssessment())}),e.qZA()(),e._UZ(39,"hr",60),e.TgZ(40,"form",61),e.YNc(41,Jt,15,0,"div",62),e.YNc(42,Dt,2,1,"div",63),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.cvAssessment.customerName||(null==t.orderItemSelected?null:t.orderItemSelected.customerName)),e.xp6(4),e.Oqu(t.cvAssessment.categoryRefAndName||(null==t.orderItemSelected?null:t.orderItemSelected.categoryRefAndName)),e.xp6(2),e.Oqu(0===t.cvAssessment.id?"New":"Update"),e.xp6(5),e.Oqu(e.lcZ(17,14,t.cvAssessment.orderDate)),e.xp6(5),e.Oqu(t.checklist?"Yes":"No"),e.xp6(4),e.Oqu(t.cvAssessment.requireInternalReview?"Yes":"No"),e.xp6(4),e.Oqu(t.qDesigned?"Yes":"No"),e.xp6(4),e.AsE(" ",t.cvAssessment.assessedByEmployeeName," on ",e.lcZ(34,16,t.cvAssessment.assessedOn)," "),e.xp6(2),e.Q6J("ngIf",!t.cvAssessment.requireInternalReview),e.xp6(2),e.Q6J("disabled",!t.form.dirty),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",!t.cvAssessment.requireInternalReview),e.xp6(1),e.Q6J("ngIf",t.cvAssessment)}}function Vt(n,r){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Gt(n,r){if(1&n&&(e.TgZ(0,"div",93)(1,"ul",94),e.YNc(2,Vt,2,1,"li",83),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.validationErrors)}}let Bt=(()=>{class n{unloadNotification(t){this.form.dirty&&(t.returnValue=!0)}constructor(t,i,s,a,o,p,v,T,k,I){this.fb=t,this.service=i,this.candidateAssessmentService=s,this.bsModalService=a,this.checklistService=o,this.toastr=p,this.activatedRoute=v,this.accountsService=T,this.confirmService=k,this.router=I,this.openOrderItems=[],this.orderItemSelectedId=0,this.helpfile=this.getHelp("candidate assessment"),this.existingAssessmentsDto=[],this.checklistitems=[],this.totalPoints=0,this.totalGained=0,this.percentage=0,this.qDesigned=!1,this.requireInternalReview=!1,this.lastOrderItemIdSelected=-1,this.routeId="",this.bolNavigationExtras=!1,this.returnUrl="",this.form=new d.cw({}),this.validationErrors=[],this.bDisplayHelp=!1,this.displayText="Show Help",this.orderItemChangedEventSubject=new ot.x,this.assessmentResults=[{grade:"Excellent"},{grade:"Very Good"},{grade:"Good"},{grade:"Poor"}],this.accountsService.currentUser$.pipe((0,M.q)(1)).subscribe(y=>this.user=y),this.routeId=this.activatedRoute.snapshot.params.id,null==this.routeId&&(this.routeId="");let m=this.router.getCurrentNavigation();m?.extras&&m.extras.state&&(this.bolNavigationExtras=!0,m.extras.state.returnUrl&&(this.returnUrl=m.extras.state.returnUrl),m.extras.state.cvbrief&&(this.cvBrief=m.extras.state.cvbrief))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.openOrderItems=t.openOrderItemsBrief,this.existingAssessmentsDto=t.assessmentsDto})}chooseSelectedOrderItem(){if(!(this.lastOrderItemIdSelected>=0&&this.orderItemSelectedId==this.lastOrderItemIdSelected)&&(this.orderItemSelected=this.openOrderItems.find(t=>t.orderItemId===this.orderItemSelectedId),void 0!==this.orderItemSelected)){if(this.requireInternalReview="1"===this.orderItemSelected.requireInternalReview,this.orderItemSelectedId=this.orderItemSelected.orderItemId,this.requireInternalReview&&(this.qDesigned=this.orderItemSelected.assessmentQDesigned,!this.qDesigned))return void this.toastr.error("assessment Questions not designed - from component");this.service.getCandidateChecklistAndAssessment(this.cvBrief.id,this.orderItemSelectedId).subscribe({next:t=>{this.assessmentAndChecklist=t,this.checklist=t.checklistHRDto,this.cvAssessment=this.assessmentAndChecklist.assessed,this.qDesigned=this.orderItemSelected.assessmentQDesigned,this.cvAssessment?null===this.cvAssessment.candidateAssessmentItems?this.initializeWithoutArray(this.cvAssessment):this.initializeWithArray(this.cvAssessment):this.requireInternalReview&&this.toastr.warning("the candidate has not been assessed for the category selected.")},error:t=>this.toastr.error(t,"failed to retrieve candidate assessment")}),this.lastOrderItemIdSelected=this.orderItemSelectedId}}returnToCalling(){this.router.navigateByUrl(this.returnUrl||"")}updateAssessment(){var t=this.form.value;if(this.cvAssessment){if(this.toastr.info("cvassessmentid",this.cvAssessment.id.toString()),this.cvAssessment&&null===this.cvAssessment.candidateAssessmentItems&&(t={assessResult:this.form.get("assessResult").value,assessedByEmployeeName:this.user.userName,assessedOn:new Date,candidateId:this.cvAssessment.candidateId,checklistHRId:this.cvAssessment.checklistHRId,id:this.cvAssessment.id,orderItemId:this.cvAssessment.orderItemId,requireInternalReview:this.cvAssessment.requireInternalReview,customerName:this.cvAssessment.customerName||this.orderItemSelected.customerName,categoryRefAndName:this.cvAssessment.categoryRefAndName||this.orderItemSelected.categoryRefAndName,orderDate:this.cvAssessment.orderDate,taskIdDocControllerAdmin:this.cvAssessment.taskIdDocControllerAdmin,candidateAssessmentItems:this.cvAssessment.candidateAssessmentItems,remarks:this.cvAssessment.remarks}),0===this.cvAssessment.id)return this.service.saveNewCandidateAssessment(t).subscribe({next:s=>{null===s?this.toastr.warning("Failed to insert the CV Assessment","Failure"):this.toastr.success("Inserted the CV Assessment","Success")},error:s=>this.toastr.error(s,"failed to save the Assessment")});this.service.updateCandidateAssessment(t).subscribe({next:s=>{s?(this.toastr.success("updated the Candidate Assessment"),this.form.markAsPristine()):this.toastr.warning("failed to update the candidate assessment")},error:s=>this.toastr.error(s,"failed to update the candidate assessment")})}}openShortlistCandidateHelpModal(){null!==this.helpfile?(this.bsModalRef=this.bsModalService.show(ht,{class:"modal-dialog-centered modal-lg",initialState:{help:this.helpfile}}),this.bsModalRef.content.updateSelectedRoles.subscribe(()=>{})):this.toastr.info("No help file available for the topic 'Candidate Assessment'")}getHelp(t){return this.confirmService.getHelp(t).subscribe(i=>{this.helpfile=i},i=>{console.log("failed to retrieve roles array",i)}),null}openSwitchMapModalChecklist(){if(this.checklist&&this.cvBrief){const t=this.checklistService.getChecklist(this.cvBrief?.id,this.orderItemSelectedId),i=this.bsModalRef?.content.updateObj;t.pipe((0,A.w)(s=>i.pipe((0,te.K)(a=>(0,g.of)()),(0,dt.b)(a=>{this.toastr.success("modal call subscribed"),""===a&&this.service.getCandidateChecklistAndAssessment(this.cvBrief.id,this.orderItemSelectedId).subscribe({next:o=>{this.assessmentAndChecklist=o,this.checklist=o.checklistHRDto,this.cvAssessment=this.assessmentAndChecklist.assessed,this.qDesigned=this.orderItemSelected.assessmentQDesigned,this.cvAssessment&&this.initializeWithoutArray(this.cvAssessment)}})}))),(0,te.K)(s=>(this.toastr.error(s,"error in subscribing to bsModalRef contents"),(0,g.of)()))).subscribe(()=>{this.toastr.success("inner subscription success")},s=>{console.log("error unhandled in catchError")})}}openChecklistModal(){null!==this.checklist?(this.bsModalRef=this.bsModalService.show(At,{class:"modal-dialog-centered modal-lg",initialState:{chklst:this.checklist}}),this.bsModalRef.content.updateObj.subscribe(i=>{null===i?this.toastr.warning("Failed to update the Checklist object -"+i):(this.toastr.success("Updated the checklist object"),this.checklist.checklistedOk=!0,this.cvAssessment=i.assessed,this.initializeWithArray(this.cvAssessment))})):this.toastr.warning("An order item must be selected, to display related checklist","Order Item not selected")}CheckChecklist(t){var i=[];return t.charges>0&&t.chargesAgreed!=t.charges&&!t.exceptionApproved&&i.push("Charges not agreed"),t.checklistHRItems.forEach(s=>{s.mandatoryTrue&&!s.accepts&&i.push(s.parameter+" is mandatory, and not resolved")}),i}DisplayHelp(){this.bDisplayHelp=!this.bDisplayHelp,this.displayText=this.bDisplayHelp?"Hide help text":"display Help Text"}addCandidateAssessmentItem(){this.toastr.info("qDesigned set to true"),this.candidateAssessmentItems.push(this.newCandidateAssessmentItem())}newCandidateAssessmentItem(){return this.fb.group({id:0,candidateAssessmentId:0,questionNo:0,question:["",d.kI.required],assessed:!1,isMandatory:!1,maxPoints:0,points:[0,[d.kI.min(0),this.matchValues("maxPoints")]],remarks:""})}matchValues(t){return i=>i.value===i.parent?.get(t)?.value?null:{notMatching:!0}}removeCandidateAssessmentItem(t){this.candidateAssessmentItems.removeAt(t),this.candidateAssessmentItems.markAsDirty(),this.candidateAssessmentItems.markAsTouched()}deleteAssessment(){this.cvAssessment.id?this.service.deleteAssessment(this.cvAssessment.id).subscribe(t=>{t?(this.toastr.success("Candidate Assessment object deleted"),this.cvAssessment=void 0):this.toastr.warning("failed to delete the assessment object")},t=>{this.toastr.error("error in deleting the object",t)}):this.toastr.warning("CV Assessment object is undefined.  It cannot be deleted unless it is saved first")}initializeWithArray(t){console.log("initializedWithArray"),this.form=this.fb.group({id:t.id,orderItemId:t.orderItemId,candidateId:t.candidateId,assessedOn:t.assessedOn,assessResult:t.assessResult,remarks:t.remarks,requireInternalReview:t.requireInternalReview,assessedByEmployeeName:t.assessedByEmployeeName||this.user?.userName,categoryRefAndName:t.categoryRefAndName,customerName:t.customerName,checklistHRId:t.checklistHRId,candidateAssessmentItems:this.fb.array(t.candidateAssessmentItems.map(i=>this.fb.group({id:i.id,assessed:[i.assessed],isMandatory:[i.isMandatory],candidateAssessmentId:[i.candidateAssessmentId,d.kI.required],questionNo:[i.questionNo,d.kI.required],question:[i.question,d.kI.required],maxPoints:[i.maxPoints,d.kI.required],points:i.points,remarks:i.remarks})))}),this.calculatePercentage()}initializeWithoutArray(t){this.form=this.fb.group({id:t.id,orderItemId:t.orderItemId,candidateId:t.candidateId,assessedOn:t.assessedOn,assessResult:t.assessResult,remarks:t.remarks,requireInternalReview:t.requireInternalReview,assessedByEmployeeName:t.assessedByEmployeeName,categoryRefAndName:t.categoryRefAndName})}get candidateAssessmentItems(){return this.form.get("candidateAssessmentItems")}maxMarksTotal(){this.totalPoints=this.candidateAssessmentItems.value.map(t=>t.maxPoints).reduce((t,i)=>t+i,0),this.calculatePercentage()}pointsGainedTotal(t){if(null!==this.candidateAssessmentItems){var s=this.candidateAssessmentItems.value[t].maxPoints;if(this.candidateAssessmentItems.value[t].points>s)return this.toastr.warning("Max points for this parameter is:"+s+".  You cannot exceed this number"),this.candidateAssessmentItems.at(t).get("points")?.setValue(0),this.candidateAssessmentItems.at(t).get("assessed")?.setValue(!1),void this.calculatePercentage();this.totalGained=this.candidateAssessmentItems.value.map(a=>a.points).reduce((a,o)=>a+o,0),this.calculatePercentage(),this.candidateAssessmentItems.at(t).get("assessed")?.setValue(!0)}}calculatePercentage(){this.totalPoints=this.candidateAssessmentItems.value.map(t=>t.maxPoints).reduce((t,i)=>t+i,0),this.totalGained=this.candidateAssessmentItems.value.map(t=>t.points).reduce((t,i)=>t+i,0),this.percentage=void 0===this.totalGained||void 0===this.totalPoints?0:Math.round(100*this.totalGained/this.totalPoints),this.calculateGrade()}calculateGrade(){var t;return this.cvAssessment.assessResult=t=this.cvAssessment&&null!==this.cvAssessment?.candidateAssessmentItems?this.percentage<41?"Poor":this.percentage>40&&this.percentage<=60?"Average":this.percentage>60&&this.percentage<=70?"Good":this.percentage<70&&this.percentage<=80?"Very Good":"Excellent":"Not Assessed",this.form.get("assessResult")?.setValue(t),t}displayAssessment(t){this.candidateAssessmentService.getCandidateAssessmentById(t).subscribe({next:i=>{console.log("displayAssessment:",i),i?(this.cvAssessment=i,null!==i&&null===i.candidateAssessmentItems?this.initializeWithoutArray(i):null!==i&&null!==i.candidateAssessmentItems&&this.initializeWithArray(i)):this.toastr.warning("Normally, this should not happen, but we failed to retrieve the Candidate Assessment","failed")},error:i=>this.toastr.error(i,"Error in retrieving the Candidate Assessment")})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d.qu),e.Y36(F.k),e.Y36(F.k),e.Y36(_.tT),e.Y36(ie),e.Y36(C._W),e.Y36(u.gz),e.Y36(N.B),e.Y36(O.z),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-cv-assess"]],hostBindings:function(i,s){1&i&&e.NdJ("beforeunload",function(){return s.unloadNotification(s.event)},!1,e.Jf7)},decls:4,vars:3,consts:[["class","stdd col-3 vAlignTop","style","margin-top: 5px; margin-left: 2px;",4,"ngIf"],[1,"stdd","my-5","col-8","fontSmall",2,"vertical-align","top","margin-left","5px","border","brown"],["style","font-weight: normal;","class","stdd vAlignTop",4,"ngIf"],["class","row",4,"ngIf"],[1,"stdd","col-3","vAlignTop",2,"margin-top","5px","margin-left","2px"],[1,"stdd","w150","b"],[1,"btn","btn-primary","w30","fa","fa-question","ML20",3,"click"],[1,"btn","mx-2","w30","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"stdd","b","my-1"],[2,"padding-left","5px","border","blue"],[1,"stdd"],[1,"stdd","b"],[1,"b"],[1,"stdd","fontSmaller"],[1,"b","fontSmall"],["class","b",4,"ngIf"],[4,"ngIf"],["class","yellow  b",4,"ngIf"],["class","mt-2 b",4,"ngIf"],["class","text-danger fontSmaller b",4,"ngIf"],[2,"border","inset"],["class","fontSmall b mt-2",4,"ngIf"],["style","padding-left: 5px; border-color: initial ;",4,"ngIf"],["class","text-danger fontSmall b",4,"ngIf"],["class","fontSmall my-1",4,"ngIf"],["class","fontSmall text-danger b",4,"ngIf"],["type","button","title","talk to the candidate for consent to requirements","title","show checklist for the candidate",1,"fontSmall","b","my-1","w150","btn","btn-success","cursorpointer",2,"text-align","center",3,"click"],["class","py-0 my-0",4,"ngFor","ngForOf"],[1,"py-0","my-0"],[1,"stdd","my-0","py-0","fontSmaller","cursorpointer",3,"click"],[1,"yellow","b"],[1,"mt-2","b"],["bindLabel","categoryRefAndName","bindValue","orderItemId","labelForId","orderItemId","clearAllText","Clear",2,"border-bottom","yellow","font-size","small",3,"items","ngModel","ngModelChange","click"],[1,"text-danger","fontSmaller","b"],[1,"fontSmall","b","mt-2"],[2,"padding-left","5px","border-color","initial"],[1,"fontSmall","stdd"],[1,"fontSmall"],[1,"stdd","fontSmall"],[1,"stdd","fontSmall","mx-2","b"],[1,"text-danger","fontSmall","b"],[1,"fontSmall","my-1"],[1,"fontSmall","b"],[1,"stdd",3,"ngClass"],[1,"fontSmall","text-danger","b"],[1,"stdd","vAlignTop",2,"font-weight","normal"],[1,"col-12"],[1,"stdd","w150"],[1,"stdd","w300","b"],[1,"stdd","w125"],[1,"stdd","400","b"],[1,"stdd","w100","b"],[1,"stdd","w100"],[1,"stdd","w50","b"],[1,"lbl","w150"],[1,"stdd","w400"],["class","stdd b",4,"ngIf"],[1,"stdd","pull-right"],["type","button","title","Save the assessment form",1,"stdd","btn","btn-success","fa","fa-save","fa-2x",3,"disabled","click"],["type","button","title","delete complete Assessment Object",1,"btn","btn-primary","stdd","fa","fa-trash","fa-2x",3,"click"],[1,"mt-0","mb-0"],[3,"formGroup"],["class","stdd",4,"ngIf"],["style","vertical-align: top",4,"ngIf"],[1,"stdd","w50"],[1,"stdd","w50","b","hAlignRight"],["type","radio","name","assessResult","id","assessmentResult","formControlName","assessResult","value","Excellent",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Very Good",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Good",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Poor",1,"inputcheck","form-check-input",3,"change"],[2,"vertical-align","top"],[1,"stdd","b","fSmall","vAlignM","w50"],[1,"stdd","b","fSmall","vAlignM","w50","ML20"],[1,"stdd","b","fSmall","vAlignM","w50","ML5"],[1,"stdd","b","fSmall","vAlignM","w400"],[1,"stdd","b","fSmall","vAlignM","w200"],["title","Add an assessment item for the candidate",1,"stdd","btn","fa","fa-plus","mx-1",3,"click"],["formArrayName","candidateAssessmentItems","class","my-1",4,"ngIf"],[1,"stdd","b","w50","mb-5","mt-2",2,"margin-left","500px"],[1,"stdd","b","w50","hAlignRight"],[1,"stdd","b","w50","mx-2","hAlignRight"],[1,"stdd","b","w150","hAlignRight"],["formArrayName","candidateAssessmentItems",1,"my-1"],[4,"ngFor","ngForOf"],[1,"my-1",3,"formGroupName"],["type","text","formControlName","questionNo",1,"stdd","fSmall","ML20","w50"],["type","checkbox","formControlName","assessed",1,"stdd","fSmall","w50"],["type","checkbox","formControlName","isMandatory",1,"stdd","fSmall","w50"],["type","text","title","question","formControlName","question",1,"stdd","fSmall","w400"],["type","text","title","maxPoints","formControlName","maxPoints",1,"stdd","fSmall","w50",3,"click"],["type","number","title","points","formControlName","points",1,"stdd","fSmall","w50",2,"text-align","right",3,"change"],["type","text","title","remarks","formControlName","remarks",1,"stdd","fSmall","w200"],[1,"stdd","red","fa","fa-trash","mx-2",3,"click"],[1,"row"],[1,"text-danger"]],template:function(i,s){1&i&&(e.YNc(0,St,47,15,"div",0),e.TgZ(1,"div",1),e.YNc(2,Yt,43,18,"div",2),e.qZA(),e.YNc(3,Gt,3,1,"div",3)),2&i&&(e.Q6J("ngIf",s.cvBrief),e.xp6(2),e.Q6J("ngIf",s.cvAssessment),e.xp6(1),e.Q6J("ngIf",s.validationErrors.length>0))},dependencies:[l.mk,l.sg,l.O5,d._Y,d.Fj,d.wV,d.Wl,d._,d.JJ,d.JL,d.On,d.sg,d.u,d.x0,d.CE,W.w9,l.uU],styles:['.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;padding:0}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px}.ML20[_ngcontent-%COMP%]{margin-left:20px;vertical-align:middle;text-align:center}.ML5[_ngcontent-%COMP%]{margin-left:5px;vertical-align:middle;text-align:center}.fontSmaller[_ngcontent-%COMP%]{font-size:x-small}.fontSmall[_ngcontent-%COMP%]{font-size:small}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.ww[_ngcontent-%COMP%]{word-wrap:break-word}.red[_ngcontent-%COMP%]{color:red}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.vAlignTop[_ngcontent-%COMP%]{vertical-align:top!important}.hAlignRight[_ngcontent-%COMP%]{text-align:right}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.dimText[_ngcontent-%COMP%]{color:#a9a9a9}.dblLine[_ngcontent-%COMP%]{border-bottom:1px double #333;border-top:1px double #999;padding:2px 0;margin:0}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.inputCheck[_ngcontent-%COMP%]{margin:0 5px 0 10px;width:40px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin:0 10px 0 5px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return n})();var Lt=c(9055);class zt{constructor(){this.candidateId=0,this.assessmentId=0,this.pageNumber=1,this.pageSize=10}}let Kt=(()=>{class n{constructor(t,i){this.http=t,this.accountService=i,this.apiUrl=P.N.apiUrl,this.currentUserSource=new V.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cvBriefs=[],this.cache=new Map,this.cvParams=new zt,this.accountService.currentUser$.pipe((0,M.q)(1)).subscribe(s=>this.user=s)}getCVBriefData(t){const i=this.cache.get(Object.values(t).join("-"));if(i)return(0,g.of)(i);let s=(0,w.tV)(t);return(0,w.Tr)(this.apiUrl+"Candidate",s,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}updateCVAssessment(t){return this.http.put(this.apiUrl+"CandidateAssessment/assessment",t)}getOrderItemAssessmentQs(t){return this.http.get(this.apiUrl+"OrderAssessment/orderitemassessmentQ/"+t)}getCVAssessmentObject(t,i,s,a){return this.http.get(this.apiUrl+"CandidateAssessment/assessobject/"+t+"/"+i+"/"+s)}insertCVAssessment(t){return this.http.post(this.apiUrl+"candidateassessment/assess",t)}getCVAssessment(t,i){return this.http.get(this.apiUrl+"candidateassessment/"+i+"/"+t)}GetOrCreateNewCheckist(t,i){return this.http.get(this.apiUrl+"candidateassessment/checklist/"+i+"/"+t)}getCVAssessmentAndChecklist(t,i){return this.http.get(this.apiUrl+"candidateassessment/assessmentandchecklist/"+i+"/"+t)}getAssessmentsOfACandidate(t){return this.http.get(this.apiUrl+"CandidateAssessment/candidateassessments/"+t)}deleteAssessment(t){return this.http.delete(this.apiUrl+"candidateassessment/assess/"+t)}setCVParams(t){this.cvParams=t}getCVParams(){return this.cvParams}getCVBrief(){return this.cvBriefs.filter(i=>i.id===this.cvParams.candidateId)[0]}setCVBriefData(t){this.cvBriefs=t,this.cache.set(Object.values(this.cvParams).join("-"),t),this.pagination.totalItems=this.cvBriefs.length}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(Z.eN),e.LFG(N.B))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xt=c(4794);const ti=[{path:"listing",component:_e,resolve:{professions:S.h,agents:R,candidateBriefs:n=>{var r=new f;return(0,e.f3M)(b).getCandidatesPaged(r,!1)},headers:Xt.y}},{path:"register/edit/:id",component:Se,resolve:{categories:S.h,qualifications:()=>(0,e.f3M)(j.h).getQualificationList(),agents:R,candidate:n=>{var r=n.paramMap.get("id");return console.log("candidate resolver id:",r),null===r||""===r||"0"===r?(0,g.of)(new Je):(0,e.f3M)(b).getCandidate(+r)}},data:{breadcrumb:"Edit Candidate"}},{path:"availableToRef",component:st,resolve:{cvs:n=>{var r=new f;return(0,e.f3M)(b).getAvailableCandidatesPaged(r,!1)},professions:S.h,agents:R}},{path:"cvsreferred",component:nt.z,resolve:{cvrefPaged:n=>(0,e.f3M)(Q.Z).referredCVsPaginated(!1),headers:n=>{var r=n.paramMap.get("status")??"pending";return(0,e.f3M)(Q.Z).getCVReferredOrderNosDto(r)}}},{path:"cvassess/:id",component:Bt,canActivate:[Lt.s],resolve:{openOrderItemsBrief:()=>(0,e.f3M)(q.p).getOpenOrderItemsBriefListDto(),assessmentsDto:n=>{var r=n.paramMap.get("id");return null===r?(0,g.of)(null):(0,e.f3M)(Kt).getAssessmentsOfACandidate(+r)}},data:{breadcrumb:"CV Assessment"}}];let ii=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[l.ez,u.Bz.forChild(ti),u.Bz]})}return n})();var si=c(3983);let ni=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[l.ez,ii,si.m,E.Ps,ee.K8]})}return n})()}}]);