"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[872],{7923:(F,g,n)=>{n.d(g,{x:()=>e});class e{constructor(){this.customerType="customer",this.customerCityName="",this.customerIndustryId=0,this.includeOfficials=!1,this.includeIndustries=!1,this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},109:(F,g,n)=>{n.d(g,{l:()=>e});class e{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},5333:(F,g,n)=>{n.d(g,{L:()=>e});class e{constructor(){this.id=0,this.professionName="",this.professionGroup="",this.search="",this.pageNumber=1,this.pageSize=20}}},8892:(F,g,n)=>{n.d(g,{h:()=>M});var e=n(2771),h=n(7673),R=n(6354),P=n(3587),f=n(6220),E=n(7923),u=n(7705),t=n(1626);let M=(()=>{class _{constructor(a){this.http=a,this.apiUrl=P.c.apiUrl,this.currentUserSource=new e.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.custParams=new E.x,this.customerType="",this.customersBrief=[],this.cache=new Map}getCustomerNameFromId(a){if(this.customersBrief.length>0){var i=this.customersBrief.find(l=>l.id===a);if(null!==i)return(0,h.of)(i?.knownAs)}return this.http.get(this.apiUrl+"customers/customernamefromId/"+a)}getCustomers(a){const i=this.cache.get(Object.values(a).join("-"));if(i)return(0,h.of)(i);this.customerType=a.customerType??"customer";let l=(0,f.di)(a);return(0,f.f8)(this.apiUrl+"customers",l,this.http).pipe((0,R.T)(o=>(this.cache.set(Object.values(a).join("-"),o),o)))}getCustomerList(a){return a=a??"Customer",console.log("getcustomerlist custType",a),this.http.get(this.apiUrl+"customers/list/"+a)}getClientIdAndNames(){return this.http.get(this.apiUrl+"customers/clientidandnames/customer")}getCustomer(a){return this.http.get(this.apiUrl+"customers/byid/"+a)}register(a){return this.http.post(this.apiUrl+"customers",a)}getCustomerCities(a){return this.http.get(this.apiUrl+"customers/customercities/"+a)}deleteCustomer(a){return this.http.delete(this.apiUrl+"Customers/customer/"+a)}deleteCustomerOfficial(a){return this.http.delete(this.apiUrl+"Customers/official/"+a)}setParams(a){this.custParams=a}getParams(){return this.custParams}updateCustomer(a){return this.http.put(this.apiUrl+"customers/edit",a)}getAgents(){return this.http.get(this.apiUrl+"customers/agentdetails/associate")}getOfficialAndCustomerName(){return this.http.get(this.apiUrl+"customers/officialidandcustomernames/customer")}getAgentIdAndNames(){return this.http.get(this.apiUrl+"customers/clientidandnames/associate")}getCustomerAndCities(){return this.http.get(this.apiUrl+"customers/customerCities/customer")}remindClientForSelections(a){return this.http.get(this.apiUrl+"CVRef/selDecisionReminder/"+a)}getFeedbackHistory(a){return this.http.get(this.apiUrl+"Feedback/history/"+a)}getOrCreateCustomerReview(a){return this.http.get(this.apiUrl+"CustomerReview/getOrCreateObject/"+a)}static#t=this.\u0275fac=function(i){return new(i||_)(u.KVO(t.Qq))};static#e=this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},5323:(F,g,n)=>{n.d(g,{M:()=>M});var e=n(2771),h=n(7673),R=n(6354),P=n(3587),f=n(6220),E=n(5333),u=n(7705),t=n(1626);let M=(()=>{class _{constructor(a){this.http=a,this.apiUrl=P.c.apiUrl,this.currentUserSource=new e.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.mParams=new E.L,this.professions=[],this.cache=new Map}getCategoryList(){return this.http.get(this.apiUrl+"Profession/professionlist")}getVendorFacilityList(){return this.http.get(this.apiUrl+"masters/VendorFacilityList")}getCategoriesPaged(a,i=!0){if(i){const o=this.cache.get(Object.values(a).join("-"));if(o)return(0,h.of)(o)}else this.cache=new Map;let l=(0,f.cg)(a);return(0,f.f8)(this.apiUrl+"Profession",l,this.http).pipe((0,R.T)(o=>(this.cache.set(Object.values(a).join("-"),o),o)))}getCategory(a){let i;return this.cache.forEach(l=>{i=l.find(o=>o.id===a)}),i?(0,h.of)(i):this.http.get(this.apiUrl+"Profession/profession/"+a)}deleteCategory(a){return this.http.delete(this.apiUrl+"Profession/deletebyid/"+a)}updateCategory(a){return 0===a.id?this.http.post(this.apiUrl+"Profession/add",a):this.http.put(this.apiUrl+"Profession/edit",a)}copyProfessionXLSFileToDB(a){return this.http.post(this.apiUrl+"ProfessionUpload/professionsFromXLS",a)}copyCandidateXLSFileToDB(a){return this.http.post(this.apiUrl+"FileUpload/candidateXLS",a)}setParams(a){this.mParams=a}getParams(){return this.mParams}static#t=this.\u0275fac=function(i){return new(i||_)(u.KVO(t.Qq))};static#e=this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1767:(F,g,n)=>{n.d(g,{z:()=>C});var e=n(2771),h=n(6697),R=n(7673),P=n(6354);class f{constructor(){this.candidateId=0,this.orderItemId=0,this.orderId=0,this.pageNumber=0,this.pageSize=10}}var E=n(3587),u=n(1626),t=n(6220),M=n(7705),_=n(1822);let C=(()=>{class i{constructor(o,m){this.accountService=o,this.http=m,this.apiUrl=E.c.apiUrl,this.currentUserSource=new e.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.qParams=new f,this.routeId="",this.cache=new Map,this.accountService.currentUser$.pipe((0,h.s)(1)).subscribe(v=>this.user=v)}candidateAssessments(o){const m=this.cache.get(Object.values(o).join("-"));if(m)return(0,R.of)(m);let v=function a(i){let l=new u.Nl;return l=l.append("pageNumber",i.pageNumber),l=l.append("pageSize",i.pageSize),l=l.append("orderId",i.orderId.toString()),l=l.append("orderItemId",i.orderItemId.toString()),l=l.append("candidateId",i.candidateId.toString()),l}(o);return(0,t.f8)(this.apiUrl+"CandidateAssessment/assessmentspaged",v,this.http).pipe((0,P.T)(I=>(this.cache.set(Object.values(o).join("-"),I),I)))}updateCandidateAssessment(o){return this.http.put(this.apiUrl+"CandidateAssessment/assessment",o)}saveNewCandidateAssessment(o){return this.http.post(this.apiUrl+"CandidateAssessment/assessment",o)}deleteCandidateAssessment(o){return this.http.delete(this.apiUrl+"CandidateAssessment/assessment/"+o)}getCandidateChecklistAndAssessment(o,m){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentandchecklist/"+o+"/"+m).pipe((0,P.T)(v=>v))}getCandidateAssessmentById(o){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentById/"+o)}getCandidateAssessmentDto(o,m){return this.http.get(this.apiUrl+"CandidateAssessment/candidateAssessmentDto/"+o+"/"+m)}insertNewCVAssessment(o,m,v){return this.http.post(this.apiUrl+"CandidateAssessment/assess/"+o+"/"+m+"/"+v,{})}deleteAssessment(o){return this.http.delete(this.apiUrl+"candidateassessment/assessment/"+o)}generateCVAssessment(o,m){return this.http.get(this.apiUrl+"CandidateAssessment/generate/"+o+"/"+m)}categoriesOfCVsAvailableToRefer(){return this.http.get(this.apiUrl+"CandidateAssessment/categoryheaders")}static#t=this.\u0275fac=function(m){return new(m||i)(M.KVO(_.D),M.KVO(u.Qq))};static#e=this.\u0275prov=M.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},8028:(F,g,n)=>{n.d(g,{y:()=>a});var e=n(2771),h=n(6697),R=n(7673),P=n(6354),f=n(3587),E=n(109),u=n(6220),t=n(7705),M=n(5743),_=n(1822),C=n(1626);let a=(()=>{class i{constructor(o,m,v){this.activatedRoute=o,this.accountService=m,this.http=v,this.apiUrl=f.c.apiUrl,this.currentUserSource=new e.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new E.l,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,h.s)(1)).subscribe(I=>this.user=I)}referCVs(o){return this.http.post(this.apiUrl+"CVRef",o)}referredCVsPaginated(o=!1){if(o){const v=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(v)return(0,R.of)(v)}else this.cacheReferred=new Map;let m=(0,u.vn)(this.cvRefParams);return(0,u.f8)(this.apiUrl+"cvref/cvsreferred",m,this.http).pipe((0,P.T)(v=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),v),v)))}deleteCVRef(o){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+o)}getCVRefWithDeploys(o){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+o)}getCVRefWithCVRefId(o){return this.http.get(this.apiUrl+"CVRef/cvref/"+o)}registerSelectionDecisions(o){return this.http.post(this.apiUrl+"Selection",o)}getCVReferredOrderNosDto(o){return this.http.get(this.apiUrl+"CVRef/headers/"+o)}downloadCV(o){return this.http.get(this.apiUrl+"FileUpload/downloadcv/"+o,{reportProgress:!0,responseType:"blob"})}setParams(o){this.cvRefParams=o}getParams(){return this.cvRefParams}static#t=this.\u0275fac=function(m){return new(m||i)(t.KVO(M.nX),t.KVO(_.D),t.KVO(C.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},6341:(F,g,n)=>{n.d(g,{Z:()=>P});var e=n(3587),h=n(7705),R=n(1626);let P=(()=>{class f{constructor(u){this.http=u,this.apiUrl=e.c.apiUrl}downloadFile(u){return this.http.get(this.apiUrl+"candidate/downloadfile/"+u,{responseType:"blob"})}downloadProspectiveFile(u){return this.http.get(this.apiUrl+"FileUpload/downloadprospectivefile/"+u)}static#t=this.\u0275fac=function(t){return new(t||f)(h.KVO(R.Qq))};static#e=this.\u0275prov=h.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},1555:(F,g,n)=>{n.d(g,{U:()=>_});var e=n(7705),h=n(9417),R=n(779),P=n(1767),f=n(5743),E=n(177);function u(C,a){1&C&&(e.j41(0,"div"),e.EFF(1," No assessment record available for the candidate against the given Order item "),e.k0s())}function t(C,a){if(1&C&&(e.j41(0,"div")(1,"div",21),e.EFF(2),e.k0s(),e.j41(3,"div",21),e.EFF(4),e.k0s(),e.j41(5,"textarea",22),e.EFF(6),e.k0s(),e.j41(7,"div",23),e.EFF(8),e.k0s(),e.j41(9,"div",23),e.EFF(10),e.k0s()()),2&C){const i=a.$implicit;e.R7$(2),e.JRh(i.assessed?"Y":"N"),e.R7$(2),e.JRh(i.questionNo),e.R7$(2),e.JRh(i.question),e.R7$(2),e.JRh(i.maxPoints),e.R7$(2),e.JRh(i.points)}}function M(C,a){if(1&C){const i=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.form.valid)}),e.j41(1,"div",8)(2,"label",9),e.EFF(3,"Application No"),e.k0s(),e.j41(4,"div",10),e.EFF(5),e.k0s(),e.j41(6,"label",11),e.EFF(7,"Candidate Name"),e.k0s(),e.j41(8,"div",12),e.EFF(9),e.k0s(),e.nrm(10,"br"),e.j41(11,"label",9),e.EFF(12,"Customer"),e.k0s(),e.j41(13,"div",12),e.EFF(14),e.k0s(),e.j41(15,"label",9),e.EFF(16,"Category Name"),e.k0s(),e.j41(17,"div",12),e.EFF(18),e.k0s(),e.nrm(19,"br"),e.j41(20,"label",9),e.EFF(21,"Assessed On"),e.k0s(),e.j41(22,"div",13),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"label",14),e.EFF(26,"Grade:"),e.k0s(),e.j41(27,"div",10),e.EFF(28),e.k0s(),e.nrm(29,"hr",15),e.j41(30,"label",16),e.EFF(31,"Ass'd"),e.k0s(),e.j41(32,"label",16),e.EFF(33,"Q No."),e.k0s(),e.j41(34,"label",17),e.EFF(35,"Question"),e.k0s(),e.j41(36,"label",16),e.EFF(37,"Max"),e.nrm(38,"br"),e.EFF(39,"Points"),e.k0s(),e.j41(40,"label",16),e.EFF(41,"Points"),e.k0s(),e.nrm(42,"hr",15),e.DNE(43,t,11,5,"div",18),e.j41(44,"label",19),e.EFF(45,"Total"),e.k0s(),e.j41(46,"div",20),e.EFF(47),e.k0s(),e.j41(48,"div",20),e.EFF(49),e.k0s()()()}if(2&C){const i=e.XpG();e.Y8G("formGroup",i.form),e.R7$(5),e.JRh(i.assess.applicationNo),e.R7$(4),e.JRh(i.assess.candidateName),e.R7$(5),e.SpI(" ",i.assess.customerName,""),e.R7$(4),e.SpI(" ",i.assess.professionName,""),e.R7$(5),e.JRh(e.i5U(24,10,i.assess.assessedOn,"dd-MMM-yy")),e.R7$(5),e.JRh(i.assess.assessResult),e.R7$(15),e.Y8G("ngForOf",i.assess.assessmentItemsDto),e.R7$(4),e.JRh(i.totalMaxPoints),e.R7$(2),e.JRh(i.totalPoints)}}let _=(()=>{class C{constructor(i,l,o,m,v){this.bsModalRef=i,this.assessService=l,this.activatedRoute=o,this.fb=m,this.router=v,this.candAssessEvent=new e.bkB,this.totalPoints=0,this.totalMaxPoints=0,this.form=new h.gE({})}ngOnInit(){void 0!==this.assess&&(this.InitializeFormArray(this.assess),this.calculateTotalPoints())}InitializeFormArray(i){this.form=this.fb.group({applicationNo:[i.applicationNo,h.k0.required],candidateId:[i.candidateId,h.k0.required],candidateName:[i.candidateName,h.k0.required],customerName:[i.customerName,h.k0.required],orderItemId:[i.orderItemId,h.k0.required],categoryRef:[i.categoryRef,h.k0.required],orderId:[i.orderId,h.k0.required],requireInternalReview:i.requireInternalReview,assessedByUsername:i.assessedByUsername,professionName:[i.professionName,h.k0.required],assessResult:[i.assessResult,h.k0.required],assessedOn:i.assessedOn,checklistHRId:i.checklistHRId,checklistedByName:i.checklistedByName,items:this.fb.array(i.assessmentItemsDto.map(l=>this.fb.group({id:l.id,candidateAssessmentId:l.candidateAssessmentId,questionNo:[l.questionNo,h.k0.required],question:[l.question,h.k0.required],assessed:[l.assessed],maxPoints:[l.maxPoints,h.k0.required],points:[l.points],remarks:l.remarks})))})}get items(){return this.form.get("items")}close(){this.candAssessEvent.emit(this.assess),this.bsModalRef.hide()}calculateTotalPoints(){this.totalMaxPoints=this.items.value.map(i=>i.maxPoints).reduce((i,l)=>i+l,0),this.totalPoints=this.items.value.map(i=>i.points).reduce((i,l)=>i+l,0)}static#t=this.\u0275fac=function(l){return new(l||C)(e.rXU(R.Y$),e.rXU(P.z),e.rXU(f.nX),e.rXU(h.ok),e.rXU(f.Ix))};static#e=this.\u0275cmp=e.VBU({type:C,selectors:[["app-cv-assess-modal"]],outputs:{candAssessEvent:"candAssessEvent"},decls:8,vars:2,consts:[[1,"modal-header"],[1,"stdd","b"],["type","button",1,"pull-right","fa","fa-window-close",3,"click"],[1,"modal-body"],[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","mt-2"],[1,"stdd","w100"],[1,"stdd","w50","b"],[1,"stdd","w125"],[1,"stdd","w250","b"],[1,"stdd","w125","b"],[1,"stdd","w50"],[1,"b","my-0","py-0"],[1,"stdd","w50","vAlignM"],[1,"stdd","w425","vAlignM"],[4,"ngFor","ngForOf"],[1,"stdd","w50","b",2,"margin-left","465px"],[1,"stdd","w50","alignR","b"],[1,"stdd","w50","alignC"],["rows","1","cols","60","name","question","id","question",1,"stdd"],[1,"stdd","w50","alignR"]],template:function(l,o){1&l&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2,"Candidate Assessment"),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return o.bsModalRef.hide()}),e.k0s()(),e.j41(4,"div",3),e.DNE(5,u,2,0,"div",4),e.DNE(6,M,50,13,"form",5),e.k0s(),e.nrm(7,"div",6)),2&l&&(e.R7$(5),e.Y8G("ngIf",!o.assess),e.R7$(1),e.Y8G("ngIf",o.assess))},dependencies:[E.Sq,E.bT,h.qT,h.cb,h.j4,E.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px}.alignR[_ngcontent-%COMP%]{text-align:right}.alignC[_ngcontent-%COMP%]{text-align:center}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w250[_ngcontent-%COMP%]{width:250px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w425[_ngcontent-%COMP%]{width:420px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return C})()},9173:(F,g,n)=>{n.d(g,{H:()=>Z});var e=n(5964),h=n(5558),R=n(9437),P=n(7673),f=n(8141),E=n(109),u=n(1555),t=n(7705),M=n(5743),_=n(8028),C=n(8256),a=n(779),i=n(1767),l=n(6341),o=n(778),m=n(177),v=n(9417),I=n(3400),D=n(2510),k=n(9213),w=n(9726);function y(c,b){if(1&c){const s=t.RV6();t.j41(0,"input",12),t.bIt("change",function(){t.eBV(s);const r=t.XpG(2);return t.Njj(r.CVChecked())}),t.k0s()}if(2&c){const s=t.XpG(2);t.Y8G("checked",s.cv.checked)}}function T(c,b){if(1&c&&(t.j41(0,"div",7),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&c){const s=t.XpG(2);t.R7$(1),t.JRh(t.i5U(2,1,s.cv.selectionStatusDate,"dd-MMM-yy"))}}function N(c,b){1&c&&(t.j41(0,"div",13),t.EFF(1,"--"),t.k0s())}function A(c,b){if(1&c){const s=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(s);const r=t.XpG(2);return t.Njj(r.deleteClicked(r.cv.id))}),t.k0s()}}function S(c,b){if(1&c){const s=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(s);const r=t.XpG(2);return t.Njj(r.download(r.cv.candidateId))}),t.k0s()}}function V(c,b){if(1&c&&(t.j41(0,"div",1),t.DNE(1,y,1,1,"input",2),t.j41(2,"div",3),t.EFF(3),t.k0s(),t.j41(4,"div",4),t.EFF(5),t.k0s(),t.j41(6,"div",5),t.EFF(7),t.k0s(),t.j41(8,"div",6),t.EFF(9),t.k0s(),t.j41(10,"div",7),t.EFF(11),t.nI1(12,"date"),t.k0s(),t.j41(13,"div",7),t.EFF(14),t.k0s(),t.DNE(15,T,3,4,"div",8),t.DNE(16,N,2,0,"div",9),t.DNE(17,A,1,0,"button",10),t.DNE(18,S,1,0,"button",11),t.k0s()),2&c){const s=t.XpG();t.R7$(1),t.Y8G("ngIf",s.isPrintPdf),t.R7$(2),t.JRh(s.cv.applicationNo),t.R7$(1),t.Mz_("routerLink","/candidate/historyfromcvid/",s.cv.candidateId,""),t.R7$(1),t.JRh(s.cv.candidateName),t.R7$(2),t.JRh(s.cv.categoryRefAndName),t.R7$(2),t.JRh(s.cv.customerName),t.R7$(2),t.JRh(t.i5U(12,12,s.cv.referredOn,"dd-MMM-yy")),t.R7$(3),t.JRh(s.cv.selectionStatus),t.R7$(1),t.Y8G("ngIf",s.shouldDisplayDate(s.cv.selectionStatusDate)),t.R7$(1),t.Y8G("ngIf",!s.shouldDisplayDate(s.cv.selectionStatusDate)),t.R7$(1),t.Y8G("ngIf",!s.isPrintPdf),t.R7$(1),t.Y8G("ngIf",!s.isPrintPdf)}}let B=(()=>{class c{constructor(){this.isPrintPdf=!1,this.msgEvent=new t.bkB,this.downloadEvent=new t.bkB,this.cvAssessEvent=new t.bkB,this.cvCheckedEvent=new t.bkB,this.deleteEvent=new t.bkB,this.currentId=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(s){return s.stopPropagation(),this.xPosTabMenu=s.clientX,this.yPosTabMenu=s.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(s){this.downloadEvent.emit(s)}deleteClicked(s){this.deleteEvent.emit(s)}onClickLoadDocument(s){this.msgEvent.emit(s)}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(s){this.currentId=s}showhistory(s){this.msgEvent.emit(s)}CVChecked(){this.cvCheckedEvent.emit(this.cv)}shouldDisplayDate(s){return new Date(s).getFullYear()>2e3}static#t=this.\u0275fac=function(d){return new(d||c)};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-cvreferred-line"]],inputs:{cv:"cv",isPrintPdf:"isPrintPdf"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["type","checkbox","class","stdd form-check-input","style","border-color: black ;","value","cv.id",3,"checked","change",4,"ngIf"],["title","click to edit",1,"stdd","fSmall","w60"],["title","contact history of the candidate",1,"stdd","fSmall","w130",3,"routerLink"],[1,"stdd","fSmall","w200"],[1,"stdd","fSmall","w150"],[1,"stdd","fSmall","w100"],["class","stdd fSmall w100",4,"ngIf"],["class","stdd fSmall w100","style","text-align: center;",4,"ngIf"],["type","button","class","btn fa fa-trash w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary fa fa-regular fa-download w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],[1,"stdd","fSmall","w100",2,"text-align","center"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-trash","w20",3,"click"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-download","w20",3,"click"]],template:function(d,r){1&d&&t.DNE(0,V,19,15,"div",0),2&d&&t.Y8G("ngIf",null!=r.cv)},dependencies:[m.bT,M.Wk,m.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;word-wrap:break-word}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.btn[_ngcontent-%COMP%]{color:#ff0}.b[_ngcontent-%COMP%]{font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w60[_ngcontent-%COMP%]{width:60px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return c})();const G=["search"];function L(c,b){if(1&c){const s=t.RV6();t.j41(0,"pagination",15),t.bIt("pageChanged",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.onPageChanged(r))}),t.EFF(1,"\n>"),t.k0s()}if(2&c){const s=t.XpG();t.Y8G("totalItems",s.pagination.totalItems)("itemsPerPage",s.pagination.itemsPerPage)("maxSize",15)}}function $(c,b){if(1&c){const s=t.RV6();t.j41(0,"div",16)(1,"label",17),t.EFF(2,"Order#"),t.k0s(),t.j41(3,"input",18,19),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.cvParams.orderNo=r)}),t.k0s(),t.j41(5,"button",20),t.bIt("click",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.onSearch())}),t.j41(6,"mat-icon"),t.EFF(7,"search"),t.k0s()(),t.j41(8,"input",21),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.cvParams.selectionStatus=r)}),t.k0s(),t.j41(9,"label",22),t.EFF(10,"Selections Pending"),t.k0s(),t.j41(11,"input",23),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.cvParams.selectionStatus=r)}),t.k0s(),t.j41(12,"label",22),t.EFF(13,"All Status"),t.k0s(),t.j41(14,"input",24),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.cvParams.selectionStatus=r)}),t.k0s(),t.j41(15,"label",22),t.EFF(16,"Selected"),t.k0s(),t.j41(17,"input",25),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.cvParams.selectionStatus=r)}),t.k0s(),t.j41(18,"label",22),t.EFF(19,"Rejected"),t.k0s(),t.j41(20,"button",20),t.bIt("click",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.onReset())}),t.j41(21,"mat-icon"),t.EFF(22,"refresh"),t.k0s()(),t.j41(23,"label",26),t.EFF(24,"Choose Order No"),t.k0s(),t.j41(25,"div",27)(26,"ng-select",28),t.bIt("ngModelChange",function(r){t.eBV(s);const p=t.XpG();return t.Njj(p.distinctOrderNo=r)})("change",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.distinctOrderNoChanged())}),t.k0s()(),t.j41(27,"button",29),t.bIt("click",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.generatePDF())}),t.j41(28,"mat-icon"),t.EFF(29,"print"),t.k0s()(),t.j41(30,"button",30),t.bIt("click",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.close())}),t.j41(31,"mat-icon"),t.EFF(32,"cancel"),t.k0s()()()}if(2&c){const s=t.XpG();t.R7$(3),t.Y8G("ngModel",s.cvParams.orderNo),t.R7$(5),t.Y8G("ngModel",s.cvParams.selectionStatus),t.R7$(3),t.Y8G("ngModel",s.cvParams.selectionStatus),t.R7$(3),t.Y8G("ngModel",s.cvParams.selectionStatus),t.R7$(3),t.Y8G("ngModel",s.cvParams.selectionStatus),t.R7$(9),t.Y8G("items",s.headers)("ngModel",s.distinctOrderNo),t.R7$(1),t.Y8G("previewOnly",!1)("useExistingCss",!0)("disabled",""===s.distinctOrderNo)}}function X(c,b){if(1&c){const s=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.isPrintPDF=!1)}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function K(c,b){if(1&c&&(t.j41(0,"div",31),t.EFF(1),t.k0s()),2&c){const s=t.XpG();t.R7$(1),t.Lme(" CVs referred, with conditions: Order No.: ",s.distinctOrderNo,", and Status ",s.cvParams.selectionStatus," ")}}function W(c,b){1&c&&(t.j41(0,"div",32),t.EFF(1,"Select"),t.k0s())}function Y(c,b){1&c&&(t.j41(0,"div",33),t.EFF(1," No candidates available to refer "),t.k0s())}function z(c,b){if(1&c){const s=t.RV6();t.j41(0,"div")(1,"button",20),t.bIt("click",function(){t.eBV(s);const r=t.XpG(3);return t.Njj(r.isPrintPDF=!1)}),t.j41(2,"mat-icon"),t.EFF(3,"cancel"),t.k0s()(),t.nrm(4,"app-cvreferred-line",36),t.k0s()}if(2&c){const s=t.XpG().$implicit;t.R7$(4),t.Y8G("cv",s)("isPrintPdf",!0)}}function H(c,b){if(1&c){const s=t.RV6();t.j41(0,"div")(1,"app-cvreferred-line",37),t.bIt("downloadEvent",function(r){t.eBV(s);const p=t.XpG(3);return t.Njj(p.downloadFileEvent(r))})("cvCheckedEvent",function(r){t.eBV(s);const p=t.XpG(3);return t.Njj(p.cvCheckedEvent(r))})("cvAssessEvent",function(r){t.eBV(s);const p=t.XpG(3);return t.Njj(p.displayAssessmentModalBySwitchMap(r))})("deleteEvent",function(r){t.eBV(s);const p=t.XpG(3);return t.Njj(p.deleteClicked(r))}),t.k0s()()}if(2&c){const s=t.XpG().$implicit;t.R7$(1),t.Y8G("cv",s)("isPrintPdf",!1)}}function J(c,b){if(1&c&&(t.j41(0,"div",35),t.DNE(1,z,5,2,"div",14),t.DNE(2,H,2,2,"div",14),t.k0s()),2&c){const s=t.XpG(2);t.R7$(1),t.Y8G("ngIf",s.isPrintPDF),t.R7$(1),t.Y8G("ngIf",!s.isPrintPDF)}}function Q(c,b){if(1&c&&(t.j41(0,"div"),t.DNE(1,J,3,2,"div",34),t.k0s()),2&c){const s=t.XpG();t.R7$(1),t.Y8G("ngForOf",s.cvs)}}let Z=(()=>{class c{constructor(s,d,r,p,O,j,U,q){this.router=s,this.service=d,this.toastr=r,this.modalService=p,this.candAssessService=O,this.downloadService=j,this.route=U,this.confirm=q,this.returnUrl="",this.cvParams=new E.l,this.cvs=[],this.selectedCVs=[],this.totalCount=0,this.paramNames="",this.id=0,this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctOrderNos=[],this.distinctOrderNo="";var tt=this.route.snapshot.paramMap.get("id")??"0";this.id=+tt;let x=this.router.getCurrentNavigation();x?.extras&&x.extras.state&&(x.extras.state.returnUrl&&(this.returnUrl=x.extras.state.returnUrl),x.extras.state.user&&(this.user=x.extras.state.user))}ngOnInit(){this.service.setParams(this.cvParams),this.route.data.subscribe(s=>{this.cvs=s.cvrefPaged.result,this.pagination=s.cvrefPaged.pagination,this.totalCount=s.cvrefPaged.count,this.headers=s.headers})}loadCVsReferred(){this.service.setParams(this.cvParams),this.service.referredCVsPaginated(!0).subscribe({next:s=>{s.result&&s.pagination&&(this.cvs=s.result,this.pagination=s.pagination)}})}onSearch(){const s=this.service.getParams()??new E.l;""!==this.searchTerm?.nativeElement.value&&(s.orderNo=this.searchTerm.nativeElement.value),s.pageNumber=1,this.service.setParams(s),this.loadCVsReferred()}onReset(){this.cvParams.pageNumber=1,this.service.setParams(this.cvParams),this.loadCVsReferred()}onPageChanged(s){this.cvParams&&this.cvParams.pageNumber!==s.page&&(this.cvParams.pageNumber=s.page,this.service.setParams(this.cvParams),this.loadCVsReferred())}downloadFileEvent(s){return this.service.downloadCV(s).subscribe(()=>{this.toastr.success("document downloaded")},d=>{console.log("error:",d),this.toastr.error(d.error?.details,"failed to download document")})}displayAssessmentModalBySwitchMap(s){this.candAssessService.getCandidateAssessmentDto(s.candidateId,s.orderItemId).pipe((0,e.p)(O=>void 0!==O),(0,h.n)(O=>(this.bsModalRef=this.modalService.show(u.U,{class:"modal-dialog-centered modal-lg",initialState:{assess:O,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(O=>{console.log("inner response:",O)})}navigateByUrl(s,d,r){this.router.navigate([s],{state:{cvbrief:d,userobject:this.service.user,toedit:r,returnUrl:"/candidates"}})}cvCheckedEvent(s){var d=this.selectedCVs.find(p=>p.candidateId==s.id),r=this.selectedCVs.findIndex(p=>p.candidateId===s.id);void 0!==d?d.checked?this.selectedCVs.push(s):this.selectedCVs.splice(r,1):this.selectedCVs.push(s)}deleteClicked(s){const d=this.service.deleteCVRef(s);this.confirm.confirm("Confirm Delete","This will delete this CV Referral").pipe((0,h.n)(O=>d.pipe((0,R.W)(j=>(console.log("Error in deleting the CV Referral",j),(0,P.of)())),(0,f.M)(j=>this.toastr.success("deleted the CV Referral")))),(0,R.W)(O=>(this.toastr.error("Error in getting delete confirmation",O),(0,P.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},O=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",O)})}close(){this.router.navigateByUrl(this.returnUrl||"/")}distinctOrderNoChanged(){var s=new E.l;s.orderNo=+this.distinctOrderNo,s.selectionStatus=this.cvParams.selectionStatus,this.service.setParams(s),this.service.referredCVsPaginated(!1).subscribe({next:d=>{void 0!==d?(this.cvs=d.result,this.pagination=d.pagination,this.totalCount=d.result.length):this.toastr.warning("Failed to retrieve headers","Failed")}})}generatePDF(){this.isPrintPDF=!this.isPrintPDF,this.printtitle="Listing of CVS Referred, with Order No."+this.distinctOrderNo+" and Selection Status "+this.cvParams.selectionStatus+", as on "+new Date}closePrintSection(){this.isPrintPDF=!1,this.distinctOrderNo=""}static#t=this.\u0275fac=function(d){return new(d||c)(t.rXU(M.Ix),t.rXU(_.y),t.rXU(C.tw),t.rXU(a.I8),t.rXU(i.z),t.rXU(l.Z),t.rXU(M.nX),t.rXU(o.G))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-cvsreferred"]],viewQuery:function(d,r){if(1&d&&t.GBs(G,5),2&d){let p;t.mGM(p=t.lsd())&&(r.searchTerm=p.first)}},decls:25,vars:7,consts:[[1,"my-0","mx-4",2,"display","inline-block","font-weight","bold"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],["class","btn","type","button",3,"click",4,"ngIf"],["id","print-section"],[2,"margin-left","70px"],["class","b",4,"ngIf"],["class","lbl w30 mx-1",4,"ngIf"],[1,"lbl","w50","mx-1"],[1,"lbl","w130"],[1,"lbl","w200","mx-1"],[1,"lbl","w150","mx-1"],[1,"lbl","w100","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],[1,"stdd","w75","fSmall","b",2,"text-align","right","vertical-align","middle !important"],["type","text","title","enter Order No to search","placeholder","Order No",1,"stdd","form-control","fSmall","w75",2,"margin-left","20px",3,"ngModel","ngModelChange"],["search",""],["type","button",1,"btn",3,"click"],["type","radio","value","Pending",1,"radio","form-check-input",3,"ngModel","ngModelChange"],[1,"fSmall"],["type","radio","value","",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Selected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Rejected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],[1,"lbl","w75","tAlignRight"],[1,"stdd","w100","mx-2"],["bindLabel","orderno","bindValue","orderno","labelForId","orderno","clearAllText","Clear",3,"items","ngModel","ngModelChange","change"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","disabled","click"],["title","close this page","type","button",1,"btn",3,"click"],[1,"b"],[1,"lbl","w30","mx-1"],[2,"margin-left","100px","margin-top","5px","font-weight","bold"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","isPrintPdf"],[3,"cv","isPrintPdf","downloadEvent","cvCheckedEvent","cvAssessEvent","deleteEvent"]],template:function(d,r){1&d&&(t.j41(0,"h4",0),t.EFF(1,"CVs refferred to clients"),t.k0s(),t.DNE(2,L,2,3,"pagination",1),t.DNE(3,$,33,10,"div",2),t.DNE(4,X,3,0,"button",3),t.j41(5,"div",4)(6,"div",5),t.DNE(7,K,2,2,"div",6),t.DNE(8,W,2,0,"div",7),t.j41(9,"div",8),t.EFF(10,"App No"),t.k0s(),t.j41(11,"div",9),t.EFF(12,"Candidate Name"),t.k0s(),t.j41(13,"div",10),t.EFF(14,"Category Ref"),t.k0s(),t.j41(15,"div",11),t.EFF(16,"Customer Name"),t.k0s(),t.j41(17,"div",12),t.EFF(18,"Referred On"),t.k0s(),t.j41(19,"div",12),t.EFF(20,"Selection Decision"),t.k0s(),t.j41(21,"div",12),t.EFF(22,"Sel Decision Dt"),t.k0s()(),t.DNE(23,Y,2,0,"div",13),t.DNE(24,Q,2,1,"div",14),t.k0s()),2&d&&(t.R7$(2),t.Y8G("ngIf",void 0!==r.pagination&&!r.isPrintPDF),t.R7$(1),t.Y8G("ngIf",r.cvs&&!r.isPrintPDF),t.R7$(1),t.Y8G("ngIf",r.isPrintPDF),t.R7$(3),t.Y8G("ngIf",r.isPrintPDF),t.R7$(1),t.Y8G("ngIf",r.isPrintPDF),t.R7$(15),t.Y8G("ngIf",0===r.cvs.length),t.R7$(1),t.Y8G("ngIf",r.cvs.length))},dependencies:[m.Sq,m.bT,v.me,v.Fm,v.BC,I.eK,v.vS,D.vr,k.An,w.GV,B],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;color:hsl(from color h s l)}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.radio[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 2px;border-color:#000;width:20px;height:1em;font-size:medium}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small;margin:0 3px 0 1px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px}.b[_ngcontent-%COMP%]{font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;size:20px;vertical-align:middle}"]})}return c})()}}]);