"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[828],{7411:(w,h,m)=>{m.d(h,{z:()=>e});var o=m(5879),f=m(2051);let _=(()=>{class c{constructor(d){this.bsModalRef=d,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(p){return new(p||c)(o.Y36(f.UZ))};static#t=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(p,l){1&p&&(o.TgZ(0,"div",0)(1,"h4",1),o._uU(2),o.qZA()(),o.TgZ(3,"div",2)(4,"p"),o._uU(5),o.qZA()(),o.TgZ(6,"div",3)(7,"button",4),o.NdJ("click",function(){return l.confirm()}),o._uU(8),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return l.decline()}),o._uU(10),o.qZA()()),2&p&&(o.xp6(2),o.Oqu(l.title),o.xp6(3),o.Oqu(l.message),o.xp6(3),o.Oqu(l.btnOkText),o.xp6(2),o.Oqu(l.btnCancelText))}})}return c})();var C=m(7398),v=m(5516),M=m(9862);let e=(()=>{class c{constructor(d,p){this.modalService=d,this.http=p,this.baseUrl=v.N.apiUrl}confirm(d="Confirmation",p="Are you sure you want to do this?",l="Ok",b="Cancel"){return this.bsModelRef=this.modalService.show(_,{initialState:{title:d,message:p,btnOkText:l,btnCancelText:b}}),this.bsModelRef.onHidden.pipe((0,C.U)(()=>this.bsModelRef.content.result))}getHelp(d){return this.http.get(this.baseUrl+"Help/help/"+d)}static#e=this.\u0275fac=function(p){return new(p||c)(o.LFG(f.tT),o.LFG(M.eN))};static#t=this.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},2828:(w,h,m)=>{m.r(h),m.d(h,{MemberModule:()=>I});var o=m(6814),f=m(3983),_=m(8180),C=m(2181),v=m(4664),M=m(8717),e=m(5879),c=m(8763),A=m(7783),d=m(3167),p=m(7411),l=m(7850),b=m(7012);function Z(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA(),e.TgZ(11,"div",3),e._uU(12),e.qZA(),e.TgZ(13,"div",2),e._uU(14),e.qZA(),e.TgZ(15,"div",2),e._uU(16),e.qZA(),e.TgZ(17,"button",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editClicked())}),e.qZA(),e.TgZ(18,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteClicked())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.member.userName),e.xp6(2),e.Oqu(t.member.knownAs),e.xp6(2),e.Oqu(t.member.gender),e.xp6(2),e.Oqu(t.member.age>100?"--":t.member.age),e.xp6(2),e.Oqu(t.member.city),e.xp6(2),e.Oqu(t.member.phoneNumber),e.xp6(2),e.Oqu(t.member.email),e.xp6(2),e.Oqu(t.member.roles.flat())}}let U=(()=>{class i{constructor(){this.editEvent=new e.vpe,this.deleteEvent=new e.vpe}editClicked(){this.editEvent.emit(this.member)}deleteClicked(){this.deleteEvent.emit(this.member?.id)}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-member-item"]],inputs:{member:"member"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w50"],[1,"stdd","w75"],[1,"btn","fa","fa-pencil",3,"click"],[1,"btn","fa","fa-trash",3,"click"]],template:function(r,n){1&r&&e.YNc(0,Z,19,8,"div",0),2&r&&e.Q6J("ngIf",n.member)},dependencies:[o.O5],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;word-wrap:break-word;border:aqua;vertical-align:top}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return i})();function y(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"pagination",9),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.pageChanged(n))}),e._uU(1,"\n>"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function O(i,g){1&i&&(e.TgZ(0,"div",10),e._uU(1," No members on record\n"),e.qZA())}function q(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-member-item",13),e.NdJ("editEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editMember(n))})("deleteEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteMember(n))}),e.qZA()()}if(2&i){const t=g.$implicit;e.xp6(1),e.Q6J("member",t)}}function J(i,g){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,q,2,1,"div",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.members)}}let N=(()=>{class i{constructor(t,r,n,a,s){this.toastr=t,this.accountService=r,this.service=n,this.confirm=a,this.router=s,this.mParams=new M.M,this.members=[],this.totalCount=0,this.userparams=new M.M,this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}]}ngOnInit(){this.accountService.currentUser$.pipe((0,_.q)(1)).subscribe(t=>this.user=t),this.loadMembers(!1)}loadMembers(t=!0){this.service.setUserParams(this.userparams),this.service.getMembers(t).subscribe({next:r=>{this.members=r.result,this.pagination=r.pagination,this.totalCount=r.count}})}resetFilters(){this.service.resetUserParams(),this.loadMembers()}pageChanged(t){this.userparams.pageNumber!=t.page&&(console.log("new page:",t.page),this.userparams.pageNumber=t.page,this.loadMembers(!0))}editMember(t){this.navigateByRoute(t,"/members/edit",t)}deleteMember(t){const a=this.service.deleteMember(t);this.confirm.confirm("confirm Delete","confirm delete this Member. WARNING: this cannot be undone").pipe((0,C.h)(x=>x),(0,v.w)(()=>a)).subscribe(x=>{x?this.toastr.success("Checklist deleted","deletion successful"):this.toastr.error("Error in deleting the Member","failed to delete")})}navigateByRoute(t,r,n){this.router.navigate([r+"/"+t],{state:{user:this.user,member:n,returnUrl:"/members"}})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(c._W),e.Y36(A.B),e.Y36(d.n),e.Y36(p.z),e.Y36(l.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-member-list"]],decls:21,vars:3,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["routerLink","/",1,"btn","fa","fa-window-close","fa-2x",2,"margin-left","100px"],[1,"stdd","w150",2,"margin-left","15px"],[1,"stdd","w100"],[1,"stdd","w50"],[1,"stdd","w75"],[1,"stdd","w150"],["style","margin-left: 50px;",4,"ngIf"],["class","row",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","50px"],[1,"row"],[4,"ngFor","ngForOf"],[3,"member","editEvent","deleteEvent"]],template:function(r,n){1&r&&(e.YNc(0,y,2,3,"pagination",0),e._UZ(1,"button",1)(2,"br"),e.TgZ(3,"label",2),e._uU(4,"User name"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Known As"),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"Gender"),e.qZA(),e.TgZ(9,"label",5),e._uU(10,"Age"),e.qZA(),e.TgZ(11,"label",5),e._uU(12,"city"),e.qZA(),e.TgZ(13,"label",3),e._uU(14,"Phone No"),e.qZA(),e.TgZ(15,"label",6),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"label",6),e._uU(18,"Roles"),e.qZA(),e.YNc(19,O,2,0,"div",7),e.YNc(20,J,2,1,"div",8)),2&r&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(19),e.Q6J("ngIf",0===n.members.length),e.xp6(1),e.Q6J("ngIf",n.members))},dependencies:[o.sg,o.O5,b.Qt,l.rH,U],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;font-weight:700}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return i})();var T=m(3593),u=m(6223);function P(i,g){1&i&&(e.TgZ(0,"div",1),e._uU(1,"Member undefined"),e.qZA())}const E=function(){return{dateInputFormat:"YYYY-MM-DD"}},k=[{path:"",component:N},{path:"edit/:username",component:(()=>{class i{constructor(t,r,n,a){this.activatedRoute=t,this.toastr=r,this.router=n,this.service=a,this.returnUrl="/",this.bsValueDate=new Date,this.knownAs="",this.city="",this.country="",this.phoneNumber="",this.email="",this.gender="";let s=this.router.getCurrentNavigation();s?.extras&&s.extras.state&&(s.extras.state.returnUrl&&(this.returnUrl=s.extras.state.returnUrl),s.extras.state.user&&(this.user=s.extras.state.user),s.extras.state.member&&(this.member=s.extras.state.member))}ngOnInit(){}UpdateMember(){this.service.updateMember(this.member).subscribe({next:t=>{t?this.toastr.success("Member Updated","Success"):this.toastr.warning("Failed to update the Member","Failure")},error:t=>{this.toastr.error(t.error?.error?t.error.error:t,"Error encountered")}})}close(){this.router.navigateByUrl("/members")}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(l.gz),e.Y36(c._W),e.Y36(l.F0),e.Y36(d.n))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-member-edit"]],decls:53,vars:16,consts:[[1,"container"],[1,"stdd"],["class","stdd",4,"ngIf"],["id","editForm"],["editForm","ngForm"],[1,"btn","fa","fa-save","fa-2x",2,"margin-left","150px",3,"disabled","click"],[1,"btn","fa","fa-window-close","fa-2x","mx-2",3,"click"],[1,"stdd","w100"],[1,"stdd","w150"],["type","radio","value","m","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],[1,"stdd","mx-2"],["type","radio","value","f","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],["type","text","name","knownAs",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Date of birth","name","dob","bsDatepicker","",1,"stdd","w150",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","city",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","country",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","position",1,"stdd","w200",3,"ngModel","ngModelChange"],["name","phoneno",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","email",1,"stdd","w250",3,"ngModel","ngModelChange"]],template:function(r,n){if(1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.YNc(3,P,2,0,"div",2),e.TgZ(4,"form",3,4)(6,"button",5),e.NdJ("click",function(){return n.UpdateMember()}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.close()}),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"label",7),e._uU(11,"User name"),e.qZA(),e.TgZ(12,"div",8),e._uU(13),e.qZA(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"label",7),e._uU(17,"Gender"),e.qZA(),e.TgZ(18,"input",9),e.NdJ("ngModelChange",function(s){return n.member.gender=s}),e.qZA(),e.TgZ(19,"span",10),e._uU(20,"Male"),e.qZA(),e.TgZ(21,"input",11),e.NdJ("ngModelChange",function(s){return n.member.gender=s}),e.qZA(),e.TgZ(22,"span",10),e._uU(23,"Female"),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"label",7),e._uU(26,"Known As"),e.qZA(),e.TgZ(27,"input",12),e.NdJ("ngModelChange",function(s){return n.member.knownAs=s}),e.qZA(),e._UZ(28,"br"),e.TgZ(29,"label",7),e._uU(30,"Date of birth"),e.qZA(),e.TgZ(31,"input",13),e.NdJ("ngModelChange",function(s){return n.member.dateOfBirth=s}),e.qZA(),e._UZ(32,"br")(33,"br"),e.TgZ(34,"label",7),e._uU(35,"City"),e.qZA(),e.TgZ(36,"input",14),e.NdJ("ngModelChange",function(s){return n.member.city=s}),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"label",7),e._uU(39,"Country"),e.qZA(),e.TgZ(40,"input",15),e.NdJ("ngModelChange",function(s){return n.member.country=s}),e.qZA(),e._UZ(41,"br"),e.TgZ(42,"label",7),e._uU(43,"Position"),e.qZA(),e.TgZ(44,"input",16),e.NdJ("ngModelChange",function(s){return n.member.position=s}),e.qZA(),e._UZ(45,"br"),e.TgZ(46,"label",7),e._uU(47,"Phone"),e.qZA(),e.TgZ(48,"input",17),e.NdJ("ngModelChange",function(s){return n.member.phoneNumber=s}),e.qZA(),e._UZ(49,"br"),e.TgZ(50,"label",7),e._uU(51,"Email"),e.qZA(),e.TgZ(52,"input",18),e.NdJ("ngModelChange",function(s){return n.member.email=s}),e.qZA()()()),2&r){const a=e.MAs(5);e.xp6(2),e.hij("Edit Member - logged-in user: ",null==n.user?null:n.user.knownAs,""),e.xp6(1),e.Q6J("ngIf",!n.member),e.xp6(3),e.Q6J("disabled",!a.dirty),e.xp6(7),e.Oqu(null==n.member?null:n.member.userName),e.xp6(5),e.Q6J("ngModel",n.member.gender),e.xp6(3),e.Q6J("ngModel",n.member.gender),e.xp6(6),e.Q6J("ngModel",n.member.knownAs),e.xp6(4),e.Q6J("ngModel",n.member.dateOfBirth)("bsValue",n.bsValueDate)("bsConfig",e.DdM(15,E)),e.xp6(5),e.Q6J("ngModel",n.member.city),e.xp6(4),e.Q6J("ngModel",n.member.country),e.xp6(4),e.Q6J("ngModel",n.member.position),e.xp6(4),e.Q6J("ngModel",n.member.phoneNumber),e.xp6(4),e.Q6J("ngModel",n.member.email)}},dependencies:[o.O5,T.Np,T.Y5,u._Y,u.Fj,u._,u.JJ,u.JL,u.On,u.F],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:medium;margin:4px 2px}.b[_ngcontent-%COMP%]{font-weight:700}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.inputCheck[_ngcontent-%COMP%]{margin:2px 5px 2px 10px;width:40px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:15px;height:15px;border:1px solid #fff;border-radius:50%;margin-right:5px;background-color:#c3b1b1;position:relative;vertical-align:middle}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:9px;height:9px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return i})(),resolve:{member:(i,g)=>(0,e.f3M)(d.n).getMember(i.paramMap.get("username"))}}];let F=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[o.ez,l.Bz.forChild(k),l.Bz]})}return i})(),I=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[o.ez,f.m,F]})}return i})()}}]);