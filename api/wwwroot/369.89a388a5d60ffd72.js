"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[369],{7114:(x,g,s)=>{s.d(g,{t:()=>a});var t=s(5879),i=s(6223),f=s(6814);function C(r,c){if(1&r&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" Please enter a ",e.label," ")}}function d(r,c){if(1&r&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE(" ",e.label," must be at least ",null==e.control.errors?null:e.control.errors.minlength.requiredLength," characters ")}}function p(r,c){if(1&r&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE(" ",e.label," must be at most ",null==e.control.errors?null:e.control.errors.maxlength.requiredLength," characters ")}}function u(r,c){if(1&r&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.label," do not match ")}}let a=(()=>{class r{constructor(e){this.ngControl=e,this.label="",this.type="text",this.width="",this.ngControl.valueAccessor=this}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.ngControl.control}static#t=this.\u0275fac=function(l){return new(l||r)(t.Y36(i.a5,2))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-text-input"]],inputs:{label:"label",type:"type",width:"width"},decls:6,vars:10,consts:[[1,"mb-3",2,"vertical-align","top"],[1,"form-control",2,"font-size","small","word-wrap","normal","height","auto","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px","background-color","darkgrey",3,"type","width","formControl","placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(l,m){1&l&&(t.TgZ(0,"div",0),t._UZ(1,"input",1),t.YNc(2,C,2,1,"div",2),t.YNc(3,d,2,2,"div",2),t.YNc(4,p,2,2,"div",2),t.YNc(5,u,2,1,"div",2),t.qZA()),2&l&&(t.xp6(1),t.ekj("is-invalid",m.control.touched&&m.control.invalid),t.s9C("type",m.type),t.s9C("width",m.width),t.s9C("placeholder",m.label),t.Q6J("formControl",m.control),t.xp6(1),t.Q6J("ngIf",null==m.control.errors?null:m.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==m.control.errors?null:m.control.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==m.control.errors?null:m.control.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==m.control.errors?null:m.control.errors.isMatching))},dependencies:[f.O5,i.Fj,i.JJ,i.oH]})}return r})()},3574:(x,g,s)=>{s.d(g,{C:()=>a});var t=s(7328),i=s(2096),f=s(7398),C=s(5516),d=s(1436),p=s(5879),u=s(9862);let a=(()=>{class r{constructor(e){this.http=e,this.apiUrl=C.N.apiUrl,this.currentUserSource=new t.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"},{status:"Declined - other reasons"}]}getHistories(e){const l=this.cache.get(Object.values(e).join("-"));if(l)return(0,i.of)(l);let m=(0,d.qb)(e);return(0,d.Tr)(this.apiUrl+"userHistory/pagedlist",m,this.http).pipe((0,f.U)(v=>(this.cache.set(Object.values(e).join("-"),v),v)))}getCallRecordReport(e){let l=(0,d.qb)(e);return this.http.get(this.apiUrl+"CallRecord/report",{params:l})}getCallRecordWithItems(e,l){return this.http.get(this.apiUrl+"CallRecord/callRecordWithItems/"+e+"/"+l)}getCallRecordStatus(){return this.callRecordStatus}updateHistoryItem(e){return this.http.post(this.apiUrl+"userHistory/userhistoryitem",e)}insertNewCallRecordItem(e){return this.http.post(this.apiUrl+"CallRecord/CallRecorditem",e)}setParams(e){this.hParams=e}getParams(){return this.hParams}updateCallRecord(e){return this.http.put(this.apiUrl+"CallRecord",e)}updateCallRecordObject(e){return this.http.put(this.apiUrl+"CallRecord/UpdateNewItem",e)}updateCallRecordItem(e){return console.log("updatecallrecorditem, model"),this.http.put(this.apiUrl+"CallRecord/InsertCallRecordItem",e)}deleteHistory(e){return this.http.delete(this.apiUrl+"userHistory/"+e)}deleteHistoryItem(e){return this.http.delete(this.apiUrl+"userHistory/historyItemId/"+e)}getCallRecordFromPhoneNo(e){return this.http.get(this.apiUrl+"callRecord/callRecordFromPhoneNo/"+e)}getCallRecordsOfACandidate(e,l){return this.http.get(this.apiUrl+"callRecord/CallRecordSummary/"+e+"/"+l)}static#t=this.\u0275fac=function(l){return new(l||r)(p.LFG(u.eN))};static#e=this.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},7411:(x,g,s)=>{s.d(g,{z:()=>u});var t=s(5879),i=s(2051);let f=(()=>{class a{constructor(c){this.bsModalRef=c,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(i.UZ))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA()(),t.TgZ(3,"div",2)(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return l.confirm()}),t._uU(8),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return l.decline()}),t._uU(10),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(l.title),t.xp6(3),t.Oqu(l.message),t.xp6(3),t.Oqu(l.btnOkText),t.xp6(2),t.Oqu(l.btnCancelText))}})}return a})();var C=s(7398),d=s(5516),p=s(9862);let u=(()=>{class a{constructor(c,e){this.modalService=c,this.http=e,this.baseUrl=d.N.apiUrl}confirm(c="Confirmation",e="Are you sure you want to do this?",l="Ok",m="Cancel"){return this.bsModelRef=this.modalService.show(f,{initialState:{title:c,message:e,btnOkText:l,btnCancelText:m}}),this.bsModelRef.onHidden.pipe((0,C.U)(()=>this.bsModelRef.content.result))}getHelp(c){return this.http.get(this.baseUrl+"Help/help/"+c)}static#t=this.\u0275fac=function(e){return new(e||a)(t.LFG(i.tT),t.LFG(p.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},369:(x,g,s)=>{s.d(g,{h:()=>M});var t=s(5879),i=s(6223),f=s(2051),C=s(8763),d=s(7411),p=s(3574),u=s(6814),a=s(3593),r=s(4807),c=s(7114);function e(_,O){1&_&&(t.TgZ(0,"div",34),t._uU(1," Contact Result not selected "),t.qZA())}function l(_,O){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,e,2,0,"div",33),t.qZA()),2&_){const n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.form.controls.contactResult.touched&&n.form.controls.contactResult.invalid&&n.form.controls.contactResult.errors&&n.form.controls.contactResult.errors.required)}}const m=function(){return{dateInputFormat:"YYYY-MM-DD"}};function v(_,O){if(1&_){const n=t.EpF();t.TgZ(0,"div")(1,"div",23),t._UZ(2,"input",24)(3,"app-text-input",25)(4,"app-text-input",26),t.TgZ(5,"ng-select",27),t.NdJ("change",function(h){const R=t.CHM(n).index,T=t.oxw(2);return t.KtG(T.contactResultChanged(h,R))}),t.qZA(),t.YNc(6,l,2,1,"div",5),t._UZ(7,"ng-select",28)(8,"input",29),t.TgZ(9,"button",30),t.NdJ("click",function(){const b=t.CHM(n).index,R=t.oxw(2);return t.KtG(R.removeDepItem(b))}),t.qZA(),t._UZ(10,"br",20),t.TgZ(11,"label",31),t._uU(12,"Discussions"),t.qZA(),t._UZ(13,"app-text-input",32),t.qZA()()}if(2&_){const n=O.index,o=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",n),t.xp6(1),t.Q6J("bsValue",o.bsValueDate)("bsConfig",t.DdM(10,m)),t.xp6(2),t.Q6J("label","Phone No"),t.xp6(1),t.Q6J("items",o.contactResults),t.xp6(1),t.Q6J("ngIf",o.form.controls.contactResult),t.xp6(1),t.Q6J("items",o.nextAction),t.xp6(1),t.Q6J("bsValue",o.bsValueDate)("bsConfig",t.DdM(11,m)),t.xp6(5),t.Q6J("label","Discussions")}}function I(_,O){if(1&_){const n=t.EpF();t.TgZ(0,"div")(1,"form",8)(2,"label",9),t._uU(3,"Name of the Person:"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t.TgZ(6,"label",11),t._uU(7,"CategoryRef:"),t.qZA(),t.TgZ(8,"div",12),t._uU(9),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"label",9),t._uU(12,"Subject:"),t.qZA(),t.TgZ(13,"div",10),t._uU(14),t.qZA(),t.TgZ(15,"label",11),t._uU(16,"Status:"),t.qZA(),t.TgZ(17,"div",13),t._uU(18),t.qZA(),t._UZ(19,"hr",14),t.TgZ(20,"label",15),t._uU(21,"Date"),t.qZA(),t.TgZ(22,"label",16),t._uU(23,"In / Out"),t.qZA(),t.TgZ(24,"label",17),t._uU(25,"Phone"),t.qZA(),t.TgZ(26,"label",18),t._uU(27,"Result of disc"),t.qZA(),t.TgZ(28,"label",9),t._uU(29,"Next action"),t.qZA(),t.TgZ(30,"label",16),t._uU(31,"By"),t.qZA(),t.TgZ(32,"button",19),t.NdJ("click",function(){t.CHM(n);const h=t.oxw();return t.KtG(h.addCallRecordItem())}),t.qZA(),t._UZ(33,"hr",20),t.TgZ(34,"div",21),t.YNc(35,v,14,12,"div",22),t.qZA()()()}if(2&_){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(n.callRecord.personName),t.xp6(4),t.Oqu(n.callRecord.categoryRef),t.xp6(5),t.Oqu(n.callRecord.subject),t.xp6(4),t.Oqu(n.callRecord.status),t.xp6(17),t.Q6J("ngForOf",n.callRecordItems.controls)}}let M=(()=>{class _{constructor(n,o,h,b,R){this.bsModalRef=n,this.toastr=o,this.fb=h,this.confirm=b,this.service=R,this.passCallRecordEvent=new t.vpe,this.candidatName="",this.bsValueDate=new Date,this.bsValue=new Date,this.userName="",this.form=new i.cw({}),this.contactResults=[],this.nextAction=[{status:"Call again"},{status:"Correct Phone No"},{status:"Escalate To Supervisor"},{status:"Conclude"}],this.advisoriesBy=[{status:"Mail"},{status:"SMS"},{status:"Both"}],this.inOutList=[{status:"In"},{status:"Out"}],this.contactResults=this.service.getCallRecordStatus()}ngOnInit(){this.callRecord&&this.InitializeForm(this.callRecord)}InitializeForm(n){this.form=this.fb.group({id:n.id,categoryRef:n.categoryRef,personId:[n.personId,i.kI.required],personName:n.personName,personType:n.personType,username:[n.username??this.userName],status:n.status,statusDate:n.statusDate,email:n.Email,phoneNo:n.phoneNo,subject:[n.subject,i.kI.required],concludedOn:n.concludedOn,callRecordItems:this.fb.array(n.callRecordItems.map(o=>this.fb.group({id:o.id,callRecordId:o.callRecordId,incomingOutgoing:[o.incomingOutgoing,[i.kI.required,i.kI.maxLength(3)]],dateOfContact:[o.dateOfContact,i.kI.required],username:[o.username??this.userName],phoneNo:o.phoneNo,contactResult:[o.contactResult,i.kI.required],gistOfDiscussions:[o.gistOfDiscussions],nextAction:o.nextAction,nextActionOn:o.nextActionOn,email:o.email,advisoryBy:o.advisoryBy,composeSMS:o.advisoryBy})))})}get callRecordItems(){return this.form.get("callRecordItems")}newCallRecordItem(){var n=this.callRecordItems.at(this.callRecordItems.length-1);return this.fb.group({id:0,callRecordId:this.callRecord?.id,incomingOutgoing:["out",i.kI.required],dateOfContact:[new Date,i.kI.required],username:[this.userName??"",i.kI.required],contactResult:["",i.kI.required],gistOfDiscussions:"",advisoryBy:"mail",nextAction:"",nextActionOn:new Date,phoneNo:n.get("phoneNo")?.value,email:n.get("email")?.value})}addCallRecordItem(){this.callRecordItems.push(this.newCallRecordItem())}removeDepItem(n){this.confirm.confirm("Confirm Delete","This will also delete the selected Call Record Item. If you confirm to delete, remember to save this transaction").subscribe({next:o=>{o&&this.callRecordItems.removeAt(n)}})}updateCallRecord(){this.form.get("username")?.setValue(this.userName),this.passCallRecordEvent.emit(this.form.value),this.bsModalRef.hide()}contactResultChanged(n,o){switch(n.status.toLowerCase()){case"not responding":case"will revert later":this.callRecordItems.at(o).get("nextAction")?.setValue("Call Again");break;case"wrong number":this.callRecordItems.at(o).get("nextAction")?.setValue("Correct Phone Number");break;case"not interested":case"declined-family issues":case"declined for overseas":case"declined-low remuneration":default:this.callRecordItems.at(o).get("nextAction")?.setValue("Concluded");break;case"declined - sc not agreed":this.callRecordItems.at(o).get("nextAction")?.setValue("Escalate To Supervisor")}}close(){this.passCallRecordEvent.emit(null),this.bsModalRef.hide()}static#t=this.\u0275fac=function(o){return new(o||_)(t.Y36(f.UZ),t.Y36(C._W),t.Y36(i.qu),t.Y36(d.z),t.Y36(p.C))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-call-records-edit-modal"]],outputs:{passCallRecordEvent:"passCallRecordEvent"},decls:11,vars:4,consts:[[1,"modal-header","my-0"],[2,"font-size","bold"],[1,"btn","btn-success","w30","fa","fa-save",2,"margin-left","400px",3,"click"],[1,"btn","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"modal-body","my-0"],[4,"ngIf"],[1,"modal-footer"],[2,"font-size","smaller"],[3,"formGroup"],[1,"lbl","w150"],[1,"stdd","w250"],[1,"lbl","w125","mL15"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"my-1"],[1,"lbl","w80"],[1,"lbl","w75"],[1,"lbl","w125"],[1,"lbl","w175"],[1,"btn","w25","fa","fa-plus",3,"click"],[1,"my-0"],["formArrayName","callRecordItems"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","placeholder","Date","formControlName","dateOfContact","bsDatepicker","",1,"stdd","w80","fSmaller",3,"bsValue","bsConfig"],["formControlName","incomingOutgoing",1,"stdd","fSmaller","w75"],["formControlName","phoneNo",1,"stdd","fSmallest","w125",3,"label"],["bindLabel","status","bindValue","status","labelForId","status","formControlName","contactResult",1,"select",2,"border-color","black","width","175px",3,"items","change"],["bindLabel","status","bindValue","status","labelForId","status","formControlName","nextAction",1,"select","w150",2,"border-color","black",3,"items"],["type","text","placeholder","Date","formControlName","nextActionOn","bsDatepicker","",1,"stdd","w75",3,"bsValue","bsConfig"],[1,"btn","w25","fa","fa-trash","fa-sm","red",3,"click"],[1,"stdd","fSmallest","b","w75","alignR"],["formControlName","gistOfDiscussions",1,"stdd","fSmallest","w600",3,"label"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(o,h){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Edit Call Record"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return h.updateCallRecord()}),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return h.close()}),t.qZA()(),t.TgZ(5,"div",4),t.YNc(6,I,36,6,"div",5),t.qZA(),t._UZ(7,"div",6),t.TgZ(8,"div",7),t._uU(9),t.ALo(10,"json"),t.qZA()),2&o&&(t.xp6(6),t.Q6J("ngIf",h.callRecord),t.xp6(3),t.hij(" ",t.lcZ(10,2,h.form.value),"\n"))},dependencies:[u.sg,u.O5,a.Np,a.Y5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,r.w9,c.t,u.Ts],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;vertical-align:top;font-size:smaller}.select[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;vertical-align:top;font-size:smaller;font-weight:700}.stddY0[_ngcontent-%COMP%]{display:inline-block;margin:0 1px 0 2px;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-weight:700;vertical-align:top;font-size:smaller}.mL15[_ngcontent-%COMP%]{margin-left:15px!important}.mL40[_ngcontent-%COMP%]{margin-left:40px!important}.mL110[_ngcontent-%COMP%]{margin-left:110px!important}.mL460[_ngcontent-%COMP%]{margin-left:460px!important}.fSmallest[_ngcontent-%COMP%]{font-size:x-small;font-weight:700}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.alignR[_ngcontent-%COMP%]{text-align:right}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w80[_ngcontent-%COMP%]{width:80px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w250[_ngcontent-%COMP%]{width:250px}.w600[_ngcontent-%COMP%]{width:600px}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}  .ng-select .ng-select-container,   .ng-select.ng-select-single .ng-select-container{min-height:25px;font-size:.8em;font-weight:400;width:auto!important}"]})}return _})()},7328:(x,g,s)=>{s.d(g,{t:()=>f});var t=s(8645),i=s(4552);class f extends t.x{constructor(d=1/0,p=1/0,u=i.l){super(),this._bufferSize=d,this._windowTime=p,this._timestampProvider=u,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=p===1/0,this._bufferSize=Math.max(1,d),this._windowTime=Math.max(1,p)}next(d){const{isStopped:p,_buffer:u,_infiniteTimeWindow:a,_timestampProvider:r,_windowTime:c}=this;p||(u.push(d),!a&&u.push(r.now()+c)),this._trimBuffer(),super.next(d)}_subscribe(d){this._throwIfClosed(),this._trimBuffer();const p=this._innerSubscribe(d),{_infiniteTimeWindow:u,_buffer:a}=this,r=a.slice();for(let c=0;c<r.length&&!d.closed;c+=u?1:2)d.next(r[c]);return this._checkFinalizedStatuses(d),p}_trimBuffer(){const{_bufferSize:d,_timestampProvider:p,_buffer:u,_infiniteTimeWindow:a}=this,r=(a?1:2)*d;if(d<1/0&&r<u.length&&u.splice(0,u.length-r),!a){const c=p.now();let e=0;for(let l=1;l<u.length&&u[l]<=c;l+=2)e=l;e&&u.splice(0,e+1)}}}}}]);