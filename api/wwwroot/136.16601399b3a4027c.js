"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[136],{3574:(x,R,l)=>{l.d(R,{C:()=>M});var t=l(7328),c=l(2096),f=l(7398),O=l(5516),p=l(3976),h=l(5879),C=l(9862);let M=(()=>{class g{constructor(i){this.http=i,this.apiUrl=O.N.apiUrl,this.currentUserSource=new t.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"}]}getHistories(i){const _=this.cache.get(Object.values(i).join("-"));if(_)return(0,c.of)(_);let u=(0,p.qb)(i);return(0,p.Tr)(this.apiUrl+"userHistory/pagedlist",u,this.http).pipe((0,f.U)(d=>(this.cache.set(Object.values(i).join("-"),d),d)))}getCallRecordWithItems(i,_,u,d){return this.http.get(this.apiUrl+"CallRecord/callRecordWithItems/"+i+"/"+_+"/"+u+"/"+d)}getCallRecordStatus(){return this.callRecordStatus}updateHistoryItem(i){return this.http.post(this.apiUrl+"userHistory/userhistoryitem",i)}setParams(i){this.hParams=i}getParams(){return this.hParams}updateCallRecord(i){return this.http.put(this.apiUrl+"CallRecord",i)}updateCallRecordObject(i){return this.http.put(this.apiUrl+"CallRecord/UpdateNewItem",i)}deleteHistory(i){return this.http.delete(this.apiUrl+"userHistory/"+i)}deleteHistoryItem(i){return this.http.delete(this.apiUrl+"userHistory/historyItemId/"+i)}getCallRecordFromPhoneNo(i){return this.http.get(this.apiUrl+"callRecord/callRecordFromPhoneNo/"+i)}static#t=this.\u0275fac=function(_){return new(_||g)(h.LFG(C.eN))};static#e=this.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},1986:(x,R,l)=>{l.d(R,{Y:()=>n});var t=l(5879),c=l(2181),f=l(4664),O=l(6306),p=l(2096),h=l(2051),C=l(7411),M=l(3574),g=l(8763),v=l(6814),i=l(3593),_=l(6223),u=l(4807);const d=function(){return{dateInputFormat:"YYYY-MM-DD"}};function b(e,m){if(1&e){const o=t.EpF();t.TgZ(0,"div",5)(1,"label",6),t._uU(2,"Person Name"),t.qZA(),t.TgZ(3,"label",6),t._uU(4),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"label",6),t._uU(7,"Regd On"),t.qZA(),t.TgZ(8,"label",7),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"label",8),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"ng-select",9),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].contactResult=s)}),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"label",10),t._uU(16,"Phone No"),t.qZA(),t.TgZ(17,"input",11),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].phoneNo=s)}),t.qZA(),t.TgZ(18,"label",8),t._uU(19,"Email"),t.qZA(),t.TgZ(20,"input",12),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].email=s)}),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"label",13),t._uU(23,"Contact On"),t.qZA(),t.TgZ(24,"input",14),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].dateOfContact=s)}),t.qZA(),t.TgZ(25,"label",8),t._uU(26,"Incoming/Outgoing"),t.qZA(),t.TgZ(27,"input",15),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].incomingOutgoing=s)}),t.qZA(),t._uU(28," In "),t.TgZ(29,"input",16),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].incomingOutgoing=s)}),t.qZA(),t._uU(30,"Out "),t.TgZ(31,"input",17),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].incomingOutgoing=s)}),t.qZA(),t._uU(32,"Both "),t._UZ(33,"br"),t.TgZ(34,"label",13),t._uU(35,"Summary of discussion"),t.qZA(),t.TgZ(36,"textarea",18),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].gistOfDiscussions=s)}),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"label",19),t._uU(39,"Send Advisory By"),t.qZA(),t.TgZ(40,"input",20),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].advisoryBy=s)}),t.qZA(),t._uU(41,"Email "),t.TgZ(42,"input",21),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].advisoryBy=s)}),t.qZA(),t._uU(43,"SMS "),t.TgZ(44,"input",22),t.NdJ("ngModelChange",function(s){t.CHM(o);const a=t.oxw();return t.KtG(a.callRecord.callRecordItems[0].advisoryBy=s)}),t.qZA(),t._uU(45,"Both "),t.qZA()}if(2&e){const o=t.oxw();t.xp6(4),t.Oqu(o.callRecord.personName),t.xp6(5),t.Oqu(t.xi3(10,16,o.dateRegistered,"dd-MMM-yy")),t.xp6(4),t.Q6J("items",o.contactResults)("ngModel",o.callRecord.callRecordItems[0].contactResult),t.xp6(4),t.Q6J("ngModel",o.callRecord.callRecordItems[0].phoneNo),t.xp6(3),t.Q6J("ngModel",o.callRecord.callRecordItems[0].email),t.xp6(4),t.Q6J("ngModel",o.callRecord.callRecordItems[0].dateOfContact)("bsValue",o.bsValueDate)("bsConfig",t.DdM(19,d)),t.xp6(3),t.Q6J("ngModel",o.callRecord.callRecordItems[0].incomingOutgoing),t.xp6(2),t.Q6J("ngModel",o.callRecord.callRecordItems[0].incomingOutgoing),t.xp6(2),t.Q6J("ngModel",o.callRecord.callRecordItems[0].incomingOutgoing),t.xp6(5),t.Q6J("ngModel",o.callRecord.callRecordItems[0].gistOfDiscussions),t.xp6(4),t.Q6J("ngModel",o.callRecord.callRecordItems[0].advisoryBy),t.xp6(2),t.Q6J("ngModel",o.callRecord.callRecordItems[0].advisoryBy),t.xp6(2),t.Q6J("ngModel",o.callRecord.callRecordItems[0].advisoryBy)}}let n=(()=>{class e{constructor(o,r,s,a){this.bsModalRef=o,this.confirm=r,this.service=s,this.toastr=a,this.callRecordAddEvent=new t.vpe,this.contactResult="",this.dateRegistered=new Date,this.contactResults=[],this.bsValueDate=new Date,this.bsValue=new Date}ngOnInit(){this.callRecord&&(this.callRecord.callRecordItems[0].dateOfContact=new Date)}updateClicked(){const r=this.service.updateCallRecord(this.callRecord);this.confirm.confirm("confirm Update","confirm update this Call Record. ").pipe((0,c.h)(a=>a),(0,f.w)(a=>r),(0,O.K)(a=>(this.toastr.error(a,"Error in updating the record"),(0,p.of)()))).subscribe(a=>{a?(this.callRecordAddEvent.emit(a),this.bsModalRef.hide()):this.toastr.warning("Failed to update the Call Record")})}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(h.UZ),t.Y36(C.z),t.Y36(M.C),t.Y36(g._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-call-record-add-modal"]],outputs:{callRecordAddEvent:"callRecordAddEvent"},decls:6,vars:1,consts:[[1,"modal-header"],[2,"display","inline-block"],["title","update the Call Record",1,"lbl","w35","btn","btn-success","fa","fa-check",2,"margin-left","400px !important",3,"click"],["title","Close",1,"lbl","btn","fa","fa-close","pull-right",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"lbl","mL2mR2","w125"],[1,"stdd","mL2mR2","w125"],[1,"lbl","mL10mR2","w150"],["bindLabel","status","bindValue","status","labelForId","status",1,"stdd","w200",2,"height","fit-content","border-color","black",3,"items","ngModel","ngModelChange"],["mL2mR2","",1,"lbl","w125"],["type","text",1,"stdd","mL2mR2","w125",3,"ngModel","ngModelChange"],["type","text",1,"stdd","w200",3,"ngModel","ngModelChange"],[1,"lbl","w125"],["type","text","placeholder","Contacted On","name","dateOfContact","bsDatepicker","",1,"stdd","w125",3,"ngModel","bsValue","bsConfig","ngModelChange"],["type","radio","name","inout","id","inout","value","in",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"],["type","radio","name","inout","id","inout","value","out",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"],["type","radio","name","inout","id","inout","value","both",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"],["name","disc","id","disc","cols","80","rows","2",1,"stdd",3,"ngModel","ngModelChange"],["title","sends an email or sms to the party, confirming this conversation, by mail or sms",1,"lbl","w125"],["type","radio","name","advisoryBy","id","advisoryBy","value","email",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"],["type","radio","name","advisoryBy","id","advisoryBy","value","sms",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"],["type","radio","name","advisoryBy","id","advisoryBy","value","both",1,"stdd","w35",2,"vertical-align","middle !important",3,"ngModel","ngModelChange"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"h6",1),t._uU(2,"Add a new Transaction for Call Record Item"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return s.updateClicked()}),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return s.bsModalRef.hide()}),t.qZA()(),t.YNc(5,b,46,20,"div",4)),2&r&&(t.xp6(5),t.Q6J("ngIf",void 0!==s.callRecord))},dependencies:[v.O5,i.Np,i.Y5,_.Fj,_._,_.JJ,_.On,u.w9,v.uU],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;vertical-align:middle;word-wrap:normal;margin-top:5px;margin-bottom:5px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;vertical-align:top;word-wrap:normal;margin-top:5px;margin-bottom:5px}.mL2mR2[_ngcontent-%COMP%]{margin-left:2px;margin-right:2px}.mL10mR2[_ngcontent-%COMP%]{margin-left:10px;margin-right:2px}.w35[_ngcontent-%COMP%]{width:35px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return e})()},369:(x,R,l)=>{l.d(R,{h:()=>u});var t=l(5879),c=l(6223),f=l(2051),O=l(8763),p=l(7411),h=l(3574),C=l(6814),M=l(3593),g=l(4807);const v=function(){return{dateInputFormat:"YYYY-MM-DD"}};function i(d,b){if(1&d){const n=t.EpF();t.TgZ(0,"div")(1,"div",20),t._UZ(2,"input",21)(3,"input",22)(4,"ng-select",23)(5,"input",24)(6,"textarea",25)(7,"ng-select",26)(8,"input",27),t.TgZ(9,"button",28),t.NdJ("click",function(){const o=t.CHM(n).index,r=t.oxw(2);return t.KtG(r.removeDepItem(o))}),t.qZA()()()}if(2&d){const n=b.index,e=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",n),t.xp6(1),t.Q6J("bsValue",e.bsValueDate)("bsConfig",t.DdM(7,v)),t.xp6(2),t.Q6J("items",e.contactResults),t.xp6(3),t.Q6J("items",e.contactResults),t.xp6(1),t.Q6J("bsValue",e.bsValueDate)("bsConfig",t.DdM(8,v))}}function _(d,b){if(1&d){const n=t.EpF();t.TgZ(0,"div")(1,"form",6)(2,"label",7),t._uU(3,"Name of the Person:"),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.qZA(),t.TgZ(6,"label",9),t._uU(7,"CategoryRef:"),t.qZA(),t.TgZ(8,"div",8),t._uU(9),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"label",7),t._uU(12,"Subject:"),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"label",9),t._uU(16,"Status:"),t.qZA(),t.TgZ(17,"div",10),t._uU(18),t.qZA(),t._UZ(19,"hr",11),t.TgZ(20,"label",12),t._uU(21,"Date"),t.qZA(),t.TgZ(22,"label",13),t._uU(23,"In/"),t._UZ(24,"br"),t._uU(25,"Out"),t.qZA(),t.TgZ(26,"label",14),t._uU(27,"Result"),t.qZA(),t.TgZ(28,"label",12),t._uU(29,"Phone"),t.qZA(),t.TgZ(30,"label",14),t._uU(31,"Gist of discussions"),t.qZA(),t.TgZ(32,"label",14),t._uU(33,"Next action"),t.qZA(),t.TgZ(34,"label",15),t._uU(35,"On"),t.qZA(),t.TgZ(36,"button",16),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.addCallRecordItem())}),t.qZA(),t._UZ(37,"hr",17),t.TgZ(38,"div",18),t.YNc(39,i,10,9,"div",19),t.qZA()()()}if(2&d){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(n.callRecord.personName),t.xp6(4),t.Oqu(n.callRecord.categoryRef),t.xp6(5),t.Oqu(n.callRecord.subject),t.xp6(4),t.Oqu(n.callRecord.status),t.xp6(21),t.Q6J("ngForOf",n.callRecordItems.controls)}}let u=(()=>{class d{constructor(n,e,m,o,r){this.bsModalRef=n,this.toastr=e,this.fb=m,this.confirm=o,this.service=r,this.updateCallRecordEvent=new t.vpe,this.candidatName="",this.bsValueDate=new Date,this.bsValue=new Date,this.form=new c.cw({}),this.contactResults=[],this.advisoriesBy=[{status:"Mail"},{status:"SMS"},{status:"Both"}],this.inOutList=[{status:"In"},{status:"Out"}],this.contactResults=this.service.getCallRecordStatus()}ngOnInit(){this.callRecord&&this.InitializeForm(this.callRecord)}InitializeForm(n){this.form=this.fb.group({id:n.id,categoryRef:n.categoryRef,personId:n.personId,personName:n.personName,personType:n.personType,username:n.username,status:n.status,statusDate:n.statusDate,email:n.Email,phoneNo:n.phoneNo,subject:n.subject,concludedOn:n.concludedOn,callRecordItems:this.fb.array(n.callRecordItems.map(e=>this.fb.group({id:e.id,callRecordId:e.callRecordId,incomingOutgoing:e.incomingOutgoing,dateOfContact:e.dateOfContact,username:e.username,phoneNo:e.phoneNo,contactResult:e.contactResult,gistOfDiscussions:e.gistOfDiscussions,nextAction:e.nextAction,nextActionOn:e.nextActionOn,email:e.email,advisoryBy:e.advisoryBy,composeSMS:e.advisoryBy})))})}get callRecordItems(){return this.form.get("callRecordItems")}newCallRecordItem(){var n=this.callRecordItems.at(this.callRecordItems.length-1);return this.fb.group({id:0,callRecordId:this.callRecord?.id,incomingOutgoing:"out",dateOfContact:new Date,username:this.user?.userName??"",contactResult:"",gistOfDiscussions:"",advoryBy:"mail",nextAction:"",nextActionOn:new Date,phoneNo:n.get("phoneNo")?.value,email:n.get("email")?.value})}addCallRecordItem(){this.callRecordItems.push(this.newCallRecordItem())}removeDepItem(n){this.confirm.confirm("Confirm Delete","This will also delete the selected Call Record Item. If you confirm to delete, remember to save this transaction").subscribe({next:e=>{e&&this.callRecordItems.removeAt(n)}})}updateCallRecord(){this.service.updateCallRecord(this.form.value).subscribe({next:e=>{this.updateCallRecordEvent.emit(e),e&&this.bsModalRef.hide()}})}close(){this.bsModalRef.hide()}static#t=this.\u0275fac=function(e){return new(e||d)(t.Y36(f.UZ),t.Y36(O._W),t.Y36(c.qu),t.Y36(p.z),t.Y36(h.C))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-call-records-edit-modal"]],outputs:{updateCallRecordEvent:"updateCallRecordEvent"},decls:8,vars:1,consts:[[1,"modal-header","my-0"],[1,"btn","btn-success","w35","fa","fa-save",2,"margin-left","400px",3,"click"],[1,"btn","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"modal-body","my-0"],[4,"ngIf"],[1,"modal-footer"],[3,"formGroup"],[1,"lbl","w150"],[1,"stdd","w150"],[1,"lbl","w125","mL15"],[1,"stdd","w100"],[1,"my-1"],[1,"lbl","w80"],[1,"lbl","w30"],[1,"lbl","w125"],[1,"lbl","w100"],[1,"btn","w25","fa","fa-plus",3,"click"],[1,"my-0"],["formArrayName","callRecordItems"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","placeholder","Date","formControlName","dateOfContact","bsDatepicker","",1,"stdd","w80",3,"bsValue","bsConfig"],["type","text","formControlName","incomingOutgoing",1,"stdd","fSmaller","w30"],["bindLabel","status","bindValue","status","labelForId","status","formControlName","contactResult",1,"select","w125",2,"border-color","black",3,"items"],["type","text","formControlName","phoneNo",1,"stdd","fSmaller","w80"],["formControlName","gistOfDiscussions","cols","15","rows","2",1,"stdd","fSmaller"],["bindLabel","status","bindValue","status","labelForId","status","formControlName","nextAction",1,"select","w125",2,"border-color","black",3,"items"],["type","text","placeholder","Date","formControlName","nextActionOn","bsDatepicker","",1,"stdd","w75",3,"bsValue","bsConfig"],[1,"btn","w25","fa","fa-trash","fa-sm","red",3,"click"]],template:function(e,m){1&e&&(t.TgZ(0,"div",0)(1,"h6"),t._uU(2,"Edit Call Record"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return m.updateCallRecord()}),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return m.close()}),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,_,40,6,"div",4),t.qZA(),t._UZ(7,"div",5)),2&e&&(t.xp6(6),t.Q6J("ngIf",m.callRecord))},dependencies:[C.sg,C.O5,M.Np,M.Y5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,g.w9],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;vertical-align:top;font-size:smaller}.select[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;vertical-align:top;font-size:x-small;font-weight:700}.stddY0[_ngcontent-%COMP%]{display:inline-block;margin:0 1px 0 2px;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-weight:700;vertical-align:top;font-size:smaller}.mL15[_ngcontent-%COMP%]{margin-left:15px!important}.mL40[_ngcontent-%COMP%]{margin-left:40px!important}.mL110[_ngcontent-%COMP%]{margin-left:110px!important}.mL460[_ngcontent-%COMP%]{margin-left:460px!important}.fSmallest[_ngcontent-%COMP%]{font-size:xx-small;font-weight:700}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.red[_ngcontent-%COMP%]{color:red}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w80[_ngcontent-%COMP%]{width:80px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w140[_ngcontent-%COMP%]{width:140px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}  .ng-select .ng-select-container,   .ng-select.ng-select-single .ng-select-container{min-height:25px;font-size:.8em;font-weight:400;width:auto!important}"]})}return d})()}}]);