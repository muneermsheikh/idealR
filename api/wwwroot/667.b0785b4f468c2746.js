"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[667],{3237:(T,g,d)=>{d.d(g,{T:()=>p});class p{constructor(){this.venue="Mumbai",this.address="B-8, Everest Building, 3rd floor",this.address2="Tardeo Road, Tardeo",this.city="Mumbai 400034",this.siteRepName="Sanjay Patil",this.sitePhoneNo="9892337301"}}},109:(T,g,d)=>{d.d(g,{l:()=>p});class p{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},6316:(T,g,d)=>{d.d(g,{e:()=>p});class p{constructor(){this.id=0,this.orderNo=0,this.orderId=0,this.customerId=0,this.customerNameLike="",this.interviewVenue="",this.categoryId=0,this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}},7440:(T,g,d)=>{d.d(g,{S:()=>m});var p=d(2771),I=d(7673),k=d(6354),S=d(3587),x=d(6220),e=d(7705),w=d(1626);let m=(()=>{class b{constructor(h){this.http=h,this.apiUrl=S.c.apiUrl,this.currentUserSource=new p.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"},{status:"Declined - other reasons"}]}getHistories(h){const l=this.cache.get(Object.values(h).join("-"));if(l)return(0,I.of)(l);let c=(0,x.Xn)(h);return(0,x.f8)(this.apiUrl+"userHistory/pagedlist",c,this.http).pipe((0,k.T)(y=>(this.cache.set(Object.values(h).join("-"),y),y)))}getCallRecordReport(h){let l=(0,x.Xn)(h);return this.http.get(this.apiUrl+"CallRecord/report",{params:l})}getCallRecordWithItems(h,l){return this.http.get(this.apiUrl+"CallRecord/callRecordWithItems/"+h+"/"+l)}getCallRecordStatus(){return this.callRecordStatus}updateHistoryItem(h){return this.http.post(this.apiUrl+"userHistory/userhistoryitem",h)}insertNewCallRecordItem(h){return this.http.post(this.apiUrl+"CallRecord/CallRecorditem",h)}setParams(h){this.hParams=h}getParams(){return this.hParams}updateCallRecord(h){return this.http.put(this.apiUrl+"CallRecord",h)}updateCallRecordObject(h){return this.http.put(this.apiUrl+"CallRecord/UpdateNewItem",h)}updateCallRecordItem(h){return console.log("updatecallrecorditem, model"),this.http.put(this.apiUrl+"CallRecord/InsertCallRecordItem",h)}deleteHistory(h){return this.http.delete(this.apiUrl+"userHistory/"+h)}deleteHistoryItem(h){return this.http.delete(this.apiUrl+"userHistory/historyItemId/"+h)}getCallRecordFromPhoneNo(h){return this.http.get(this.apiUrl+"callRecord/callRecordFromPhoneNo/"+h)}getCallRecordsOfACandidate(h,l){return this.http.get(this.apiUrl+"callRecord/CallRecordSummary/"+h+"/"+l)}static#e=this.\u0275fac=function(l){return new(l||b)(e.KVO(w.Qq))};static#t=this.\u0275prov=e.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})()},778:(T,g,d)=>{d.d(g,{G:()=>w});var p=d(7705),I=d(779);let k=(()=>{class m{constructor(v){this.bsModalRef=v,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(h){return new(h||m)(p.rXU(I.Y$))};static#t=this.\u0275cmp=p.VBU({type:m,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(h,l){1&h&&(p.j41(0,"div",0)(1,"h4",1),p.EFF(2),p.k0s()(),p.j41(3,"div",2)(4,"p"),p.EFF(5),p.k0s()(),p.j41(6,"div",3)(7,"button",4),p.bIt("click",function(){return l.confirm()}),p.EFF(8),p.k0s(),p.j41(9,"button",5),p.bIt("click",function(){return l.decline()}),p.EFF(10),p.k0s()()),2&h&&(p.R7$(2),p.JRh(l.title),p.R7$(3),p.JRh(l.message),p.R7$(3),p.JRh(l.btnOkText),p.R7$(2),p.JRh(l.btnCancelText))}})}return m})();var S=d(6354),x=d(3587),e=d(1626);let w=(()=>{class m{constructor(v,h){this.modalService=v,this.http=h,this.baseUrl=x.c.apiUrl}confirm(v="Confirmation",h="Are you sure you want to do this?",l="Ok",c="Cancel"){return this.bsModelRef=this.modalService.show(k,{initialState:{title:v,message:h,btnOkText:l,btnCancelText:c}}),this.bsModelRef.onHidden.pipe((0,S.T)(()=>this.bsModelRef.content.result))}getHelp(v){return this.http.get(this.baseUrl+"Help/help/"+v)}static#e=this.\u0275fac=function(h){return new(h||m)(p.KVO(I.I8),p.KVO(e.Qq))};static#t=this.\u0275prov=p.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},8028:(T,g,d)=>{d.d(g,{y:()=>l});var p=d(2771),I=d(6697),k=d(7673),S=d(6354),x=d(3587),e=d(109),w=d(6220),m=d(7705),b=d(5743),v=d(1822),h=d(1626);let l=(()=>{class c{constructor(u,j,E){this.activatedRoute=u,this.accountService=j,this.http=E,this.apiUrl=x.c.apiUrl,this.currentUserSource=new p.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new e.l,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,I.s)(1)).subscribe(A=>this.user=A)}referCVs(u){return this.http.post(this.apiUrl+"CVRef",u)}referredCVsPaginated(u=!1){if(u){const E=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(E)return(0,k.of)(E)}else this.cacheReferred=new Map;let j=(0,w.vn)(this.cvRefParams);return(0,w.f8)(this.apiUrl+"cvref/cvsreferred",j,this.http).pipe((0,S.T)(E=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),E),E)))}deleteCVRef(u){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+u)}getCVRefWithDeploys(u){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+u)}getCVRefWithCVRefId(u){return this.http.get(this.apiUrl+"CVRef/cvref/"+u)}registerSelectionDecisions(u){return this.http.post(this.apiUrl+"Selection",u)}getCVReferredOrderNosDto(u){return this.http.get(this.apiUrl+"CVRef/headers/"+u)}downloadCV(u){return this.http.get(this.apiUrl+"FileUpload/downloadcv/"+u,{reportProgress:!0,responseType:"blob"})}setParams(u){this.cvRefParams=u}getParams(){return this.cvRefParams}static#e=this.\u0275fac=function(j){return new(j||c)(m.KVO(b.nX),m.KVO(v.D),m.KVO(h.Qq))};static#t=this.\u0275prov=m.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},3281:(T,g,d)=>{d.d(g,{P:()=>b});var p=d(1626),I=d(7673),k=d(6354),S=d(3587),x=d(6316),e=d(6220),w=d(3237),m=d(7705);let b=(()=>{class v{constructor(l){this.http=l,this.apiUrl=S.c.apiUrl,this.iParams=new x.e,this.cache=new Map}getInterviewsPaged(l=!0){var c=this.iParams;if(this.cache.size>0||!l){const u=this.cache.get(Object.values(c).join("-"));if(u)return(0,I.of)(u)}let y=(0,e.CG)(c);return(0,e.f8)(this.apiUrl+"interview/pagedlist",y,this.http).pipe((0,k.T)(u=>(this.cache.set(Object.values(c).join("-"),u),u)))}getDefaultInterviewAddress(){return new w.T}getOrGenerateinterview(l){return this.http.get(this.apiUrl+"interview/getorgenerate/"+l)}getOrGenerateinterviewnew(l){return this.http.get(this.apiUrl+"interview/getorgeneratenew/"+l)}getOrGenerateinterviewschedule(l){return this.http.get(this.apiUrl+"interview/getorgenerateschedule/"+l)}getInterviewWithItemsById(l){return this.http.get(this.apiUrl+"interview/interviewById/"+l)}saveNewInterview(l){return this.http.post(this.apiUrl+"interview/savenew",l)}updateInterviewHeader(l){return this.http.put(this.apiUrl+"interview/interviewheader",l)}updateInterview(l){return this.http.put(this.apiUrl+"interview/Intervw",l)}updateInterviewItem(l){return this.http.put(this.apiUrl+"interview/intervwitem",l)}editOrInsertInterviewItemWithFile(l){return this.http.post(this.apiUrl+"FileUpload/interviewitem",l)}insertInterviewItem(l){return this.http.post(this.apiUrl+"interview/intervwitem",l)}insertInterviewItemWithFile(l){return this.http.post(this.apiUrl+"interview/intervwitemwithfiles",l)}downloadInterviewerCommentFile(l){let c=new p.Nl;return c=c.append("fullpath",l),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:c,responseType:"blob"})}deleteInterview(l){return this.http.delete(this.apiUrl+"interview/interview/"+l)}deleteInterviewItem(l){return this.http.delete(this.apiUrl+"interview/deleteinterviewItem/"+l)}deleteInterviewItemCandidate(l){return this.http.delete(this.apiUrl+"interview/deleteinterviewitemcandidate/"+l)}getInterviewItemCatAndCandidates(l){return this.http.get(this.apiUrl+"interview/catandcandidates/"+l)}getMatchingCandidates(l){return this.http.get(this.apiUrl+"users/candidatesmatchingprof/"+l)}getInterviewItemsMatchingCategory(l){return this.http.get(this.apiUrl+"interview/interviewCategoryMatching/"+l.flat())}insertInterviewItemCandidate(l){return console.log("insert interview item cndidate",l),this.http.put(this.apiUrl+"Interview/addCandidateToInterviewItem",l)}getParams(){return this.iParams}setParams(l){this.iParams=l}static#e=this.\u0275fac=function(c){return new(c||v)(m.KVO(p.Qq))};static#t=this.\u0275prov=m.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},5667:(T,g,d)=>{d.r(g),d.d(g,{InterviewModule:()=>nt});var p=d(177),I=d(9485),k=d(6316),S=d(5964),x=d(5558),e=d(7705),w=d(3281),m=d(5743),b=d(8256),v=d(779),h=d(778),l=d(3400),c=d(9417),y=d(9213);function u(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",1),e.EFF(2),e.k0s(),e.j41(3,"div",1),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"div",2),e.EFF(7),e.k0s(),e.j41(8,"div",2),e.EFF(9),e.k0s(),e.j41(10,"div",1),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",1),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"div",1),e.EFF(17),e.k0s(),e.j41(18,"button",3),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.editClicked())}),e.j41(19,"mat-icon"),e.EFF(20,"edit"),e.k0s()(),e.j41(21,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.attendanceClicked())}),e.j41(22,"mat-icon"),e.EFF(23,"settings_input_component"),e.k0s()(),e.j41(24,"button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteClicked())}),e.j41(25,"mat-icon"),e.EFF(26,"delete"),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.JRh(t.interview.orderNo),e.R7$(2),e.JRh(e.i5U(5,7,t.interview.orderDate,"ddMMMyy")),e.R7$(3),e.JRh(t.interview.customerName),e.R7$(2),e.JRh(t.interview.interviewVenues),e.R7$(2),e.JRh(e.i5U(12,10,t.interview.interviewDateFrom,"dd-MMM")),e.R7$(3),e.JRh(e.i5U(15,13,t.interview.interviewDateUpto,"dd-MMM")),e.R7$(3),e.JRh(t.interview.interviewStatus)}}let j=(()=>{class r{constructor(t,i){this.service=t,this.toastr=i,this.deleteEvent=new e.bkB,this.editEvent=new e.bkB,this.attendanceEvent=new e.bkB}editClicked(){this.editEvent.emit(this.interview?.orderNo)}deleteClicked(){this.deleteEvent.emit(this.interview.id)}attendanceClicked(){this.attendanceEvent.emit(this.interview?.id)}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(w.P),e.rXU(b.tw))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-interview-line"]],inputs:{interview:"interview"},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent",attendanceEvent:"attendanceEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","w100"],[1,"stdd","w200"],["title","edit this interview schedule",1,"btn",3,"click"],["title","display attendance for this interview",1,"btn",3,"click"],["title","delete this interview",1,"btn","red",3,"click"]],template:function(i,n){1&i&&e.DNE(0,u,27,16,"div",0),2&i&&e.Y8G("ngIf",n.interview)},dependencies:[p.bT,y.An,p.vh],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:top;word-wrap:break-word}.red[_ngcontent-%COMP%]{color:red}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:middle;margin:0 2px}"]})}return r})();const E=["search"];function A(r,o){if(1&r){const t=e.RV6();e.j41(0,"pagination",10),e.bIt("pageChanged",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChanged(n))}),e.EFF(1,"\n>"),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Z(r,o){1&r&&(e.j41(0,"div",11),e.EFF(1," No interview schedule on record\n"),e.k0s())}function q(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"app-interview-line",12),e.bIt("editEvent",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interviewEdit(n))})("deleteEvent",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interviewDelete(n))})("attendanceEvent",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.attendance(n))}),e.k0s()()}if(2&r){const t=o.$implicit;e.R7$(1),e.Y8G("interview",t)}}let ee=(()=>{class r{constructor(t,i,n,a,s,f){this.service=t,this.activatedRoute=i,this.toastr=n,this.modalService=a,this.router=s,this.confirm=f,this.interviews=[],this.iParams=new k.e,this.orderNoToGet=0,this.totalCount=0}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.interviews=t.interviews.result,this.pagination=t.interviews.pagination,this.totalCount=t.interviews.totalCount})}getInterviewsPaged(t){this.service.setParams(this.iParams),this.service.getInterviewsPaged(t).subscribe({next:i=>{this.interviews=i.result,this.pagination=i.pagination,this.totalCount=i.totalCount}})}interviewEdit(t){this.router.navigateByUrl("/interviews/editintervw/"+t)}attendance(t){this.router.navigateByUrl("/interviews/attendance/"+t)}interviewDelete(t){var i=t;console.log("interview id:",i);const a=this.service.deleteInterview(i);this.confirm.confirm("confirm Delete","confirm delete this Interview. WARNING: If there are more than one venues for this interview, then only the interview for the venue selected will be deleted.  This cannot be undone").pipe((0,S.p)(f=>f),(0,x.n)(()=>a)).subscribe(f=>{if(f){this.toastr.success("Interview deleted","deletion successful");var C=this.interviews.findIndex(M=>M.id===i);-1!==C&&this.interviews.splice(C,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}onPageChanged(t){const i=this.service.getParams()??new k.e;i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setParams(i),this.getInterviewsPaged(!0))}onSearch(){const t=this.service.getParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getInterviewsPaged(!1)}onReset(){this.searchTerm.nativeElement.value="";const t=this.service.getParams();this.service.setParams(t),this.getInterviewsPaged(!1)}getInterviewR(){0!==this.orderNoToGet?this.router.navigateByUrl("/interviews/editintervw/"+this.orderNoToGet):this.toastr.warning("No Order No provided","Invalid Order No")}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(w.P),e.rXU(m.nX),e.rXU(b.tw),e.rXU(v.I8),e.rXU(m.Ix),e.rXU(h.G))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-interview-list"]],viewQuery:function(i,n){if(1&i&&e.GBs(E,5),2&i){let a;e.mGM(a=e.lsd())&&(n.searchTerm=a.first)}},decls:30,vars:4,consts:[["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"stdd",2,"width","250px","margin-left","30px","text-align","right"],["type","text","title","enter order number to get the interview data",1,"stdd","form-control","w100",2,"margin-left","20px",3,"ngModel","ngModelChange"],["type","button","title","searches for the interview",1,"btn",3,"click"],["type","button",1,"btn",3,"click"],["type","button","routerLink","/",1,"btn"],[1,"lbl","w100"],[1,"lbl","w200"],["class","my-2",4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[3,"interview","editEvent","deleteEvent","attendanceEvent"]],template:function(i,n){1&i&&(e.DNE(0,A,2,3,"pagination",0),e.j41(1,"label",1),e.EFF(2,"Enter Order No to generate new schedule"),e.k0s(),e.j41(3,"input",2),e.bIt("ngModelChange",function(s){return n.orderNoToGet=s}),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return n.getInterviewR()}),e.j41(5,"mat-icon"),e.EFF(6,"search"),e.k0s()(),e.j41(7,"button",4),e.bIt("click",function(){return n.onReset()}),e.j41(8,"mat-icon"),e.EFF(9,"refresh"),e.k0s()(),e.j41(10,"button",5)(11,"mat-icon"),e.EFF(12,"cancel"),e.k0s()(),e.nrm(13,"br"),e.j41(14,"label",6),e.EFF(15,"Order No"),e.k0s(),e.j41(16,"label",6),e.EFF(17,"Dated"),e.k0s(),e.j41(18,"label",7),e.EFF(19,"Customer"),e.k0s(),e.j41(20,"label",7),e.EFF(21,"Interview Venues"),e.k0s(),e.j41(22,"label",6),e.EFF(23,"Date From"),e.k0s(),e.j41(24,"label",6),e.EFF(25,"Date Upto"),e.k0s(),e.j41(26,"label",6),e.EFF(27,"Interview Status"),e.k0s(),e.DNE(28,Z,2,0,"div",8),e.DNE(29,q,2,1,"div",9)),2&i&&(e.Y8G("ngIf",void 0!==n.pagination),e.R7$(3),e.Y8G("ngModel",n.orderNoToGet),e.R7$(25),e.Y8G("ngIf",0===n.interviews.length),e.R7$(1),e.Y8G("ngForOf",n.interviews))},dependencies:[p.Sq,p.bT,l.eK,c.me,c.BC,c.vS,m.Wk,y.An,j],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle}.stddML60[_ngcontent-%COMP%]   .stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 30px;font-size:small;vertical-align:middle}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:middle;font-weight:700}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:middle;font-size:small;margin:0 2px}"]})}return r})();var P=d(9375),te=d(3237);function ie(r,o){1&r&&(e.j41(0,"div")(1,"label",9),e.EFF(2,"Choose"),e.k0s(),e.j41(3,"label",10),e.EFF(4,"App No"),e.k0s(),e.j41(5,"label",10),e.EFF(6,"Source"),e.k0s(),e.j41(7,"label",11),e.EFF(8,"Candidate Name"),e.k0s(),e.j41(9,"label",12),e.EFF(10,"City"),e.k0s(),e.j41(11,"label",12),e.EFF(12,"Mobile No"),e.k0s(),e.j41(13,"label",11),e.EFF(14,"Profession"),e.k0s()())}function ne(r,o){1&r&&(e.j41(0,"div"),e.EFF(1," No CVs found with desired Profession "),e.k0s())}function re(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"input",13),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.checked=n)})("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.SelectCVs(a))}),e.k0s(),e.j41(2,"div",14),e.EFF(3),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s(),e.j41(6,"div",16),e.EFF(7),e.k0s(),e.j41(8,"div",15),e.EFF(9),e.k0s(),e.j41(10,"div",15),e.EFF(11),e.k0s(),e.j41(12,"div",16),e.EFF(13),e.k0s()()}if(2&r){const t=o.$implicit;e.R7$(1),e.Y8G("ngModel",t.checked),e.R7$(2),e.JRh(t.applicationNo>0?t.applicationNo:"-"),e.R7$(2),e.JRh(t.source),e.R7$(2),e.JRh(t.fullName),e.R7$(2),e.JRh(t.city),e.R7$(2),e.JRh(t.mobileNo),e.R7$(2),e.JRh(t.professionName)}}let ae=(()=>{class r{constructor(t,i){this.service=t,this.bsModalRef=i,this.emittedEvent=new e.bkB,this.professionid=0,this.cvs=[],this.cvsSelected=[]}ngOnInit(){}SelectCVs(t){if(t.checked){var i=this.cvsSelected.findIndex(n=>n.candidateId===t.candidateId);-1!==i&&this.cvsSelected.splice(i,1)}else this.cvsSelected.push(t)}emitCVs(){this.cvsSelected.length>0&&(this.emittedEvent.emit(this.cvsSelected),this.bsModalRef.hide())}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(w.P),e.rXU(v.Y$))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-candidates-available-modal"]],inputs:{cvs:"cvs"},outputs:{emittedEvent:"emittedEvent"},decls:12,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn","btn-success","fa","fa-check",2,"margin-left","50px",3,"click"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"lbl","w55"],[1,"lbl","w75"],[1,"lbl","w150"],[1,"lbl","w100"],["type","checkbox",1,"form-check-input","hAlignCenter",2,"width","20px","margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w75",2,"text-align","center"],[1,"stdd","w100"],[1,"stdd","w150"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2,"Select Candidates"),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return n.emitCVs()}),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return n.bsModalRef.hide()}),e.j41(5,"span",4),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",5),e.DNE(8,ie,15,0,"div",6),e.DNE(9,ne,2,0,"div",6),e.DNE(10,re,14,7,"div",7),e.k0s(),e.nrm(11,"div",8)),2&i&&(e.R7$(8),e.Y8G("ngIf",n.cvs),e.R7$(1),e.Y8G("ngIf",0===n.cvs.length),e.R7$(1),e.Y8G("ngForOf",n.cvs))},dependencies:[p.Sq,p.bT,c.Zm,c.BC,c.vS],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;word-wrap:break-word;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.w15[_ngcontent-%COMP%]{width:15px}.w20[_ngcontent-%COMP%]{width:20px}.w55[_ngcontent-%COMP%]{width:55px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return r})(),se=(()=>{class r{ngOnInit(){this.displayCopy=this.displayText}constructor(t){this.bsModalRef=t,this.textChangedEvent=new e.bkB,this.displayText="",this.title="",this.displayCopy="",this.stream=new Blob}emitText(){this.textChangedEvent.emit(this.displayCopy!==this.displayText?this.displayText:""),this.bsModalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(v.Y$))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-display-text-modal"]],outputs:{textChangedEvent:"textChangedEvent"},decls:8,vars:2,consts:[[1,"modal-header"],["type","button",1,"fa","fa-check","fa-2x","mx-5",3,"click"],["type","button",1,"close","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"modal-body"],["name","displaytext","id","displaytext","cols","90","rows","15",3,"ngModel","ngModelChange"],[1,"modal-footer"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return n.emitText()}),e.k0s(),e.j41(2,"button",2),e.bIt("click",function(){return n.bsModalRef.hide()}),e.k0s()(),e.j41(3,"div",3)(4,"div"),e.EFF(5),e.k0s(),e.j41(6,"textarea",4),e.bIt("ngModelChange",function(s){return n.displayText=s}),e.k0s()(),e.nrm(7,"div",5)),2&i&&(e.R7$(5),e.JRh(n.title),e.R7$(1),e.Y8G("ngModel",n.displayText))},dependencies:[c.me,c.BC,c.vS]})}return r})();var N=d(2510),L=d(6295),oe=d(5561),de=d(7440);function le(r,o){1&r&&(e.j41(0,"div"),e.EFF(1," No selection progress records available\n"),e.k0s())}function ce(r,o){if(1&r&&(e.j41(0,"div")(1,"div",3),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",4),e.EFF(5),e.k0s()()),2&r){const t=o.$implicit;e.R7$(2),e.JRh(e.i5U(3,2,t.createdOn,"dd-MMM-yy")),e.R7$(3),e.JRh(t.status)}}function pe(r,o){if(1&r&&(e.j41(0,"div"),e.DNE(1,ce,6,5,"div",2),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.callRecordDtos)}}let he=(()=>{class r{constructor(t){this.service=t,this.callRecordDtos=[],this.personType="",this.personId="",this.closeEvent=new e.bkB}ngOnInit(){this.service.getCallRecordsOfACandidate(this.personType,this.personId).subscribe({next:t=>this.callRecordDtos=t})}close(){this.closeEvent.emit(!0)}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(de.S))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-selection-history"]],inputs:{personType:"personType",personId:"personId"},outputs:{closeEvent:"closeEvent"},decls:3,vars:2,consts:[[4,"ngIf"],[1,"btn","fa","fa-window-close",3,"click"],[4,"ngFor","ngForOf"],[1,"stdd","w90"],[1,"stdd","w125"]],template:function(i,n){1&i&&(e.DNE(0,le,2,0,"div",0),e.j41(1,"button",1),e.bIt("click",function(){return n.close()}),e.k0s(),e.DNE(2,pe,2,1,"div",0)),2&i&&(e.Y8G("ngIf",null===n.callRecordDtos||0===n.callRecordDtos.length),e.R7$(2),e.Y8G("ngIf",null!==n.callRecordDtos&&n.callRecordDtos.length>0))},dependencies:[p.Sq,p.bT,p.vh],styles:[".w90[_ngcontent-%COMP%]{width:90px}.w125[_ngcontent-%COMP%]{width:125px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px}"]})}return r})();function me(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",39)(1,"input",40),e.bIt("change",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.onFileInputChange(n))}),e.k0s(),e.j41(2,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.upload=!n.upload)}),e.k0s()()}}function ue(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"app-selection-history",55),e.bIt("closeEvent",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.hideSelectionProgress())}),e.k0s()()}if(2&r){const t=e.XpG().index,i=e.XpG(3);e.R7$(1),e.Y8G("personType","candidate")("personId",i.findCandidateId(t))}}function ve(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",42)(2,"app-text-input",43),e.bIt("click",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.addInterviewItemCandidate(a))}),e.k0s(),e.nrm(3,"app-text-input",44)(4,"app-text-input",45),e.j41(5,"input",46),e.bIt("dblclick",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.registerReportedAt(a))}),e.k0s(),e.j41(6,"app-text-input",47),e.bIt("dblclick",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.setInterviewedAt(a))}),e.k0s(),e.nrm(7,"ng-select",48),e.j41(8,"app-text-input",49),e.bIt("dblclick",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.displayInterviewerRemarks(a))}),e.k0s(),e.j41(9,"button",50),e.bIt("click",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.downloadattachment(a))}),e.k0s(),e.j41(10,"button",51),e.bIt("click",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.uploadattachment(a))}),e.k0s(),e.j41(11,"button",52),e.bIt("click",function(){const a=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.removeInterviewItemCandidate(a))}),e.k0s(),e.j41(12,"div",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.displayHistory=!n.displayHistory)}),e.EFF(13),e.k0s(),e.j41(14,"app-register-call-records",53),e.bIt("callStatusEvent",function(n){const s=e.eBV(t).index,f=e.XpG(3);return e.Njj(f.callStatusChanged(s,n))}),e.k0s(),e.DNE(15,ue,2,2,"div",54),e.k0s()()}if(2&r){const t=o.index,i=e.XpG(3);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("label","application No"),e.R7$(1),e.Y8G("label","Candidate Name"),e.R7$(1),e.Y8G("type","datetime-local")("label","Scheduled time"),e.R7$(2),e.Y8G("type","datetime-local")("label","Interviewed At"),e.R7$(1),e.Y8G("items",i.interviewResults),e.R7$(1),e.Y8G("label","Interviewer Remarks"),e.R7$(5),e.JRh(i.displayHistory?"hide Sel Progress":"display Sel Progress"),e.R7$(1),e.Y8G("id",i.findIntervwItemCandidateId(t))("status",i.findCandidateStatus(t))("categoryRef",i.interviewItem.categoryRef)("personId",i.getCandidateId(t))("personType","Candidate"),e.R7$(1),e.Y8G("ngIf",i.displayHistory)}}function _e(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.interviewItem.visible=!n.interviewItem.visible)}),e.j41(1,"div",30),e.EFF(2,"Candidates scheduled to attend"),e.k0s(),e.j41(3,"div",31)(4,"label",32),e.EFF(5,"App No"),e.k0s(),e.j41(6,"label",33),e.EFF(7,"Candidate Name"),e.k0s(),e.j41(8,"label",34),e.EFF(9,"Scheduled From"),e.k0s(),e.j41(10,"label",34),e.EFF(11,"Reported At"),e.k0s(),e.j41(12,"label",34),e.EFF(13,"Interviewed At"),e.k0s(),e.j41(14,"label",35),e.EFF(15,"Interview Result"),e.k0s(),e.j41(16,"label",33),e.EFF(17,"Interviewer Remarks"),e.k0s(),e.j41(18,"div",36),e.DNE(19,me,3,0,"div",37),e.DNE(20,ve,16,16,"div",38),e.k0s()()()}if(2&r){const t=e.XpG(2);e.R7$(19),e.Y8G("ngIf",t.upload),e.R7$(1),e.Y8G("ngForOf",t.interviewItemCandidates.controls)}}const fe=function(){return{dateInputFormat:"YYYY-MM-DD HH:mm"}};function ge(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",1),e.nrm(1,"div",2),e.j41(2,"form",3),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.formChanged())}),e.j41(3,"h3",4),e.EFF(4,"Interview Category details"),e.k0s(),e.nrm(5,"hr",5),e.j41(6,"label",6),e.EFF(7,"Category:"),e.k0s(),e.j41(8,"div",7),e.EFF(9),e.k0s(),e.j41(10,"div",8),e.EFF(11),e.k0s(),e.j41(12,"label",9),e.EFF(13,"Intervw Mode:"),e.k0s(),e.j41(14,"div",10),e.EFF(15),e.k0s(),e.j41(16,"label",9),e.EFF(17,"Scheduled On:"),e.k0s(),e.j41(18,"input",11),e.bIt("dblclick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.copyInterviewDate())}),e.k0s(),e.j41(19,"label",12),e.EFF(20,"Venue: "),e.k0s(),e.j41(21,"app-text-input",13),e.bIt("dblclick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.copyDefaultVenueAddress())}),e.k0s(),e.j41(22,"label",14),e.EFF(23,"Interviewer Name:"),e.k0s(),e.nrm(24,"app-text-input",15),e.j41(25,"div",16)(26,"button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.savewithattachments())}),e.j41(27,"mat-icon"),e.EFF(28,"save"),e.k0s()(),e.j41(29,"button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteInterviewCategory())}),e.j41(30,"mat-icon"),e.EFF(31,"delete"),e.k0s()(),e.j41(32,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.getMatchingCVs(n.interviewItem))}),e.j41(33,"mat-icon"),e.EFF(34,"supervisor_account"),e.k0s()()(),e.nrm(35,"br"),e.j41(36,"label",12),e.EFF(37,"Address: "),e.k0s(),e.nrm(38,"app-text-input",20),e.j41(39,"label",21),e.EFF(40,"Address2: "),e.k0s(),e.nrm(41,"app-text-input",22),e.j41(42,"label",23),e.EFF(43,"City: "),e.k0s(),e.nrm(44,"app-text-input",24),e.j41(45,"label",25),e.EFF(46,"Site Rep Name: "),e.k0s(),e.nrm(47,"app-text-input",26),e.j41(48,"label",25),e.EFF(49,"Site Phone No: "),e.k0s(),e.nrm(50,"app-text-input",27),e.DNE(51,_e,21,2,"div",28),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.form),e.R7$(7),e.JRh(t.interviewItem.professionName),e.R7$(2),e.SpI("(",t.interviewItem.categoryRef,")"),e.R7$(4),e.SpI("",t.interviewItem.interviewMode," "),e.R7$(3),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(15,fe)),e.R7$(3),e.Y8G("label","Venue"),e.R7$(3),e.Y8G("label","Interviewer Name"),e.R7$(2),e.Y8G("disabled",!t.form.dirty),e.R7$(12),e.Y8G("label","Venue Address"),e.R7$(3),e.Y8G("label","Address2"),e.R7$(3),e.Y8G("label","City and PIN"),e.R7$(3),e.Y8G("label","Site Rep Name"),e.R7$(3),e.Y8G("label","Site Phone No"),e.R7$(1),e.Y8G("ngIf",t.interviewItem.interviewItemCandidates.length>0)}}let $=(()=>{class r{constructor(t,i,n,a,s,f,C){this.fb=t,this.activatedRoute=i,this.router=n,this.confirm=a,this.service=s,this.toastr=f,this.bsModalService=C,this.personType="",this.personId="",this.lastTimeCalled=Date.now(),this.userFiles=[],this.selectedIndex=0,this.matchingCVs=[],this.upload=!1,this.displayHistory=!1,this.interviewResults=[{result:"Not Interviewed"},{result:"Selected"},{result:"Rejected-Exp irrelevant"},{result:"Rejected-Low Exp"},{result:"Rejected-Overage"},{result:"Rejected-No communication"},{result:"Rejected-other reasons"},{result:"Shortlisted"}],this.bsValueDate=new Date,this.form=new c.gE({}),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let G=new FormData;this.userFiles.length>0&&this.userFiles.forEach(R=>{G.append("file",R,R.name)}),G.append("data",JSON.stringify(this.form.value)),this.service.editOrInsertInterviewItemWithFile(G).subscribe({next:R=>{console.log(R),""!==R.error?this.toastr.error(R.error,"failed to save the interview Item data"):(this.toastr.success("interview Item saved","success"),this.form.markAsPristine())},error:R=>this.toastr.error(R.error.details,"Error encountered")}),this.userFiles=[]}}ngOnInit(){if(this.interviewDateFrom){var t=new Date(this.interviewDateFrom);this.interviewDateFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),10,30)}this.InitializeForm(this.interviewItem)}InitializeForm(t){this.form=this.fb.group({id:t.id,intervwId:t.intervwId,orderItemId:[t.orderItemId,c.k0.required],professionId:[t.professionId,c.k0.required],professionName:[t.professionName,c.k0.required],interviewMode:[t.interviewMode,c.k0.required],interviewerName:t.interviewerName,interviewVenue:[t.interviewVenue,c.k0.required],venueAddress:[t.venueAddress],venueAddress2:[t.venueAddress2],venueCityAndPIN:[t.venueCityAndPIN],siteRepName:[t.siteRepName],sitePhoneNo:[t.sitePhoneNo],interviewScheduledFrom:[t.interviewScheduledFrom],interviewItemCandidates:this.fb.array(t.interviewItemCandidates.map(i=>this.fb.group({id:i.id,intervwItemId:[i.interviewItemId??t.id,c.k0.required],candidateId:[i.candidateId,c.k0.required],personId:[i.personId],applicationNo:i.applicationNo,candidateName:[i.candidateName,c.k0.required],passportNo:i.passportNo,scheduledFrom:[i.scheduledFrom,c.k0.required],reportedAt:i.reportedAt,interviewedAt:i.interviewedAt,interviewStatus:[i.interviewStatus,c.k0.required],interviewerRemarks:i.interviewerRemarks,attachmentFileNameWithPath:i.attachmentFileNameWithPath})))})}findCandidateId(t){return this.interviewItemCandidates.at(t).get("candidateId")?.value}findIntervwItemCandidateId(t){return this.interviewItemCandidates.at(t).get("id")?.value??0}deleteInterviewCategory(){const i=this.service.deleteInterviewItem(this.interviewItem.id);this.confirm.confirm("confirm Delete","confirm delete this Interview Item?. WARNING: this cannot be undone").pipe((0,S.p)(a=>a),(0,x.n)(a=>i)).subscribe(a=>{a?(this.form.disable(),this.toastr.success("Interview item deleted","deletion successful")):this.toastr.error("Error in deleting the Feedback","failed to delete")})}findCandidateStatus(t){return this.interviewItemCandidates.at(t).get("interviewStatus")?.value??""}get interviewItemCandidates(){return this.form.get("interviewItemCandidates")}copyInterviewDate(){this.form.get("interviewScheduledFrom").value.getFullYear<2e3&&this.form.get("interviewScheduledFrom")?.setValue(this.interviewDateFrom)}newInterviewItemCandidate(){return this.fb.group({id:0,intervwItemId:this.interviewItem?.id,candidateId:[0,c.k0.required],applicationNo:0,candidateName:["",c.k0.required],passportNo:"",scheduledFrom:[this.form.get("interviewScheduledFrom")?.value,c.k0.required],reportedAt:"",interviewedAt:"",interviewStatus:["",c.k0.required],interviewerRemarks:"",intervwCandAttachmentId:"",attachmentFileNameWithPath:""})}addInterviewItemCandidate(t){this.interviewItemCandidates.push(this.newInterviewItemCandidate())}removeInterviewItemCandidate(t){this.interviewItemCandidates.removeAt(t)}formChanged(){}onFileInputChange(t){const i=this.interviewItemCandidates.at(this.selectedIndex)?.value,s=t.target.files[0];s.size>0&&(this.userFiles.push(s),i.attachmentFileNameWithPath=s.name,this.interviewItemCandidates.at(this.selectedIndex)?.get("attachmentFileNameWithPath")?.setValue(s.name),this.form.markAsDirty())}update(){var t=this.form.value;0!==t.id?this.service.updateInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to update the interview item","failure"):this.toastr.success("Interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error encountered")}):this.service.insertInterviewItem(t).subscribe({next:i=>{null===i?this.toastr.warning("failed to insert the interview item","failure"):this.toastr.success("The interview category updated","success")},error:i=>this.toastr.error(i.error.details,"Error in inserting the interview category")})}displayInterviewerRemarks(t){const n={class:"modal-dialog-centered modal-lg",initialState:{displayText:this.interviewItemCandidates.at(t).get("interviewerRemarks").value,title:this.interviewItemCandidates.at(t).get("candidateName").value+" - edit Interviewer Remarks"}};this.bsModalRef=this.bsModalService.show(se,n),this.bsModalRef.content.textChangedEvent.subscribe({next:a=>{""!==a&&this.interviewItemCandidates.at(t).get("interviewerRemarks")?.setValue(a)}})}downloadattachment(t){const i=this.interviewItemCandidates.at(t).get("attachmentFileNameWithPath")?.value;""!==i&&null!=i?this.service.downloadInterviewerCommentFile(i).subscribe({next:n=>{const a=document.createElement("a"),s=URL.createObjectURL(n);a.href=s;var f=i.lastIndexOf("\\");a.download=-1!==f?i.substring(f+1):"filename.ext",a.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("no file exists for downloading","Bad Request")}uploadattachment(t){this.itemCandidateSelected=this.interviewItemCandidates.at(t).value,this.selectedIndex=t,this.upload=!this.upload}registerReportedAt(t){this.interviewItemCandidates.at(t).get("reportedAt")?.setValue((0,p.Yq)(new Date,"yyyy-MM-ddThh:mm","en")),this.form.markAsDirty()}setInterviewedAt(t){this.interviewItemCandidates.at(t).get("interviewedAt")?.setValue((0,p.Yq)(new Date,"yyyy-MM-ddThh:mm","en")),this.form.markAsDirty()}getMatchingCVs(t){var i=t.professionId;void 0===this.interviewDateFrom||new Date(this.interviewDateFrom).getFullYear()<2e3?this.toastr.warning("Interview Begin and End Dates not defined","Interview dates not defined"):this.service.getMatchingCandidates(i).subscribe({next:n=>{if(this.matchingCVs=n,null===n||0===n.length)this.toastr.warning("No CVs on record that match the interview profession","No Matching CVs",{closeButton:!0,timeOut:15e3});else{var a=0===this.interviewItemCandidates.length?this.interviewDateFrom:this.interviewItemCandidates.at(this.interviewItemCandidates.length-1).get("scheduledFrom")?.value;this.bsModalRef=this.bsModalService.show(ae,{class:"modal-dialog-centered modal-lg",initialState:{professionid:i,cvs:this.matchingCVs}}),this.bsModalRef.content.emittedEvent.subscribe({next:C=>{null!==C?(C.forEach(M=>{this.interviewItemCandidates.push(this.fb.group({id:0,intervwItemId:this.interviewItem?.id??0,candidateId:[M.candidateId??0,c.k0.required],applicationNo:M.applicationNo,candidateName:[M.fullName,c.k0.required],passportNo:"",scheduledFrom:[a,c.k0.required],reportedAt:null,interviewedAt:null,interviewStatus:["Not Interviewed",c.k0.required],interviewerRemarks:"",prospectiveCandidateId:[M.prospectiveCandidateId]})),a=function we(r,o){let t=new Date(r);return t.setMinutes(t.getMinutes()+o),t}(a,30)}),this.toastr.success(C.length+" candidates assigned.  Pl note the form needs to be saved for changes to take effect","Success",{closeButton:!0,timeOut:1e4}),this.form.markAsDirty()):this.toastr.warning("No candidates found - either registered or in prospective list - matching the profession "+t.professionName,"Not Found")},error:C=>this.toastr.error(C.error.details,"error encountered")})}}})}copyDefaultVenueAddress(){var t=new te.T;this.form.get("interviewVenue")?.setValue(t.venue),this.form.get("venueAddress")?.setValue(t.address),this.form.get("venueAddress2")?.setValue(t.address2),this.form.get("venueCityAndPIN")?.setValue(t.city),this.form.get("siteRepName")?.setValue(t.siteRepName),this.form.get("sitePhoneNo")?.setValue(t.sitePhoneNo)}hideSelectionProgress(){}getCandidateId(t){return this.interviewItemCandidates.at(t).get("candidateId")?.value.toString()}callStatusChanged(t,i){this.interviewItemCandidates.at(t).setValue(i)}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(c.ok),e.rXU(m.nX),e.rXU(m.Ix),e.rXU(h.G),e.rXU(w.P),e.rXU(b.tw),e.rXU(v.I8))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-edit-schedule"]],inputs:{interviewItem:"interviewItem",interviewDateFrom:"interviewDateFrom",interviewDateUpto:"interviewDateUpto"},decls:1,vars:1,consts:[["style","margin-left: 5px;",4,"ngIf"],[2,"margin-left","5px"],[1,"text","mat-typography",2,"width","750px","height","8px","margin","0 4px 0 5px"],[3,"formGroup","change"],[1,"stdd","my-0","py-0"],[1,"my-0","py-0",2,"margin","0","border-width","2px","border-color","aqua"],[1,"lbl","w60"],[1,"stdd","w250","mx-1"],[1,"stdd","w60","mx-1"],[1,"lbl","w100"],[1,"stdd","w75","mx-1"],["name","scheduledFrom","type","text","placeholder","Scheduled","formControlName","interviewScheduledFrom","bsDatepicker","",1,"stdd","w90",3,"bsValue","bsConfig","dblclick"],[1,"lbl","w60","mx-2"],["formControlName","interviewVenue","title","double click to copy default venue address",1,"stdd","w125",3,"label","dblclick"],[1,"lbl","w125","mx-2"],["formControlName","interviewerName",1,"stdd","w150",3,"label"],[1,"pull-right",2,"margin-right","20px","border-style","inset"],["type","button","title","saves the interview item with assignments, along with attachments",1,"btn",3,"disabled","click"],["type","button","title","delete the Interview Category, along with candidate assignments, if any",1,"btn",3,"click"],["type","button","title","gets candidates available and matching this profession. Sources from candidates as well as prospective candidates",1,"btn",3,"click"],["formControlName","venueAddress",1,"stdd","w300",3,"label"],[1,"lbl","w75","mx-2"],["formControlName","venueAddress2",1,"stdd","w200",3,"label"],[1,"lbl","w50","mx-2"],["formControlName","venueCityAndPIN",1,"stdd","w150",3,"label"],[1,"lbl","w100","mx-2"],["formControlName","siteRepName",1,"stdd","w100",3,"label"],["formControlName","sitePhoneNo",1,"stdd","w100",3,"label"],["class","cursor",3,"click",4,"ngIf"],[1,"cursor",3,"click"],[1,"my-0","py-0"],[2,"margin","0 0 0 10px"],[1,"lbl","w75",2,"margin-left","25px"],[1,"lbl","w150"],[1,"dt"],[1,"lbl","w200"],["formArrayName","interviewItemCandidates",1,"my-2",2,"margin-left","25px"],["style","font-size: x-small;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"],[3,"formGroupName"],["formControlName","applicationNo",1,"stdd","w75",3,"label","click"],["formControlName","candidateName",1,"stdd","w150",3,"label"],["formControlName","scheduledFrom",1,"dt",3,"type","label"],["type","datetime-local","formControlName","reportedAt",1,"dt",3,"dblclick"],["formControlName","interviewedAt",1,"dt",3,"type","label","dblclick"],["bindLabel","result","bindValue","result","labelForId","result","clearAllText","Clear","formControlName","interviewStatus",1,"dropdown",3,"items"],["formControlName","interviewerRemarks","title","double click to edit in a larger window",1,"stdd","w150",3,"label","dblclick"],["type","button","title","download interviewer comments",1,"btn","w15","fa","fa-download",2,"color","aliceblue",3,"click"],["type","button","title","upload a new interviewer comment.  Any existing attachment will be REPLACED",1,"btn","w15","fa","fa-upload",2,"color","aliceblue",3,"click"],[1,"btn","w15","fa","fa-trash","red",3,"click"],[3,"id","status","categoryRef","personId","personType","callStatusEvent"],[4,"ngIf"],[3,"personType","personId","closeEvent"]],template:function(i,n){1&i&&e.DNE(0,ge,52,16,"div",0),2&i&&e.Y8G("ngIf",n.interviewItem)},dependencies:[p.Sq,p.bT,P.pc,P.p0,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,c.$R,c.v8,N.vr,L.f,oe.z,y.An,he],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;margin:0 2px;padding:0;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;font-weight:400}.nilMargin[_ngcontent-%COMP%]{margin:0;padding:0}.dropdown[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:top;width:200px;word-wrap:break-word}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top;width:160px}.w15[_ngcontent-%COMP%]{width:15px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w60[_ngcontent-%COMP%]{width:60px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}.yellow[_ngcontent-%COMP%]{color:#ff0}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:15px}.cursor[_ngcontent-%COMP%]{cursor:pointer;color:#ff0;font-size:smaller;display:inline-block;margin:0 2px;padding:0;vertical-align:top;font-weight:700}"]})}return r})();function be(r,o){if(1&r&&(e.j41(0,"div"),e.nrm(1,"app-edit-schedule",16),e.k0s()),2&r){const t=o.$implicit,i=e.XpG(2);e.R7$(1),e.Y8G("interviewItem",t)("interviewDateFrom",i.interview.interviewDateFrom)("interviewDateUpto",i.interview.interviewDateUpto)}}const z=function(){return{dateInputFormat:"YYYY-MM-DD HH:mm"}};function Ce(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"h4",1),e.EFF(2,"Interview Schedule"),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateInterview())}),e.j41(4,"mat-icon"),e.EFF(5,"save"),e.k0s()(),e.j41(6,"button",3)(7,"mat-icon"),e.EFF(8,"cancel"),e.k0s()(),e.j41(9,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteInterview())}),e.j41(10,"mat-icon"),e.EFF(11,"delete"),e.k0s()(),e.nrm(12,"hr",5),e.j41(13,"label",6),e.EFF(14,"Customer Name"),e.k0s(),e.j41(15,"input",7),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interview.customerName=n)}),e.k0s(),e.j41(16,"label",8),e.EFF(17,"Order No"),e.k0s(),e.j41(18,"input",9),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interview.orderNo=n)}),e.k0s(),e.j41(19,"label",8),e.EFF(20,"Dated"),e.k0s(),e.j41(21,"div",10),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"label",11),e.EFF(25,"From: "),e.k0s(),e.j41(26,"input",12),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interview.interviewDateFrom=n)}),e.k0s(),e.j41(27,"label",8),e.EFF(28,"Upto:"),e.k0s(),e.j41(29,"input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.interview.interviewDateUpto=n)}),e.k0s(),e.nrm(30,"hr",14),e.DNE(31,be,2,3,"div",15),e.k0s()}if(2&r){const t=e.XpG();e.R7$(15),e.Y8G("ngModel",t.interview.customerName),e.R7$(3),e.Y8G("ngModel",t.interview.orderNo),e.R7$(4),e.JRh(e.i5U(23,10,t.interview.orderDate,"dd-MMM-yy")),e.R7$(4),e.Y8G("ngModel",t.interview.interviewDateFrom)("bsValue",t.bsValueDate)("bsConfig",e.lJ4(13,z)),e.R7$(3),e.Y8G("ngModel",t.interview.interviewDateUpto)("bsValue",t.bsValueDate)("bsConfig",e.lJ4(14,z)),e.R7$(2),e.Y8G("ngForOf",t.interview.interviewItems)}}let Ie=(()=>{class r{constructor(t,i,n,a,s,f){this.fb=t,this.activatedRoute=i,this.router=n,this.service=a,this.toastr=s,this.confirm=f,this.bsValueDate=new Date}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.interview=t.interview})}updateInterview(){this.service.updateInterviewHeader(this.interview).subscribe({next:t=>{null===t?this.toastr.warning("Failed to update the interview","failure"):this.toastr.success("Updated the interview","Success")},error:t=>this.toastr.error(t.error.details,"Error encountered")})}deleteInterview(){const i=this.service.deleteInterview(this.interview.id);this.confirm.confirm("confirm Delete","confirm delete this Interview?. WARNING: this cannot be undone").pipe((0,S.p)(a=>a),(0,x.n)(()=>i)).subscribe(a=>{a?(this.toastr.success("Interview deleted","deletion successful"),this.router.navigateByUrl("/interviews")):this.toastr.error("Error in deleting the interview","failed to delete")})}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(c.ok),e.rXU(m.nX),e.rXU(m.Ix),e.rXU(w.P),e.rXU(b.tw),e.rXU(h.G))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-interview-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[2,"display","inline-block"],["title","edit the interview data",1,"btn",2,"margin-left","150px",3,"click"],["type","button","routerLink","/interviews",1,"btn"],["type","button","routerLink","/interviews",1,"btn",3,"click"],[2,"margin","0","padding","0","border-width","thick","border-color","beige"],[1,"lbl","w100","mx-2"],["type","text","name","customerName",1,"stdd","w250","mx-3",3,"ngModel","ngModelChange"],[1,"lbl","w75","mx-2"],["type","text","name","orderNo",1,"stdd","w75","mx-3",3,"ngModel","ngModelChange"],[1,"stdd","w100"],[1,"lbl","w75"],["name","interviewDateFrom","type","text","placeholder","Date From","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","interviewDateUpto","type","text","placeholder","Date Upto","bsDatepicker","",1,"stdd","w100",3,"ngModel","bsValue","bsConfig","ngModelChange"],[2,"margin","0","padding","0","border-width","thick","border-color","darkturquoise"],[4,"ngFor","ngForOf"],[3,"interviewItem","interviewDateFrom","interviewDateUpto"]],template:function(i,n){1&i&&e.DNE(0,Ce,32,15,"div",0),2&i&&e.Y8G("ngIf",n.interview)},dependencies:[p.Sq,p.bT,P.pc,P.p0,c.me,c.BC,c.vS,m.Wk,y.An,$,p.vh],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:top}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:middle;font-size:small;margin:0 2px}.red[_ngcontent-%COMP%]{color:red}"]})}return r})();var X=d(7673);const H=r=>{var o=r.paramMap.get("orderno");return null===o||""===o?(0,X.of)(null):(0,e.WQX)(w.P).getOrGenerateinterviewnew(+o)};class O{constructor(){this.interviewCandidateId=0,this.reportedAt=new Date,this.interviewedAt=new Date,this.interviewStatus="",this.interviewStatusDate=new Date,this.interviewRemarks=""}}class U{constructor(){this.orderId=0,this.search="",this.pageNumber=1,this.pageSize=15}}var V=d(1626),xe=d(2771),ye=d(6354),Me=d(3587),ke=d(6220);let Y=(()=>{class r{constructor(t){this.http=t,this.apiUrl=Me.c.apiUrl,this.currentUserSource=new xe.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.aParams=new U,this.cache=new Map}getAttendancePaged(t=!1){if(t){const n=this.cache.get(Object.values(this.aParams).join("-"));if(n)return(0,X.of)(n)}let i=new V.Nl;return i=i.append("orderId",this.aParams.orderId.toString()),i=i.append("pageNumber",this.aParams.pageNumber.toString()),i=i.append("pageSize",this.aParams.pageSize.toString()),(0,ke.f8)(this.apiUrl+"interview/pagedAttendance",i,this.http).pipe((0,ye.T)(n=>(this.cache.set(Object.values(this.aParams).join("-"),n),n)))}updateAttendances(t){return this.http.put(this.apiUrl+"interview/updateAttendance",t)}UploadInterviewerNote(t){return this.http.post(this.apiUrl+"FileUpload/InterviewerNote",t)}downloadInterviewerNote(t){let i=new V.Nl;return i=i.append("fullpath",t),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:i,responseType:"blob"})}getAttendanceStatus(t){return this.http.get(this.apiUrl+"interview/candidateattendances/"+t)}composeInvitationMsgs(t){return this.http.post(this.apiUrl+"Help/insertIds",t)}deleteAttendance(t){return this.http.delete(this.apiUrl+"interview/deleteinterviewItemCandidate/"+t)}setAParams(t){this.aParams=t}getAParams(){return this.aParams}static#e=this.\u0275fac=function(i){return new(i||r)(e.KVO(V.Qq))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var W=d(8028);function Se(r,o){if(1&r&&(e.j41(0,"div",7)(1,"div",8),e.EFF(2,"Candidate:"),e.k0s(),e.j41(3,"div",9),e.EFF(4),e.k0s()()),2&r){const t=e.XpG();e.R7$(4),e.Lme("",t.itemCandidate.applicationNo," - ",t.itemCandidate.candidateName,"")}}function Ee(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",18)(1,"input",19),e.bIt("change",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onFileInputChange(n))}),e.k0s(),e.j41(2,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.upload=!n.upload)}),e.k0s()()}}function Fe(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",10)(1,"label",11),e.EFF(2,"Scheduled At:"),e.k0s(),e.j41(3,"input",12),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.itemCandidate.scheduledFrom=n)}),e.k0s(),e.nrm(4,"br"),e.j41(5,"label",11),e.EFF(6,"Reported At:"),e.k0s(),e.j41(7,"input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.itemCandidate.reportedAt=n)}),e.k0s(),e.nrm(8,"br"),e.j41(9,"label",11),e.EFF(10,"Interviewed At:"),e.k0s(),e.j41(11,"input",14),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.itemCandidate.interviewedAt=n)}),e.k0s(),e.nrm(12,"br"),e.j41(13,"label",11),e.EFF(14,"Interview Status:"),e.k0s(),e.j41(15,"ng-select",15),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.statusChanged())})("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.itemCandidate.interviewStatus=n)}),e.k0s(),e.j41(16,"button",16),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.upload=!n.upload)}),e.k0s(),e.DNE(17,Ee,3,0,"div",17),e.k0s()}if(2&r){const t=e.XpG();e.R7$(3),e.Y8G("ngModel",t.itemCandidate.scheduledFrom),e.R7$(4),e.Y8G("ngModel",t.itemCandidate.reportedAt),e.R7$(4),e.Y8G("ngModel",t.itemCandidate.interviewedAt),e.R7$(4),e.Y8G("items",t.selectionStatuses)("ngModel",t.itemCandidate.interviewStatus),e.R7$(2),e.Y8G("ngIf",t.upload)}}let Re=(()=>{class r{constructor(t,i,n,a,s){this.bsModalRef=t,this.confirm=i,this.toastr=n,this.service=a,this.cvrefservice=s,this.updateAttendanceEvent=new e.bkB,this.deleteAttendanceData=new e.bkB,this.deleteInterviwItemCandidate=new e.bkB,this.userFiles=[],this.upload=!1,this.bsValueDate=new Date,this.lastTimeCalled=Date.now(),this.selectionStatuses=[],this.selectionStatuses=this.cvrefservice.selectionStatuses}ngOnInit(){console.log(this.itemCandidate)}updateAttendance(){if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let n=new FormData;this.userFiles.length>0&&this.userFiles.forEach(a=>{n.append("file",a,a.name)}),n.append("data",JSON.stringify(this.itemCandidate)),this.service.UploadInterviewerNote(n).subscribe({next:a=>{console.log("response",a),""!==a?(this.toastr.error(a,"failed to save the interview data"),this.updateAttendanceEvent.emit(null)):(this.toastr.success("interview saved","success"),this.updateAttendanceEvent.emit(this.itemCandidate))},error:a=>{this.toastr.error(a.error?.details,"Error encountered"),this.updateAttendanceEvent.emit(null)}}),this.userFiles=[],this.bsModalRef.hide()}eraseAttendanceData(){this.confirm.confirm("Confirm Erase attendance","This will set to null all dates and interview Status.  It will take effect only after this form is saved.  Please Press OK to proceed, Cancel to Abort").subscribe({next:t=>{t?this.toastr.info("candidate detail schedules and status erased.  Changes will be lost if not saved"):this.toastr.info("Aborted","Aborted by user")}})}deleteItemCandidate(){}toggleUpload(){this.upload=!this.upload}onFileInputChange(t){const a=t.target.files[0];a.size>0&&(this.userFiles.push(a),this.itemCandidate.attachmentFileNameWithPath=a.name)}statusChanged(){this.itemCandidate&&(this.itemCandidate.interviewedAt=new Date,new Date(this.itemCandidate.reportedAt).getFullYear()<2e3&&(this.itemCandidate.reportedAt=new Date),this.itemCandidate.interviewedAt=this.itemCandidate.interviewedAt,this.itemCandidate.reportedAt=this.itemCandidate.reportedAt),new Date(this.itemCandidate.scheduledFrom).getFullYear()<2e3&&(this.itemCandidate.scheduledFrom=this.itemCandidate.interviewedAt)}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(v.Y$),e.rXU(h.G),e.rXU(b.tw),e.rXU(Y),e.rXU(W.y))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-edit-attendance-modal"]],outputs:{updateAttendanceEvent:"updateAttendanceEvent",deleteAttendanceData:"deleteAttendanceData",deleteInterviwItemCandidate:"deleteInterviwItemCandidate"},decls:7,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-success","fa","fa-save",2,"margin-left","200px",3,"click"],["title","Erase attendance data like Reported At, Interviewed At and Interview Status",1,"btn","fa","fa-erase","fa-2x","mx-2",3,"click"],["aria-label","close",1,"btn","btn-close","close","mx-2",3,"click"],["title","deletes the candidate assignment entirely",1,"btn","fa","fa-trash","red",3,"click"],[1,"modal-header","my-0"],[1,"stdd","w75","b"],[1,"stdd","w200","mx-2"],[1,"modal-body"],[1,"lbl"],["type","text","placeholder","Scheduled At",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Reported At",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Interviewed At",1,"stdd","w150",3,"ngModel","ngModelChange"],["bindLabel","name","bindValue","name","labelForId","name","clearAllText","Clear",1,"stdd","w200",3,"items","ngModel","change","ngModelChange"],["type","button","title","upload a new interviewer comment.  Any existing attachment will be REPLACED",1,"btn","mx-5","w15","fa","fa-upload",3,"click"],["style","font-size: x-small;",4,"ngIf"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"]],template:function(i,n){1&i&&(e.DNE(0,Se,5,2,"div",0),e.DNE(1,Fe,18,6,"div",1),e.j41(2,"div",2)(3,"button",3),e.bIt("click",function(){return n.updateAttendance()}),e.k0s(),e.j41(4,"button",4),e.bIt("click",function(){return n.eraseAttendanceData()}),e.k0s(),e.j41(5,"button",5),e.bIt("click",function(){return n.bsModalRef.hide()}),e.k0s(),e.j41(6,"button",6),e.bIt("click",function(){return n.deleteItemCandidate()}),e.k0s()()),2&i&&(e.Y8G("ngIf",n.itemCandidate),e.R7$(1),e.Y8G("ngIf",n.itemCandidate))},dependencies:[p.bT,c.me,c.BC,c.vS,N.vr],styles:[".w15[_ngcontent-%COMP%]{width:15px}.w75[_ngcontent-%COMP%]{width:75px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-weight:700;margin:0 2px;width:125px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return r})();const Te=["search"];function je(r,o){if(1&r){const t=e.RV6();e.j41(0,"pagination",14),e.bIt("pageChanged",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChanged(n))}),e.EFF(1,"\n>"),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function De(r,o){1&r&&(e.j41(0,"div",15),e.EFF(1," No Candidates assigned for the interview\n"),e.k0s())}function Pe(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",34)(1,"input",35),e.bIt("change",function(n){e.eBV(t);const a=e.XpG().$implicit,s=e.XpG();return e.Njj(s.onFileInputChange(n,a))}),e.k0s(),e.j41(2,"button",36),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.upload=!n.upload)}),e.k0s()()}}function Ae(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"input",16),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.checked=n)})("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.selectionChanged(a))}),e.k0s(),e.j41(2,"div",17),e.EFF(3),e.k0s(),e.j41(4,"div",6),e.EFF(5),e.k0s(),e.j41(6,"app-text-input",18),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.interviewVenue=n)}),e.k0s(),e.j41(7,"div",7),e.EFF(8),e.k0s(),e.j41(9,"div",19),e.EFF(10),e.k0s(),e.j41(11,"div",20),e.EFF(12),e.k0s(),e.j41(13,"input",21),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.scheduledFrom=n)}),e.k0s(),e.j41(14,"input",22),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.reportedAt=n)}),e.k0s(),e.j41(15,"input",23),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.interviewedAt=n)}),e.k0s(),e.j41(16,"div",24),e.EFF(17),e.k0s(),e.j41(18,"button",25),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.uploadNote(a))}),e.k0s(),e.j41(19,"button",26),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.reported(a.interviewItemCandidateId))}),e.k0s(),e.j41(20,"button",27),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.downloadInterviewerNote(a))}),e.k0s(),e.j41(21,"button",28),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.attendanceDelete(a.interviewItemCandidateId))}),e.k0s(),e.nrm(22,"br"),e.j41(23,"label",29),e.EFF(24,"Interview Status"),e.k0s(),e.j41(25,"ng-select",30),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.interviewStatus=n)})("change",function(){const a=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.statusChanged(a))}),e.k0s(),e.j41(26,"textarea",31),e.bIt("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.Njj(s.interviewerRemarks=n)}),e.k0s(),e.DNE(27,Pe,3,0,"div",32),e.nrm(28,"hr",33),e.k0s()}if(2&r){const t=o.$implicit,i=e.XpG();e.R7$(1),e.Y8G("ngModel",t.checked),e.R7$(2),e.JRh(t.orderNo),e.R7$(2),e.JRh(t.customerName),e.R7$(1),e.Y8G("label","Venue")("ngModel",t.interviewVenue),e.R7$(2),e.JRh(t.professionName),e.R7$(2),e.JRh(t.applicationNo),e.R7$(1),e.Y8G("ngClass","Not Interviewed"===t.interviewStatus?"stdd red":"stdd"),e.R7$(1),e.JRh(t.candidateName),e.R7$(1),e.Y8G("ngModel",t.scheduledFrom),e.R7$(1),e.Y8G("ngModel",t.reportedAt),e.R7$(1),e.Y8G("ngModel",t.interviewedAt),e.R7$(2),e.SpI(" ",null===t.attachmentFileNameWithPath?"NO":"YES",""),e.R7$(8),e.Y8G("items",i.selectionStatuses)("ngModel",t.interviewStatus),e.R7$(1),e.Y8G("ngModel",t.interviewerRemarks),e.R7$(1),e.Y8G("ngIf",i.upload&&t.interviewItemCandidateId===i.selectedIndex)}}const Ne=[{path:"",component:ee,resolve:{interviews:()=>{var r=(0,e.WQX)(w.P),o=new k.e;return r.setParams(o),r.getInterviewsPaged(!1)}}},{path:"editintervw/:orderno",component:Ie,resolve:{interview:H}},{path:"editschedule/:orderno",component:$,resolve:{interview:H}},{path:"attendance/:orderid",component:(()=>{class r{constructor(t,i,n,a,s){this.service=t,this.toastr=i,this.activatedRoute=n,this.cvrefservice=a,this.bsModalService=s,this.orderId=0,this.attendances=[],this.attendancesSelected=[],this.totalCount=0,this.selectionStatuses=[],this.lastTimeCalled=Date.now(),this.userFiles=[],this.selectedIndex=0,this.upload=!1,this.attendancesToUpdate=[],this.aParams=new U,this.savewWithattachments=()=>{if((void 0===this.att||0===this.userFiles.length)&&this.toastr.warning("the  object to upload is not defined"),Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let M=new FormData;this.userFiles.length>0&&this.userFiles.forEach(F=>{M.append("file",F,F.name)}),M.append("data",JSON.stringify(this.attendancesToUpdate)),console.log("att in savewithattachments after stringify:",M),this.service.UploadInterviewerNote(M).subscribe({next:F=>{""!==F?this.toastr.error(F,"failed to save the interview data"):this.toastr.success("interview saved","success")},error:F=>this.toastr.error(F.error?.details,"Error encountered")}),this.userFiles=[],this.att=void 0},this.orderId=this.activatedRoute.snapshot.params.orderid,0!==this.orderId&&(this.aParams.orderId=this.orderId),this.selectionStatuses=this.cvrefservice.selectionStatuses}ngOnInit(){0!==this.aParams.orderId&&this.getAttendancePaged(!1)}getAttendancePaged(t){this.service.setAParams(this.aParams),this.service.getAttendancePaged(t).subscribe({next:i=>{this.attendances=i.result,this.pagination=i.pagination,this.totalCount=i.totalCount,console.log("attendances:",this.attendances)}})}updateAttendances(){console.log("attendancesToUpdate",this.attendancesToUpdate,"att",this.att),this.service.updateAttendances(this.attendancesToUpdate).subscribe({next:t=>{null!==t?(t.forEach(i=>{var n=this.attendances.findIndex(a=>a.interviewItemCandidateId==i.interviewCandidateId);-1!==n&&(this.attendances[n].interviewedAt=i.interviewedAt,this.attendances[n].reportedAt=i.reportedAt,this.attendances[n].interviewStatus=i.interviewStatus,this.attendances[n].interviewerRemarks=i.interviewRemarks)}),this.toastr.success("Interview Attendance updated","Success"),this.attendancesToUpdate=[]):this.toastr.warning("Failed to update the attendance data","Failure")},error:t=>this.toastr.error(t.error?.details,"Error encountered")})}attendanceEdit(t){var i=new O;i.interviewCandidateId=t.interviewItemCandidateId,i.interviewRemarks=t.interviewerRemarks,i.interviewStatus=t.interviewStatus,i.interviewedAt=t.interviewedAt,console.log("attUpdate.interviewedAt",i.interviewedAt,"att",t.interviewedAt),i.reportedAt=t.reportedAt,this.attendancesToUpdate.push(i),console.log("attendanceToUpdate",this.attendancesToUpdate)}attendanceDelete(t){this.service.deleteAttendance(t).subscribe({next:i=>{if(i){var n=this.attendances.findIndex(a=>a.interviewItemCandidateId===t);-1!==n&&this.attendances.splice(n,1),this.toastr.success("Deleted","Attendance Deleted")}else this.toastr.warning("Failed to delete","Failed to delete the candidate attendance")},error:i=>this.toastr.error(i.error.details,"Error encountered in deleting the attendance record")})}onPageChanged(t){const i=this.service.getAParams()??new U;i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setAParams(i),this.getAttendancePaged(!0))}onSearch(){const t=this.service.getAParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setAParams(t),this.getAttendancePaged(!0)}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value="");const t=this.service.getAParams();this.service.setAParams(t),this.getAttendancePaged(!1)}statusChanged(t){if(console.log("statusChanged att:",t),t){t.interviewedAt=new Date,new Date(t.reportedAt).getFullYear()<2e3&&(t.reportedAt=new Date);var i=new O,n=this.attendancesToUpdate.findIndex(a=>a.interviewCandidateId==t.interviewItemCandidateId);-1!==n?(this.attendancesToUpdate[n].interviewStatus=t.interviewStatus,this.attendancesToUpdate[n].interviewedAt=t.interviewedAt,this.attendancesToUpdate[n].reportedAt=t.reportedAt,this.attendancesToUpdate[n].interviewRemarks=t.interviewerRemarks,this.attendancesToUpdate[n].interviewStatus=t.interviewStatus):((i=new O).interviewCandidateId=t.interviewItemCandidateId,i.interviewStatus=t.interviewStatus,i.interviewedAt=t.interviewedAt,i.reportedAt=t.reportedAt,i.interviewRemarks=t.interviewerRemarks,this.attendancesToUpdate.push(i)),console.log("atttoUpdate",this.attendancesToUpdate,"att",t.interviewedAt)}}reported(t){var i=this.attendances.findIndex(n=>n.interviewItemCandidateId===t);-1!==i&&(this.attendances[i].reportedAt=new Date)}selectionChanged(t){var i;i=!0!==t.checked;var n=this.attendancesSelected.findIndex(a=>a.interviewItemCandidateId===t.interviewItemCandidateId);i?this.attendancesSelected.push(t):this.attendancesSelected.splice(n,1)}inviteCandidatesForInterview(){if(0!==this.attendancesSelected.length){var t=this.attendancesSelected.map(i=>i.interviewItemCandidateId);console.log("ids",t),this.service.composeInvitationMsgs(t).subscribe({next:i=>{i.length>0?(this.toastr.success("Messages composed and available to view/edit/send from the Messages folder","Success"),i.forEach(n=>{var a=this.attendances.findIndex(s=>s.applicationNo==s.applicationNo);-1!==a&&(this.attendances[a].applicationNo=n.applicationNo)})):this.toastr.warning("Warning","Failed to compose invitation messages")},error:i=>this.toastr.error(i.error.details,"Error encountered")})}}uploadNote(t){var i={id:t.interviewItemCandidateId,interviewItemId:0,intervwItemId:t.intervwItemId,candidateId:t.interviewItemCandidateId,personId:t.personId,prospectiveCandidateId:0,applicationNo:t.applicationNo,candidateName:t.candidateName,passportNo:"",scheduledFrom:t.scheduledFrom,reportedAt:t.reportedAt,interviewedAt:t.interviewedAt,interviewerRemarks:t.interviewerRemarks,interviewStatus:t.interviewStatus,attachmentFileNameWithPath:t.attachmentFileNameWithPath};new Date(Date.UTC(2024,10,2,12,30,0)),this.bsModalRef=this.bsModalService.show(Re,{class:"modal-dialog-centered modal-md",initialState:{itemCandidate:i}}),this.bsModalRef.content.updateAttendanceEvent.subscribe({next:a=>{console.log("response in attendance",a),null===a?this.toastr.info("Failed to update the candidate assignment, Or aborted by user","Failed to update the assignment"):this.toastr.success("Candidate Assignment updated","Success")},error:a=>this.toastr.error(a.error?.details,"Error encountered")})}downloadInterviewerNote(t){const i=t.attachmentFileNameWithPath;""!==i&&null!=i?this.service.downloadInterviewerNote(i).subscribe({next:n=>{const a=document.createElement("a"),s=URL.createObjectURL(n);a.href=s;var f=i.lastIndexOf("\\");a.download=-1!==f?i.substring(f+1):"filename.ext",a.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("no file exists for downloading","Bad Request")}uploadattachment(t){this.upload=!this.upload}onFileInputChange(t,i){this.selectedIndex=i.interviewItemCandidateId;const s=t.target.files[0];if(s.size>0){this.userFiles.push(s),this.att.attachmentFileNameWithPath=s.name;var f=this.attendancesSelected.findIndex(C=>C.interviewItemCandidateId===i.interviewItemCandidateId);-1!==f&&(this.attendancesSelected[f].attachmentFileNameWithPath=s.name)}}FilesUploaded(t){this.userFiles=t}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(Y),e.rXU(b.tw),e.rXU(m.nX),e.rXU(W.y),e.rXU(v.I8))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-interview-attendance"]],viewQuery:function(i,n){if(1&i&&e.GBs(Te,5),2&i){let a;e.mGM(a=e.lsd())&&(n.searchTerm=a.first)}},decls:38,vars:5,consts:[["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","updates ALL the attendances edited",1,"btn","fa","fa-save","fa-2x",3,"disabled","click"],["title","invite selected candidates for the interview - by email",1,"btn","fa","fa-envelope","fa-2x",3,"disabled","click"],["type","button",1,"fa","fa-refresh","fa-2x","mx-2",3,"click"],["type","button","routerLink","/interviews",1,"fa","fa-window-close","fa-2x"],[1,"stddML50","w50"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w70"],[1,"stdd","w160"],[1,"stdd","w110"],[1,"stdd","w200"],["class","my-2",4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],["type","checkbox",1,"form-check-input","w15","hAlignCenter",2,"margin-left","15px","margin-right","15px",3,"ngModel","ngModelChange","click"],[1,"stdd","w50"],["title","Candidate Name - will be displayed in red if still not interviewed","id","interviewVenue",1,"stdd","w100",3,"label","ngModel","ngModelChange"],[1,"stdd","w60",2,"text-align","center"],[2,"width","150px",3,"ngClass"],["type","text","id","scheduledFDrom","placeholder","Scheduled At",1,"dt",3,"ngModel","ngModelChange"],["type","text","id","reportedAt","placeholder","Reported at",1,"dt",3,"ngModel","ngModelChange"],["type","text","id","interviewedAt","placeholder","Interviewed At",1,"dt",3,"ngModel","ngModelChange"],[1,"w50","mx-2",2,"display","inline-block","font-size","x-small","vertical-align","top"],["title","edit this assignment.  Also, upload interview comment attachment",1,"btn","w15","fa","fa-pencil",2,"margin-left","60px",3,"click"],["title","mark the candidate as reported for interview",1,"btn","w15","fa","fa-bars",3,"click"],["type","button","title","download interviewer comments",1,"btn","w15","fa","fa-download",2,"color","aliceblue",3,"click"],["title","delete attendance - not the candidate",1,"btn","w15","fa","fa-trash",3,"click"],[2,"margin","0 15px 0 575px","padding-top","0px","font-size","smaller"],["bindLabel","name","bindValue","name","labelForId","id","clearAllText","Clear",1,"stdd","w200",3,"items","ngModel","ngModelChange","change"],["name","remarks","id","remarks","rows","1","cols","40","title","remarks by interviewer","placeholder","Remarks by interviewer",1,"stdd",3,"ngModel","ngModelChange"],["style","font-size: x-small;",4,"ngIf"],[1,"my-0"],[2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],[1,"btn","fa","fa-window-close",3,"click"]],template:function(i,n){1&i&&(e.DNE(0,je,2,3,"pagination",0),e.j41(1,"button",1),e.bIt("click",function(){return n.savewWithattachments()}),e.k0s(),e.j41(2,"button",2),e.bIt("click",function(){return n.inviteCandidatesForInterview()}),e.k0s(),e.j41(3,"button",3),e.bIt("click",function(){return n.onReset()}),e.k0s(),e.nrm(4,"button",4)(5,"br"),e.j41(6,"label",5),e.EFF(7,"Order"),e.nrm(8,"br"),e.EFF(9,"No"),e.k0s(),e.j41(10,"label",6),e.EFF(11,"Customer"),e.k0s(),e.j41(12,"label",7),e.EFF(13,"Venues"),e.k0s(),e.j41(14,"label",7),e.EFF(15,"Category"),e.k0s(),e.j41(16,"label",8),e.EFF(17,"Applicn"),e.nrm(18,"br"),e.EFF(19,"No"),e.k0s(),e.j41(20,"label",9),e.EFF(21,"Candidate Name"),e.k0s(),e.j41(22,"label",10),e.EFF(23,"Scheduled"),e.nrm(24,"br"),e.EFF(25,"at"),e.k0s(),e.j41(26,"label",10),e.EFF(27,"Reported"),e.nrm(28,"br"),e.EFF(29," at"),e.k0s(),e.j41(30,"label",10),e.EFF(31,"Interviewd"),e.nrm(32,"br"),e.EFF(33,"at"),e.k0s(),e.j41(34,"label",11),e.EFF(35,"File Uploaded"),e.k0s(),e.DNE(36,De,2,0,"div",12),e.DNE(37,Ae,29,17,"div",13)),2&i&&(e.Y8G("ngIf",void 0!==n.pagination),e.R7$(1),e.Y8G("disabled",0===n.attendancesToUpdate.length),e.R7$(1),e.Y8G("disabled",0===n.attendancesSelected.length),e.R7$(34),e.Y8G("ngIf",0===n.attendances.length),e.R7$(1),e.Y8G("ngForOf",n.attendances))},dependencies:[p.YU,p.Sq,p.bT,l.eK,c.me,c.Zm,c.BC,c.vS,N.vr,L.f,m.Wk],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;vertical-align:middle;font-weight:700;word-wrap:break-word}.stddML50[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px 0 50px;vertical-align:middle;font-weight:700;word-wrap:break-word}.dt[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 1px;vertical-align:top;width:160px}.w15[_ngcontent-%COMP%]{width:15px}.w50[_ngcontent-%COMP%]{width:50px}.w60[_ngcontent-%COMP%]{width:60px}.w70[_ngcontent-%COMP%]{width:70px}.w85[_ngcontent-%COMP%]{width:85px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.red[_ngcontent-%COMP%]{color:red}.stddX[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;vertical-align:top;font-size:x-small;line-height:1.5em;word-wrap:break-word;width:110px}"]})}return r})()}];let Oe=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({imports:[p.MD,m.iI.forChild(Ne),m.iI]})}return r})();var Ue=d(6939),Ve=d(8203);let Ge=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({imports:[Ve.jI]})}return r})();var D=d(6600),Le=d(1413);d(9969);let B=(()=>{class r{constructor(){this.changes=new Le.B,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const qe={provide:B,deps:[[new e.Xx1,new e.kdw,B]],useFactory:function Ze(r){return r||new B}};let it=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({providers:[qe,D.es],imports:[D.yE,p.MD,Ue.jc,Ge,y.m_,D.pZ,D.yE]})}return r})(),nt=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.$C({type:r});static#i=this.\u0275inj=e.G2t({imports:[p.MD,I.G,it,Oe,y.m_]})}return r})()}}]);