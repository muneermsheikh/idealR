"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[487],{7487:(xt,F,l)=>{l.r(F),l.d(F,{ProfileModule:()=>_t});var p=l(6814);class J{constructor(){this.customerId=0,this.orderId=0,this.professionIds=[],this.orderItemIds=[],this.pageNumber=1,this.pageSize=10}}class g{constructor(){this.id=0,this.applicationNoFrom=0,this.applicationNoUpto=0,this.candidateName="",this.passportNo="",this.professionId=0,this.agentId=0,this.typeOfCandidate="",this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}var e=l(5879),T=l(2051),d=l(6223);function X(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",15)(1,"span",16)(2,"input",17),e.NdJ("change",function(){const a=e.CHM(t).$implicit;return e.KtG(a.checked=!a.checked)}),e.qZA()(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",19),e._uU(6),e.qZA(),e.TgZ(7,"div",20),e._uU(8),e.qZA(),e.TgZ(9,"div",18),e._uU(10),e.qZA()()}if(2&s){const t=r.$implicit;e.xp6(2),e.Q6J("checked",t.checked)("disabled","closed"===t.status||"canceled"===t.status),e.xp6(2),e.Oqu(t.orderNo),e.xp6(2),e.Oqu(t.categoryName),e.xp6(2),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.status)}}let R=(()=>{class s{constructor(t){this.bsModalRef=t,this.emitterObj=new e.vpe,this.title="",this.orderItems=[],this.ids=[]}ngOnInit(){}emitSelectedIds(){this.emitterObj.emit(this.ids),this.bsModalRef.hide()}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(T.UZ))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-ids-modal"]],inputs:{emitterObj:"emitterObj"},decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left",2,"font-size","smaller","font-weight","bold"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"stdd","b","w100",2,"margin-left","17px"],[1,"stdd","b","w150"],[1,"stdd","b","w75"],[2,"display","inline-inline-block","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],["id","agentsForm"],["agentsForm","ngForm"],["class","form-check stdd",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"form-check","stdd"],[2,"width","3px","display","inline-block","padding","0px","vertical-align","top"],["type","checkbox",1,"form-check-input",3,"checked","disabled","change"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w75"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.bsModalRef.hide()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8,"Order No"),e.qZA(),e.TgZ(9,"div",6),e._uU(10,"Category Name"),e.qZA(),e.TgZ(11,"div",7),e._uU(12,"Qnty"),e.qZA(),e.TgZ(13,"div",6),e._uU(14,"Status"),e.qZA(),e._UZ(15,"hr",8),e.TgZ(16,"form",9,10),e.YNc(18,X,11,6,"div",11),e.qZA()(),e.TgZ(19,"div",12)(20,"button",13),e.NdJ("click",function(){return n.bsModalRef.hide()}),e._uU(21,"Cancel"),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return n.emitSelectedIds()}),e._uU(23,"Submit"),e.qZA()()),2&i&&(e.xp6(2),e.hij("",n.title," "),e.xp6(16),e.Q6J("ngForOf",n.orderItems))},dependencies:[p.sg,d._Y,d.JL,d.F],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75p}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return s})();var M=l(5861),Q=l(7328),L=l(8180),v=l(2096),x=l(7398),V=l(5516),P=l(9862),_=l(1436),A=l(7783);let y=(()=>{class s{constructor(t,i){this.http=t,this.accountService=i,this.apiUrl=V.N.apiUrl,this.currentUserSource=new Q.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.cities=[],this.cache=new Map,this.accountService.currentUser$.pipe((0,L.q)(1)).subscribe({next:n=>{n&&(this.cvParams=new g),this.user=n}})}onClickLoadDocument(){var t=this;return(0,M.Z)(function*(){return t.http.get(t.apiUrl+"candidates/loaddocument")})()}getAvailableCandidatesPaged(t,i=!0){if(i){const a=this.cache.get(Object.values(t).join("-"));if(a)return(0,v.of)(a)}else this.cache=new Map;let n=(0,_.ME)(t);return(0,_.Tr)(this.apiUrl+"candidate/cvsAvailable",n,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getCandidatesPaged(t,i=!0){if(i){const a=this.cache.get(Object.values(t).join("-"));if(a)return(0,v.of)(a)}else this.cache=new Map;let n=(0,_.ME)(t);return(0,_.Tr)(this.apiUrl+"candidate",n,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getCandidate(t){return this.http.get(this.apiUrl+"candidate/byid/"+t)}getCandidateBrief(t){const i=[...this.cache.values()].reduce((n,a)=>n.concat(a.result),[]).find(n=>n.id===t);return i?(0,v.of)(i):this.http.get(this.apiUrl+"candidate/briefdtobyid/"+t)}getCandidateBriefDtoFromAppNo(t){let i=new P.LE;return i.append("applicationNo",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}getCandidateBriefDtoFromId(t){var i=new P.LE;return i=i.append("candidateId",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:i})}registerNewWithFiles(t){return this.http.post(this.apiUrl+"Candidate/RegisterByUpload",t)}UpdateCandidateWithFiles(t){return this.http.put(this.apiUrl+"candidate/updatecandidatewithfiles",t)}setCurrentUser(t){localStorage.setItem("token",t.token),this.currentUserSource.next(t)}setCVParams(t){this.cvParams=t}getCVParams(){return this.cvParams}getCandidateCities(){return this.cities.length>0?(0,v.of)(this.cities):this.http.get(this.apiUrl+"candidate/cities").pipe((0,x.U)(t=>(this.cities=t,t)))}downloadAttachmentFile(t){return this.http.get(this.apiUrl+"fileupload/downloadattachmentfile/"+t)}updateAttachments(t){var i=[];return i.push(t),this.http.post(this.apiUrl+"Candidate/attachment",i)}getAttachments(t){return this.http.get(this.apiUrl+"Candidate/userattachments"+t)}deleteAttachment(t){return this.http.delete(this.apiUrl+"Candidate/userattachment/"+t)}setPhoto(t){return this.http.put(this.apiUrl+"userattachment/setPhoto",t)}static#e=this.\u0275fac=function(i){return new(i||s)(e.LFG(P.eN),e.LFG(A.B))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var h=l(7133),G=l(8241),Y=l(4503),b=l(8763),N=l(7012);function $(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1," No candidate detail available\n"),e.qZA())}function ee(s,r){1&s&&e._UZ(0,"div",15)}function te(s,r){if(1&s&&(e.TgZ(0,"span",13),e._uU(1),e.YNc(2,ee,1,0,"div",14),e.qZA()),2&s){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",t.professionName," "),e.xp6(1),e.Q6J("ngIf",i.cv.userProfessions.length>1)}}function ie(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.CVChecked(n.cv))}),e.qZA(),e.TgZ(2,"div",4),e._uU(3),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e.YNc(11,te,3,2,"span",9),e.qZA(),e.TgZ(12,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editCV(n.cv.id))}),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cvAssessClicked(n.cv))}),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.download(n.cv.id))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.cv.checked),e.xp6(1),e.MGl("routerLink","/candidates/edit/",t.cv.id,""),e.xp6(1),e.Oqu(t.cv.applicationNo),e.xp6(1),e.MGl("routerLink","/candidate/historyfromcvid/",t.cv.id,""),e.xp6(1),e.Oqu(t.cv.fullName),e.xp6(2),e.Oqu(t.cv.city),e.xp6(2),e.Oqu(t.cv.referredByName),e.xp6(2),e.Q6J("ngForOf",t.cv.userProfessions)}}let ne=(()=>{class s{constructor(){this.msgEvent=new e.vpe,this.downloadEvent=new e.vpe,this.cvAssessEvent=new e.vpe,this.cvCheckedEvent=new e.vpe,this.cvEditEvent=new e.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){var i=this;return(0,M.Z)(function*(){i.msgEvent.emit(t)})()}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}cvAssessClicked(t){this.cvAssessEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}editCV(t){this.cvEditEvent.emit(t),console.log("profile item edit cv, id: ",t)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",cvEditEvent:"cvEditEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 25px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","25px"],["type","checkbox","value","cv.id",1,"form-check-input",3,"checked","change"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","w50",3,"routerLink"],["title","contact history of the candidate",1,"stdd","mx-1","w180",3,"routerLink"],[1,"stdd","mx-1","w100"],[1,"stdd","mx-1","w200"],[1,"stdd","mx-1","fSmall","w200",2,"border","aqua"],["style","white-space: normal;",4,"ngFor","ngForOf"],["type","button","type","button","title","edit the candidate profile",1,"btn","btn-outline-secondary","fa","fa-solid","fa-pencil","w50",3,"click"],["type","button","type","button","title","Assess the CV",1,"btn","btn-outline-secondary","mx-2","fa","fa-solid","fa-balance-scale","w50",3,"click"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-trash","w50",3,"click"],[2,"white-space","normal"],["style","display: inline-block",4,"ngIf"],[2,"display","inline-block"]],template:function(i,n){1&i&&(e.YNc(0,$,2,0,"div",0),e.YNc(1,ie,15,8,"div",1)),2&i&&(e.Q6J("ngIf",null===n.cv),e.xp6(1),e.Q6J("ngIf",null!=n.cv))},dependencies:[p.sg,p.O5,h.rH],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return s})();const se=["search"];function ae(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"input",10,11),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onSearch())}),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onSearch())}),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onReset())}),e.qZA(),e._UZ(5,"button",14)(6,"button",15),e.qZA()}}function oe(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1," No compliant CVs available on record "),e.qZA())}function re(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",17)(1,"app-profile-item",18),e.NdJ("downloadEvent",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.downloadFileEvent(n))})("cvAssessEvent",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvAssessEvent(n))})("cvCheckedEvent",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvCheckedEvent(n))})("cvEditEvent",function(n){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cvEditClicked(n))}),e.qZA()()}if(2&s){const t=r.$implicit;e.xp6(1),e.Q6J("cv",t)}}function ce(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,re,2,1,"div",16),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.cvs)}}function de(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"pagination",2),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(2," >"),e.qZA(),e.YNc(3,ae,7,0,"div",0),e.TgZ(4,"div",3),e._UZ(5,"div",4),e.TgZ(6,"div",5),e._uU(7,"Appl No"),e.qZA(),e.TgZ(8,"div",6),e._uU(9,"Candidate Name"),e.qZA(),e.TgZ(10,"div",7),e._uU(11,"City"),e.qZA(),e.TgZ(12,"div",8),e._uU(13,"Agent"),e.qZA(),e.TgZ(14,"div",8),e._uU(15,"Professions"),e.qZA()(),e.YNc(16,oe,2,0,"div",9),e.YNc(17,ce,2,1,"div",9),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10),e.xp6(2),e.Q6J("ngIf",t.cvs),e.xp6(13),e.Q6J("ngIf",!t.cvs),e.xp6(1),e.Q6J("ngIf",t.cvs.length)}}let le=(()=>{class s{constructor(t,i,n,a,o,c,u){this.service=t,this.router=i,this.activatedRoute=n,this.modalService=a,this.orderService=o,this.downloadservice=c,this.toastr=u,this.cvs=[],this.selectedCVs=[],this.cvParams=new g,this.totalCount=0,this.professions=[],this.existingQBankCategories=[],this.agents=[],this.idFromChild=0,this.selectedProfIds=[],this.events=[],this.documentLoading=!1,this.sortOptions=[{name:"By Application No Asc",value:"appno"},{name:"By Application No Desc",value:"apppnodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Agent",value:"agent"},{name:"By Agent Desc",value:"agentdesc"}],this.cvParams=new g,this.service.setCVParams(this.cvParams)}ngOnInit(){this.loadCandidates(!1),this.activatedRoute.data.subscribe(t=>{this.professions=t.professions,this.agents=t.agents})}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,t).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination)}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination&&(this.cvs=t.result,this.totalCount=t.count)}}))}onSearch(){const t=this.service.getCVParams()??new g;t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new g,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var a=[];const o={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(R,o),this.bsModalRef.content.updateSelectedRoles.subscribe(c=>{a=c})}onAgentSelected(t){const i=this.service.getCVParams()??new g;i.agentId=t,i.pageNumber=1,this.service.setCVParams(i),this.getCVs()}getOpenOrderItemsArray(){let i=[],a=new J;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadFileEvent(t){return this.downloadservice.downloadFile(t).subscribe(()=>{this.toastr.success("document downloaded")},i=>{this.toastr.error("failed to download document",i)})}cvAssessEvent(t){this.navigateByUrl("/hr/cvassess/"+t.id,t,!1)}navigateByUrl(t,i,n){this.router.navigate([t],{state:{cvbrief:i,userobject:this.service.user,toedit:n,returnUrl:"/candidates/listing"}})}cvCheckedEvent(t){var i=this.selectedCVs.find(a=>a.id==t.id),n=this.selectedCVs.findIndex(a=>a.id===t.id);void 0!==i?i.checked?this.selectedCVs.push(t):this.selectedCVs.splice(n,1):this.selectedCVs.push(t)}cvEditClicked(t){this.navigateByUrl("/candidates/register/edit/"+t,void 0,!0)}cvAssessClicked(){this.navigateByUrl("/hr/assessments",this.selectedCVs,!1)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(y),e.Y36(h.F0),e.Y36(h.gz),e.Y36(T.tT),e.Y36(G.p),e.Y36(Y.D),e.Y36(b._W))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile-list"]],viewQuery:function(i,n){if(1&i&&e.Gf(se,5),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first)}},decls:1,vars:1,consts:[["class","stdd",4,"ngIf"],[1,"stdd"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","75px"],[1,"stddm","w15"],[1,"stddM","w45"],[1,"stddM","w180","mx-2"],[1,"stddM","w100","mx-1"],[1,"stddM","w200","mx-1"],[4,"ngIf"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button","title","Press this button after you enter the search criteria",1,"btn","fa","fa-search","fa-2x","mx-2",3,"click"],["type","button","title","reset the search criteria",1,"btn","fa","fa-refresh","fa-2x","mx-2",3,"click"],["type","button","title","Add a new candidate","routerLink","/candidates/register/edit/0",1,"btn","fa","fa-plus","fa-2x","mx-2"],["type","button","title","return to calling program","routerLink","/candidates",1,"stdd","btn","fa","fa-window-close","fa-2x"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvAssessEvent","cvCheckedEvent","cvEditEvent"]],template:function(i,n){1&i&&e.YNc(0,de,18,6,"div",0),2&i&&e.Q6J("ngIf",void 0!==n.pagination)},dependencies:[p.sg,p.O5,h.rH,N.Qt,ne],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;text-align:right;width:100px;font-weight:700;font-size:medium;margin-left:5px;vertical-align:top}.stddlist[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:200px;font-size:medium}.stddM[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return s})();var I=l(7208),pe=l(7450);const q=()=>(0,e.f3M)(pe.v).getAgentIdAndNames();var H=l(4825),w=l(4664),D=l(9537),ue=l(138),B=l(612),z=l(4807),he=l(7114),K=l(3593);function me(s,r){if(1&s&&(e.TgZ(0,"div",3),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij("",t.label," is required")}}let ve=(()=>{class s{constructor(t){this.ngControl=t,this.label="",this.ngControl.valueAccessor=this,this.bsConfig={containerClass:"theme-red",dateInputFormat:"DD MMM YY"}}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(d.a5,2))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-date-picker"]],inputs:{label:"label",maxDate:"maxDate"},decls:3,vars:7,consts:[[1,"mb-3"],["type","text","bsDatepicker","",1,"form-control",3,"formControl","placeholder","bsConfig","maxDate"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,me,2,1,"div",2),e.qZA()),2&i&&(e.xp6(1),e.ekj("is-invalid",n.control.touched&&n.control.invalid),e.s9C("placeholder",n.label),e.Q6J("formControl",n.control)("bsConfig",n.bsConfig)("maxDate",n.maxDate),e.xp6(1),e.Q6J("ngIf",null==n.control.errors?null:n.control.errors.required))},dependencies:[p.O5,K.Np,K.Y5,d.Fj,d.JJ,d.oH]})}return s})();const fe=["memberTabs"],ge=["password"];function _e(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1," No valid object\n"),e.qZA())}function Ce(s,r){if(1&s&&(e.TgZ(0,"div",72),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.strAddMode," ")}}function xe(s,r){1&s&&(e.TgZ(0,"div",73),e._UZ(1,"br"),e.TgZ(2,"label",74),e._uU(3,"Password"),e.qZA(),e._UZ(4,"app-text-input",75)(5,"app-text-input",76),e.qZA()),2&s&&(e.xp6(4),e.Q6J("label","Password")("type","password"),e.xp6(1),e.Q6J("label","Confirm Password")("type","password"))}function be(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"label",77),e._uU(2,"Referred By"),e.qZA(),e.TgZ(3,"ng-select",78),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getAgentValue(n))}),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(3),e.Q6J("items",t.agents)("searchable",!0)}}function we(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",79)(2,"div",52),e._uU(3),e.qZA(),e.TgZ(4,"div",53),e._UZ(5,"app-text-input",80),e.qZA(),e.TgZ(6,"div",54),e._UZ(7,"input",81),e.qZA(),e.TgZ(8,"button",82),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserPhone(a))}),e.qZA()()()}if(2&s){const t=r.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Q6J("label","Mobile No")}}function Ze(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",79)(2,"div",52),e._uU(3),e.qZA(),e.TgZ(4,"ng-select",83),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getProfessionValue(n))}),e.qZA(),e._UZ(5,"input",84),e.TgZ(6,"button",85),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserProfession(a))}),e.qZA()()()}if(2&s){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(1),e.Q6J("items",i.professions)("searchable",!0)}}function Te(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",79)(2,"div",60),e._uU(3),e.qZA(),e.TgZ(4,"ng-select",86),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getValues(n))}),e.qZA(),e._UZ(5,"input",81)(6,"input",87),e.TgZ(7,"button",85),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserQualification(a))}),e.qZA()()()}if(2&s){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Oqu(t+1),e.xp6(1),e.Q6J("items",i.qualifications)("searchable",!0)}}function Pe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",79)(2,"div",88),e._UZ(3,"app-text-input",89),e.qZA(),e.TgZ(4,"div",90),e._UZ(5,"app-text-input",91),e.qZA(),e.TgZ(6,"div",92),e._UZ(7,"app-text-input",93),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"app-date-picker",94),e.qZA(),e.TgZ(10,"div",14),e._UZ(11,"app-date-picker",95),e.qZA(),e.TgZ(12,"button",85),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserExp(a))}),e.qZA()()()}if(2&s){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Sr No"),e.xp6(2),e.Q6J("label","Position"),e.xp6(2),e.Q6J("label","Company"),e.xp6(2),e.Q6J("maxDate",i.maxDate)("label","Worked From"),e.xp6(2),e.Q6J("maxDate",i.maxDate)("label","Worked Upto")}}function Ae(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",79)(2,"div",96),e._UZ(3,"app-text-input",97),e.qZA(),e._UZ(4,"ng-select",98),e.TgZ(5,"button",99),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.removeUserAttachment(a))}),e.qZA(),e.TgZ(6,"button",100),e.NdJ("click",function(){const a=e.CHM(t).index,o=e.oxw(2);return e.KtG(o.download(a))}),e.qZA(),e._UZ(7,"input",101),e.qZA()()}if(2&s){const t=r.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","File Name"),e.xp6(1),e.Q6J("items",i.attachmentTypes)("searchable",!0)}}function ye(s,r){if(1&s&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Ue(s,r){if(1&s&&(e.TgZ(0,"div",102)(1,"ul",103),e.YNc(2,ye,2,1,"li",56),e.qZA()()),2&s){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.validationErrors)}}function ke(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.registerForm.valid&&n.savewithattachments())}),e.YNc(1,Ce,2,1,"div",3),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e.qZA(),e._UZ(4,"button",6),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",7)(7,"div",8),e._UZ(8,"app-text-input",9),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"label",10),e._uU(11,"Gender: "),e.qZA(),e._UZ(12,"input",11),e._uU(13,"Male "),e._UZ(14,"input",12),e._uU(15,"Female "),e._UZ(16,"br"),e.TgZ(17,"label",13),e._uU(18,"First Name"),e.qZA(),e.TgZ(19,"div",14),e._UZ(20,"app-text-input",15),e.qZA(),e.TgZ(21,"label",16),e._uU(22,"Second Name"),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"app-text-input",17),e.qZA(),e.TgZ(25,"label",18),e._uU(26,"Family Name"),e.qZA(),e.TgZ(27,"div",14),e._UZ(28,"app-text-input",19),e.qZA(),e.TgZ(29,"label",20),e._uU(30,"Known As"),e.qZA(),e.TgZ(31,"div",14),e._UZ(32,"app-text-input",21),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"label",22),e._uU(35,"Aadhar No"),e.qZA(),e.TgZ(36,"div",14),e._UZ(37,"app-text-input",23),e.qZA(),e._UZ(38,"br"),e.TgZ(39,"label",24),e._uU(40,"Passport No"),e.qZA(),e.TgZ(41,"div",14),e._UZ(42,"app-text-input",25),e.qZA(),e.TgZ(43,"label",26),e._uU(44,"Emig Clearance: "),e.qZA(),e._UZ(45,"input",27),e._uU(46," ECNR "),e._UZ(47,"input",28),e._uU(48," ECR "),e._UZ(49,"br"),e.TgZ(50,"label",29),e._uU(51,"Date of Birth"),e.qZA(),e.TgZ(52,"div",14),e._UZ(53,"app-date-picker",30),e.qZA(),e.TgZ(54,"label",31),e._uU(55,"Place of Birth"),e.qZA(),e.TgZ(56,"div",14),e._UZ(57,"app-text-input",32),e.qZA(),e._UZ(58,"br"),e.TgZ(59,"label",33),e._uU(60,"Address"),e.qZA(),e.TgZ(61,"div",34),e._UZ(62,"app-text-input",35),e.qZA(),e._UZ(63,"br"),e.TgZ(64,"label",36),e._uU(65,"City"),e.qZA(),e.TgZ(66,"div",14),e._UZ(67,"app-text-input",37),e.qZA(),e.TgZ(68,"label",38),e._uU(69,"PIN"),e.qZA(),e.TgZ(70,"div",14),e._UZ(71,"app-text-input",39),e.qZA(),e._UZ(72,"br"),e.TgZ(73,"label",40),e._uU(74,"District"),e.qZA(),e.TgZ(75,"div",14),e._UZ(76,"app-text-input",41),e.qZA(),e.TgZ(77,"label",42),e._uU(78,"Email"),e.qZA(),e.TgZ(79,"div",43),e._UZ(80,"app-text-input",44),e.qZA(),e.YNc(81,xe,6,4,"div",45),e.YNc(82,be,4,2,"div",0),e._UZ(83,"br"),e.qZA(),e.TgZ(84,"div",46)(85,"tabset",47,48)(87,"tab",49),e.NdJ("selectTab",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(n))}),e.TgZ(88,"h4",50),e._uU(89,"Phones"),e.qZA(),e.TgZ(90,"div",51)(91,"div",52),e._uU(92,"Sr No"),e.qZA(),e.TgZ(93,"div",53),e._uU(94,"Phone"),e.qZA(),e.TgZ(95,"div",54),e._uU(96,"Is Main"),e.qZA(),e.TgZ(97,"button",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addPhone())}),e.qZA(),e.YNc(98,we,9,3,"div",56),e.qZA(),e._UZ(99,"br"),e.TgZ(100,"label",10),e._uU(101,"Professions"),e.qZA(),e.TgZ(102,"div",57)(103,"div",52),e._uU(104,"Sr No"),e.qZA(),e.TgZ(105,"div",53),e._uU(106,"Category"),e.qZA(),e.TgZ(107,"div",54),e._uU(108,"Is Main"),e.qZA(),e.TgZ(109,"button",58),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addUserProfession())}),e.qZA(),e.YNc(110,Ze,7,4,"div",56),e.qZA(),e._UZ(111,"br"),e.TgZ(112,"label",10),e._uU(113,"Qualifications"),e.qZA(),e.TgZ(114,"div",59)(115,"div",60),e._uU(116,"Sr No"),e.qZA(),e.TgZ(117,"div",61),e._uU(118,"Qualification"),e.qZA(),e.TgZ(119,"div",62),e._uU(120,"Is Main"),e.qZA(),e.TgZ(121,"button",58),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addQualification())}),e.qZA(),e.YNc(122,Te,8,4,"div",56),e.qZA()(),e.TgZ(123,"tab",63),e.NdJ("selectTab",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(n))}),e.TgZ(124,"label",10),e._uU(125,"Experiences"),e.qZA(),e.TgZ(126,"div",64)(127,"button",58),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addUserExp())}),e.qZA(),e.YNc(128,Pe,13,8,"div",56),e.qZA()(),e.TgZ(129,"tab",65),e.NdJ("selectTab",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onTabActivated(n))}),e.TgZ(130,"div",66),e._uU(131,"File to upload"),e.qZA(),e.TgZ(132,"div",67),e._uU(133,"Type"),e.qZA(),e.TgZ(134,"div",68)(135,"div",69)(136,"input",70),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileInputChange(n))}),e.qZA()(),e.YNc(137,Ae,8,4,"div",56),e.qZA()()()(),e.YNc(138,Ue,3,1,"div",71),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.registerForm),e.xp6(1),e.Q6J("ngIf",t.candidate),e.xp6(3),e.Q6J("disabled",!t.registerForm.valid),e.xp6(16),e.Q6J("label","First Name"),e.xp6(4),e.Q6J("label","Second Name"),e.xp6(4),e.Q6J("label","Family Name"),e.xp6(4),e.Q6J("label","Known As"),e.xp6(5),e.Q6J("label","Aadhar No"),e.xp6(5),e.Q6J("label","Passport No"),e.xp6(11),e.Q6J("maxDate",t.maxDate)("label","Date of birth"),e.xp6(4),e.Q6J("label","Place of birth"),e.xp6(5),e.Q6J("label","address"),e.xp6(5),e.Q6J("label","city"),e.xp6(4),e.Q6J("label","pin"),e.xp6(5),e.Q6J("label","district"),e.xp6(4),e.Q6J("label","email"),e.xp6(1),e.Q6J("ngIf",0===t.candidate.id),e.xp6(1),e.Q6J("ngIf",t.agents),e.xp6(16),e.Q6J("ngForOf",null==t.userPhones?null:t.userPhones.controls),e.xp6(12),e.Q6J("ngForOf",null==t.userProfessions?null:t.userProfessions.controls),e.xp6(12),e.Q6J("ngForOf",null==t.userQualifications?null:t.userQualifications.controls),e.xp6(6),e.Q6J("ngForOf",null==t.userExperiences?null:t.userExperiences.controls),e.xp6(9),e.Q6J("ngForOf",null==t.userAttachments?null:t.userAttachments.controls),e.xp6(1),e.Q6J("ngIf",t.validationErrors)}}let Me=(()=>{class s{constructor(t,i,n,a,o,c,u,C,O){this.accountService=t,this.toastrService=i,this.fb=n,this.activatedRoute=a,this.candidateService=o,this.router=c,this.qualService=C,this.downloadService=O,this.myPassword="",this.cancelRegister=new e.vpe,this.registerForm=new d.cw({}),this.maxDate=new Date,this.memberPhotoUrl="",this.professions=[],this.agents=[],this.qualifications=[],this.errors=[],this.isAddMode=!1,this.strAddMode="",this.loading=!1,this.submitted=!1,this.bsValueDate=new Date,this.fileToUpload=null,this.filesToUpload=[],this.selectedProfession="",this.events=[],this.onUploadFinished=new e.vpe,this.progress={loaded:0,total:0},this.message="",this.isMultipleUploaded=!1,this.isSingleUploaded=!1,this.urlAfterUpload="",this.percentUploaded=0,this.attachmentType="",this.userFiles=[],this.attachmentid=0,this.routeId="",this.returnUrl="/candidates",this.attachmentTypes=[{typeName:"CV"},{typeName:"Educational Certificate"},{typeName:"Experience Certificate"},{typeName:"Passport Copy"},{typeName:"Photograph"}],this.lastTimeCalled=Date.now(),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();const Z=new FormData;this.userFiles.length>0&&this.userFiles.forEach(m=>{Z.append("file",m,m.name)}),Z.append("data",JSON.stringify(this.registerForm.value)),this.candidate||void 0!==Z.get("password")?0===this.candidate.id?(this.toastrService.info("inserting ..."),this.candidateService.registerNewWithFiles(Z).subscribe({next:m=>{console.log("response in angular:",m),""!==m.errorMessage?this.toastrService.error("failed to save the candidate data",m.errorMessage):(this.toastrService.success("candidate saved, with Application No. "+m.returnInt.toString(),"Profile successfully inserted"),this.registerForm.setValue({applicationNo:m.returnInt}))},error:m=>{this.toastrService.error("failed to insert the candidate",m.error.details)}})):(this.toastrService.info("udating ..."),this.candidateService.UpdateCandidateWithFiles(Z).subscribe({next:m=>{""!==m?.errorMessage?this.toastrService.error("failed to update the candidate",m.errorMessage):(this.toastrService.success("updated the candidate successfully"),this.router.navigateByUrl(this.returnUrl))},error:m=>{this.toastrService.error("failed to update the candidate",m),console.log(m)}})):this.toastrService.info("Password not provided")},this.uploadFinished=S=>{this.response=S},this.passwordElement=u,this.routeId=this.activatedRoute.snapshot.params.id,this.routeId=this.activatedRoute.snapshot.params.id,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let f=this.router.getCurrentNavigation();f?.extras&&f.extras.state&&(f.extras.state.returnUrl&&(this.returnUrl=f.extras.state.returnUrl),f.extras.state.user&&(this.user=f.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.professions=t.categories,this.qualifications=t.qualifications,this.agents=t.agents,this.candidate=t.candidate,this.isAddMode=0===this.candidate?.id,this.strAddMode=this.isAddMode?"Entering new candidate":"Editing Application No."+this.candidate?.applicationNo}),this.candidate&&this.InitializeAndPopulateFormArray(this.candidate)}InitializeAndPopulateFormArray(t){this.registerForm=this.fb.group({id:[t.id,d.kI.required],applicationNo:[t.applicationNo],gender:[t.gender,d.kI.required],nationality:["Indian"],firstName:[t.firstName,d.kI.required],secondName:[t.secondName],familyName:[t.familyName],knownAs:[t.knownAs,d.kI.required],dOB:[t.dOB],placeOfBirth:[t.placeOfBirth],aadharNo:[t.aadharNo],ppNo:[t.ppNo],ecnr:[t.ecnr],companyId:[t.companyId],referredByName:[t.referredByName],address:[t.address],city:[t.city,d.kI.required],pin:[t.pin],district:[t.district],email:[t.email,d.kI.required],userPhones:this.fb.array(t.userPhones.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],mobileNo:[i.mobileNo,d.kI.required],isMain:[i.isMain],remarks:[i.remarks],isValid:[i.isValid]}))),userQualifications:this.fb.array(t.userQualifications.map(i=>this.fb.group({id:i.id,candidateId:[i.candidateId],qualificationId:[i.qualificationId,d.kI.required],isMain:[i.isMain]}))),userProfessions:this.fb.array(t.userProfessions.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,professionId:[i.professionId,d.kI.required],isMain:[i.isMain]}))),userExperiences:this.fb.array(t.userExperiences.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,employer:i.employer,position:i.position,salaryCurrency:i.salaryCurrency,monthlySalaryDrawn:i.monthlySalaryDrawn,workedFrom:i.workedFrom,workedUpto:i.workedUpto}))),userAttachments:this.fb.array(t.userAttachments.map(i=>this.fb.group({id:i.id,candidateId:i.candidateId,appUserId:i.appUserId,attachmentType:i.attachmentType,name:[i.name,d.kI.required],attachmentSizeInBytes:i.attachmentSizeInBytes,url:i.url})))}),this.registerForm.controls.password&&this.registerForm.controls.password.valueChanges.subscribe({next:()=>this.registerForm.controls.confirmPassword.updateValueAndValidity()})}get userPhones(){return this.registerForm.get("userPhones")}get userQualifications(){return this.registerForm.get("userQualifications")}get userProfessions(){return this.registerForm.get("userProfessions")}get userExperiences(){return this.registerForm.get("userExperiences")}newUserPhone(){return this.fb.group({candidateId:this.candidate?.id,mobileNo:["",d.kI.required],isMain:!1,remarks:""})}addPhone(){this.userPhones.push(this.newUserPhone())}removeUserPhone(t){this.userPhones.removeAt(t)}newQualification(){return this.fb.group({candidateId:this.candidate?.id,qualificationId:0,qualificationName:"",isMain:[!1]})}addQualification(){this.userQualifications.push(this.newQualification())}removeUserQualification(t){this.userQualifications.removeAt(t)}newUserProfession(){return this.fb.group({professionId:[0,d.kI.required],isMain:[!1,d.kI.required],candidateId:this.candidate?.id})}addUserProfession(){this.userProfessions.push(this.fb.group({candidateId:[0,d.kI.required],professionId:[0,d.kI.required],isMain:[!1,d.kI.required]}))}removeUserProfession(t){this.userProfessions.removeAt(t)}newUserExp(){return this.fb.group({candidateId:this.candidate?.id,srNo:[0,d.kI.required],position:["",d.kI.required],company:["",d.kI.required],workedFrom:"",workedUpto:""})}addUserExp(){this.userExperiences.push(this.newUserExp())}removeUserExp(t){this.userExperiences.removeAt(t)}get userAttachments(){return this.registerForm.get("userAttachments")}newUserAttachment(){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:[""],name:["",d.kI.required],attachmentSizeInBytes:0,url:""})}newUserAttachmentWithFile(t){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:["",d.kI.required],name:[t.name,d.kI.required],attachmentSizeInBytes:t.size,url:""})}addUserAttachment(){this.userAttachments.push(this.newUserAttachment())}removeUserAttachment(t){this.userAttachments.removeAt(t)}getCVById(t){return this.candidateService.getCandidate(t).subscribe({next:i=>{this.candidate=i,this.InitializeAndPopulateFormArray(this.candidate)},error:i=>this.toastrService.error("failed to get candidate to edit:",i)})}getQualifications(){return this.qualService.getQualificationList().subscribe({next:t=>this.qualifications=t,error:t=>this.toastrService.error("error in qualificatin",t)})}matchValues(t){return i=>i.value===i.parent?.get(t)?.value?null:{notMatching:!0}}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}selectTab(t){this.memberTabs.tabs[t].active=!0}onTabActivated(t){this.activeTab=t}validateEmailNotTaken(){return t=>(0,H.H)(10).pipe((0,w.w)(()=>t.value?this.accountService.checkEmailExists(t.value).pipe((0,x.U)(i=>i?{emailExists:!0}:null)):(0,v.of)(null)))}validatePPNotTaken(){return t=>(0,H.H)(10).pipe((0,w.w)(()=>t.value?this.accountService.checkPPExists(t.value).pipe((0,x.U)(i=>(null!==i&&this.toastrService.warning("that passport number is taken by "+i),i?{ppExists:!0}:null))):(0,v.of)(null)))}handleFileInput(t){this.fileToUpload=t[0],this.filesToUpload.push(t[0])}getAgentValue(t){console.log("agent selected",t)}getProfessionValue(t){console.log("ngx dropdown selected",t)}getValues(t){console.log("ngx dropdown selected",this.selectedProfession)}onFileInputChange(t){const a=t.target.files[0];a.size>0&&(this.userFiles.push(a),this.userAttachments.push(this.newUserAttachmentWithFile(a)))}download(t){var i=this.userAttachments.at(t).get("id")?.value;0!==i?(this.toastrService.info("downloading from api server"),this.downloadService.download(i).subscribe(n=>{})):this.toastrService.warning("this item has no primary key value")}IsNewAttachment(t){return void 0!==this.userAttachments.value.map(n=>n.id).findIndex(n=>0===n.id)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(A.B),e.Y36(b._W),e.Y36(d.qu),e.Y36(h.gz),e.Y36(y),e.Y36(h.F0),e.Y36(e.SBq),e.Y36(D.h),e.Y36(ue.I))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-candidate-edit"]],viewQuery:function(i,n){if(1&i&&(e.Gf(fe,7),e.Gf(ge,7)),2&i){let a;e.iGM(a=e.CRH())&&(n.memberTabs=a.first),e.iGM(a=e.CRH())&&(n.passwordElement=a.first)}},outputs:{cancelRegister:"cancelRegister",onUploadFinished:"onUploadFinished"},decls:2,vars:2,consts:[[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],["class","my-0","style","font-weight: bold; display: inline-block;",4,"ngIf"],[1,"my-0",2,"margin-left","225px","display","inline-block","vertical-align","top"],["type","button",1,"btn","btn-default","fa","fa-undo",3,"click"],["title","Update","type","submit",1,"btn","btn-success","me-2","fa","fa-save",3,"disabled"],[1,"stdd","col-5","mt-1",2,"border-style","groove","margin-left","5px"],[1,"stdd","w30"],["formControlName","id"],[1,"lbl"],["type","radio","value","male","formControlName","gender",1,"inputcheck","form-check-input"],["type","radio","value","female","formControlName","gender",1,"inputcheck","form-check-input"],["for","firstName",1,"lbl"],[1,"stdd","w150"],["formControlName","firstName",3,"label"],["for","secondName",1,"lbl"],["formControlName","secondName",3,"label"],["for","familyName",1,"lbl"],["formControlName","familyName",3,"label"],["for","knownAs",1,"lbl"],["formControlName","knownAs",3,"label"],["for","aadharNo",1,"lbl"],["formControlName","aadharNo",3,"label"],["for","ppNo",1,"lbl",2,"margin-left","5px"],["formControlName","ppNo",3,"label"],[1,"lbl",2,"margin-left","10px","margin-right","10px"],["type","radio","formControlName","ecnr","value","true",1,"form-check-input","inputcheck"],["type","radio","formControlName","ecnr","value","false",1,"form-check-input","inputcheck"],["for","dOB",1,"lbl"],["formControlName","dOB",3,"maxDate","label"],["for","placeOfBirth",1,"lbl"],["formControlName","placeOfBirth",3,"label"],["for","address",1,"lbl"],[1,"stdd","w450"],["formControlName","address",3,"label"],["for","city",1,"lbl"],["formControlName","city",3,"label"],["for","pin",1,"lbl"],["formControlName","pin",3,"label"],["for","district",1,"lbl"],["formControlName","district",3,"label"],["for","email",2,"display","inline-block","width","50px","font-size","small"],[1,"stdd","w250"],["formControlName","email",3,"label"],["class","stdd w500",4,"ngIf"],[1,"stdd","col-6","mt-1",2,"margin-left","5px"],[1,"member-tabset",2,"background-color","black","color","whitesmoke"],["memberTabs",""],["heading","Phones, Prof & Qualification",3,"selectTab"],[2,"background-color","auto !important"],["formArrayName","userPhones",1,"col-12","my-1","px-0",2,"font-size","small"],[1,"stdd","col-1"],[1,"stdd","col-4"],[1,"stdd","col-2"],["type","button",1,"stdd","my-1","fa","fa-plus",2,"color","blue",3,"click"],[4,"ngFor","ngForOf"],["formArrayName","userProfessions",1,"col-12","my-1","px-0",2,"font-size","small"],["type","button",1,"my-1","fa","fa-plus",2,"color","blue",3,"click"],["formArrayName","userQualifications",1,"my-1","px-0",2,"font-size","small"],[2,"width","50px","display","inline-block"],[2,"width","300px","display","inline-block"],[2,"width","50px","margin-left","10px","display","inline-block"],["heading","Experience",3,"selectTab"],["formArrayName","userExperiences",1,"col-12","my-1","px-0",2,"height","10px","font-size","small"],["heading","Attachments",3,"selectTab"],[1,"stdd","col-6"],[1,"stdd","col-3"],["formArrayName","userAttachments",2,"height","12px"],[1,"stdd",2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],["class","row",4,"ngIf"],[1,"my-0",2,"font-weight","bold","display","inline-block"],[1,"stdd","w500"],["for","password",1,"lbl"],["formControlName","password",3,"label","type"],[3,"label","type"],["for","referredBy",1,"lbl"],["bindLabel","customerName","bindValue","id","formControlName","companyId",2,"display","inline-block","font-size","smaller","width","300px",3,"items","searchable","change"],[3,"formGroupName"],["formControlName","mobileNo",3,"label"],["type","checkbox","formControlName","isMain",2,"width","50px","margin-left","30","display","inline-block"],[1,"stdd","fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","professionName","bindValue","id","formControlName","professionId",1,"stdd","col-4",3,"items","searchable","change"],["type","checkbox","formControlName","isMain",1,"stdd","col-2"],[1,"fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","qualificationName","bindValue","id","formControlName","qualificationId",1,"stdd","w300","py-0","my-0",3,"items","searchable","change"],["type","text","formControlName","candidateId",1,"stdd","w15"],[1,"stdd","w100"],["formControlName","srNo",3,"label"],[1,"stdd","w300"],["formControlName","position",3,"label"],[1,"stdd","w400"],["formControlName","company",3,"label"],["formControlName","workedFrom",3,"maxDate","label"],["formControlName","workedUpto",3,"maxDate","label"],[1,"stdd","col-5"],["formControlName","name",3,"label"],["bindLabel","typeName","bindValue","typeName","formControlName","attachmentType",1,"stdd","mx-10","w150","fSmaller",3,"items","searchable"],[1,"stdd","red","fa","fa-trash",2,"margin-left","20px",3,"click"],[1,"stdd","mx-1","fa","fa-download",3,"click"],["type","number","formControlName","id","readonly","",1,"stdd","w15"],[1,"row"],[1,"text-danger"]],template:function(i,n){1&i&&(e.YNc(0,_e,2,0,"div",0),e.YNc(1,ke,139,25,"form",1)),2&i&&(e.Q6J("ngIf",!n.candidate),e.xp6(1),e.Q6J("ngIf",n.candidate))},dependencies:[p.sg,p.O5,B.wW,B.AH,d._Y,d.Fj,d.wV,d.Wl,d._,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,z.w9,he.t,ve],styles:['.stdd[_ngcontent-%COMP%]{vertical-align:top;padding-left:5px;display:inline-block;margin-top:5px}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin-right:10px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.lblS[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;vertical-align:top;font-weight:700;width:40px;margin-top:5px}.lbl[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;font-weight:700;width:100px;margin-top:5px;margin-left:5px;vertical-align:middle}.chkLabel[_ngcontent-%COMP%]{width:100px;margin-right:2px;padding-left:2px}.tAlignR[_ngcontent-%COMP%]{text-align:right}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.w450[_ngcontent-%COMP%]{width:450px}.red[_ngcontent-%COMP%]{color:red}']})}return s})();class Ie{constructor(){this.id=0,this.applicationNo=0,this.gender="",this.firstName="",this.secondName="",this.familyName="",this.knownAs="",this.referredBy=0,this.referredByName="",this.placeOfBirth="",this.aadharNo="",this.ppNo="",this.ecnr="",this.address="",this.city="",this.pin="",this.district="",this.nationality="",this.email="",this.companyId=0,this.created=new Date,this.appUserIdNotEnforced="",this.appUserId=0,this.notificationDesired=!1,this.candidateStatus="",this.photoUrl="",this.lastActive=new Date,this.userPhones=[],this.userQualifications=[],this.userProfessions=[],this.userAttachments=[],this.userExperiences=[],this.userPhotos=[]}}var U=l(2181),E=l(8344),j=l(3298),Ee=l(3391);function Oe(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1," No candidate detail available\n"),e.qZA())}function Se(s,r){1&s&&e._UZ(0,"div",15)}function Fe(s,r){if(1&s&&(e.TgZ(0,"span",13),e._uU(1),e.YNc(2,Se,1,0,"div",14),e.qZA()),2&s){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",t.professionName," , "),e.xp6(1),e.Q6J("ngIf",i.cv.userProfessions.length>1)}}function Je(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.CVChecked(n.cv))}),e.qZA(),e.TgZ(2,"div",4),e._uU(3),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"div",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.displayAssessment())}),e._uU(16),e.qZA(),e.TgZ(17,"div",10),e.YNc(18,Fe,3,2,"span",11),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.download(n.cv.candidateId))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.cv.checked),e.xp6(2),e.Oqu(t.cv.gender),e.xp6(1),e.MGl("routerLink","/candidates/edit/",t.cv.candidateId,""),e.xp6(1),e.Oqu(t.cv.applicationNo),e.xp6(1),e.MGl("routerLink","/candidate/historyfromcvid/",t.cv.candidateId,""),e.xp6(1),e.Oqu(t.cv.fullName),e.xp6(2),e.Oqu(t.cv.city),e.xp6(2),e.Oqu(t.cv.orderCategoryRef),e.xp6(2),e.Oqu(e.xi3(14,11,t.cv.assessedOn,"dd-MMM-yy")),e.xp6(3),e.Oqu(t.cv.gradeAssessed),e.xp6(2),e.Q6J("ngForOf",t.cv.userProfessions)}}let Re=(()=>{class s{constructor(){this.msgEvent=new e.vpe,this.downloadEvent=new e.vpe,this.cvAssessEvent=new e.vpe,this.cvCheckedEvent=new e.vpe,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){var i=this;return(0,M.Z)(function*(){i.msgEvent.emit(t)})()}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-available-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],[1,"stdd","fSmall","w25","mx-1",2,"text-align","center"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","fSmall","w50","mx-1",2,"margin-left","10px",3,"routerLink"],["title","contact history of the candidate",1,"stdd","fSmall","w130","mx-1",3,"routerLink"],[1,"stdd","fSmall","mx-1","w100"],[1,"stdd","fSmaller","mx-1","w300"],[1,"stdd","fSmall","w50","mx-1","blue","cursorpointer",2,"text-align","center",3,"click"],[1,"stdd","mx-1","fSmall","w200","mx-1",2,"border","aqua"],["style","white-space: normal;",4,"ngFor","ngForOf"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-download","w40",3,"click"],[2,"white-space","normal"],["style","display: inline-block",4,"ngIf"],[2,"display","inline-block"]],template:function(i,n){1&i&&(e.YNc(0,Oe,2,0,"div",0),e.YNc(1,Je,20,14,"div",1)),2&i&&(e.Q6J("ngIf",null===n.cv),e.xp6(1),e.Q6J("ngIf",null!=n.cv))},dependencies:[p.sg,p.O5,h.rH,p.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.blue[_ngcontent-%COMP%]{color:#00008b}"]})}return s})();const Qe=["search"];function Le(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"pagination",12),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(1," >"),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Ve(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",13)(1,"input",14,15),e.NdJ("keyup.enter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSearch())}),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSearch())}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",17),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onReset())}),e._uU(6,"Reset"),e.qZA(),e.TgZ(7,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.referCVs())}),e.qZA(),e.TgZ(8,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.close())}),e.qZA()()}}function Ge(s,r){1&s&&(e.TgZ(0,"div",20),e._uU(1," No candidates available to refer "),e.qZA())}function Ye(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",22)(1,"app-available-item",23),e.NdJ("downloadEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.downloadFileEvent(n))})("cvCheckedEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cvCheckedEvent(n))})("cvAssessEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.displayAssessmentModalBySwitchMap(n))}),e.qZA()()}if(2&s){const t=r.$implicit;e.xp6(1),e.Q6J("cv",t)}}function He(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,Ye,2,1,"div",21),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.cvs)}}let De=(()=>{class s{constructor(t,i,n,a,o,c,u,C,O){this.router=t,this.activatedRoute=i,this.service=n,this.candAssessService=a,this.referService=o,this.toastr=c,this.modalService=u,this.orderService=C,this.downloadService=O,this.professions=[],this.agents=[],this.cvs=[],this.selectedCVs=[],this.returnUrl="",this.cvParams=new g,this.totalCount=0,this.cvParams.typeOfCandidate="available";let f=this.router.getCurrentNavigation();f?.extras&&f.extras.state&&(f.extras.state.returnUrl&&(this.returnUrl=f.extras.state.returnUrl),f.extras.state.user&&(this.user=f.extras.state.user))}ngOnInit(){this.loadCandidates(!1),this.activatedRoute.data.subscribe(t=>{this.professions=t.professions,this.agents=t.agents}),this.selectedCVs=[]}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,t).subscribe({next:i=>{i.result&&i.pagination&&(this.cvs=i.result,this.pagination=i.pagination,console.log("cvs",this.cvs))}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination&&(this.cvs=t.result,this.totalCount=t.count)}}))}onSearch(){const t=this.service.getCVParams()??new g;t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new g,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var a=[];const o={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:a}};this.bsModalRef=this.modalService.show(R,o),this.bsModalRef.content.updateSelectedRoles.subscribe(c=>{a=c})}getOpenOrderItemsArray(){let i=[],a=new J;return this.orderService.getOrderItemsBriefDto(a).subscribe(o=>{if(i=o,0!==i.length)return i},o=>{console.log("failed to retrieve roles array",o)}),i}downloadFileEvent(t){return this.downloadService.downloadFile(t).subscribe(()=>{this.toastr.success("document downloaded")},i=>{this.toastr.error("failed to download document",i)})}displayAssessmentModal(t){this.candAssessService.getCandidateAssessmentDto(t.candidateId,t.orderItemId).subscribe(a=>{null===a?this.toastr.warning("failed to retrieve the assessment object"):(this.bsModalRef=this.modalService.show(E.K,{class:"modal-dialog-centered modal-lg",initialState:{assess:a}}),this.bsModalRef.content.candAssessEvent.subscribe(()=>{console.log("succeeded")}))})}displayAssessmentModalBySwitchMap(t){this.candAssessService.getCandidateAssessmentDto(t.candidateId,t.orderItemId).pipe((0,U.h)(o=>void 0!==o),(0,w.w)(o=>(this.bsModalRef=this.modalService.show(E.K,{class:"modal-dialog-centered modal-lg",initialState:{assess:o,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(o=>{console.log("inner response:",o)})}navigateByUrl(t,i,n){this.router.navigate([t],{state:{cvbrief:i,userobject:this.service.user,toedit:n,returnUrl:"/candidates"}})}cvCheckedEvent(t){var i=this.selectedCVs.find(a=>a.candidateId==t.id),n=this.selectedCVs.findIndex(a=>a.candidateId===t.id);void 0!==i?i.checked?this.selectedCVs.push(t):this.selectedCVs.splice(n,1):this.selectedCVs.push(t)}referCVs(){if(0!==this.selectedCVs.length){var t=this.selectedCVs.map(i=>i.candAssessmentId);this.referService.referCVs(t).subscribe({next:i=>{""===i?(this.toastr.success("selected CVs referred, and CV Referral message available in Messages section for edits","success"),this.cvs.forEach(n=>{n.checked&&(n.checked=!1)}),this.selectedCVs=[]):this.toastr.warning(i,"failed to refer CVs")},error:i=>{i.length>0?this.toastr.error(i.error.message,"error in referring the CVs1"):this.toastr.error(i,"Error in referring the CVs;")}})}else this.toastr.warning("No CVs selected to forward to client","No selections made")}close(){this.router.navigateByUrl(this.returnUrl)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(h.F0),e.Y36(h.gz),e.Y36(y),e.Y36(j.k),e.Y36(Ee.Z),e.Y36(b._W),e.Y36(T.tT),e.Y36(G.p),e.Y36(Y.D))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-cvs-available-to-ref"]],viewQuery:function(i,n){if(1&i&&e.Gf(Qe,5),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first)}},decls:23,vars:4,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],[2,"margin-left","70px"],[1,"lbl","w30","mx-1"],[1,"lbl","w25","mx-1"],[1,"lbl","w50","mx-1"],[1,"lbl","w130","mx-1"],[1,"lbl","w100","mx-1"],[1,"lbl","w300","mx-1"],[1,"lbl","w200","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; color: pink; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"stdd","btn","btn-outline-primary","mx-1",3,"click"],["type","button",1,"stdd","mx-1","fa-arrows-rotate","fa-2x",2,"font-size","small",3,"click"],["title","refers selected CVs to client",1,"stdd","w40","mx-1","fa","fa-arrow-right","fa-2x",3,"click"],["title","close this page",1,"stdd","w40","mx-1","fa","fa-window-close","fa-2x",3,"click"],[2,"margin-left","100px","margin-top","5px","font-weight","bold","color","pink"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvCheckedEvent","cvAssessEvent"]],template:function(i,n){1&i&&(e.YNc(0,Le,2,3,"pagination",0),e.YNc(1,Ve,9,0,"div",1),e.TgZ(2,"div",2)(3,"div",3),e._uU(4,"Select"),e.qZA(),e.TgZ(5,"div",4),e._uU(6,"Gndr"),e.qZA(),e.TgZ(7,"div",5),e._uU(8,"App No"),e.qZA(),e.TgZ(9,"div",6),e._uU(10,"Candidate Name"),e.qZA(),e.TgZ(11,"div",7),e._uU(12,"City"),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"Category Ref"),e.qZA(),e.TgZ(15,"div",7),e._uU(16,"Assessed On"),e.qZA(),e.TgZ(17,"div",5),e._uU(18,"Grade"),e.qZA(),e.TgZ(19,"div",9),e._uU(20,"Professions"),e.qZA()(),e.YNc(21,Ge,2,0,"div",10),e.YNc(22,He,2,1,"div",11)),2&i&&(e.Q6J("ngIf",void 0!==n.pagination),e.xp6(1),e.Q6J("ngIf",n.cvs),e.xp6(20),e.Q6J("ngIf",0===n.cvs.length),e.xp6(1),e.Q6J("ngIf",n.cvs.length))},dependencies:[p.sg,p.O5,N.Qt,Re],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return s})();var W=l(7411);function Be(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"li"),e._uU(3,"This option will upload your Excel File, read the data and insert into the database."),e.qZA(),e.TgZ(4,"li"),e._uU(5,"This option needs following requirements to be met:"),e.qZA(),e.TgZ(6,"li"),e._uU(7,"The Worksheet name must be 'Sheet1'"),e.qZA(),e.TgZ(8,"li"),e._uU(9,"The file must be an Excel Workbook, with XLSX extension. Column Titles should be in row 5"),e.qZA(),e.TgZ(10,"li"),e._uU(11,"Data should begin from row 6.\\nIn addition."),e.qZA(),e.TgZ(12,"li"),e._uU(13,"Row 2 or 3 should contain the title 'OrderItemId' and its value in next column"),e.qZA()(),e._UZ(14,"br")(15,"br"),e.TgZ(16,"input",11),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileInputChange(n))}),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.importProspectiveExcel())}),e.qZA()()}}let ze=(()=>{class s{constructor(t,i,n,a){this.router=t,this.accountService=i,this.toastr=n,this.confirm=a,this.uploadExcel=!1,this.accountService.currentUser$.pipe((0,L.q)(1)).subscribe({next:o=>{o&&(this.user=o)}})}OpenAvailableCandidatesComponent(){this.navigateByRoute(0,"/candidates/availableToRef",!1)}OpenCandidatesListingComponent(){this.navigateByRoute(0,"/candidates/listing",!1)}OpenCallRecordMenu(){this.navigateByRoute(0,"/callRecords/callRecordList",!1)}navigateByRoute(t,i,n){this.router.navigate([0===t?i:i+"/"+t],{state:{user:this.user,toedit:n,returnUrl:"/candidates"}})}importProspectiveExcel(){this.uploadExcel=!this.uploadExcel}OpenActiveProspectiveList(){this.navigateByRoute(0,"/candidates/prospective",!1)}onFileInputChange(t){var i=new FormData;const o=t.target.files[0];o.size>0&&(i.append("file",o,o.name),this.accountService.copyProspectiveXLSFileToDB(i).subscribe({next:c=>{""===c?this.toastr.success(c+" file(s) copied to database","success"):this.toastr.warning(c,"Failed to copy the excel data to database")},error:c=>{console.log(c.error.text,"Error encountered"),this.toastr.error(c.error.text,"Error in copying the excel data to database")}}),this.uploadExcel=!1)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(h.F0),e.Y36(A.B),e.Y36(b._W),e.Y36(W.z))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile-menu"]],decls:17,vars:1,consts:[[1,"container","d-flex","justify-contents-between","align-items-center","mt-5"],["title","Candidates reviewed and approved for sending to clients",1,"nav-item","menuStdd"],["routerLinkActive","active",1,"nav-item","menuStdd",3,"click"],["title","CVs referred to clients",1,"nav-item","menuStdd"],["routerLink","/candidates/cvsreferred","routerLinkActive","active",1,"nav-item","menuStdd"],["title","List of candidates",1,"nav-item","menuStdd"],["title","Call Record History",1,"nav-item","menuStdd"],["title","displays active prospective candidates",1,"nav-item","menuStdd"],["class","my-10",4,"ngIf"],[1,"my-10"],[2,"word-wrap","normal","width","800px"],["type","file","id","file",1,"stdd","d-flex","align-items-center",3,"change"],[1,"stdd","btn","fa","fa-window-close",2,"margin-left","100px",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(){return n.OpenAvailableCandidatesComponent()}),e._uU(3,"Candidates available to refer "),e.qZA()(),e.TgZ(4,"div",3)(5,"a",4),e._uU(6,"CVs Referred to Clients"),e.qZA()(),e.TgZ(7,"div",5)(8,"a",2),e.NdJ("click",function(){return n.OpenCandidatesListingComponent()}),e._uU(9,"List of Candidates"),e.qZA()(),e.TgZ(10,"div",6)(11,"a",2),e.NdJ("click",function(){return n.OpenCallRecordMenu()}),e._uU(12,"Call Record History"),e.qZA()(),e.TgZ(13,"div",7)(14,"a",2),e.NdJ("click",function(){return n.OpenActiveProspectiveList()}),e._uU(15,"Active Prospective Candidates List"),e.qZA()()(),e.YNc(16,Be,18,0,"div",8)),2&i&&(e.xp6(16),e.Q6J("ngIf",n.uploadExcel))},dependencies:[p.O5,h.rH,h.Od],styles:[".stdd[_ngcontent-%COMP%]{font-size:smaller;display:inline-block}.menuStdd[_ngcontent-%COMP%]{display:inline-block;width:100px;margin-right:3px;margin-left:3px;word-wrap:break-word;text-align:center;vertical-align:middle;border:2px;font-size:small;cursor:pointer;border-style:inset;height:5em}"]})}return s})();var je=l(6306),We=l(9397);class k{constructor(){this.categoryRef="",this.status="",this.statusClass="Active",this.closed=!1,this.sort="date",this.pageNumber=1,this.pageSize=10,this.search=""}}var Xe=l(369);class $e{constructor(){this.personId="",this.personType="",this.categoryRef="",this.dateRegistered=new Date,this.status="",this.username="",this.phoneNo="",this.email="",this.candidateName="",this.sort="categoryRef",this.pageNumber=1,this.pageSize=10,this.search=""}}let et=(()=>{class s{constructor(t){this.http=t,this.apiUrl=V.N.apiUrl,this.currentUserSource=new Q.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.oParams=new k,this.sParams=new $e,this.summaries=[],this.cache=new Map,this.cacheSummary=new Map}getProspectiveCandidates(t){const i=this.cache.get(Object.values(t).join("-"));if(i)return(0,v.of)(i);let n=(0,_.NO)(t);return(0,_.Tr)(this.apiUrl+"prospectivecandidates",n,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getOrAddCallRecord(t,i){return this.http.get(this.apiUrl+"CallRecord/getOrAddHistoryWithItems/"+t+"/"+i)}getProspectivesPaged(t){const i=this.cache.get(Object.values(t).join("-"));if(i)return(0,v.of)(i);let n=(0,_.NO)(t);return(0,_.Tr)(this.apiUrl+"Prospectives/pagedlist",n,this.http).pipe((0,x.U)(a=>(this.cache.set(Object.values(t).join("-"),a),a)))}getProspectiveSummary(t){if(!1===t&&(this.cacheSummary=new Map),this.cacheSummary.size>0&&!0===t&&this.cacheSummary.has(Object.values(this.sParams).join("-")))return this.summaries=this.cacheSummary.get(Object.values(this.sParams).join("-")),(0,v.of)(this.summaries);let i=(0,_.UV)(this.sParams);return this.http.get(this.apiUrl+"Prospectives/summary",{params:i}).pipe((0,x.U)(n=>(this.cache.set(Object.values(this.sParams).join("-"),n),this.summaries=n,n)))}setParams(t){this.oParams=t,console.log("in prospective.sevice, params set to",this.oParams)}getParams(){return this.oParams}setSummaryParams(t){this.sParams=t,console.log("summaryParams set to:",t)}getSummaryParams(){return this.sParams}displayModalUserContact(){}uploadProspectiveXLSFile(t){return this.http.post(this.apiUrl+"excel/uploadProspectiveFile",t)}convertProspectiveXLStoDb(t){return this.http.post(this.apiUrl+"excel/convertToDb/"+t,{})}convertProspectiveToCandidate(t){return this.http.put(this.apiUrl+"Prospectives/convertProspective/"+t,{})}createCandidateFromprospective(t){return this.http.post(this.apiUrl+"Prospectives",t)}updateProspectives(t){return this.http.put(this.apiUrl+"Prospectives/prospectivelistedit",t)}updateCallRecord(t){return this.http.put(this.apiUrl+"CallRecord",t)}deleteProspectiveRecord(t){return this.http.delete(this.apiUrl+"Prospectives/delete/"+t)}static#e=this.\u0275fac=function(i){return new(i||s)(e.LFG(P.eN))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var tt=l(3574),it=l(3166);function nt(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1," No active prospetive candidates on record matching the conditions\n"),e.qZA())}function st(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.prospective.checked=n)})("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedClicked())}),e.qZA(),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",4),e._uU(10),e.qZA(),e.TgZ(11,"div",5),e._uU(12),e.qZA(),e.TgZ(13,"div",6),e._uU(14),e.qZA(),e.TgZ(15,"div",6),e._uU(16),e.qZA(),e.TgZ(17,"div",6),e._uU(18),e.qZA(),e.TgZ(19,"div",6),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"div",5),e._uU(23),e.qZA(),e.TgZ(24,"div",5),e._uU(25),e.ALo(26,"timeago"),e.qZA(),e.TgZ(27,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.editEventClicked())}),e.qZA(),e.TgZ(28,"button",8),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.convertToCandidateClicked())}),e.qZA(),e.TgZ(29,"button",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteEventClicked())}),e.qZA()()()}if(2&s){const t=e.oxw();let i;e.xp6(2),e.Q6J("ngModel",t.prospective.checked),e.xp6(2),e.Oqu(t.prospective.candidateName),e.xp6(2),e.Oqu(t.prospective.categoryRef),e.xp6(2),e.Oqu(t.prospective.phoneNo),e.xp6(2),e.Oqu(t.prospective.email),e.xp6(2),e.Oqu(t.prospective.source),e.xp6(2),e.Oqu(t.prospective.personType),e.xp6(2),e.Oqu(t.prospective.personId),e.xp6(2),e.Oqu(t.prospective.nationality),e.xp6(2),e.Oqu(e.xi3(21,12,t.prospective.dateRegistered,"dd-MMM-yy")),e.xp6(3),e.Oqu(null!==(i=t.prospective.status)&&void 0!==i?i:"undefined"),e.xp6(2),e.Oqu(e.lcZ(26,15,t.prospective.statusDate))}}let at=(()=>{class s{constructor(t){this.callRecService=t,this.editEvent=new e.vpe,this.deleteEvent=new e.vpe,this.selectedEvent=new e.vpe,this.convertToCandidateEvent=new e.vpe,this.StatusSelected=""}ngOnInit(){}selected(t){this.StatusSelected=t}editEventClicked(){this.prospective&&this.callRecService.getCallRecordWithItems("Prospective",this.prospective.personId).subscribe({next:t=>{console.log("prospective line:",t),t&&(console.log("editebentclicked",t),this.editEvent.emit(t))},error:t=>this.editEvent.emit(null)})}selectedClicked(){this.selectedEvent.emit(this.prospective)}deleteEventClicked(){this.deleteEvent.emit(this.prospective?.id)}convertToCandidateClicked(){this.convertToCandidateEvent.emit(this.prospective?.id)}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(tt.C))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-prospective-line"]],inputs:{prospective:"prospective"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",selectedEvent:"selectedEvent",convertToCandidateEvent:"convertToCandidateEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"stdd",2,"width","max-content"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w125",2,"margin-left","25px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"stdd","w15","fa","fa-pencil",3,"click"],["title","converts this prospective candidate to a candidate, and removes it from the prospectives list",1,"stdd","w15","fa","fa-arrow-right",3,"click"],[1,"stdd","w15","fa","fa-trash","red",3,"click"]],template:function(i,n){1&i&&(e.YNc(0,nt,2,0,"div",0),e.YNc(1,st,30,17,"div",0)),2&i&&(e.Q6J("ngIf",!n.prospective),e.xp6(1),e.Q6J("ngIf",n.prospective))},dependencies:[p.O5,d.Wl,d.JJ,d.On,p.uU,it.wr],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:small;word-wrap:break-word!important;vertical-align:top}.red[_ngcontent-%COMP%]{color:red}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return s})();const ot=["search"],rt=["discussions"];function ct(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"pagination",19),e.NdJ("pageChanged",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onPageChanged(n))}),e._uU(1," >"),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function dt(s,r){1&s&&(e.TgZ(0,"div",20),e._uU(1," No prospective candidates found matching your criteria\n"),e.qZA())}function lt(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"app-prospective-line",22),e.NdJ("deleteEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteProspectiveClicked(n))})("editEvent",function(n){const o=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.editCallRecord(n,o))})("selectedEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectedClicked(n))})("convertToCandidateEvent",function(n){e.CHM(t);const a=e.oxw(2);return e.KtG(a.convertProspectiveToCandidate(n))}),e.qZA()()}if(2&s){const t=r.$implicit;e.xp6(1),e.Q6J("prospective",t)}}function pt(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,lt,2,1,"div",21),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.prospectives)}}let ut=(()=>{class s{constructor(t,i,n,a,o){this.service=t,this.modalService=i,this.router=n,this.toastr=a,this.confirm=o,this.returnUrl="",this.prospectives=[],this.totalCount=0,this.pParams=new k,this.statusSelected="",this.paramsStatus=[{status:"All"},{status:"Active"},{status:"Declined"},{status:"Interested"}],this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"}];let c=this.router.getCurrentNavigation();c?.extras&&c.extras.state&&(c.extras.state.returnUrl&&(this.returnUrl=c.extras.state.returnUrl),c.extras.state.user&&(this.user=c.extras.state.user))}ngOnInit(){this.loadProspectives()}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t&&(i.pageNumber=t.page,this.service.setParams(i),this.loadProspectives())}setParameters(){var t=new k;t.statusClass=this.pParams.statusClass,this.service.setParams(t),this.loadProspectives()}loadProspectives(){var t=this.service.getParams();this.service.getProspectivesPaged(t)?.subscribe({next:i=>{null!=i?(this.prospectives=i.result,this.totalCount=i?.count,this.pagination=i.pagination):console.log("response is undefined")},error:i=>console.log(i)})}selectedClicked(t){!0===t.checked?this.prospectives.filter(i=>i.id!=t.id).forEach(i=>i.checked=!1):this.prospectives.forEach(i=>i.checked=!1),this.prospectiveSelected=t.checked?void 0:t}selected(t){this.statusSelected=t}deleteProspectiveClicked(t){var i=t;const a=this.service.deleteProspectiveRecord(i);this.confirm.confirm("confirm Delete","confirm delete this prospective Candidate?. WARNING: this cannot be undone").pipe((0,U.h)(c=>c),(0,w.w)(c=>a)).subscribe(c=>{if(c){this.toastr.success("Prospective Candidate deleted","deletion successful");var u=this.prospectives.findIndex(C=>C.id==i);u>=0&&this.prospectives.splice(u,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}editCallRecord(t,i){null!==t?(this.bsModalRef=this.modalService.show(Xe.h,{class:"modal-dialog-centered modal-lg",initialState:{callRecord:t,contactResults:this.callRecordStatus,candidateName:i.candidateName}}),this.bsModalRef.content.passCallRecordEvent.pipe((0,U.h)(o=>null!==o),(0,w.w)(o=>this.service.updateCallRecord(o))).subscribe(o=>{if(o){this.toastr.success("Call Record updated","Update successful");var c=this.prospectives.findIndex(u=>u.id===i.id);-1!==c&&(i.status=o.status,this.prospectives[c]=i)}else this.toastr.error("Error in deleting the checklist","failed to delete")})):this.toastr.warning("No Call Record object returned from the modal form")}convertProspectiveToCandidate(t){var i=t;const a=this.service.convertProspectiveToCandidate(i);this.confirm.confirm("confirm Convert Prospective To Candidate","this will convert the selected prospective candidate to a candidate, and remove it from this prospectives list. WARNING: this cannot be undone").pipe((0,U.h)(c=>c),(0,w.w)(()=>a.pipe((0,je.K)(c=>(0,v.of)()),(0,We.b)(c=>{if(0===c)this.toastr.warning("Failed to convert the prospective to candidate","Failed to convert");else{this.toastr.success("Converted the prospective to candidate, with Application No "+c,"success");var u=this.prospectives.findIndex(C=>C.id);console.log("index to remove",u),u>=0&&this.prospectives.slice(u,1)}})))).subscribe(c=>{if(c){this.toastr.success("Prospective Candidate converted, with application No "+c,"Conversion successful");var u=this.prospectives.findIndex(C=>C.id==i);console.log("index to remove in subscribe",u),u>=0&&this.prospectives.splice(u,1)}else this.toastr.error("Error in converting the prospective candidate to a Candidate","failed to convert")})}onSearch(){const t=this.service.getParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.loadProspectives()}onReset(){this.searchTerm.nativeElement.value="",this.pParams=new k,this.service.setParams(this.pParams),this.loadProspectives()}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(et),e.Y36(T.tT),e.Y36(h.F0),e.Y36(b._W),e.Y36(W.z))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-prospective-list"]],viewQuery:function(i,n){if(1&i&&(e.Gf(ot,5),e.Gf(rt,5)),2&i){let a;e.iGM(a=e.CRH())&&(n.searchTerm=a.first),e.iGM(a=e.CRH())&&(n.discussionTerm=a.first)}},decls:45,vars:5,consts:[[2,"display","inline-block","font-weight","bold"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["class","stdd mx-2","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","fa-solid","fa-magnifying-glass","w200",3,"keyup.enter"],["search",""],["title","search the text entered",1,"btn","fa-solid","fa-find","fa-2x","mx-2",3,"click"],[1,"btn","fa","fa-refresh","fa-2x","mx-2",3,"click"],["title","The paged list that will retreive records based upon the status you select",1,"lbl","w100","mx-2"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear",1,"stdd",2,"border-style","double","width","100px","font-size","small",3,"items","ngModel","ngModelChange"],["title","filters the records based upon the status selected",1,"btn","fa","fa-filter","fa-2x",3,"click"],["title","go back","routerLink","/candidates",1,"btn","fa","fa-window-close","fa-2x","pull-right"],[1,"form-inline"],[1,"lbl","w35"],[1,"lbl","w125",2,"margin-left","15px"],[1,"lbl","w150"],[1,"lbl","w100"],[1,"lbl","w75"],["class","my-2",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd","mx-2",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[4,"ngFor","ngForOf"],[3,"prospective","deleteEvent","editEvent","selectedEvent","convertToCandidateEvent"]],template:function(i,n){1&i&&(e.TgZ(0,"h4",0),e._uU(1,"Prospective Candidates"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,ct,2,3,"pagination",2),e.TgZ(4,"input",3,4),e.NdJ("keyup.enter",function(){return n.onSearch()}),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.onSearch()}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.onReset()}),e.qZA(),e.TgZ(8,"label",7),e._uU(9,"Choose Status"),e.qZA(),e.TgZ(10,"ng-select",8),e.NdJ("ngModelChange",function(o){return n.pParams.statusClass=o}),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.setParameters()}),e.qZA(),e._UZ(12,"button",10),e.qZA(),e.TgZ(13,"div",11)(14,"label",12),e._uU(15,"Sel"),e.qZA(),e.TgZ(16,"label",13),e._uU(17,"Candidate Name"),e.qZA(),e.TgZ(18,"label",14),e._uU(19,"Category Ref"),e.qZA(),e.TgZ(20,"label",15),e._uU(21,"Phone No"),e.qZA(),e.TgZ(22,"label",14),e._uU(23,"Email"),e.qZA(),e.TgZ(24,"label",15),e._uU(25,"Source"),e.qZA(),e.TgZ(26,"label",16),e._uU(27,"Person"),e._UZ(28,"br"),e._uU(29,"Type"),e.qZA(),e.TgZ(30,"label",16),e._uU(31,"Person Id"),e.qZA(),e.TgZ(32,"label",16),e._uU(33,"Nationality"),e.qZA(),e.TgZ(34,"label",16),e._uU(35,"Date"),e._UZ(36,"br"),e._uU(37,"Registered"),e.qZA(),e.TgZ(38,"label",15),e._uU(39,"Status"),e.qZA(),e.TgZ(40,"label",15),e._uU(41,"Duration"),e.qZA()(),e._UZ(42,"hr"),e.YNc(43,dt,2,0,"div",17),e.YNc(44,pt,2,1,"div",18)),2&i&&(e.xp6(3),e.Q6J("ngIf",void 0!==n.pagination),e.xp6(7),e.Q6J("items",n.paramsStatus)("ngModel",n.pParams.statusClass),e.xp6(33),e.Q6J("ngIf",!n.prospectives),e.xp6(1),e.Q6J("ngIf",n.prospectives))},dependencies:[p.sg,p.O5,h.rH,N.Qt,d.JJ,d.On,z.w9,at],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:smaller;word-wrap:normal;vertical-align:middle;font-weight:700}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}"]})}return s})(),ht=(()=>{class s{constructor(t,i){this.toastr=t,this.accountService=i,this.uploadExcel=!1}onFileInputChange(t){var i=new FormData;const o=t.target.files[0];o.size>0&&(i.append("file",o,o.name),this.accountService.copyProspectiveXLSFileToDB(i).subscribe({next:c=>{""===c?this.toastr.success(c+" file(s) copied to database","success"):this.toastr.warning(c,"Failed to copy the excel data to database")},error:c=>{console.log(c.error.text,"Error encountered"),this.toastr.error(c.error.text,"Error in copying the excel data to database")}}),this.uploadExcel=!1)}importCustomerExcel(){this.uploadExcel=!this.uploadExcel}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(b._W),e.Y36(A.B))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-fileupload"]],decls:2,vars:0,consts:[["type","file","id","file",1,"stdd","d-flex","align-items-center",3,"change"],[1,"stdd","btn","fa","fa-window-close",2,"margin-left","100px",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"input",0),e.NdJ("change",function(o){return n.onFileInputChange(o)}),e.qZA(),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.importCustomerExcel()}),e.qZA())}})}return s})();var mt=l(6355);const vt=[{path:"",component:ze},{path:"listing",component:le,resolve:{professions:I.h,agents:q}},{path:"register/edit/:id",component:Me,resolve:{categories:I.h,qualifications:()=>(0,e.f3M)(D.h).getQualificationList(),agents:q,candidate:s=>{var r=s.paramMap.get("id");return null===r||""===r||"0"===r?(0,v.of)(new Ie):(0,e.f3M)(y).getCandidate(+r)}},data:{breadcrumb:"Edit Candidate"}},{path:"availableToRef",component:De,resolve:{professions:I.h,agents:q}},{path:"cvsreferred",component:mt.z},{path:"candidateAssessmentDto/:id",component:E.K,resolve:{candidateAssessmentDto:(s,r)=>{var t=s.paramMap.get("id");if(null===t)return(0,v.of)(null);var i=s.paramMap.get("orderitemid");return null===i?(0,v.of)(null):(0,e.f3M)(j.k).getCandidateAssessmentDto(+t,+i)}}},{path:"prospective",component:ut},{path:"fileupload",component:ht}];let ft=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[p.ez,h.Bz.forChild(vt),h.Bz]})}return s})();var gt=l(4849);let _t=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[p.ez,ft,gt.m]})}return s})()}}]);