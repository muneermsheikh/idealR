"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[812],{778:(w,h,m)=>{m.d(h,{G:()=>e});var s=m(7705),f=m(779);let C=(()=>{class c{constructor(d){this.bsModalRef=d,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(p){return new(p||c)(s.rXU(f.Y$))};static#t=this.\u0275cmp=s.VBU({type:c,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(p,l){1&p&&(s.j41(0,"div",0)(1,"h4",1),s.EFF(2),s.k0s()(),s.j41(3,"div",2)(4,"p"),s.EFF(5),s.k0s()(),s.j41(6,"div",3)(7,"button",4),s.bIt("click",function(){return l.confirm()}),s.EFF(8),s.k0s(),s.j41(9,"button",5),s.bIt("click",function(){return l.decline()}),s.EFF(10),s.k0s()()),2&p&&(s.R7$(2),s.JRh(l.title),s.R7$(3),s.JRh(l.message),s.R7$(3),s.JRh(l.btnOkText),s.R7$(2),s.JRh(l.btnCancelText))}})}return c})();var v=m(6354),F=m(3587),M=m(1626);let e=(()=>{class c{constructor(d,p){this.modalService=d,this.http=p,this.baseUrl=F.c.apiUrl}confirm(d="Confirmation",p="Are you sure you want to do this?",l="Ok",g="Cancel"){return this.bsModelRef=this.modalService.show(C,{initialState:{title:d,message:p,btnOkText:l,btnCancelText:g}}),this.bsModelRef.onHidden.pipe((0,v.T)(()=>this.bsModelRef.content.result))}getHelp(d){return this.http.get(this.baseUrl+"Help/help/"+d)}static#e=this.\u0275fac=function(p){return new(p||c)(s.KVO(f.I8),s.KVO(M.Qq))};static#t=this.\u0275prov=s.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},4812:(w,h,m)=>{m.r(h),m.d(h,{MemberModule:()=>D});var s=m(177),f=m(9485),C=m(6697),v=m(5964),F=m(5558),M=m(1468),e=m(7705),c=m(8256),j=m(1822),d=m(2641),p=m(778),l=m(5743),g=m(3400);function k(i,u){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2),e.EFF(2),e.k0s(),e.j41(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",5),e.EFF(8),e.k0s(),e.j41(9,"div",5),e.EFF(10),e.k0s(),e.j41(11,"div",3),e.EFF(12),e.k0s(),e.j41(13,"div",2),e.EFF(14),e.k0s(),e.j41(15,"div",2),e.EFF(16),e.k0s(),e.j41(17,"button",6),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.editClicked())}),e.k0s(),e.j41(18,"button",7),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteClicked())}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.JRh(t.member.userName),e.R7$(2),e.JRh(t.member.knownAs),e.R7$(2),e.JRh(t.member.gender),e.R7$(2),e.JRh(t.member.age>100?"--":t.member.age),e.R7$(2),e.JRh(t.member.city),e.R7$(2),e.JRh(t.member.phoneNumber),e.R7$(2),e.JRh(t.member.email),e.R7$(2),e.JRh(t.member.roles.flat())}}let x=(()=>{class i{constructor(){this.editEvent=new e.bkB,this.deleteEvent=new e.bkB}editClicked(){this.editEvent.emit(this.member)}deleteClicked(){this.deleteEvent.emit(this.member?.id)}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-member-item"]],inputs:{member:"member"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w50"],[1,"stdd","w75"],[1,"btn","fa","fa-pencil",3,"click"],[1,"btn","fa","fa-trash",3,"click"]],template:function(r,n){1&r&&e.DNE(0,k,19,8,"div",0),2&r&&e.Y8G("ngIf",n.member)},dependencies:[s.bT],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;word-wrap:break-word;border:aqua;vertical-align:top}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return i})();function R(i,u){if(1&i){const t=e.RV6();e.j41(0,"pagination",9),e.bIt("pageChanged",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.EFF(1,"\n>"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function y(i,u){1&i&&(e.j41(0,"div",10),e.EFF(1," No members on record\n"),e.k0s())}function I(i,u){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"app-member-item",13),e.bIt("editEvent",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.editMember(n))})("deleteEvent",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.deleteMember(n))}),e.k0s()()}if(2&i){const t=u.$implicit;e.R7$(1),e.Y8G("member",t)}}function T(i,u){if(1&i&&(e.j41(0,"div",11),e.DNE(1,I,2,1,"div",12),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.members)}}let P=(()=>{class i{constructor(t,r,n,a,o){this.toastr=t,this.accountService=r,this.service=n,this.confirm=a,this.router=o,this.mParams=new M.u,this.members=[],this.totalCount=0,this.userparams=new M.u,this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}]}ngOnInit(){this.accountService.currentUser$.pipe((0,C.s)(1)).subscribe(t=>this.user=t),this.loadMembers(!1)}loadMembers(t=!0){this.service.setUserParams(this.userparams),this.service.getMembers(t).subscribe({next:r=>{this.members=r.result,this.pagination=r.pagination,this.totalCount=r.count}})}resetFilters(){this.service.resetUserParams(),this.loadMembers()}pageChanged(t){this.userparams.pageNumber!=t.page&&(console.log("new page:",t.page),this.userparams.pageNumber=t.page,this.loadMembers(!0))}editMember(t){this.navigateByRoute(t,"/members/edit",t)}deleteMember(t){const a=this.service.deleteMember(t);this.confirm.confirm("confirm Delete","confirm delete this Member. WARNING: this cannot be undone").pipe((0,v.p)(_=>_),(0,F.n)(()=>a)).subscribe(_=>{_?this.toastr.success("Checklist deleted","deletion successful"):this.toastr.error("Error in deleting the Member","failed to delete")})}navigateByRoute(t,r,n){this.router.navigate([r+"/"+t],{state:{user:this.user,member:n,returnUrl:"/members"}})}static#e=this.\u0275fac=function(r){return new(r||i)(e.rXU(c.tw),e.rXU(j.D),e.rXU(d.G),e.rXU(p.G),e.rXU(l.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-member-list"]],decls:21,vars:3,consts:[["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["routerLink","/",1,"btn","fa","fa-window-close","fa-2x",2,"margin-left","100px"],[1,"stdd","w150",2,"margin-left","15px"],[1,"stdd","w100"],[1,"stdd","w50"],[1,"stdd","w75"],[1,"stdd","w150"],["style","margin-left: 50px;",4,"ngIf"],["class","row",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"margin-left","50px"],[1,"row"],[4,"ngFor","ngForOf"],[3,"member","editEvent","deleteEvent"]],template:function(r,n){1&r&&(e.DNE(0,R,2,3,"pagination",0),e.nrm(1,"button",1)(2,"br"),e.j41(3,"label",2),e.EFF(4,"User name"),e.k0s(),e.j41(5,"label",3),e.EFF(6,"Known As"),e.k0s(),e.j41(7,"label",4),e.EFF(8,"Gender"),e.k0s(),e.j41(9,"label",5),e.EFF(10,"Age"),e.k0s(),e.j41(11,"label",5),e.EFF(12,"city"),e.k0s(),e.j41(13,"label",3),e.EFF(14,"Phone No"),e.k0s(),e.j41(15,"label",6),e.EFF(16,"Email"),e.k0s(),e.j41(17,"label",6),e.EFF(18,"Roles"),e.k0s(),e.DNE(19,y,2,0,"div",7),e.DNE(20,T,2,1,"div",8)),2&r&&(e.Y8G("ngIf",void 0!==n.pagination),e.R7$(19),e.Y8G("ngIf",0===n.members.length),e.R7$(1),e.Y8G("ngIf",n.members))},dependencies:[s.Sq,s.bT,g.eK,l.Wk,x],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;font-size:small;font-weight:700}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return i})();var E=m(9375),b=m(9417);function G(i,u){1&i&&(e.j41(0,"div",1),e.EFF(1,"Member undefined"),e.k0s())}const O=function(){return{dateInputFormat:"YYYY-MM-DD"}},$=[{path:"",component:P},{path:"edit/:username",component:(()=>{class i{constructor(t,r,n,a){this.activatedRoute=t,this.toastr=r,this.router=n,this.service=a,this.returnUrl="/",this.bsValueDate=new Date,this.knownAs="",this.city="",this.country="",this.phoneNumber="",this.email="",this.gender="";let o=this.router.getCurrentNavigation();o?.extras&&o.extras.state&&(o.extras.state.returnUrl&&(this.returnUrl=o.extras.state.returnUrl),o.extras.state.user&&(this.user=o.extras.state.user),o.extras.state.member&&(this.member=o.extras.state.member))}ngOnInit(){}UpdateMember(){this.service.updateMember(this.member).subscribe({next:t=>{t?this.toastr.success("Member Updated","Success"):this.toastr.warning("Failed to update the Member","Failure")},error:t=>{this.toastr.error(t.error?.error?t.error.error:t,"Error encountered")}})}close(){this.router.navigateByUrl("/members")}static#e=this.\u0275fac=function(r){return new(r||i)(e.rXU(l.nX),e.rXU(c.tw),e.rXU(l.Ix),e.rXU(d.G))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-member-edit"]],decls:53,vars:16,consts:[[1,"container"],[1,"stdd"],["class","stdd",4,"ngIf"],["id","editForm"],["editForm","ngForm"],[1,"btn","fa","fa-save","fa-2x",2,"margin-left","150px",3,"disabled","click"],[1,"btn","fa","fa-window-close","fa-2x","mx-2",3,"click"],[1,"stdd","w100"],[1,"stdd","w150"],["type","radio","value","m","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],[1,"stdd","mx-2"],["type","radio","value","f","name","gender",1,"inputcheck","form-check-input",3,"ngModel","ngModelChange"],["type","text","name","knownAs",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Date of birth","name","dob","bsDatepicker","",1,"stdd","w150",3,"ngModel","bsValue","bsConfig","ngModelChange"],["name","city",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","country",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","position",1,"stdd","w200",3,"ngModel","ngModelChange"],["name","phoneno",1,"stdd","w150",3,"ngModel","ngModelChange"],["name","email",1,"stdd","w250",3,"ngModel","ngModelChange"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.k0s(),e.DNE(3,G,2,0,"div",2),e.j41(4,"form",3,4)(6,"button",5),e.bIt("click",function(){return n.UpdateMember()}),e.k0s(),e.j41(7,"button",6),e.bIt("click",function(){return n.close()}),e.k0s(),e.nrm(8,"br")(9,"br"),e.j41(10,"label",7),e.EFF(11,"User name"),e.k0s(),e.j41(12,"div",8),e.EFF(13),e.k0s(),e.nrm(14,"br")(15,"br"),e.j41(16,"label",7),e.EFF(17,"Gender"),e.k0s(),e.j41(18,"input",9),e.bIt("ngModelChange",function(o){return n.member.gender=o}),e.k0s(),e.j41(19,"span",10),e.EFF(20,"Male"),e.k0s(),e.j41(21,"input",11),e.bIt("ngModelChange",function(o){return n.member.gender=o}),e.k0s(),e.j41(22,"span",10),e.EFF(23,"Female"),e.k0s(),e.nrm(24,"br"),e.j41(25,"label",7),e.EFF(26,"Known As"),e.k0s(),e.j41(27,"input",12),e.bIt("ngModelChange",function(o){return n.member.knownAs=o}),e.k0s(),e.nrm(28,"br"),e.j41(29,"label",7),e.EFF(30,"Date of birth"),e.k0s(),e.j41(31,"input",13),e.bIt("ngModelChange",function(o){return n.member.dateOfBirth=o}),e.k0s(),e.nrm(32,"br")(33,"br"),e.j41(34,"label",7),e.EFF(35,"City"),e.k0s(),e.j41(36,"input",14),e.bIt("ngModelChange",function(o){return n.member.city=o}),e.k0s(),e.nrm(37,"br"),e.j41(38,"label",7),e.EFF(39,"Country"),e.k0s(),e.j41(40,"input",15),e.bIt("ngModelChange",function(o){return n.member.country=o}),e.k0s(),e.nrm(41,"br"),e.j41(42,"label",7),e.EFF(43,"Position"),e.k0s(),e.j41(44,"input",16),e.bIt("ngModelChange",function(o){return n.member.position=o}),e.k0s(),e.nrm(45,"br"),e.j41(46,"label",7),e.EFF(47,"Phone"),e.k0s(),e.j41(48,"input",17),e.bIt("ngModelChange",function(o){return n.member.phoneNumber=o}),e.k0s(),e.nrm(49,"br"),e.j41(50,"label",7),e.EFF(51,"Email"),e.k0s(),e.j41(52,"input",18),e.bIt("ngModelChange",function(o){return n.member.email=o}),e.k0s()()()),2&r){const a=e.sdS(5);e.R7$(2),e.SpI("Edit Member - logged-in user: ",null==n.user?null:n.user.knownAs,""),e.R7$(1),e.Y8G("ngIf",!n.member),e.R7$(3),e.Y8G("disabled",!a.dirty),e.R7$(7),e.JRh(null==n.member?null:n.member.userName),e.R7$(5),e.Y8G("ngModel",n.member.gender),e.R7$(3),e.Y8G("ngModel",n.member.gender),e.R7$(6),e.Y8G("ngModel",n.member.knownAs),e.R7$(4),e.Y8G("ngModel",n.member.dateOfBirth)("bsValue",n.bsValueDate)("bsConfig",e.lJ4(15,O)),e.R7$(5),e.Y8G("ngModel",n.member.city),e.R7$(4),e.Y8G("ngModel",n.member.country),e.R7$(4),e.Y8G("ngModel",n.member.position),e.R7$(4),e.Y8G("ngModel",n.member.phoneNumber),e.R7$(4),e.Y8G("ngModel",n.member.email)}},dependencies:[s.bT,E.pc,E.p0,b.qT,b.me,b.Fm,b.BC,b.cb,b.vS,b.cV],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:medium;margin:4px 2px}.b[_ngcontent-%COMP%]{font-weight:700}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.inputCheck[_ngcontent-%COMP%]{margin:2px 5px 2px 10px;width:40px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:15px;height:15px;border:1px solid #fff;border-radius:50%;margin-right:5px;background-color:#c3b1b1;position:relative;vertical-align:middle}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:9px;height:9px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return i})(),resolve:{member:(i,u)=>(0,e.WQX)(d.G).getMember(i.paramMap.get("username"))}}];let U=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[s.MD,l.iI.forChild($),l.iI]})}return i})(),D=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[s.MD,f.G,U]})}return i})()}}]);