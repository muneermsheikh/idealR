"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[62],{6062:(Wt,V,l)=>{l.r(V),l.d(V,{OrderModule:()=>Lt});var m=l(177),i=l(9417),K=l(9485),$=l(6697),f=l(5558),U=l(9437),h=l(7673),Z=l(8141),_=l(5964),E=l(7259),e=l(7705);class Q{constructor(){this.customerId=0,this.id=0,this.custType="Associate",this.pageNumber=1,this.pageSize=4,this.search=""}}var C=l(779),F=l(1626),M=l(6354),R=l(3587),A=l(6220);let ee=(()=>{class n{constructor(t){this.http=t,this.apiUrl=R.c.apiUrl,this.cParams=new Q,this.associates=[],this.cache=new Map}getOfficialAndAgentName(){return this.http.get(this.apiUrl+"customers/officialidandcustomernames/associate")}getOfficialsAndCustomers(){const t=this.cache.get(Object.values(this.cParams).join("-"));if(t)return(0,h.of)(t);let r=new F.Nl;return r=r.append("customerType",this.cParams.custType),r=r.append("pageNumber",this.cParams.pageNumber.toString()),r=r.append("pageSize",this.cParams.pageSize.toString()),(0,A.f8)(this.apiUrl+"customers/officialidandcustomernames/"+this.cParams.custType,r,this.http).pipe((0,M.T)(s=>(this.cache.set(Object.values(this.cParams).join("-"),s),s)))}setParams(t){this.cParams=t}getParams(){return this.cParams}static#e=this.\u0275fac=function(r){return new(r||n)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var G=l(3400);function te(n,d){if(1&n){const t=e.RV6();e.j41(0,"pagination",14),e.bIt("pageChanged",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChanged(s))}),e.EFF(1," >"),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function re(n,d){1&n&&(e.j41(0,"div"),e.EFF(1," No Officials found on record "),e.k0s())}function se(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",18)(1,"input",19),e.bIt("change",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.updateChecked(o))}),e.k0s(),e.j41(2,"label",20),e.EFF(3),e.k0s(),e.j41(4,"label",21),e.EFF(5),e.k0s(),e.j41(6,"label",22),e.EFF(7),e.k0s(),e.j41(8,"label",23),e.EFF(9),e.k0s()()}if(2&n){const t=d.$implicit,r=e.XpG(2);e.R7$(1),e.Y8G("checked",r.selectedOfficials.includes(t))("disabled",t.customerIsBlacklisted||void 0===t.email),e.R7$(2),e.JRh(t.customerName),e.R7$(2),e.JRh(t.officialName),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.phoneNo)}}function ne(n,d){if(1&n&&(e.j41(0,"form",15,16),e.DNE(2,se,10,6,"div",17),e.k0s()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.availableOfficials)}}let ie=(()=>{class n{constructor(t,r){this.bsModalRef=t,this.service=r,this.selectedOfficialsEvent=new e.bkB,this.availableOfficials=[],this.selectedOfficials=[],this.cParams=new Q,this.lastCustomerType="",this.totalCount=0}ngOnInit(){this.service.setParams(this.cParams),this.getAssociates()}getAssociates(){this.service.getOfficialsAndCustomers().subscribe({next:t=>{this.availableOfficials=t.result,this.pagination=t.pagination,this.totalCount=t.totalCount}}),console.log("available officials:",this.availableOfficials)}updateChecked(t){const r=this.selectedOfficials.indexOf(t);-1!==r?this.selectedOfficials.splice(r,1,t):this.selectedOfficials.push(t)}Close(){this.selectedOfficialsEvent.emit(this.selectedOfficials),this.bsModalRef.hide()}onPageChanged(t){this.cParams&&(this.cParams.pageNumber!==t.page||this.cParams.custType!==this.lastCustomerType)&&(this.cParams.pageNumber=t.page,this.service.setParams(this.cParams),this.lastCustomerType=this.cParams.custType,this.getAssociates())}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(C.Y$),e.rXU(ee))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-select-associates-modal"]],outputs:{selectedOfficialsEvent:"selectedOfficialsEvent"},decls:20,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn","btn-success","fa","fa-check",2,"margin-left","50px",3,"click"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"lbl","w250","b",2,"margin-left","60px"],[1,"lbl","w125","b"],[1,"lbl","w150","b"],[1,"lbl","w100","b"],[4,"ngIf"],["id","form",4,"ngIf"],[1,"modal-footer"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],["id","form"],["form","ngForm"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","value","associate",1,"lbl","w15","form-check-input",2,"border-color","black",3,"checked","disabled","change"],[1,"lbl","w250"],[1,"lbl","w125"],[1,"lbl","w150"],[1,"lbl","w100"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2,"Select Associates"),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return s.Close()}),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return s.bsModalRef.hide()}),e.j41(5,"span",4),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",5),e.DNE(8,te,2,3,"pagination",6),e.j41(9,"label",7),e.EFF(10,"Customer Name"),e.k0s(),e.j41(11,"label",8),e.EFF(12,"Official Name"),e.k0s(),e.j41(13,"label",9),e.EFF(14,"Email"),e.k0s(),e.j41(15,"label",10),e.EFF(16,"Phone No"),e.k0s(),e.DNE(17,re,2,0,"div",11),e.DNE(18,ne,3,1,"form",12),e.k0s(),e.nrm(19,"div",13)),2&r&&(e.R7$(8),e.Y8G("ngIf",void 0!==s.pagination),e.R7$(9),e.Y8G("ngIf",0===s.availableOfficials.length),e.R7$(1),e.Y8G("ngIf",s.availableOfficials.length>0))},dependencies:[m.Sq,m.bT,G.eK,i.qT,i.cb,i.cV],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w125[_ngcontent-%COMP%]{width:125px}.w15[_ngcontent-%COMP%]{width:15px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return n})();var y=l(8281),Y=l(1822),oe=l(1512),q=l(7206);class T{constructor(){this.orderNo=0,this.orderId=0,this.fwdDateFrom=new Date,this.fwdDateUpto=new Date,this.customerId=0,this.professionId=0,this.sort="orderno",this.pageNumber=1,this.pageSize=15,this.search=""}}let I=(()=>{class n{constructor(t){this.http=t,this.apiUrl=R.c.apiUrl,this.orderFwds=[],this.fwdParams=new T,this.cache=new Map}getForwardsBriefPaginated(t){const r=this.cache.get(Object.values(t).join("-"));if(r)return(0,h.of)(r);let s=function de(n){let d=new F.Nl;return d=d.append("pageNumber",n.pageNumber),d=d.append("pageSize",n.pageSize),0!==n.customerId&&(d=d.append("customerId",n.customerId.toString())),0!==n.orderId&&(d=d.append("orderId",n.orderId.toString())),n.fwdDateFrom&&n.fwdDateUpto&&(d=d.append("orderDateFrom",n.fwdDateFrom.toString()),d=d.append("orderDateUpto",n.fwdDateUpto.toString())),n.search&&(d=d.append("search",n.search)),d=d.append("sort",n.sort),d}(t);return(0,A.f8)(this.apiUrl+"OrderForward/pagedlist",s,this.http).pipe((0,M.T)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}forwardOrderToSelectedAgents(t,r){return this.http.post(this.apiUrl+"Orderforward/forwardToAgents/"+r,t)}getOrderForwardOfAnOrder(t){return this.http.get(this.apiUrl+"Orderforward/getOrGenerateOrderFwdToAgent/"+t)}getAssociatesForwardedForADL(t){return this.http.get(this.apiUrl+"Orderforward/associatesforwardedForOrderId/"+t)}generateObjToForwarOrderToAgent(t){return this.http.get(this.apiUrl+"OrderForward/generateOrderFwdToAgent/"+t,{})}insertForwarOrderToAgent(t){return this.http.post(this.apiUrl+"OrderForward/insertOrderFwdToAgent",t)}updateForwarOrderToAgent(t){return this.http.put(this.apiUrl+"OrderForward/updateOrderFwdToAgent",t)}forwarOrderToHR(t){return this.http.post(this.apiUrl+"OrderForward/updateOrderFwdToHR/"+t,{})}generateObjToForwardDLtoHR(t){return this.http.get(this.apiUrl+"OrderForward/"+t,{})}setFwdParams(t){this.fwdParams=t}getFwdParams(){return this.fwdParams}deleteForward(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwd/"+t)}deleteOrderFwdCategory(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwdCategory/"+t)}deleteOrderFwdCatOfficial(t){return this.http.delete(this.apiUrl+"OrderForward/deleteOrderFwdCatOfficial/"+t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=l(5743),g=l(8256),D=l(8892),x=l(778),ae=l(8028),L=l(9726),N=l(9213),ce=l(3281);function le(n,d){if(1&n&&(e.j41(0,"div",8),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.SpI(" ",t.order.customerName," ")}}function me(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.editClicked())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(1),e.SpI(" ",t.order.customerName," ")}}function pe(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",23),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.contractReviewClicked())}),e.EFF(1,"Not Reviewed"),e.k0s()}}function ue(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.contractReviewClicked())}),e.EFF(1),e.nI1(2,"date"),e.k0s()}if(2&n){const t=e.XpG(3);e.R7$(1),e.SpI("",e.i5U(2,1,t.order.contractReviewedOn,"dd-MMM-yy")," ")}}function fe(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",25),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.forwardOrderToHRDept())}),e.EFF(1," Not forwarded"),e.k0s()}}function he(n,d){if(1&n&&(e.j41(0,"div",26),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI(" ",e.i5U(2,1,t.order.forwardedToHRDeptOn,"dd-MMM-yy")," ")}}function _e(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"div",11),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.contractReviewClicked())}),e.EFF(2),e.k0s(),e.DNE(3,pe,2,0,"div",12),e.DNE(4,ue,3,4,"div",13),e.DNE(5,fe,2,0,"div",14),e.DNE(6,he,3,4,"div",15),e.j41(7,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.editClicked())}),e.j41(8,"mat-icon"),e.EFF(9,"edit"),e.k0s()(),e.j41(10,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.dlForwardToAssociatesClicked())}),e.j41(11,"mat-icon"),e.EFF(12,"forward"),e.k0s()(),e.j41(13,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.DLForwardedClicked())}),e.j41(14,"mat-icon"),e.EFF(15,"fast_forward"),e.k0s()(),e.j41(16,"button",19),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.AcknowledgeClicked())}),e.j41(17,"mat-icon"),e.EFF(18," email"),e.k0s()(),e.j41(19,"button",20),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.cvReferredClicked())}),e.j41(20,"mat-icon"),e.EFF(21,"send"),e.k0s()(),e.j41(22,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.selectionClicked())}),e.j41(23,"mat-icon"),e.EFF(24,"assignment_ind"),e.k0s()(),e.j41(25,"button",22),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.deleteClicked())}),e.j41(26,"mat-icon"),e.EFF(27,"delete"),e.k0s()()()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngClass","Not Reviewed"==t.order.contractReviewStatus||"regretted"===t.order.contractReviewStatus?"b":""),e.R7$(1),e.JRh(t.order.contractReviewStatus),e.R7$(1),e.Y8G("ngIf",null===t.order.contractReviewedOn),e.R7$(1),e.Y8G("ngIf",null!==t.order.contractReviewedOn),e.R7$(1),e.Y8G("ngIf",null===t.order.forwardedToHRDeptOn),e.R7$(1),e.Y8G("ngIf",null!==t.order.forwardedToHRDeptOn)}}function ge(n,d){1&n&&(e.j41(0,"div",30),e.EFF(1,"Not Reviewed"),e.k0s())}function ve(n,d){if(1&n&&(e.j41(0,"div",26),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI("",e.i5U(2,1,t.order.contractReviewedOn,"dd-MMM-yy")," ")}}function be(n,d){1&n&&(e.j41(0,"div",31),e.EFF(1," Not forwarded"),e.k0s())}function we(n,d){if(1&n&&(e.j41(0,"div",26),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI(" ",e.i5U(2,1,t.order.forwardedToHRDeptOn,"dd-MMM-yy")," ")}}function Ie(n,d){if(1&n&&(e.j41(0,"div")(1,"div",27),e.EFF(2),e.k0s(),e.DNE(3,ge,2,0,"div",28),e.DNE(4,ve,3,4,"div",15),e.DNE(5,be,2,0,"div",29),e.DNE(6,we,3,4,"div",15),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngClass","Not Reviewed"==t.order.contractReviewStatus||"regretted"===t.order.contractReviewStatus?"b":""),e.R7$(1),e.SpI("",t.order.contractReviewStatus," "),e.R7$(1),e.Y8G("ngIf",null===t.order.contractReviewedOn),e.R7$(1),e.Y8G("ngIf",null!==t.order.contractReviewedOn),e.R7$(1),e.Y8G("ngIf",null===t.order.forwardedToHRDeptOn),e.R7$(1),e.Y8G("ngIf",null!==t.order.forwardedToHRDeptOn)}}function ke(n,d){if(1&n&&(e.j41(0,"div")(1,"div",1)(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"div",3),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.DNE(7,le,2,1,"div",4),e.DNE(8,me,2,1,"div",5),e.j41(9,"div",6),e.EFF(10),e.k0s(),e.DNE(11,_e,28,6,"div",7),e.DNE(12,Ie,7,6,"div",0),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh(t.order.orderNo),e.R7$(2),e.JRh(e.i5U(6,7,t.order.orderDate,"dd-MMM-yy")),e.R7$(2),e.Y8G("ngIf","concluded"==t.order.status),e.R7$(1),e.Y8G("ngIf","concluded"!=t.order.status),e.R7$(2),e.JRh(t.order.cityOfWorking),e.R7$(1),e.Y8G("ngIf",!t.isReportActive),e.R7$(1),e.Y8G("ngIf",t.isReportActive)}}let Ce=(()=>{class n{constructor(t,r,s){this.orderFwdService=t,this.toastr=r,this.intervwService=s,this.isReportActive=!1,this.editEvent=new e.bkB,this.contractReviewEvent=new e.bkB,this.orderFwdToAssociatesEvent=new e.bkB,this.DLForwardedEvent=new e.bkB,this.deleteEvent=new e.bkB,this.acknowledgeToClientEvent=new e.bkB,this.cvreferredEvent=new e.bkB,this.orderAssessmentItemEvent=new e.bkB,this.selectionEvent=new e.bkB,this.menuTopLeftPosition={x:0,y:0}}ngOnInit(){}contractReviewClicked(){this.contractReviewEvent.emit(this.order.id)}orderAssessmentItemClicked(){this.order&&this.orderAssessmentItemEvent.emit(this.order.id)}editClicked(){this.editEvent.emit(this.order.id)}selectionClicked(){this.selectionEvent.emit(this.order.id)}deleteClicked(){this.deleteEvent.emit(this.order?.id)}forwardOrderToHRDept(){this.order&&this.orderFwdService.forwarOrderToHR(this.order.id).subscribe({next:t=>{""===t||null===t?this.toastr.success("task created for HR Dept and message created and saved in drafts","success"):this.toastr.warning(t,"failure")},error:t=>this.toastr.error(t?.error?.details,"error encountered")})}dlForwardToAssociatesClicked(){console.log("orderid in modal",this.order?.id),this.orderFwdToAssociatesEvent.emit(this.order?.id)}DLForwardedClicked(){this.DLForwardedEvent.emit(this.order?.id)}AcknowledgeClicked(){this.acknowledgeToClientEvent.emit(this.order?.id)}cvReferredClicked(){this.cvreferredEvent.emit(this.order?.id)}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(I),e.rXU(g.tw),e.rXU(ce.P))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-item"]],inputs:{order:"order",isReportActive:"isReportActive"},outputs:{editEvent:"editEvent",contractReviewEvent:"contractReviewEvent",orderFwdToAssociatesEvent:"orderFwdToAssociatesEvent",DLForwardedEvent:"DLForwardedEvent",deleteEvent:"deleteEvent",acknowledgeToClientEvent:"acknowledgeToClientEvent",cvreferredEvent:"cvreferredEvent",orderAssessmentItemEvent:"orderAssessmentItemEvent",selectionEvent:"selectionEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd",2,"width","max-content"],[1,"stdd","w80"],[1,"stdd","w90"],["class","stdd w200","title","this order cannot be edited as it is concluded",4,"ngIf"],["class","stdd w200",3,"click",4,"ngIf"],[1,"stdd","w150"],["class","stdd",4,"ngIf"],["title","this order cannot be edited as it is concluded",1,"stdd","w200"],[1,"stdd","w200",3,"click"],[1,"stdd"],["title","click to conduct Contract Review of this Order",1,"stdd","w100","cursorpointer",3,"ngClass","click"],["class","stdd w100 b","title","click for technical & commercial review of this order",3,"click",4,"ngIf"],["class","stdd w100","title","click to review/edit technical & commercial review of this order",3,"click",4,"ngIf"],["class","stdd w100 fontSmall b cursorpointer","title","click to forward this Order to HR Dept Head",3,"click",4,"ngIf"],["class","stdd w100",4,"ngIf"],["title","edit this DL","type","button",1,"btn",3,"click"],["title","Forward this order to Associates (to be selected)",1,"btn",3,"click"],["title","Associates to whom this DL is already forwardED",1,"btn",3,"click"],["title","compose email message of acknowldgement to client",1,"btn",3,"click"],["title","cvs forwarded","type","button","title","CVs already referrED to clients for this Order",1,"btn",3,"click"],["title","selections and rejections against this order","type","button",1,"btn",3,"click"],["title","delete the DL","type","button",1,"btn",3,"click"],["title","click for technical & commercial review of this order",1,"stdd","w100","b",3,"click"],["title","click to review/edit technical & commercial review of this order",1,"stdd","w100",3,"click"],["title","click to forward this Order to HR Dept Head",1,"stdd","w100","fontSmall","b","cursorpointer",3,"click"],[1,"stdd","w100"],[1,"stdd","w100",3,"ngClass"],["class","stdd w100 b",4,"ngIf"],["class","stdd w100 fontSmall b",4,"ngIf"],[1,"stdd","w100","b"],[1,"stdd","w100","fontSmall","b"]],template:function(r,s){1&r&&e.DNE(0,ke,13,10,"div",0),2&r&&e.Y8G("ngIf",null!=s.order)},dependencies:[m.YU,m.bT,N.An,m.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:small;word-wrap:normal!important;vertical-align:top}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer}.alignR[_ngcontent-%COMP%]{text-align:right}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w80[_ngcontent-%COMP%]{width:80px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.b[_ngcontent-%COMP%]{font-weight:700}.green[_ngcontent-%COMP%]{color:green}.vAlignMiddle[_ngcontent-%COMP%]{vertical-align:middle}.fontSmall[_ngcontent-%COMP%]{font-size:small}.borderAqua[_ngcontent-%COMP%]{border:aqua}.btn[_ngcontent-%COMP%]{color:#f0f8ff;font-size:smaller;margin:0;padding:0}.w15[_ngcontent-%COMP%]{width:25px}"]})}return n})();const Fe=["search"];function xe(n,d){if(1&n){const t=e.RV6();e.j41(0,"pagination",16),e.bIt("pageChanged",function(s){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onPageChanged(s))}),e.EFF(1," >"),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Oe(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",7),e.EFF(2,"Orders Listing"),e.k0s(),e.j41(3,"div",8),e.DNE(4,xe,2,3,"pagination",9),e.j41(5,"input",10,11),e.bIt("keyup.enter",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSearch())}),e.k0s(),e.j41(7,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSearch())}),e.k0s(),e.j41(8,"button",13),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onReset())}),e.k0s(),e.nrm(9,"button",14)(10,"button",15),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.pagination)}}function je(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"button",17)(2,"mat-icon"),e.EFF(3,"print"),e.k0s()(),e.j41(4,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.closePrintSection())}),e.j41(5,"mat-icon"),e.EFF(6,"clear"),e.k0s()()()}2&n&&(e.R7$(1),e.Y8G("previewOnly",!1)("useExistingCss",!0))}function Re(n,d){1&n&&(e.j41(0,"div"),e.EFF(1,"No orders on record"),e.k0s())}function Ae(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"app-order-item",21),e.bIt("editEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.editOrder(s))})("orderFwdToAssociatesEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.orderForwardToAssociates(s))})("DLForwardedEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.DLForwarded(s))})("deleteEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.deleteOrder(s))})("acknowledgeToClientEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.acknowledgeToClient(s))})("cvreferredEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.cvsReferred(s))})("orderAssessmentItemEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.orderAssessmentItem(s))})("selectionEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.selectionRejection(s))})("contractReviewEvent",function(s){e.eBV(t);const o=e.XpG(3);return e.Njj(o.contractReviewOrder(s))}),e.k0s()()}if(2&n){const t=d.$implicit;e.R7$(1),e.Y8G("order",t)}}function ye(n,d){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ae,2,1,"div",20),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.orders)}}function Ne(n,d){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-order-item",22),e.k0s()),2&n){const t=d.$implicit;e.R7$(1),e.Y8G("order",t)("isReportActive",!0)}}function Ee(n,d){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ne,2,2,"div",20),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.printOrders)}}function Me(n,d){if(1&n&&(e.j41(0,"div",19),e.DNE(1,ye,2,1,"div",0),e.DNE(2,Ee,2,1,"div",0),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",!t.isReportActive),e.R7$(1),e.Y8G("ngIf",t.isReportActive)}}let Ge=(()=>{class n{constructor(t,r,s,o,a,c,u,b,j,X,w,Jt,zt){this.service=t,this.accountsService=r,this.selService=s,this.taskService=o,this.orderFwdService=a,this.router=c,this.activatedRoute=u,this.toastr=b,this.modalService=j,this.customerService=X,this.dlFwdService=w,this.confirmService=Jt,this.cvrefService=zt,this.orders=[],this.oParams=new E.d,this.totalCount=0,this.customers=[],this.isReportActive=!1,this.printOrders=[],this.distinctStatus="",this.title="context-menu",this.sortOptions=[{name:"By Order No Asc",value:"orderno"},{name:"By Order No Desc",value:"ordernodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Contract Reviewed Asc",value:"reviewed"},{name:"By Contract Rvwd Desc",value:"reveiweddesc"}],this.orderStatus=[{name:"Not Reviewed",value:"Not Reviewed"},{name:"Reviewed and Approved",value:"ReviewedAndApproved"},{name:"Reviewed and declined",value:"ReviewedAndDeclined"}],this.accountsService.currentUser$.pipe((0,$.s)(1)).subscribe(Ht=>this.user=Ht)}ngOnInit(){this.getOrders(this.oParams),this.activatedRoute.data.subscribe({next:t=>{this.customers=t.customers}})}getOrders(t){this.service.getOrdersBrief(t).subscribe({next:r=>{r.result&&r.pagination&&(this.orders=r.result,this.pagination=r.pagination,this.totalCount=r.count)},error:r=>console.log(this.orders)})}onSearch(){const t=this.service.getOParams();t.search=this.searchTerm?.nativeElement.value,t.pageNumber=1,this.service.setOParams(t),this.getOrders(t)}onReset(){this.searchTerm.nativeElement.value="",this.oParams=new E.d,this.service.setOParams(this.oParams),this.getOrders(this.oParams)}onSortSelected(t){var r=t?.target.value;this.oParams.pageNumber=1,this.oParams.sort=r,this.getOrders(this.oParams)}onPageChanged(t){const r=this.service.getOParams()??new E.d;r.pageNumber!==t.page&&(r.pageNumber=t.page,this.service.setOParams(r),this.getOrders(r))}deleteOrder(t){this.confirmService.confirm("confirm delete this Order","confirm delete order").pipe((0,f.n)(r=>this.service.deleteOrder(t).pipe((0,U.W)(s=>(0,h.of)()),(0,Z.M)(s=>this.toastr.success("deleted Order")))),(0,U.W)(r=>(this.toastr.error("Error in getting delete confirmation",r),(0,h.of)()))).subscribe(()=>{var r=this.orders.findIndex(s=>s.id===t);-1!==r&&this.orders.splice(r,1),this.toastr.success("order deleted")},r=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",r)})}editOrder(t){this.navigateByRoute(t,"/orders/edit",!0)}contractReviewOrder(t){this.navigateByRoute(t,"/orders/orderReview",!0)}orderAssessmentItem(t){this.navigateByRoute(t,"orders/orderitemreview",!0)}orderForwardToAssociates(t){this.bsModalRef=this.modalService.show(ie,{class:"modal-dialog-centered modal-lg",initialState:{}}),(this.bsModalRef.content?.selectedOfficialsEvent).pipe((0,_.p)(o=>o.length>0),(0,f.n)(o=>this.orderFwdService.forwardOrderToSelectedAgents(o,t))).subscribe({next:()=>this.toastr.success("Requirement forwarded","Success"),error:o=>{console.log(o),this.toastr.error(o.error.details,"Error encountered")}})}DLForwarded(t){this.navigateByRoute(t,"orders/DLForwarded",!0)}acknowledgeToClient(t){this.service.acknowledgeOrderToClient(t).subscribe({next:r=>{r?this.toastr.success("message of acknowledgement composed and saved in Messages Draft"):this.toastr.warning("failed to compose message of acknowledgement")},error:r=>this.toastr.error(r.error.details,"Error in composing acknowldgement message to client",{closeButton:!0,extendedTimeOut:0})})}cvsReferred(t){this.navigateByRoute(t,"/orders/cvsreferred",!1)}selectionRejection(t){this.navigateByRoute(t,"/orders/cvsreferred",!1)}navigateByRoute(t,r,s){this.router.navigate([0===t?r:r+"/"+t],{state:{user:this.user,toedit:s,returnUrl:"/orders/orders"}})}documentClick(){}closePrintSection(){this.isReportActive=!1,this.distinctStatus=""}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(y.Q),e.rXU(Y.D),e.rXU(oe.A),e.rXU(q.R),e.rXU(I),e.rXU(p.Ix),e.rXU(p.nX),e.rXU(g.tw),e.rXU(C.I8),e.rXU(D.h),e.rXU(I),e.rXU(x.G),e.rXU(ae.y))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-orders-listing"]],viewQuery:function(r,s){if(1&r&&e.GBs(Fe,5),2&r){let o;e.mGM(o=e.lsd())&&(s.searchTerm=o.first)}},hostBindings:function(r,s){1&r&&e.bIt("click",function(){return s.documentClick()},!1,e.EBC)},decls:19,vars:4,consts:[[4,"ngIf"],[1,"form-inline"],[1,"stdd","w70","b"],[1,"stdd","w100","b"],[1,"stdd","w200","b"],[1,"stdd","w150","b"],["id","print-section",4,"ngIf"],[2,"display","inline-block","font-size","large","font-weight","bold"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["type","text","placeholder","Search",1,"stdd","fa-solid","w200",3,"keyup.enter"],["search",""],["title","searches the database based upon criteria entered in the search box",1,"btn","fa","fa-search","fa-2x",2,"color","aliceblue",3,"click"],["title","Resets the search criteria",1,"btn","fa","fa-refresh","fa-2x",2,"color","aliceblue",3,"click"],["title","Add a new Order","routerLink","/orders/edit/0",1,"btn","fa","fa-plus","fa-2x",2,"color","aliceblue"],["routerLink","/",1,"btn","fa","fa-window-close","fa-2x",2,"color","aliceblue"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],["printSectionId","print-section","printTitle","printtitle","ngxPrint","","title","shows the report in pdf format and enables printing",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss"],[3,"click"],["id","print-section"],[4,"ngFor","ngForOf"],[3,"order","editEvent","orderFwdToAssociatesEvent","DLForwardedEvent","deleteEvent","acknowledgeToClientEvent","cvreferredEvent","orderAssessmentItemEvent","selectionEvent","contractReviewEvent"],[3,"order","isReportActive"]],template:function(r,s){1&r&&(e.DNE(0,Oe,11,1,"div",0),e.DNE(1,je,7,2,"div",0),e.j41(2,"div",1)(3,"div",2),e.EFF(4,"Order No"),e.k0s(),e.j41(5,"div",3),e.EFF(6,"Order Date"),e.k0s(),e.j41(7,"div",4),e.EFF(8,"Customer Name"),e.k0s(),e.j41(9,"div",5),e.EFF(10,"City"),e.k0s(),e.j41(11,"div",3),e.EFF(12,"Review status"),e.k0s(),e.j41(13,"div",3),e.EFF(14,"Reviewed On"),e.k0s(),e.j41(15,"div",3),e.EFF(16,"Forwarded To HR On"),e.k0s()(),e.DNE(17,Re,2,0,"div",0),e.DNE(18,Me,3,2,"div",6)),2&r&&(e.Y8G("ngIf",!s.isReportActive),e.R7$(1),e.Y8G("ngIf",s.isReportActive),e.R7$(16),e.Y8G("ngIf",!s.orders),e.R7$(1),e.Y8G("ngIf",s.orders))},dependencies:[m.Sq,m.bT,L.GV,p.Wk,G.eK,N.An,Ce],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:smaller;word-wrap:normal;vertical-align:middle;font-weight:700}.alignR[_ngcontent-%COMP%]{text-align:right}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w80[_ngcontent-%COMP%]{width:80px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}.vAlignMiddle[_ngcontent-%COMP%]{vertical-align:middle}.fontSmall[_ngcontent-%COMP%]{font-size:small}.borderAqua[_ngcontent-%COMP%]{border:aqua}"]})}return n})();var J=l(249);const z=n=>(0,e.WQX)(D.h).getClientIdAndNames();var H=l(1931);class Te{constructor(){this.orderId=0,this.orderDate=new Date,this.customerId=0,this.customerNameLike="",this.city="",this.categoryId=0,this.orderidInts=[],this.orderids="",this.sort="name",this.pageNumber=1,this.pageSize=10,this.search=""}}let P=(()=>{class n{constructor(t){this.http=t,this.apiUrl=R.c.apiUrl,this.reviewItemStatuses=[],this.cache=new Map,this.cacheS=new Map,this.oParams=new Te}getOrGenerateContractReview(t){return this.http.get(this.apiUrl+"ContractReview/getOrGenerate/"+t)}getContractReviewItem(t){return this.http.get(this.apiUrl+"ContractReview/reviewitem/"+t)}getContractReviewItems(t){return this.http.get(this.apiUrl+"contractreview/reviewitems/"+t)}InsertContractReviewItemFromOrderItemId(t){return this.http.get(this.apiUrl+"Orders/insertreviewitem/"+t)}updateContractReviewItem(t){return 0!==t.id?this.http.put(this.apiUrl+"ContractReview/reviewitem",t):this.http.post(this.apiUrl+"ContractReview/reviewitem",t)}getContractReviews(t){const r=this.cache.get(Object.values(t).join("-"));if(r)return(0,h.of)(r);let s=(0,A.yb)(t);return(0,A.f8)(this.apiUrl+"ContractReview/contractreviewspaged",s,this.http).pipe((0,M.T)(o=>(this.cache.set(Object.values(t).join("-"),o),o)))}getContractReviewStddQsData(){return this.http.get(this.apiUrl+"contractreview/reviewstddq")}generateContractReviewObject(t){return this.http.get(this.apiUrl+"ContractReview/generate/"+t)}saveContractReview(t){return this.http.post(this.apiUrl+"ContractReview/contractreview",t)}updateContractReview(t){return this.http.put(this.apiUrl+"ContractReview/contractreview",t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S=l(2510),O=l(6295);function De(n,d){if(1&n){const t=e.RV6();e.j41(0,"ng-select",31),e.bIt("change",function(s){e.eBV(t);const o=e.XpG(2);return e.Njj(o.employeeChanged(s))}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("items",t.empIdAndNames)}}function Pe(n,d){1&n&&e.nrm(0,"div",32)}function Se(n,d){if(1&n&&(e.j41(0,"div",33),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(t.skills.flat())}}function Be(n,d){if(1&n&&e.nrm(0,"ng-select",34),2&n){const t=e.XpG(2);e.Y8G("items",t.reviewStatus)}}function Xe(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"h4",11),e.EFF(2,"Contract Review - Order Category"),e.k0s(),e.nrm(3,"br"),e.j41(4,"div",12)(5,"span",13),e.EFF(6,"Customer: "),e.k0s(),e.EFF(7),e.k0s(),e.j41(8,"div",14)(9,"span",13),e.EFF(10,"Order No.: "),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.confirmUpdate())}),e.k0s(),e.j41(14,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.decline())}),e.k0s(),e.nrm(15,"br"),e.j41(16,"div",17)(17,"span"),e.EFF(18,"Category to review: "),e.k0s()(),e.j41(19,"div",18),e.EFF(20),e.k0s(),e.j41(21,"div",19),e.EFF(22,"Charges: "),e.k0s(),e.nrm(23,"app-text-input",20)(24,"br"),e.j41(25,"div",21),e.EFF(26,"Assigned to: "),e.k0s(),e.DNE(27,De,1,1,"ng-select",22),e.j41(28,"label",23),e.EFF(29,"HR Skills:"),e.k0s(),e.DNE(30,Pe,1,0,"div",24),e.DNE(31,Se,2,1,"div",25),e.nrm(32,"br"),e.j41(33,"div",26),e.EFF(34,"Review Item Status"),e.k0s(),e.DNE(35,Be,1,1,"ng-select",27),e.j41(36,"label",28),e.EFF(37,"Assessment Reqd: "),e.k0s(),e.nrm(38,"input",29),e.EFF(39,"Yes "),e.nrm(40,"input",30),e.EFF(41,"No "),e.k0s()}if(2&n){const t=e.XpG();e.R7$(7),e.JRh(t.reviewItem.customerName),e.R7$(4),e.Lme("",t.reviewItem.orderNo," dtd: ",e.i5U(12,9,t.reviewItem.orderDate,"dd-MMM-yy"),""),e.R7$(9),e.JRh(t.reviewItem.professionName),e.R7$(3),e.Y8G("label","Charges"),e.R7$(4),e.Y8G("ngIf",t.empIdAndNames),e.R7$(3),e.Y8G("ngIf",!t.skills),e.R7$(1),e.Y8G("ngIf",t.skills),e.R7$(4),e.Y8G("ngIf",t.reviewStatus)}}function Ve(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",35),e.nrm(2,"input",36)(3,"input",37)(4,"app-text-input",38)(5,"input",39)(6,"app-text-input",40),e.j41(7,"button",41),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG();return e.Njj(a.removeQ(o))}),e.k0s()()()}if(2&n){const t=d.index;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(3),e.Y8G("label","Parameter"),e.R7$(2),e.Y8G("label","Remarks")}}let W=(()=>{class n{constructor(t,r,s,o,a,c,u){this.bsModalRef=t,this.empService=r,this.fb=s,this.router=o,this.activatedRoute=a,this.service=c,this.confirm=u,this.updateModalReview=new e.bkB,this.form=new i.gE({}),this.isAddMode=!1,this.reviewStatus=[{name:"Not Reviewed"},{name:"Accepted"},{name:"Rejected"}],this.empIdAndNames=[],this.skills=[],this.stddQs=[],this.itemQsExist=!1;let b=this.router.getCurrentNavigation();b?.extras&&b.extras.state&&b.extras.state.user&&(this.user=b.extras.state.user),r.getEmployeeIdAndKnownAs().subscribe({next:j=>this.empIdAndNames=j})}ngOnInit(){this.reviewItem&&this.createAndInitializeForm(this.reviewItem)}createAndInitializeForm(t){this.form=this.fb.group({id:t.id??0,orderId:t.orderId??0,orderItemId:t.orderItemId??0,professionName:t.professionName??"",quantity:t.quantity??0,ecnr:t.ecnr??!1,contractReviewId:[t.contractReviewId??0,i.k0.required],sourceFrom:t.sourceFrom??"India",requireAssess:[t.requireAssess??!1,i.k0.required],charges:t.charges??0,hrExecUsername:[t.hrExecUsername??"",i.k0.required],reviewItemStatus:[t.reviewItemStatus??"Not Reviewed",i.k0.required],orderDate:t.orderDate??new Date,customerName:[t.customerName??"",i.k0.required],contractReviewItemQs:this.fb.array(t.contractReviewItemQs.map(o=>this.fb.group({id:o.id??0,orderItemId:o.orderItemId??0,contractReviewItemId:[o.contractReviewItemId??0,i.k0.required],srNo:o.srNo??0,reviewParameter:[o.reviewParameter??"",i.k0.required],response:o.response??!1,responseText:o.responseText??"",isResponseBoolean:o.isResponseBoolean??!1,isMandatoryTrue:o.isMandatoryTrue??!1,remarks:o.remarks??""})))});var r=this.form.get("hrExecUsername").value;if(r){var s=this.empIdAndNames.filter(o=>o.username===r)[0];this.skills=s?.hrSkills?.map(o=>o.professionName)}}get contractReviewItemQs(){return this.form.get("contractReviewItemQs")}addQ(){this.contractReviewItemQs.push(this.newQ())}removeQ(t){this.contractReviewItemQs.removeAt(t),this.contractReviewItemQs.markAsDirty(),this.contractReviewItemQs.markAsTouched()}confirmUpdate(){this.service.updateContractReviewItem(this.form.value).subscribe(t=>{this.updateModalReview.emit(t)}),this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}employeeChanged(t){console.log("emplotyeecanged event:",t),this.skills=t.hrSkills.map(r=>r.professionName)}newQ(){var t=0===this.contractReviewItemQs.length?1:Math.max(...this.contractReviewItemQs.value.map(r=>r.srNo))+1;return this.fb.group({id:0,orderItemId:this.reviewItem.orderItemId??0,contractReviewItemId:[this.reviewItem.id??0,i.k0.required],srNo:t,reviewParameter:["",i.k0.required],response:!1,responseText:"",isResponseBoolean:!1,isMandatoryTrue:!1,remarks:""})}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(C.Y$),e.rXU(H.O),e.rXU(i.ok),e.rXU(p.Ix),e.rXU(p.nX),e.rXU(P),e.rXU(x.G))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-item-review"]],outputs:{updateModalReview:"updateModalReview"},decls:21,vars:3,consts:[[2,"margin-left","20px",3,"formGroup"],["class","my-2 mx-2",4,"ngIf"],[2,"font-size","small","vertical-align","middle"],[1,"lbl","w35"],[1,"lbl","mL10","w350"],[1,"lbl","w75"],[1,"lbl","w150"],["title","add a new Review Question",1,"btn","fa","fa-plus",3,"click"],["formArrayName","contractReviewItemQs",1,"mt-2","my-1","px-0"],[4,"ngFor","ngForOf"],[1,"my-2","mx-2"],[1,"my-2","b"],[1,"title"],[2,"font-weight","bold"],[1,"title","mx-4"],["type","button",1,"mL15","btn","btn-success","fa","fa-save",2,"display","inline-block",3,"click"],["type","button",1,"btn","fa","fa-window-close","fa-2x",2,"display","inline-block",3,"click"],[1,"title","b"],[1,"title","w350"],[1,"title","mx-2","hAlignR"],["formControlName","charges",1,"stdd","w75",3,"label"],[1,"title","w100"],["class","stdd w150","bindLabel","knownAs","bindValue","username","labelForId","username","clearAllText","Clear","formControlName","hrExecUsername",3,"items","change",4,"ngIf"],[1,"stdd","my-0",2,"font-size","x-small"],["class","stdd my-0 cursorpointer","title","click the HR Exec Username to display his skill set",4,"ngIf"],["class","stdd my-0","style","width: 450px; font-size: x-small",4,"ngIf"],[1,"title","w150"],["class","stdd w150","bindLabel","name","bindValue","name","labelForId","reviewItemStatus","clearAllText","Clear","formControlName","reviewItemStatus",3,"items",4,"ngIf"],[1,"lbl","w150","b","my-2","hAlignR"],["type","radio","value","1","formControlName","requireAssess",1,"inputcheck","form-check-input","mx-2"],["type","radio","value","0","formControlName","requireAssess",1,"inputcheck","form-check-input","mx-2"],["bindLabel","knownAs","bindValue","username","labelForId","username","clearAllText","Clear","formControlName","hrExecUsername",1,"stdd","w150",3,"items","change"],["title","click the HR Exec Username to display his skill set",1,"stdd","my-0","cursorpointer"],[1,"stdd","my-0",2,"width","450px","font-size","x-small"],["bindLabel","name","bindValue","name","labelForId","reviewItemStatus","clearAllText","Clear","formControlName","reviewItemStatus",1,"stdd","w150",3,"items"],[3,"formGroupName"],["type","text","formControlName","srNo",1,"std","w35"],["type","checkbox","formControlName","isMandatoryTrue",1,"stdd","w35"],["formControlName","reviewParameter",1,"stdd","w350",2,"font-size","small",3,"label"],["type","checkbox","formControlName","response",1,"stdd","w75"],["formControlName","remarks",1,"stdd","w150",2,"font-size","small",3,"label"],[1,"btn","mL10","fa","fa-trash","fa-sm","red",3,"click"]],template:function(r,s){1&r&&(e.j41(0,"form",0),e.DNE(1,Xe,42,12,"div",1),e.nrm(2,"br"),e.j41(3,"div",2)(4,"label",3),e.EFF(5,"Sr#"),e.k0s(),e.j41(6,"label",3),e.EFF(7,"Manda-"),e.nrm(8,"br"),e.EFF(9,"tory"),e.k0s(),e.j41(10,"label",4),e.EFF(11,"Parameter"),e.k0s(),e.j41(12,"label",5),e.EFF(13,"Response"),e.nrm(14,"br"),e.EFF(15,"YES"),e.k0s(),e.j41(16,"label",6),e.EFF(17,"Remarks"),e.k0s(),e.j41(18,"button",7),e.bIt("click",function(){return s.addQ()}),e.k0s(),e.j41(19,"div",8),e.DNE(20,Ve,8,3,"div",9),e.k0s()()()),2&r&&(e.Y8G("formGroup",s.form),e.R7$(1),e.Y8G("ngIf",void 0!==s.reviewItem),e.R7$(19),e.Y8G("ngForOf",s.contractReviewItemQs.controls))},dependencies:[m.Sq,m.bT,i.qT,i.me,i.Zm,i.Fm,i.BC,i.cb,i.j4,i.JD,i.$R,i.v8,S.vr,O.f,m.vh],styles:['.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:middle}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding:0}.std[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;text-align:left}.title[_ngcontent-%COMP%]{display:inline-block;font-size:small}.hAlignR[_ngcontent-%COMP%]{text-align:right}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w350[_ngcontent-%COMP%]{width:350px}.mL15[_ngcontent-%COMP%]{margin-left:15px}.mL10[_ngcontent-%COMP%]{margin-left:10px}.inputCheck[_ngcontent-%COMP%]{margin:0 5px 0 10px;width:40px;border:2px;border-color:#000;vertical-align:bottom}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin:0 10px 0 5px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;font-size:smaller;font-weight:700}']})}return n})();function $e(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.EFF(3,"Job Description "),e.k0s(),e.j41(4,"button",4),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.confirm())}),e.k0s(),e.j41(5,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.decline())}),e.k0s()(),e.j41(6,"div",6)(7,"div")(8,"strong"),e.EFF(9,"Customer: "),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"div")(12,"strong"),e.EFF(13,"Order No.:"),e.k0s(),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"div")(17,"strong"),e.EFF(18,"Category: "),e.k0s(),e.EFF(19),e.k0s(),e.j41(20,"form",7,8)(22,"strong"),e.EFF(23,"Qualification"),e.k0s(),e.j41(24,"input",9),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.qualificationDesired=s)}),e.k0s(),e.nrm(25,"br"),e.j41(26,"label",10),e.EFF(27,"Exp (in yrs):"),e.k0s(),e.j41(28,"label",11),e.EFF(29,"From: "),e.k0s(),e.j41(30,"input",12),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.expDesiredMin=s)}),e.k0s(),e.j41(31,"label",13),e.EFF(32,"to: "),e.k0s(),e.j41(33,"input",14),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.expDesiredMax=s)}),e.k0s(),e.nrm(34,"br"),e.j41(35,"label",10),e.EFF(36,"Age (in yrs):"),e.k0s(),e.j41(37,"label",15),e.EFF(38,"From: "),e.k0s(),e.j41(39,"input",16),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.minAge=s)}),e.k0s(),e.j41(40,"label",17),e.EFF(41,"to: "),e.k0s(),e.j41(42,"input",18),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.maxAge=s)}),e.k0s(),e.nrm(43,"br"),e.j41(44,"strong"),e.EFF(45,"Job Description"),e.k0s(),e.nrm(46,"br"),e.j41(47,"textarea",19),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.jd.jobDescInBrief=s)}),e.EFF(48," "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(10),e.SpI(" ",t.jd.companyName," "),e.R7$(4),e.Lme(" ",t.jd.orderNo," dt ",e.bMT(15,10,t.jd.orderDate)," "),e.R7$(5),e.SpI("",t.jd.categoryName," "),e.R7$(5),e.Y8G("ngModel",t.jd.qualificationDesired),e.R7$(6),e.Y8G("ngModel",t.jd.expDesiredMin),e.R7$(3),e.Y8G("ngModel",t.jd.expDesiredMax),e.R7$(6),e.Y8G("ngModel",t.jd.minAge),e.R7$(3),e.Y8G("ngModel",t.jd.maxAge),e.R7$(5),e.Y8G("ngModel",t.jd.jobDescInBrief)}}let Ue=(()=>{class n{constructor(t,r,s){this.service=t,this.bsModalRef=r,this.fb=s,this.updateSelectedJD=new e.bkB,this.title="",this.closeBtnName="",this.form=new i.gE({})}ngOnInit(){}confirm(){this.jd&&this.service.updateJD({id:this.jd.id,orderItemId:this.jd.orderItemId,orderNo:this.jd.orderNo,jobDescInBrief:this.jd.jobDescInBrief,qualificationDesired:this.jd.qualificationDesired,minAge:this.jd.minAge,maxAge:this.jd.maxAge,expDesiredMax:this.jd.expDesiredMax,expDesiredMin:this.jd.expDesiredMin}).subscribe({next:r=>{this.updateSelectedJD.emit(r),r&&this.bsModalRef.hide()},error:r=>this.updateSelectedJD.emit(!1)})}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(y.Q),e.rXU(C.Y$),e.rXU(i.ok))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-jd-modal"]],outputs:{updateSelectedJD:"updateSelectedJD"},decls:1,vars:1,consts:[["class","mx-2 my-1",4,"ngIf"],[1,"mx-2","my-1"],[1,"modal-header","my-0"],[2,"font-weight","bold"],["type","button",1,"btn","btn-success","mx-5","fa","fa-save",3,"click"],["type","button",1,"btn","btn-secondary","fa","fa-window-close","fa-2x",3,"click"],[1,"modal-body","my-9"],["id","jdForm"],["jdForm","ngForm"],["id","qualificationDesired","name","qualificationDesired","type","text",1,"form-text-input",2,"width","200px",3,"ngModel","ngModelChange"],[2,"font-weight","bold","margin-right","2px"],["for","expDesiredMin",2,"font-weight","bold","margin-right","2px"],["type","text","id","expDesiredMin","name","expDesiredMin",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","expDesiredMax",2,"font-weight","bold","margin-left","2px"],["type","text","id","expDesiredMax","name","expDesiredMax",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","minAge",2,"font-weight","bold","margin-right","2px"],["type","text","id","minAge","name","minAge",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["for","maxAge",2,"font-weight","bold","margin-left","2px"],["type","text","id","maxAge","name","maxAge",1,"form-text-input","stdd","w50","tAlignR",3,"ngModel","ngModelChange"],["type","text","id","jobDescInBrief","name","jobDescInBrief","cols","50","rows","6",1,"form-text-input",3,"ngModel","ngModelChange"]],template:function(r,s){1&r&&e.DNE(0,$e,49,12,"div",0),2&r&&e.Y8G("ngIf",null!=s.jd)},dependencies:[m.bT,i.qT,i.me,i.BC,i.cb,i.vS,i.cV,m.vh],styles:[".stdd[_ngcontent-%COMP%]{margin:2px;padding:2px;display:inline-block!important}.w100[_ngcontent-%COMP%]{width:100px}.w250[_ngcontent-%COMP%]{width:250px}.w50[_ngcontent-%COMP%]{width:50px}.tAlignR[_ngcontent-%COMP%]{text-align:right}"]})}return n})();var Qe=l(2588),Ye=l(2771);class qe{constructor(){this.orderItemId=0,this.orderId=0,this.categoryId=0,this.search=""}}let k=(()=>{class n{constructor(t,r,s,o){this.activatedRoute=t,this.router=r,this.accountService=s,this.http=o,this.apiUrl=R.c.apiUrl,this.currentUserSource=new Ye.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.qParams=new qe,this.routeId="",this.accountService.currentUser$.pipe((0,$.s)(1)).subscribe(a=>this.user=a)}getOrderAssessmentItem(t){return this.http.get(this.apiUrl+"OrderAssessment/orderassessmentitem/"+t)}getOrderAssessment(t){return this.http.get(this.apiUrl+"OrderAssessment/orderAssessment/"+t)}updateOrderAssessment(t){return this.http.put(this.apiUrl+"OrderAssessment/assessment",t)}deleteAssessmentQ(t){return this.http.delete(this.apiUrl+"orderassessment/assessmentq/"+t)}deleteAssessment(t){return this.http.delete(this.apiUrl+"orderassessment/assessment/"+t)}AddNewAssessment(t){return this.http.post(this.apiUrl+"OrderAssessment/assessment",t)}getOrderAssessmentItemQsFromOrderItemId(t){return this.http.get(this.apiUrl+"OrderAssessment/orderassessmentItemQsFromOrderItemId/"+t)}updateOrderAssessmentItem(t){return this.http.put(this.apiUrl+"OrderAssessment/assessmentitem",t)}deleteOrderAssessmentItem(t){return this.http.delete(this.apiUrl+"OrderAssessment/assessmentitemq/"+t)}InsertOrderAssessmentItem(t){return this.http.post(this.apiUrl+"OrderAssessment/assessmentitem",t)}getAssessmentQBankOfCategoryId(t){return this.http.get(this.apiUrl+"AssessmentQBank/questionsFromQBank/"+t)}getAssessmentQStandard(){return this.http.get(this.apiUrl+"OrderAssessment/assessmentStddQs")}getContractReviewItemDto(t){return this.http.get(this.apiUrl+"ContractReview/")}getOrderAssessmentItemHeaderFromProfessionGroup(t){return this.http.get(this.apiUrl+"OrderAssessment/assessmentItemHeaders/"+t)}getOrderAssessmentItemQsFromId(t){return this.http.get(this.apiUrl+"OrderAssessment/orderassessmentItemQs/"+t)}getAndSetProfessionGroupFromProfId(t,r){return this.http.get(this.apiUrl+"OrderAssessment/getAndSetProfessionGroup/"+t+"/"+r)}static#e=this.\u0275fac=function(r){return new(r||n)(e.KVO(p.nX),e.KVO(p.Ix),e.KVO(Y.D),e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v=l(9375);function Le(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"input",5),e.bIt("ngModelChange",function(s){const a=e.eBV(t).$implicit;return e.Njj(a.checked=s)})("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.selectedClicked(o.id))}),e.k0s(),e.j41(2,"div",6),e.EFF(3),e.k0s(),e.j41(4,"div",7),e.EFF(5),e.k0s(),e.j41(6,"div",6),e.EFF(7),e.k0s(),e.j41(8,"div",8),e.EFF(9),e.nI1(10,"date"),e.k0s()()}if(2&n){const t=d.$implicit;e.R7$(1),e.Y8G("ngModel",t.checked),e.R7$(2),e.JRh(t.customerName),e.R7$(2),e.JRh(t.categoryRef),e.R7$(2),e.JRh(t.professionName),e.R7$(2),e.JRh(e.i5U(10,5,t.dateDesigned,"ddMMMyy"))}}function Je(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.populateQs())}),e.k0s(),e.j41(2,"button",3),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.closeClicked())}),e.k0s(),e.DNE(3,Le,11,8,"div",4),e.k0s()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("disabled",null===t.headers),e.R7$(2),e.Y8G("ngForOf",t.headers)}}let ze=(()=>{class n{constructor(t){this.service=t,this.profGroup="",this.sectionCloseEvent=new e.bkB,this.targetAssessmentItemQsEvent=new e.bkB,this.headers=[],this.assessmentItemProfessionGroupSelected=""}ngOnInit(){this.service.getOrderAssessmentItemHeaderFromProfessionGroup(this.profGroup).subscribe({next:t=>{this.headers=t,this.sectionCloseEvent.emit(!0)}})}populateQs(){var t=this.headers.filter(r=>!0===r.checked).map(r=>r.orderItemId);null!=t&&this.service.getOrderAssessmentItemQsFromOrderItemId(+t).subscribe({next:r=>{console.log("response:",r,"targetassessmentitem:",this.targetAssessmentItem),this.targetAssessmentItemQsEvent.emit(r)}})}selectedClicked(t){this.headers.forEach(r=>{r.id!==t&&(r.checked=!1)})}closeClicked(){this.sectionCloseEvent.emit(!0)}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(k))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-assessment-item-header"]],inputs:{profGroup:"profGroup",targetAssessmentItem:"targetAssessmentItem"},outputs:{sectionCloseEvent:"sectionCloseEvent",targetAssessmentItemQsEvent:"targetAssessmentItemQsEvent"},decls:1,vars:1,consts:[["style","border-style: solid; border-color: yellow;",4,"ngIf"],[2,"border-style","solid","border-color","yellow"],["title","On selecting a Assessment Item, click this to populate the current Order Assessment Item Parameters",1,"btn","fa","fa-check",3,"disabled","click"],[1,"btn","fa","fa-window-close",3,"click"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","25px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w200"],[1,"stdd","w50"],[1,"stdd","w90"]],template:function(r,s){1&r&&e.DNE(0,Je,4,2,"div",0),2&r&&e.Y8G("ngIf",s.headers&&s.headers.length>0)},dependencies:[m.Sq,m.bT,i.Zm,i.BC,i.vS,m.vh],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w50[_ngcontent-%COMP%]{width:50px}.w90[_ngcontent-%COMP%]{width:90px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:smaller}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}"]})}return n})();function He(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"app-order-assessment-item-header",30),e.bIt("sectionCloseEvent",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.closeSection())})("targetAssessmentItemQsEvent",function(s){e.eBV(t);const o=e.XpG(2);return e.Njj(o.assessmentQsEmitted(s))}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("profGroup",t.orderAssessmentItem.professionGroup)("targetAssessmentItem",t.orderAssessmentItem)}}function We(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",31)(2,"div",32),e.nrm(3,"app-text-input",33),e.k0s(),e.j41(4,"div",34),e.nrm(5,"app-text-input",35),e.k0s(),e.nrm(6,"textarea",36),e.j41(7,"app-text-input",37),e.bIt("change",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.calcualteTotals())}),e.k0s(),e.nrm(8,"input",38),e.j41(9,"button",39),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.removeOrderAssessmentItemQ(o))}),e.k0s()()()}if(2&n){const t=d.index;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("label","Question No"),e.R7$(2),e.Y8G("label","Subject"),e.R7$(2),e.Y8G("label","Points")}}const Ke=function(){return{dateInputFormat:"YYYY-MM-DD"}};function Ze(n,d){if(1&n){const t=e.RV6();e.j41(0,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.form.valid)}),e.j41(1,"label",5),e.EFF(2,"Order No.:"),e.k0s(),e.j41(3,"div",6),e.EFF(4),e.k0s(),e.j41(5,"label",7),e.EFF(6,"Customer"),e.k0s(),e.j41(7,"div",8),e.EFF(8),e.k0s(),e.nrm(9,"br"),e.j41(10,"label",7),e.EFF(11,"Category"),e.k0s(),e.j41(12,"div",8),e.EFF(13),e.k0s(),e.j41(14,"label",7),e.EFF(15,"Prof Group:"),e.k0s(),e.j41(16,"div",9),e.bIt("dblclick",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getProfessionGroup())}),e.EFF(17),e.k0s(),e.nrm(18,"br"),e.j41(19,"label",10),e.EFF(20,"Designed By"),e.k0s(),e.nrm(21,"app-text-input",11),e.j41(22,"label",12),e.EFF(23,"On"),e.k0s(),e.nrm(24,"input",13),e.j41(25,"label",14),e.EFF(26,"Approved By"),e.k0s(),e.j41(27,"input",15),e.bIt("dblclick",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.updateApprovedBy())}),e.k0s(),e.j41(28,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.populateStddAssessmentQuestions())}),e.k0s(),e.j41(29,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.populateCustomAssessmentQuestions())}),e.k0s(),e.j41(30,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.update())}),e.k0s(),e.j41(31,"button",19),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.cancel())}),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.copyProfGroup())}),e.k0s(),e.DNE(33,He,2,2,"div",21),e.j41(34,"div",22)(35,"label",23),e.EFF(36,"Q No"),e.k0s(),e.j41(37,"label",24),e.EFF(38,"Subject"),e.k0s(),e.j41(39,"label",25),e.EFF(40,"Question"),e.k0s(),e.j41(41,"label",23),e.EFF(42,"Points"),e.k0s(),e.j41(43,"label",26),e.EFF(44,"Manda"),e.nrm(45,"br"),e.EFF(46,"tory"),e.k0s(),e.j41(47,"button",27),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.addNewOrderAssessmentItemQ())}),e.k0s(),e.DNE(48,We,10,4,"div",28),e.j41(49,"div",29),e.EFF(50),e.k0s()()()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(4),e.SpI("",t.orderAssessmentItem.orderNo," "),e.R7$(4),e.JRh(t.orderAssessmentItem.customerName),e.R7$(5),e.JRh(t.orderAssessmentItem.professionName),e.R7$(4),e.JRh(t.orderAssessmentItem.professionGroup),e.R7$(4),e.Y8G("label","Designed By"),e.R7$(3),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(11,Ke)),e.R7$(9),e.Y8G("ngIf",t.copyAssessmentQs),e.R7$(15),e.Y8G("ngForOf",t.orderAssessmentItemQs.controls),e.R7$(2),e.SpI("Total: ",t.totalMarks,"")}}let et=(()=>{class n{constructor(t,r,s,o,a){this.fb=t,this.confirm=r,this.bsModalService=s,this.service=o,this.toastr=a,this.form=new i.gE({}),this.cancelRegister=new e.bkB,this.updateEvent=new e.bkB,this.returnUrl="",this.professionId=0,this.copyAssessmentQs=!1,this.totalMarks=0,this.bsValueDate=new Date}ngOnInit(){this.orderAssessmentItem&&(this.CreateAndInitializeFormArray(this.orderAssessmentItem),this.calcualteTotals(),this.professionId=this.orderAssessmentItem?.professionId)}CreateAndInitializeFormArray(t){console.log("item in createandinitiaize:",t),this.form=this.fb.group({id:[t.id],orderAssessmentId:[t.orderAssessmentId],orderItemId:[t.orderItemId,i.k0.required],orderId:[t.orderId,i.k0.required],orderNo:[t.orderNo,i.k0.required],customerName:[t.customerName,i.k0.required],professionId:[t.professionId,i.k0.required],professionName:[t.professionName,i.k0.required],professionGroup:[t.professionGroup??""],designedBy:[t.designedBy],dateDesigned:[t.dateDesigned??new Date],approvedBy:[t.approvedBy],orderAssessmentItemQs:this.fb.array(t.orderAssessmentItemQs.map(r=>this.fb.group({id:[r.id??0],orderAssessmentItemId:r.orderAssessmentItemId,orderItemId:[r.orderItemId,i.k0.required],orderId:r.orderId,questionNo:[r.questionNo,i.k0.required],subject:[r.subject,i.k0.required],question:[r.question,i.k0.required],maxPoints:[r.maxPoints,i.k0.required],isMandatory:[r.isMandatory,i.k0.required]})))})}get orderAssessmentItemQs(){return this.form.get("orderAssessmentItemQs")}newOrderAssessmentItemQ(){return this.fb.group({id:0,orderAssessmentItemId:this.form.get("id")?.value,orderItemId:[this.form.get("orderItemId")?.value,i.k0.required],orderId:[this.form.get("orderId")?.value,i.k0.required],questionNo:[0===this.orderAssessmentItemQs.length?1:Math.max(...this.orderAssessmentItemQs.value.map(t=>t.questionNo))+1,i.k0.required],subject:["",i.k0.required],question:["",i.k0.required],maxPoints:[0,i.k0.required],isMandatory:[!1,i.k0.required]})}newOrderAssessmentItemQFromStddQ(t){t.forEach(r=>{this.orderAssessmentItemQs.push(this.fb.group({orderAssessmentItemId:r.orderAssessmentItemId,orderItemId:[r.orderItemId,i.k0.required],orderId:[r.orderId,i.k0.required],questionNo:[r.questionNo,i.k0.required],subject:[r.subject,i.k0.required],question:[r.question,i.k0.required],maxPoints:[r.maxPoints,i.k0.required],isMandatory:[r.isMandatory,i.k0.required]}))})}addNewOrderAssessmentItemQ(){this.orderAssessmentItemQs.push(this.newOrderAssessmentItemQ())}removeOrderAssessmentItemQ(t){this.orderAssessmentItemQs.removeAt(t)}cancel(){this.cancelRegister.emit(!1),this.bsModalService.hide()}update(){this.service.updateOrderAssessmentItem(this.form.value).subscribe({next:t=>{t?(this.updateEvent.emit(!0),this.toastr.success("Order Assessment Item successfully updated","success"),this.bsModalService.hide()):this.toastr.warning("failed to update the order assessment item","Failed to update")}})}calcualteTotals(){this.totalMarks=this.form.get("orderAssessmentItemQs")?.value.map(t=>t.maxPoints).reduce((t,r)=>+t+ +r),console.log("total marks:",this.totalMarks)}populateStddAssessmentQuestions(){const t=this.service.getAssessmentQStandard();this.confirm.confirm("confirm Copy standard assessment Questions","This will replace any existing Assessment Questions, and replace it with the standard Assessment QuestionsPress OK to proceed, CANCEL to abort").pipe((0,_.p)(s=>s),(0,f.n)(()=>t)).subscribe(s=>{s.length>0?(this.orderAssessmentItemQs.clear(),this.newOrderAssessmentItemQFromStddQ(s)):this.toastr.warning("Failed to retrieve the standard assessment Questions")})}populateCustomAssessmentQuestions(){var t=this.form.get("professionId")?.value;const r=this.service.getAssessmentQBankOfCategoryId(t);this.confirm.confirm("confirm Copy Custom assessment Questions","This will replace any existing Assessment Questions, and replace it with the standard Assessment QuestionsPress OK to proceed, CANCEL to abort").pipe((0,_.p)(o=>o),(0,f.n)(()=>r)).subscribe(o=>{null!==o?(this.orderAssessmentItemQs.clear(),o.assessmentStddQs.forEach(a=>{var c={id:0,orderAssessmentItemId:this.orderAssessmentItem.id,orderItemId:this.orderAssessmentItem.orderItemId,orderId:this.orderAssessmentItem.orderId,questionNo:a.questionNo,question:a.question,subject:a.subject,maxPoints:a.maxPoints,isMandatory:!1};this.orderAssessmentItem?.orderAssessmentItemQs.push(c)})):this.toastr.warning("No custom assessment parameters exist for the chosen category","Parameters Not Found")})}updateApprovedBy(){this.user&&(this.form.value.approvedBy=this.user.userName,this.form.get("approvedBy")?.setValue(this.user.userName))}closeSection(){}getProfessionGroup(){var t=this.form.get("professionId")?.value,r=this.form.get("id")?.value;this.service.getAndSetProfessionGroupFromProfId(t,r).subscribe({next:s=>{""===s.stringValue?this.toastr.warning("No Order Assessment Items exist matching the desired profession Group "+this.form.get("professionGroup")?.value,"No matching assessments exist"):this.orderAssessmentItem.professionGroup=s.stringValue},error:s=>console.log(s.error?.details,"Error encountered in getProfessionGroup")})}copyProfGroup(){if(this.copyAssessmentQs=!this.copyAssessmentQs,this.copyAssessmentQs&&this.getProfessionGroup(),this.copyAssessmentQs){var r=this.form.get("professionGroup")?.value;this.service.getOrderAssessmentItemHeaderFromProfessionGroup(r).subscribe({next:s=>{if(console.log(s),0===s.length)return this.toastr.warning("this profession Group does not have any corresponding Order Assessment Items defined","not found"),void(this.copyAssessmentQs=!1)}})}}assessmentQsEmitted(t){this.orderAssessmentItemQs.clear(),this.newOrderAssessmentItemQFromStddQ(t),this.calcualteTotals(),this.copyAssessmentQs=!1}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(x.G),e.rXU(C.I8),e.rXU(k),e.rXU(g.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-assessment-item-modal"]],outputs:{cancelRegister:"cancelRegister",updateEvent:"updateEvent"},decls:5,vars:1,consts:[[1,"modal-body","my-0"],[2,"font-weight","bold"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"lbl","b","100"],[1,"stdd","w75"],[1,"lbl","w75"],[1,"stdd","w200"],[1,"stdd","w200","borderAllaround",3,"dblclick"],[1,"lbl","w100"],["formControlName","designedBy",1,"stdd","w75",3,"label"],[1,"lbl","w50","hAlignR"],["type","text","placeholder","designed On","formControlName","dateDesigned","bsDatepicker","",1,"stdd","w75",3,"bsValue","bsConfig"],[1,"lbl","w75","fSmaller"],["type","text","formControlName","approvedBy",1,"stdd","w75",3,"dblclick"],["title","imports standard assessment questions",1,"btn","fa","fa-list",3,"click"],["title","imports custom assessment questions matching the profession",1,"btn","fa","fa-list-ul",3,"click"],["title","Save this data",1,"btn","fa","fa-save",3,"click"],["title","close this form and return to the calling program",1,"btn","fa","fa-window-close","fa-2x",3,"click"],["title","Retrieve Profession Group from Profession Object",1,"btn","fa","fa-copy",3,"click"],[4,"ngIf"],["formArrayName","orderAssessmentItemQs"],[1,"lbl","w50"],[1,"lbl","w150"],[1,"lbl","w400"],[1,"w40",2,"display","inline-block","font-size","x-small","vertical-align","middle"],["type","button",1,"stdd","btn","btn-priamry","fa","fa-plus",3,"click"],[4,"ngFor","ngForOf"],[2,"margin-left","600px"],[3,"profGroup","targetAssessmentItem","sectionCloseEvent","targetAssessmentItemQsEvent"],[3,"formGroupName"],[1,"stdd","w50"],["formControlName","questionNo",3,"label"],[1,"stdd","w150"],["formControlName","subject",3,"label"],["cols","60","rows","1","formControlName","question","placeholder","assessment parameter",1,"stdd"],["formControlName","maxPoints",1,"stdd","w50",3,"label","change"],["type","checkbox","formControlName","isMandatory",1,"stdd"],[1,"btn","fa","fa-trash","red",3,"click"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2,"Define Assessment parameters for Order Item "),e.k0s(),e.DNE(3,Ze,51,12,"form",2),e.k0s(),e.nrm(4,"div",3)),2&r&&(e.R7$(3),e.Y8G("ngIf",s.orderAssessmentItem))},dependencies:[m.Sq,m.bT,i.qT,i.me,i.Zm,i.BC,i.cb,v.pc,v.p0,i.j4,i.JD,i.$R,i.v8,O.f,ze],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.btn[_ngcontent-%COMP%]{vertical-align:top;margin:0;font-size:medium}.fSmaller[_ngcontent-%COMP%]{font-size:smaller!important}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px}.borderAllaround[_ngcontent-%COMP%]{border-style:solid;border-color:#ff0}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.blue[_ngcontent-%COMP%]{color:#00f}.red[_ngcontent-%COMP%]{color:red}.hAlignR[_ngcontent-%COMP%]{text-align:right}"]})}return n})();function tt(n,d){if(1&n&&(e.j41(0,"div",39),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI(" ",e.bMT(2,1,t.order.forwardedToHRDeptOn)," ")}}function rt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",40),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.forwardOrderToHRDept())}),e.EFF(1," Not Forwarded "),e.k0s()}}function st(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",33)(1,"label",34),e.EFF(2,"Contract Review Status"),e.k0s(),e.j41(3,"div",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.updateContractReviewStatus())}),e.EFF(4),e.k0s(),e.j41(5,"label",36),e.EFF(6,"Forwarded to HR On"),e.k0s(),e.DNE(7,tt,3,3,"div",37),e.DNE(8,rt,2,0,"div",38),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("ngClass","Accepted"===t.order.contractReviewStatus?"green":"Accepted with regrets"===t.order.contractReviewStatus?"blue":"red"),e.R7$(1),e.SpI(" ",t.order.contractReviewStatus," "),e.R7$(3),e.Y8G("ngIf",null!=t.order.forwardedToHRDeptOn),e.R7$(1),e.Y8G("ngIf",void 0===t.order.forwardedToHRDeptOn)}}function nt(n,d){1&n&&e.nrm(0,"span",41)}function it(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",42)(1,"button",43),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.assignTasksToHRExecs())}),e.j41(2,"mat-icon"),e.EFF(3,"assignment_ind"),e.k0s()(),e.j41(4,"button",44),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.OrderForwardedTo())}),e.j41(5,"mat-icon"),e.EFF(6,"arrow_forward"),e.k0s()()()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("disabled","Accepted"!==t.order.contractReviewStatus)}}function ot(n,d){if(1&n&&e.nrm(0,"ng-select",57),2&n){const t=e.XpG(3);e.Y8G("items",t.categories)}}function dt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",33)(1,"button",58),e.bIt("click",function(){e.eBV(t);const s=e.XpG().index,o=e.XpG(2);return e.Njj(o.openContractReviewItemModal(s))}),e.j41(2,"mat-icon"),e.EFF(3," rate_review"),e.k0s()(),e.j41(4,"button",59),e.bIt("click",function(){e.eBV(t);const s=e.XpG().index,o=e.XpG(2);return e.Njj(o.displayOrderAssessmentItem(s))}),e.j41(5,"mat-icon"),e.EFF(6,"assessment"),e.k0s()(),e.j41(7,"button",60),e.bIt("click",function(){e.eBV(t);const s=e.XpG().index,o=e.XpG(2);return e.Njj(o.openJDModal(s))}),e.j41(8,"mat-icon"),e.EFF(9,"dehaze"),e.k0s()(),e.j41(10,"button",61),e.bIt("click",function(){e.eBV(t);const s=e.XpG().index,o=e.XpG(2);return e.Njj(o.openRemunerationModal(s))}),e.EFF(11,"$"),e.k0s()()}}const B=function(){return{dateInputFormat:"YYYY-MM-DD"}};function at(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",45),e.nrm(2,"input",46)(3,"input",47),e.DNE(4,ot,1,1,"ng-select",48),e.nrm(5,"input",49)(6,"app-text-input",50),e.j41(7,"app-text-input",51),e.bIt("change",function(){const o=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.qntyChanged(o))}),e.k0s(),e.nrm(8,"app-text-input",52)(9,"app-text-input",53)(10,"input",54)(11,"input",55),e.DNE(12,dt,12,0,"div",15),e.j41(13,"button",56),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.removeItem(o))}),e.j41(14,"mat-icon"),e.EFF(15,"delete"),e.k0s()()()()}if(2&n){const t=d.index,r=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(3),e.Y8G("ngIf",r.categories),e.R7$(2),e.Y8G("label","Source From"),e.R7$(1),e.Y8G("label","quantity"),e.R7$(1),e.Y8G("label","Min CVs"),e.R7$(1),e.Y8G("label","max CVs"),e.R7$(1),e.Y8G("bsValue",r.bsValueDate)("bsConfig",e.lJ4(9,B)),e.R7$(2),e.Y8G("ngIf",!r.isAddMode)}}function ct(n,d){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=d.$implicit;e.R7$(1),e.SpI(" ",t," ")}}function lt(n,d){if(1&n&&(e.j41(0,"ul",62),e.DNE(1,ct,2,1,"li",31),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.errors)}}function mt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"form",1),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.formChanged())}),e.j41(2,"label",2),e.EFF(3,"Order No"),e.k0s(),e.j41(4,"label",3),e.EFF(5,"Customer"),e.k0s(),e.j41(6,"label",2),e.EFF(7,"Dated"),e.k0s(),e.j41(8,"label",2),e.EFF(9,"Complete By"),e.k0s(),e.j41(10,"label",2),e.EFF(11,"City"),e.k0s(),e.j41(12,"label",4),e.EFF(13,"Country"),e.k0s(),e.j41(14,"label",2),e.EFF(15,"Order Ref"),e.k0s(),e.nrm(16,"br")(17,"app-text-input",5),e.j41(18,"div",6),e.nrm(19,"ng-select",7),e.k0s(),e.nrm(20,"input",8)(21,"input",9)(22,"app-text-input",10)(23,"app-text-input",11)(24,"app-text-input",12)(25,"br"),e.j41(26,"label",4),e.EFF(27,"Project Head"),e.k0s(),e.j41(28,"div",13),e.nrm(29,"ng-select",14),e.k0s(),e.DNE(30,st,9,4,"div",15),e.j41(31,"label",16),e.EFF(32,"Status"),e.k0s(),e.j41(33,"div",17),e.EFF(34),e.k0s(),e.j41(35,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSubmit())}),e.DNE(36,nt,1,0,"span",19),e.k0s(),e.DNE(37,it,7,1,"div",20),e.j41(38,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.close())}),e.j41(39,"mat-icon"),e.EFF(40,"close"),e.k0s()(),e.nrm(41,"hr",22),e.j41(42,"div",23)(43,"div",24)(44,"label",25),e.EFF(45,"Sel"),e.k0s(),e.j41(46,"label",25),e.EFF(47,"Sr#"),e.k0s(),e.j41(48,"label",26),e.EFF(49,"Category"),e.k0s(),e.j41(50,"label",27),e.EFF(51,"ECNR"),e.k0s(),e.j41(52,"label",16),e.EFF(53,"Source"),e.nrm(54,"br"),e.EFF(55,"From"),e.k0s(),e.j41(56,"label",28),e.EFF(57,"Qnty"),e.k0s(),e.j41(58,"label",28),e.EFF(59,"Min"),e.nrm(60,"br"),e.EFF(61,"CVs"),e.k0s(),e.j41(62,"label",28),e.EFF(63,"Max"),e.nrm(64,"br"),e.EFF(65,"CVs"),e.k0s(),e.j41(66,"label",29),e.EFF(67,"Complete by "),e.k0s(),e.j41(68,"label",28),e.EFF(69,"Review"),e.nrm(70,"br"),e.EFF(71,"Status"),e.k0s(),e.j41(72,"button",30),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.addItem())}),e.k0s()(),e.DNE(73,at,16,10,"div",31),e.k0s()(),e.DNE(74,lt,2,1,"ul",32),e.k0s()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("formGroup",t.form),e.R7$(16),e.Y8G("label","Order No"),e.R7$(2),e.Y8G("items",t.customers),e.R7$(1),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(18,B)),e.R7$(1),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(19,B)),e.R7$(1),e.Y8G("label","City"),e.R7$(1),e.Y8G("label","Country"),e.R7$(1),e.Y8G("label","Order Ref"),e.R7$(5),e.Y8G("items",t.employees),e.R7$(1),e.Y8G("ngIf",!t.isAddMode),e.R7$(4),e.JRh(t.order.status),e.R7$(1),e.Y8G("disabled",!t.form.dirty),e.R7$(1),e.Y8G("ngIf",t.loading),e.R7$(1),e.Y8G("ngIf",!t.isAddMode),e.R7$(36),e.Y8G("ngForOf",t.orderItems.controls),e.R7$(1),e.Y8G("ngIf",t.errors)}}let pt=(()=>{class n{constructor(t,r,s,o,a,c,u,b,j,X){this.activatedRoute=t,this.fb=r,this.service=s,this.orderAssessService=o,this.toastr=a,this.router=c,this.taskService=u,this.contractRvwService=b,this.modalService=j,this.confirm=X,this.associates=[],this.customers=[],this.employees=[],this.categories=[],this.isAddMode=!1,this.loading=!1,this.form=new i.gE({}),this.bsValueDate=new Date,this.returnUrl="",this.routeId="",this.errors=[],this.routeId=this.activatedRoute.snapshot.params.id;let w=this.router.getCurrentNavigation();w?.extras&&w.extras.state&&(w.extras.state.returnUrl&&(this.returnUrl=w.extras.state.returnUrl),w.extras.state.user&&(this.user=w.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.order=t.order,this.customers=t.customers,this.employees=t.employees,this.categories=t.professions}),this.isAddMode=0===this.order?.id,this.createAndInitializeForm(this.order)}createAndInitializeForm(t){this.form=this.fb.group({id:[t.id],orderNo:[t.orderNo,i.k0.required],orderDate:[t.orderDate,i.k0.required],customerId:[t.customerId,i.k0.required],orderRef:[t.orderRef],salesmanId:[t.salesmanId],projectManagerId:[t.projectManagerId,i.k0.required],cityOfWorking:[t.cityOfWorking],country:[t.country,i.k0.required],completeBy:[t.completeBy,i.k0.required],status:[t.status],forwardedToHRDeptOn:[t.forwardedToHRDeptOn],contractReviewStatus:[t.contractReviewStatus],orderItems:this.fb.array(t.orderItems.map(r=>this.fb.group({selected:!1,id:r.id,orderId:r.orderId,srNo:r.srNo,professionId:[r.professionId,i.k0.required],ecnr:r.ecnr,sourceFrom:r.sourceFrom,quantity:[r.quantity,[i.k0.required,i.k0.min(1)]],minCVs:r.minCVs,maxCVs:r.maxCVs,completeBefore:r.completeBefore,status:r.status,reviewItemStatus:[r.reviewItemStatus],requireAssessment:[r.requireAssessment]})))})}get orderItems(){return this.form.get("orderItems")}newItem(){this.isAddMode&&this.form.get("completeBy");var t=0===this.orderItems.length?1:Math.max(...this.orderItems.value.map(s=>s.srNo))+1;return this.isAddMode&&this.form.get("completeBy"),this.fb.group({selected:!1,id:0,orderId:this.order?.id,srNo:t,professionId:[0,i.k0.required],ecnr:!1,sourceFrom:"India",quantity:[0,[i.k0.required,i.k0.min(1)]],minCVs:0,maxCVs:0,completeBefore:[this.form.get("completeBy")?.value,i.k0.required],status:"Not Started",reviewItemStatus:"Not Reviewed",requireAssessment:!1})}addItem(){this.orderItems.push(this.newItem())}formChanged(){console.log("form changed event")}setMinCVs(t,r){this.orderItems.at(t).get("minCVs").setValue(r)}setMaxCVs(t,r){this.orderItems.at(t).get("maxCVs").setValue(r)}getMinCVs(t){return this.getControls()[t].value.minCVs}getMaxCVs(t){return this.getControls()[t].value.maxCVs}getQnty(t){return this.getControls()[t].value.quantity}getControls(){return this.form.get("orderItems").controls}qntyChanged(t){if(!(+this.getMinCVs(t)>0||+this.getMaxCVs(t)>0)){var r=+this.getQnty(t);this.setMinCVs(t,3*r),this.setMaxCVs(t,3*r)}}onSubmit(){0!==this.orderItems.length?this.isAddMode?this.CreateOrder():(this.toastr.info("updating order ..."),this.UpdateOrder()):this.toastr.warning("Require atleast one Order Item to save the Demand Letter","Invalid form data")}removeItem(t){this.confirm.confirm("Confirm Delete","Press DELETE to confirm delete, cancel to cancel deletion","Delete","Cancel").subscribe({next:s=>{s?(this.orderItems.removeAt(t),this.orderItems.markAsDirty(),this.orderItems.markAsTouched(),this.toastr.success("Demand Letter item deleted","Deletion successful")):this.toastr.warning("Deletion aborted by user","Aborted")}})}close(){this.router.navigateByUrl(this.returnUrl)}CreateOrder(){this.service.register(this.form.value).subscribe({next:t=>{null==t?this.toastr.info("Failed to creat the order"):(this.form.get("orderNo")?.value.setValue(t.orderNo),this.form.get("id")?.value.setValue(t.id),this.toastr.success("Created the Order, with Order No. "+t.orderNo))},error:t=>this.toastr.error("Error in creating the Order",t)})}displayOrderAssessmentItem(t){var r=this.orderItems.at(t).get("id")?.value;r?this.orderAssessService.getOrderAssessmentItem(r).pipe((0,_.p)(o=>null!==o),(0,f.n)(o=>(this.bsModalRef=this.modalService.show(et,{class:"modal-dialog-centered modal-lg",initialState:{orderAssessmentItem:o,user:this.user}}),this.bsModalRef.content.updateEvent))).subscribe(o=>{o?this.toastr.success("Updated the contract review item - you must update this Demand Letter for the changes to take permanent effect","Success"):this.toastr.warning("Failed to update the contract review","Failed")}):this.toastr.warning("Failed to get Order Item Id","logic error")}assignTasksToHRExecs(){if(this.isAddMode)return;if(0===this.order?.projectManagerId)return void this.toastr.warning("Project Manager needs to be defined before tasks can be assiged");if(this.isAddMode)return void this.toastr.error("tasks cannot be assigned while in add mode.  Save the data first and then comeback to this form in edit mode to assign HR Executive tasks");var r=this.form.value.orderItems.filter(c=>!0===c.selected).map(c=>c.id);if(0===r.length)return void this.toastr.error("No Order Items selected");const o=this.service.createOrderAssignmentTasks(r);this.confirm.confirm("confirm assign Tasks to HR Executives","This will create tasks in the name of HR Executives defined in the contract review.  This will also compose messages which you can view/edit in the Messages section.").pipe((0,_.p)(c=>c),(0,f.n)(()=>o)).subscribe({next:c=>{""===c||null===c?this.toastr.success("tasks created for the chosen order items. Messages also composed, which you can view/edit in the Messages section","Success"):this.toastr.warning(c,"Failed to process Some or all Order Item Ids")},error:c=>this.toastr.error(c.error.text,"Error encountered")})}assignTasksToHRExecsdelete(){if(!this.isAddMode)if(0!==this.order?.projectManagerId)if(this.isAddMode)this.toastr.error("tasks cannot be assigned while in add mode.  Save the data first and then comeback to this form in edit mode to assign HR Executive tasks");else{var r=this.form.value.orderItems.filter(s=>!0===s.selected).map(s=>s.id);if(0!==r.length)return this.service.createOrderAssignmentTasks(r).subscribe(s=>{""===s||null===s?this.toastr.success("tasks created for the chosen order items","Success"):this.toastr.warning(s,"Failure")},s=>{this.toastr.error(s.error.details,"failed to create tasks for the chosen order items")});this.toastr.error("No Order Items selected")}else this.toastr.warning("Project Manager needs to be defined before tasks can be assiged")}updateContractReviewStatus(){var t=this.form.get("id")?.value;return""===t||null===t?null:this.service.updateContractReviewStatus(+t).subscribe({next:r=>{console.log("response:",r),""===r||null===r?this.toastr.info("Failed to update the Contract Review","Failure"):(this.order.contractReviewStatus=r,this.toastr.success("Contract Review value updated","Success"))},error:r=>{console.log("error in updatecontractreviewstatus:",r),this.toastr.error(r.error?.details,"Error")}})}openContractReviewItemModal(t){var r=this.orderItems.at(t).get("id")?.value;this.contractRvwService.getContractReviewItem(r).pipe((0,_.p)(o=>null!=o),(0,f.n)(o=>(this.bsModalRef=this.modalService.show(W,{class:"modal-dialog-centered modal-lg",initialState:{reviewItem:o}}),this.bsModalRef.content.updateModalReview))).subscribe(o=>{null!==o?(this.toastr.success("Updated the contract review item - you must update this Demand Letter for the changes to take permanent effect","Success"),this.orderItems.at(t).get("reviewItemStatus")?.setValue(o.reviewItemStatus),this.form.markAsDirty()):this.toastr.warning("Failed to update the contract review","Failed")})}navigateByRoute(t,r,s){this.router.navigate([t],{state:{user:this.user,object:r,toedit:s,returnUrl:"/orders/orders/edit/"+this.routeId}})}openJDModal(t){if(!this.isAddMode){var r=this.getControls()[t].value;this.service.getJD(r.id).pipe((0,_.p)(a=>null!=a),(0,f.n)(a=>(this.bsModalRef=this.modalService.show(Ue,{class:"modal-dialog-centered modal-md",initialState:{title:"Job Description",jd:a}}),this.bsModalRef.content.updateSelectedJD))).subscribe(a=>{a?this.toastr.success("Updated the contract review item","Success"):this.toastr.success("Failed to update the contract review item","Failure")})}}openRemunerationModal(t){if(!this.isAddMode){var r=this.getName(t);this.service.getRemuneration(r).pipe((0,_.p)(o=>null!==o),(0,f.n)(o=>(this.bsModalRef=this.modalService.show(Qe.E,{class:"modal-dialog-centered modal-md",initialState:{remun:o,editable:!0}}),this.bsModalRef.content.updateSelectedRemuneration))).subscribe(o=>{null!==o?this.toastr.success("Updated the Remuneration details","Success"):this.toastr.warning("Failed to update the Remuneration details","Failed")})}}getName(t){return this.getControls()[t].value.id}UpdateOrder(){this.service.UpdateOrder(this.form.value).subscribe({next:t=>{t?this.toastr.success("Order Updated","Success"):this.toastr.warning("Failed to update the order","Failure")},error:t=>{console.log("updateOrder error:",t),this.toastr.error(t.error.error?t.error.error:t,"Error encountered")}})}forwardOrderToHRDept(){}OrderForwardedTo(){}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(p.nX),e.rXU(i.ok),e.rXU(y.Q),e.rXU(k),e.rXU(g.tw),e.rXU(p.Ix),e.rXU(q.R),e.rXU(P),e.rXU(C.I8),e.rXU(x.G))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-dl"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup","change"],[1,"lbl","w110","mx-2"],[1,"lbl","w300","mx-2"],[1,"lbl","w150","mx-2"],["formControlName","orderNo",1,"stdd","w110","mx-2",3,"label"],[1,"stdd","w300","mx-2"],["bindLabel","customerName","bindValue","id","labelForId","id","clearAllText","Clear","formControlName","customerId",3,"items"],["type","text","placeholder","Order Date","formControlName","orderDate","bsDatepicker","",1,"stdd","w110","mx-2",3,"bsValue","bsConfig"],["type","text","placeholder","Order Date","formControlName","completeBy","bsDatepicker","",1,"stdd","w110","mx-2",3,"bsValue","bsConfig"],["formControlName","cityOfWorking",1,"stdd","w110","mx-1",3,"label"],["formControlName","country",1,"stdd","w100","mx-1",3,"label"],["formControlName","orderRef",1,"stdd","w200",3,"label"],[1,"stdd","w150","mx-2"],["bindLabel","knownAs","bindValue","id","labelForId","id","clearAllText","Clear","formControlName","projectManagerId",3,"items"],["class","stdd",4,"ngIf"],[1,"lbl","w100"],[1,"stdd","fontSmaller","w110","yellow"],["type","submit","title","Save the requirement",1,"fa","fa-save","fa-2x",2,"margin-left","25px!important",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["title","Return to calling procedure",1,"btn",2,"margin-left","25px",3,"click"],[2,"margin","0px","padding","0px"],["formArrayName","orderItems",1,"my-2"],[2,"font-weight","bold","margin-left","0px","font-size","smaller"],[1,"lbl","w30"],[1,"lbl","w225"],[1,"w30","mx-2",2,"display","inline-block"],[1,"lbl","w50"],["title","Date by which the shortlisting of candidates is to be completed by the HR Executive",1,"lbl","w110"],["type","button",1,"stdd","w30","fa","fa-plus","fa-2x","blue",2,"margin-left","20px",3,"click"],[4,"ngFor","ngForOf"],["class","text-danger list-unstyled",4,"ngIf"],[1,"stdd"],[1,"lbl","w150"],[1,"stdd","w100","cursorpointer","yellow",2,"border","btn-primary",3,"ngClass","click"],[1,"lbl","w150","mx-3"],["id","forwardedToHRDeptOn","class","stdd w110 yellow mx-2",4,"ngIf"],["class","stdd w110 cursorpointer mx-2 yellow",3,"click",4,"ngIf"],["id","forwardedToHRDeptOn",1,"stdd","w110","yellow","mx-2"],[1,"stdd","w110","cursorpointer","mx-2","yellow",3,"click"],[1,"spinner-border","spinner-border-sm","mr-1"],[2,"display","inline-block"],["title","assign selected categories once Contract Review is done",1,"btn",3,"disabled","click"],["title","displays list of Associates to whom this order has been forwarded",1,"btn",3,"click"],[3,"formGroupName"],["type","checkbox","formControlName","selected",2,"display","inline-block","width","15px","margin-left","8px","margin-right","8px"],["type","text","formControlName","srNo",1,"w40",2,"margin","0 1px 0 1px","text-align","right"],["class","stdd w240","bindLabel","professionName","bindValue","id","labelForId","id","clearAllText","Clear","formControlName","professionId",3,"items",4,"ngIf"],["type","checkbox","formControlName","ecnr",1,"chk","w30"],["formControlName","sourceFrom",1,"stdd","w100",3,"label"],["formControlName","quantity",1,"stdd","w50",3,"label","change"],["formControlName","minCVs",1,"stdd","w50",3,"label"],["formControlName","maxCVs",1,"stdd","w50",3,"label"],["type","text","placeholder","Complete By","formControlName","completeBefore","bsDatepicker","",1,"stdd","w110",3,"bsValue","bsConfig"],["type","text","title","contract review of this category","formControlName","reviewItemStatus",1,"stdd","w150","cursorpointer"],["title","remove this item",1,"btn",3,"click"],["bindLabel","professionName","bindValue","id","labelForId","id","clearAllText","Clear","formControlName","professionId",1,"stdd","w240",3,"items"],["title","click to edit/prepare Contract Review for this category",1,"btn",3,"click"],["title","design Assessment Questions for this category",1,"btn",3,"click"],["title","Open Job Description",1,"btn",3,"click"],["title","Open Remuneration",1,"btn",3,"click"],[1,"text-danger","list-unstyled"]],template:function(r,s){1&r&&e.DNE(0,mt,75,20,"div",0),2&r&&e.Y8G("ngIf",s.order)},dependencies:[m.YU,m.Sq,m.bT,i.qT,i.me,i.Zm,i.BC,i.cb,v.pc,v.p0,i.j4,i.JD,i.$R,i.v8,S.vr,O.f,N.An,m.vh],styles:['.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 2px;vertical-align:middle}.btn[_ngcontent-%COMP%]{color:#f0f8ff;font-size:small;margin:0;padding:0}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;font-size:smaller;font-weight:700}.red[_ngcontent-%COMP%]{color:red}.yellow[_ngcontent-%COMP%]{color:#ff0}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w225[_ngcontent-%COMP%]{width:225px}.w240[_ngcontent-%COMP%]{width:240px}.w300[_ngcontent-%COMP%]{width:300px}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:15px;height:15px;border:1px solid #fff;border-radius:50%;margin-right:5px;background-color:#c3b1b1;position:relative;vertical-align:middle}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:9px;height:9px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return n})();class ut{constructor(){this.id=0,this.orderNo=0,this.orderDate=new Date,this.customerId=0,this.customerName="",this.buyerEmail="",this.orderRef="",this.orderRefDate=new Date,this.salesmanId=0,this.salesmanName="",this.projectManagerId=0,this.medicalProcessInchargeEmpId=0,this.visaProcessInchargeEmpId=0,this.emigProcessInchargeId=0,this.travelProcessInchargeId=0,this.completeBy=new Date,this.country="",this.cityOfWorking="",this.contractReviewStatus="",this.estimatedRevenue=0,this.status="",this.forwardedToHRDeptOn=new Date("1900-01-01"),this.orderItems=[]}}const _t=function(){return{dateInputFormat:"YYYY-MM-DD"}};function gt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",28),e.nrm(2,"input",29),e.j41(3,"ng-select",30),e.bIt("change",function(s){const a=e.eBV(t).index,c=e.XpG().index,u=e.XpG();return e.Njj(u.officialClicked(s,c,a))}),e.k0s(),e.j41(4,"div",31),e.nrm(5,"app-text-input",32),e.k0s(),e.j41(6,"button",33),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG().index,c=e.XpG();return e.Njj(c.removeOfficial(a,o))}),e.k0s()()()}if(2&n){const t=d.index,r=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("bsValue",r.bsValueDate)("bsConfig",e.lJ4(5,_t)),e.R7$(1),e.Y8G("items",r.customers),e.R7$(2),e.Y8G("label","Official Name")}}function vt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",17)(2,"div",18),e.nrm(3,"app-text-input",19),e.k0s(),e.j41(4,"div",20),e.nrm(5,"app-text-input",21),e.k0s(),e.j41(6,"div",22)(7,"label",23),e.EFF(8,"Date Forwarded"),e.k0s(),e.j41(9,"label",24),e.EFF(10,"Agent"),e.k0s(),e.j41(11,"label",25),e.EFF(12,"Official Name"),e.k0s(),e.j41(13,"button",26),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG();return e.Njj(a.addOfficial(o))}),e.k0s(),e.DNE(14,gt,7,6,"div",16),e.k0s(),e.nrm(15,"hr",27),e.k0s()()}if(2&n){const t=d.index,r=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("label","Category"),e.R7$(2),e.Y8G("label","Charges"),e.R7$(9),e.Y8G("ngForOf",r.orderForwardCategoryOfficials(t).controls)}}let bt=(()=>{class n{constructor(t,r,s,o,a,c){this.fb=t,this.toastr=r,this.router=s,this.service=o,this.activatedRoute=a,this.confirm=c,this.form=new i.gE({}),this.customers=[],this.bsValueDate=new Date}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.orderFwd=t.orderfwd,this.customers=t.customers}}),this.orderFwd&&this.CreateAndInitializeForm(this.orderFwd)}CreateAndInitializeForm(t){this.form=this.fb.group({id:[t.id??0],orderId:[t.orderId??0,i.k0.required],orderNo:[t.orderNo??0,i.k0.required],orderDate:[t.orderDate??new Date,i.k0.required],customerId:[t.customerId??0,i.k0.required],customerName:[t.customerName??""],customerCity:[t.customerCity],orderForwardCategories:this.fb.array(t.orderForwardCategories.map(r=>this.fb.group({id:[r.id??0],orderItemId:[r.orderItemId??0,i.k0.required],orderForwardToAgentId:[r.agentId??0,i.k0.required],professionId:[r.professionId??0,i.k0.required],professionName:[r.professionName??""],charges:[r.charges??0],orderForwardCategoryOfficials:this.fb.array(r.orderForwardCategoryOfficials.map(s=>this.fb.group({id:[s.id],orderForwardCategoryId:[s.orderForwardCategoryId??0,i.k0.required],customerOfficialId:[s.customerOfficialId??0,i.k0.required],customerOfficialName:[s.customerOfficialName??""],agentName:[s.agentName??"",i.k0.required],dateTimeForwarded:[s.dateForwarded??new Date],emailIdForwardedTo:[s.emailIdForwardedTo??""],phoneNoForwardedTo:[s.phoneNoForwardedTo??""],whatsAppNoForwardedTo:[s.whatsAppNoForwardedTo??""],username:[s.username??""]})))})))})}orderForwards(){return this.form.get("orderForwards")}newForward(){return this.fb.group({orderNo:"",orderDate:"",customerName:"",dlForwardCategories:this.fb.array([])})}addForward(){this.orderForwards().push(this.newForward())}removeForward(){const s=this.service.deleteForward(this.orderFwd?.orderId??0);this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").pipe((0,_.p)(a=>a),(0,f.n)(a=>(console.log("switchmap confirmed vaue:",a),s))).subscribe(a=>{console.log("subscribed response:",a),this.router.navigateByUrl("orders/orders")})}orderForwardCategories(){return this.form.get("orderForwardCategories")}newCategory(){return this.fb.group({categoryName:"",charges:0,dlForwardCategoryOfficials:this.fb.array([])})}addCategory(){this.orderForwardCategories().push(this.newCategory())}removeCategory(t){this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").subscribe(o=>{o&&(this.orderForwardCategoryOfficials(t).clear(),this.orderForwardCategories().removeAt(t))})}removeSWitchMapAndFilterEx(t){const s=this.service.deleteOrderFwdCategory(t);this.confirm.confirm("confirm Delete","confirm delete this Order Forward.WARNING: deleting this order forward will also delete its children  grand children objects").pipe((0,_.p)(a=>a),(0,f.n)(a=>s)).subscribe(a=>{this.orderForwardCategoryOfficials(t).clear(),this.orderForwardCategories().removeAt(t),this.router.navigateByUrl("orders/orders")})}orderForwardCategoryOfficials(t){return this.orderForwardCategories().at(t).get("orderForwardCategoryOfficials")}newOfficial(t){return this.fb.group({id:0,agentName:"",customerOfficialId:0,dateTimeForwarded:new Date,emailIdForwardedTo:"",orderForwardCategoryId:this.orderForwardCategories().at(t).get("id"),orderItemId:this.orderForwardCategories().at(t).get("orderItemId"),officialName:""})}addOfficial(t){this.orderForwardCategoryOfficials(t).push(this.newOfficial(t))}removeOfficial(t,r){this.orderForwardCategoryOfficials(t).removeAt(r)}onSubmit(){var t=this.formContainsError();""===t?0===this.form.get("id")?.value?this.service.insertForwarOrderToAgent(this.form.value).subscribe({next:r=>{this.toastr.success("Order Forward registered successfully","success"),this.close()},error:r=>{this.toastr.error("error encountered",r)}}):this.service.updateForwarOrderToAgent(this.form.value).subscribe({next:r=>{this.toastr.success("Order Forward registered successfully","success"),this.close()},error:r=>{this.toastr.error("Error encountered",r)}}):this.toastr.info(t,"Form contains error")}formContainsError(){var r="";return this.form.value.orderForwardCategories.forEach(s=>{s.orderForwardCategoryOfficials.forEach(o=>{0===o.customerOfficialId&&(r+="Customer Not Selected"),void 0!==o.dateForwarded&&(r+="Date forwarded not selected")})}),this.toastr.info(r,"info"),r}officialClicked(t,r,s){this.orderForwardCategoryOfficials(r).at(s).get("officialName")?.setValue(t.officialName)}close(){this.router.navigateByUrl("/orders/orders")}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(g.tw),e.rXU(p.Ix),e.rXU(I),e.rXU(p.nX),e.rXU(x.G))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-forward"]],decls:26,vars:8,consts:[[1,"mt-5",3,"formGroup","ngSubmit"],[1,"stdd","w150","b"],[1,"stdd","w250","mx-2","blue"],[1,"stdd","w100","b"],[1,"stdd","w75","mx-2","blue"],[1,"stdd","w125","b"],[1,"stdd","w125","mx-2"],["title","Save this form","type","submit",1,"btn","fa-success","fa","fa-save","fa-2x","green"],["title","Close this form","type","button",1,"btn","fa-primary","fa","fa-undo","fa-2x",3,"click"],["title","Delete this Order Forard","type","button",1,"btn","fa-primary","fa","fa-trash","red","pull-right",3,"click"],[2,"border","double","color","darkblue","margin","0px","padding","0px"],["formArrayName","orderForwardCategories"],[1,"stdd","b","w250"],[1,"stdd","b","w100","mx-2"],["title","add a category",1,"btn","btn-primary","stdd","fa","fa-plus",3,"click"],[2,"margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],[4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"stdd","w250"],["readonly","","formControlName","professionName",3,"label"],[1,"stdd","mx-2","w100"],["formControlName","charges",3,"label"],["formArrayName","orderForwardCategoryOfficials",2,"margin","0px","padding","0px"],[1,"stdd","mL355","w110","b"],[1,"stdd","mx-2","w300","b"],[1,"stdd","b","mx-2","w250"],["type","button",1,"btn","mx-20","fa","fa-plus",3,"click"],[2,"border-bottom","blue","border-bottom-style","solid","border-width","2px","color","darkblue","margin","0px","padding","0px"],[2,"margin-left","355px",3,"formGroupName"],["bsDatepicker","","type","text","placeholder","Forwarded On","formControlName","dateTimeForwarded",1,"mx-2",2,"display","inline-block","width","100px","font-size","small",3,"bsValue","bsConfig"],["bindLabel","officialName","bindValue","id","labelForId","customerId","clearAllText","Clear","formControlName","customerOfficialId",2,"display","inline-block","font-size","small","width","300px",3,"items","change"],[1,"stdd","mx-2","w250"],["formControlName","officialName",2,"font-size","small",3,"label"],[1,"btn","fa","fa-sm","fa-trash","red",3,"click"]],template:function(r,s){1&r&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(1,"label",1),e.EFF(2,"Customer Name"),e.k0s(),e.j41(3,"div",2),e.EFF(4),e.k0s(),e.j41(5,"label",3),e.EFF(6,"Order No"),e.k0s(),e.j41(7,"div",4),e.EFF(8),e.k0s(),e.j41(9,"label",5),e.EFF(10,"Order Dated"),e.k0s(),e.j41(11,"div",6),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.nrm(14,"button",7),e.j41(15,"button",8),e.bIt("click",function(){return s.close()}),e.k0s(),e.j41(16,"button",9),e.bIt("click",function(){return s.removeForward()}),e.k0s(),e.nrm(17,"hr",10),e.j41(18,"div",11)(19,"label",12),e.EFF(20,"Category"),e.k0s(),e.j41(21,"label",13),e.EFF(22,"Charges"),e.k0s(),e.j41(23,"button",14),e.bIt("click",function(){return s.addCategory()}),e.k0s(),e.nrm(24,"br",15),e.DNE(25,vt,16,4,"div",16),e.k0s()()),2&r&&(e.Y8G("formGroup",s.form),e.R7$(4),e.JRh(null==s.orderFwd?null:s.orderFwd.customerName),e.R7$(4),e.JRh(null==s.orderFwd?null:s.orderFwd.orderNo),e.R7$(4),e.JRh(e.i5U(13,5,null==s.orderFwd?null:s.orderFwd.orderDate,"dd-MMM-yy")),e.R7$(13),e.Y8G("ngForOf",s.orderForwardCategories().controls))},dependencies:[m.Sq,i.qT,i.me,i.BC,i.cb,v.pc,v.p0,i.j4,i.JD,i.$R,i.v8,S.vr,O.f,m.vh],styles:[".stdd[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;color:#f0f8ff}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.mL355[_ngcontent-%COMP%]{margin-left:355px}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:green}.blue[_ngcontent-%COMP%]{color:#00008b}"]})}return n})();function kt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",24)(2,"div",25),e.nrm(3,"app-text-input",26),e.k0s(),e.j41(4,"div",7),e.nrm(5,"app-text-input",27),e.k0s(),e.nrm(6,"app-text-input",28),e.j41(7,"app-text-input",29),e.bIt("change",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.calcualteTotals())}),e.k0s(),e.nrm(8,"input",30),e.j41(9,"button",31),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.removeOrderAssessmentItemQ(o))}),e.k0s()()()}if(2&n){const t=d.index;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("label","Question No"),e.R7$(2),e.Y8G("label","Subject"),e.R7$(1),e.Y8G("label","question"),e.R7$(1),e.Y8G("type","number")("label","Points")}}const Ct=function(){return{dateInputFormat:"YYYY-MM-DD"}};function Ft(n,d){if(1&n){const t=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.form.valid&&s.update())}),e.j41(1,"h4",2),e.EFF(2,"Order Assessment - design questions for Order Item Category"),e.k0s(),e.j41(3,"label",3),e.EFF(4,"Order No.:"),e.k0s(),e.nrm(5,"app-text-input",4),e.j41(6,"div",5),e.EFF(7),e.k0s(),e.j41(8,"label",6),e.EFF(9,"Customer Name"),e.k0s(),e.j41(10,"div",7),e.EFF(11),e.k0s(),e.j41(12,"label",6),e.EFF(13,"Category"),e.k0s(),e.j41(14,"div",7),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"label",6),e.EFF(18,"Designed By"),e.k0s(),e.nrm(19,"app-text-input",8),e.j41(20,"label",9),e.EFF(21,"On"),e.k0s(),e.nrm(22,"input",10),e.j41(23,"label",6),e.EFF(24,"Approved By"),e.k0s(),e.j41(25,"input",11),e.bIt("dblclick",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.updateApprovedBy())}),e.k0s(),e.j41(26,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.populateStddAssessmentQuestions())}),e.k0s(),e.j41(27,"button",13),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.populateCustomAssessmentQuestions(s.professionId))}),e.k0s(),e.j41(28,"button",14),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.update())}),e.k0s(),e.j41(29,"button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.cancel())}),e.k0s(),e.j41(30,"div",16)(31,"label",17),e.EFF(32,"Qstn No"),e.k0s(),e.j41(33,"label",18),e.EFF(34,"Subject"),e.k0s(),e.j41(35,"label",19),e.EFF(36,"Question"),e.k0s(),e.j41(37,"label",20),e.EFF(38,"Points"),e.k0s(),e.j41(39,"label",20),e.EFF(40,"Mandatory"),e.k0s(),e.j41(41,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.addNewOrderAssessmentItemQ())}),e.k0s(),e.DNE(42,kt,10,6,"div",22),e.j41(43,"div",23),e.EFF(44),e.k0s()()()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(5),e.Y8G("label","Order No"),e.R7$(2),e.SpI("",t.orderAssessmentItem.orderNo," "),e.R7$(4),e.JRh(t.orderAssessmentItem.customerName),e.R7$(4),e.JRh(t.orderAssessmentItem.professionName),e.R7$(4),e.Y8G("label","Designed By"),e.R7$(3),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(10,Ct)),e.R7$(20),e.Y8G("ngForOf",t.orderAssessmentItemQs.controls),e.R7$(2),e.SpI("Total: ",t.totalMarks,"")}}let xt=(()=>{class n{constructor(t,r,s,o,a,c){this.fb=t,this.router=r,this.activatedRoute=s,this.confirmService=o,this.service=a,this.toastr=c,this.form=new i.gE({}),this.cancelRegister=new e.bkB,this.returnUrl="",this.professionId=0,this.totalMarks=0,this.bsValueDate=new Date;let u=this.router.getCurrentNavigation();u?.extras&&u.extras.state&&(u.extras.state.returnUrl&&(this.returnUrl=u.extras.state.returnUrl),u.extras.state.user&&(this.user=u.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.orderAssessmentItem=t.assessmentItem}),this.orderAssessmentItem&&(this.CreateAndInitializeFormArray(this.orderAssessmentItem),this.calcualteTotals(),this.professionId=this.orderAssessmentItem?.professionId)}CreateAndInitializeFormArray(t){this.form=this.fb.group({id:[t.id],orderAssessmentId:[t.orderAssessmentId],orderItemId:[t.orderItemId,i.k0.required],orderId:[t.orderId,i.k0.required],orderNo:[t.orderNo,i.k0.required],customerName:[t.customerName,i.k0.required],professionId:[t.professionId,i.k0.required],professionName:[t.professionName,i.k0.required],designedBy:[t.designedBy],dateDesigned:[t.dateDesigned],approvedBy:[t.approvedBy],orderAssessmentItemQs:this.fb.array(t.orderAssessmentItemQs.map(r=>this.fb.group({id:[r.id??0],orderAssessmentItemId:r.orderAssessmentItemId,orderItemId:[r.orderItemId,i.k0.required],orderId:r.orderId,questionNo:[r.questionNo,i.k0.required],subject:[r.subject,i.k0.required],question:[r.question,i.k0.required],maxPoints:[r.maxPoints,i.k0.required],isMandatory:[r.isMandatory,i.k0.required]})))})}get orderAssessmentItemQs(){return this.form.get("orderAssessmentItemQs")}newOrderAssessmentItemQ(){return this.fb.group({id:0,orderAssessmentItemId:this.form.get("id"),orderItemId:[this.form.get("orderItemId"),i.k0.required],orderId:[this.form.get("orderId"),i.k0.required],questionNo:[0,i.k0.required],subject:["",i.k0.required],question:["",i.k0.required],maxPoints:[0,i.k0.required],isMandatory:[!1,i.k0.required]})}newOrderAssessmentItemQFromStddQ(t){t.forEach(r=>{this.orderAssessmentItemQs.push(this.fb.group({id:r.id,orderAssessmentItemId:r.orderAssessmentItemId,orderItemId:[r.orderItemId,i.k0.required],orderId:[r.orderId,i.k0.required],questionNo:[r.questionNo,i.k0.required],subject:[r.subject,i.k0.required],question:[r.question,i.k0.required],maxPoints:[r.maxPoints,i.k0.required],isMandatory:[r.isMandatory,i.k0.required]}))})}addNewOrderAssessmentItemQ(){this.orderAssessmentItemQs.push(this.newOrderAssessmentItemQ())}removeOrderAssessmentItemQ(t){this.orderAssessmentItemQs.removeAt(t)}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}update(){this.service.updateOrderAssessmentItem(this.form.value).subscribe({next:t=>{t?this.toastr.success("Order Assessment Item successfully updated","success"):this.toastr.warning("failed to update the order assessment item","Failed to update")}})}calcualteTotals(){this.totalMarks=this.form.get("orderAssessmentItemQs")?.value.map(t=>t.maxPoints).reduce((t,r)=>+t+ +r)}GetConfirmation(t){var r=!1;return this.confirmService.confirm("confirm OVER-WRITE existing Assessment Questions","Currently, there are "+t+" assessment Questions relating to this Category.If you continue, these questions will be replaced with new set of standard assessment quetions").subscribe(s=>r=s),r}populateStddAssessmentQuestions(){this.GetConfirmation(this.orderAssessmentItemQs.length)?this.service.getAssessmentQStandard().subscribe({next:r=>{if(r.length>0){if(this.orderAssessmentItemQs.clear(),!r.length)return void this.toastr.warning("No standard Questions retrieved","Failure");this.newOrderAssessmentItemQFromStddQ(r)}else this.toastr.warning("Failed to retrieve the standard assessment Questions")},error:r=>this.toastr.error(r,"Error in retrieving Standard Questions")}):this.toastr.info("User aborted","abort")}populateCustomAssessmentQuestions(t){this.GetConfirmation(this.orderAssessmentItemQs.length)?this.service.getAssessmentQBankOfCategoryId(t).subscribe({next:s=>{null!==s?(this.orderAssessmentItemQs.clear(),s.assessmentStddQs.forEach(o=>{var a={id:0,orderAssessmentItemId:this.orderAssessmentItem.id,orderItemId:this.orderAssessmentItem.orderItemId,orderId:this.orderAssessmentItem.orderId,questionNo:o.questionNo,question:o.question,subject:o.subject,maxPoints:o.maxPoints,isMandatory:!1};this.orderAssessmentItem?.orderAssessmentItemQs.push(a)})):this.toastr.warning("Failed to retrieve the standard assessment Questions")},error:s=>this.toastr.error(s,"Error in retrieving Standard Questions")}):this.toastr.info("User aborted","abort")}updateApprovedBy(){this.user&&(this.form.value.approvedBy=this.user.userName,this.form.get("approvedBy")?.setValue(this.user.userName))}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(p.Ix),e.rXU(p.nX),e.rXU(x.G),e.rXU(k),e.rXU(g.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-assessment-item"]],outputs:{cancelRegister:"cancelRegister"},decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[2,"font-weight","bold"],[1,"lbl","b","100"],["formControlName","orderNo",1,"stdd","w75",3,"label"],[1,"stdd","w100"],[1,"lbl","w100"],[1,"stdd","w250"],["formControlName","designedBy",1,"stdd","w100",3,"label"],[1,"lbl","w50","hAlignR"],["type","text","placeholder","designed On","formControlName","dateDesigned","bsDatepicker","",1,"stdd","w100",3,"bsValue","bsConfig"],["type","text","formControlName","approvedBy",1,"stdd","w75",3,"dblclick"],["title","imports standard assessment questions",1,"btn","mx-2","fa","fa-download",3,"click"],["title","imports custom assessment questions matching the profession",1,"btn","fa","fa-download",3,"click"],["title","Save this data",1,"btn","fa","fa-save","fa-2x",3,"click"],["title","close this form and return to the calling program",1,"btn","fa","fa-window-close","fa-2x",3,"click"],["formArrayName","orderAssessmentItemQs"],[1,"lbl","w50"],[1,"lbl","w250"],[1,"lbl","w400"],[1,"lbl","w75"],["type","button",1,"stdd","btn","btn-priamry","fa","fa-plus","fa-lg",2,"margin-left","15px",3,"click"],[4,"ngFor","ngForOf"],[2,"margin-left","700px"],[3,"formGroupName"],[1,"stdd","w50"],["formControlName","questionNo",3,"label"],["formControlName","subject",3,"label"],["formControlName","question",1,"stdd","w400",3,"label"],["formControlName","maxPoints",1,"stdd","w75",3,"type","label","change"],["type","checkbox","formControlName","isMandatory",1,"stdd","mx-4"],[1,"mx-4","btn","fa","fa-trash","red",3,"click"]],template:function(r,s){1&r&&e.DNE(0,Ft,45,11,"form",0),2&r&&e.Y8G("ngIf",s.orderAssessmentItem)},dependencies:[m.Sq,m.bT,i.qT,i.me,i.Zm,i.BC,i.cb,v.pc,v.p0,i.j4,i.JD,i.$R,i.v8,O.f],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 3px}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:0 3px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:2px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w400[_ngcontent-%COMP%]{width:400px}.w500[_ngcontent-%COMP%]{width:500px}.b[_ngcontent-%COMP%]{font-weight:700}.blue[_ngcontent-%COMP%]{color:#00f}.red[_ngcontent-%COMP%]{color:red}.hAlignR[_ngcontent-%COMP%]{text-align:right}"]})}return n})();function Rt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",22),e.nrm(2,"app-text-input",23)(3,"app-text-input",24)(4,"app-text-input",25)(5,"app-text-input",26)(6,"input",27),e.j41(7,"button",28),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG().index,c=e.XpG(2);return e.Njj(c.removeOrderAssessmentItemQ(a,o))}),e.k0s()()()}if(2&n){const t=d.index;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("label","Question No"),e.R7$(1),e.Y8G("label","subject"),e.R7$(1),e.Y8G("label","Question"),e.R7$(1),e.Y8G("label","Max Points")}}function At(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",13)(2,"label",7),e.EFF(3,"Category"),e.k0s(),e.j41(4,"div",5),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.j41(7,"label",14),e.EFF(8,"Assessment Questions for the category"),e.k0s(),e.nrm(9,"br"),e.j41(10,"label",15),e.EFF(11,"Q No"),e.k0s(),e.j41(12,"label",16),e.EFF(13,"Subject"),e.k0s(),e.j41(14,"label",17),e.EFF(15,"Question"),e.k0s(),e.j41(16,"label",18),e.EFF(17,"Max Pts"),e.k0s(),e.j41(18,"label",19),e.EFF(19,"Mandatory"),e.k0s(),e.j41(20,"button",20),e.bIt("click",function(){const o=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.addNewOrderAssessmentItemQ(o))}),e.k0s(),e.nrm(21,"hr"),e.j41(22,"div",21),e.DNE(23,Rt,8,5,"div",12),e.k0s()()()}if(2&n){const t=d.index,r=e.XpG(2);let s;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(4),e.JRh(null==(s=r.orderAssessmentItems.at(t).get("professionName"))?null:s.value),e.R7$(18),e.Y8G("ngForOf",r.orderAssessmentItemQs(t).controls)}}function yt(n,d){if(1&n){const t=e.RV6();e.j41(0,"form",1)(1,"div",2)(2,"div",3)(3,"label",4),e.EFF(4,"Customer"),e.k0s(),e.j41(5,"div",5),e.EFF(6),e.k0s(),e.j41(7,"label",6),e.EFF(8,"Order No"),e.k0s(),e.j41(9,"div",7),e.EFF(10),e.k0s(),e.j41(11,"button",8),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.updateAssessment())}),e.k0s(),e.nrm(12,"button",9),e.k0s(),e.j41(13,"label",10),e.EFF(14,"Order Assessment Items"),e.k0s(),e.j41(15,"div",11),e.DNE(16,At,24,3,"div",12),e.k0s()()()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(6),e.JRh(t.orderAssessment.customerName),e.R7$(4),e.JRh(t.orderAssessment.orderNo),e.R7$(1),e.Y8G("disabled",!t.form.valid),e.R7$(1),e.Mz_("routerLink","/administration/orders/edit/",t.orderAssessment.orderId,""),e.R7$(4),e.Y8G("ngForOf",t.orderAssessmentItems.controls)}}let Nt=(()=>{class n{constructor(t,r,s,o,a){this.fb=t,this.router=r,this.activatedRoute=s,this.service=o,this.toastr=a,this.form=new i.gE({}),this.returnUrl="";let c=this.router.getCurrentNavigation();c?.extras&&c.extras.state&&(c.extras.state.returnUrl&&(this.returnUrl=c.extras.state.returnUrl),c.extras.state.user&&(this.user=c.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.orderAssessment=t.orderAssessment}),void 0!==this.orderAssessment&&this.CreateAndInitializeFormArray(this.orderAssessment)}CreateAndInitializeFormArray(t){this.form=this.fb.group({id:t.id,orderId:[t.orderId,i.k0.required],orderNo:[t.orderNo,i.k0.required],customerName:[t.customerName,i.k0.required],orderAssessmentItems:this.fb.array(t.orderAssessmentItems.map(r=>this.fb.group({id:[r.id],orderAssessmentId:[r.orderAssessmentId],orderItemId:[r.orderItemId,i.k0.required],orderId:[t.orderId,i.k0.required],professionId:[r.professionId,i.k0.required],professionName:[r.professionName,i.k0.required],orderAssessmentItemQs:this.fb.array(r.orderAssessmentItemQs.map(s=>this.fb.group({id:[s.id??0],orderAssessmentItemId:r.id??0,orderItemId:[r.orderItemId,i.k0.required],orderId:r.orderId,questionNo:[s.questionNo,i.k0.required],subject:[s.subject,i.k0.required],question:[s.question,i.k0.required],maxPoints:[s.maxPoints,i.k0.required],isMandatory:[s.isMandatory,i.k0.required]})))})))})}get orderAssessmentItems(){return this.form?.get("orderAssessmentItems")}newOrderAssessmentItem(){return this.fb.group({id:0,orderAssessmentItemId:0,orderItemId:0})}addOrderAssessmentItem(){this.orderAssessmentItems.push(this.newOrderAssessmentItem)}removeOrderAssessmentItem(t){this.orderAssessmentItems.removeAt(t)}orderAssessmentItemQs(t){return this.orderAssessmentItems.at(t).get("orderAssessmentItemQs")}newOrderAssessmentItemQ(t){return this.fb.group({id:0,orderAssessmentItemId:this.orderAssessmentItems.at(t).get("id"),orderItemId:[this.orderAssessmentItems.at(t).get("orderItemId"),i.k0.required],orderId:[this.orderAssessmentItems.at(t).get("orderId"),i.k0.required],questionNo:[0,i.k0.required],subject:["",i.k0.required],question:["",i.k0.required],maxPoints:[0,i.k0.required],isMandatory:[!1,i.k0.required]})}addNewOrderAssessmentItemQ(t){this.orderAssessmentItemQs(t).push(this.newOrderAssessmentItemQ(t))}removeOrderAssessmentItemQ(t,r){this.orderAssessmentItemQs(t).removeAt(r)}updateAssessment(){if(this.orderAssessment){var t={...this.form.value};this.service.updateOrderAssessment(t).subscribe({next:r=>{""===r?this.toastr.success("Updated the Order Assessment data","success"):(this.toastr.warning("Failed to update the order assessment data","Failure"),console.log("next error:",r))}})}}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(p.Ix),e.rXU(p.nX),e.rXU(k),e.rXU(g.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-assessment"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup",4,"ngIf"],["autocomplete","off",3,"formGroup"],[1,"stdd","my-1",2,"border-style","groove","margin","5px"],[1,"my-2"],[1,"lbl","w100"],[1,"stdd","w200"],[1,"lbl","w100","mx-2"],[1,"stdd","w100"],[1,"btn","fa","fa-save","fa-2x",2,"margin-left","50px",3,"disabled","click"],[1,"btn","fa","fa-window-close","fa-2x",3,"routerLink"],[1,"lbl"],["formArrayName","orderAssessmentItems",1,"formArray"],[4,"ngFor","ngForOf"],[2,"margin-left","25px",3,"formGroupName"],[1,"lbl",2,"margin-left","50px"],[1,"title","w50",2,"margin-left","50px"],[1,"title","w150"],[1,"title","w200"],[1,"title","w50"],[1,"title","w100"],["title","add a new Assessment Question",1,"my-1","fa","fa-plus",3,"click"],["formArrayName","orderAssessmentItemQs",1,"formArray"],[2,"margin-left","50px",3,"formGroupName"],["formControlName","questionNo",1,"stdd","w50",3,"label"],["formControlName","subject",1,"stdd","w150",3,"label"],["formControlName","question",1,"stdd","w200",3,"label"],["formControlName","maxPoints",1,"stdd","w50",3,"label"],["type","checkbox","formControlName","isMandatory",1,"stdd","w15"],[1,"stdd","fa","fa-trash","red",2,"margin-left","20px",3,"click"]],template:function(r,s){1&r&&e.DNE(0,yt,17,6,"form",0),2&r&&e.Y8G("ngIf",s.orderAssessment)},dependencies:[m.Sq,m.bT,i.qT,i.Zm,i.BC,i.cb,p.Wk,i.j4,i.JD,i.$R,i.v8,O.f],styles:[".w15[_ngcontent-%COMP%]{width:15px}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:2px;vertical-align:top;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;vertical-align:top;font-size:small;font-weight:700}.title[_ngcontent-%COMP%]{margin:0 2px;vertical-align:top;font-size:small;font-weight:700}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin-left:2px;margin-right:2px}"]})}return n})(),Mt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-menu"]],decls:2,vars:0,template:function(r,s){1&r&&(e.j41(0,"p"),e.EFF(1,"order-menu works!"),e.k0s())}})}return n})();function Gt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"pagination",11),e.bIt("pageChanged",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChanged(s))}),e.EFF(2," >"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Tt(n,d){1&n&&(e.j41(0,"div"),e.EFF(1,"No Associate has been forwarded this requirement"),e.k0s())}function Dt(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",25),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",26),e.EFF(5),e.k0s(),e.j41(6,"div",26),e.EFF(7),e.k0s(),e.j41(8,"div",27),e.EFF(9),e.k0s(),e.j41(10,"div",25),e.EFF(11),e.k0s(),e.j41(12,"button",28),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(5);return e.Njj(a.orderCatOfficialDelete(o.id))}),e.k0s()()}if(2&n){const t=d.$implicit;e.R7$(2),e.JRh(e.i5U(3,5,t.dateForwarded,"dd-MMM-yy")),e.R7$(3),e.JRh(t.agentName),e.R7$(2),e.JRh(t.officialName),e.R7$(2),e.JRh(t.emailIdForwardedTo),e.R7$(2),e.JRh(t.phoneNoForwardedTo)}}function Pt(n,d){if(1&n&&(e.j41(0,"div",21)(1,"label",22),e.EFF(2,"Date Forwarded"),e.k0s(),e.j41(3,"label",23),e.EFF(4,"Associate"),e.k0s(),e.j41(5,"label",23),e.EFF(6,"Associate Name"),e.k0s(),e.j41(7,"label",24),e.EFF(8,"Email Forwarded to"),e.k0s(),e.j41(9,"label",22),e.EFF(10,"Phone No"),e.k0s(),e.nrm(11,"br"),e.DNE(12,Dt,13,8,"div",13),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(12),e.Y8G("ngForOf",t.orderForwardCategoryOfficials)}}function St(n,d){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"label",14),e.EFF(2),e.k0s(),e.j41(3,"label",15),e.EFF(4),e.k0s(),e.j41(5,"label",15),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"label",16),e.EFF(9),e.k0s(),e.j41(10,"label",17),e.EFF(11),e.k0s(),e.j41(12,"label",18),e.EFF(13),e.k0s(),e.j41(14,"button",19),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.orderCategoryDelete(s.id))}),e.k0s(),e.DNE(15,Pt,13,1,"div",20),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.customerName),e.R7$(2),e.JRh(t.orderNo),e.R7$(2),e.SpI("",e.i5U(7,7,t.orderDate,"dd-MMM-yy")," "),e.R7$(3),e.JRh(t.professionName),e.R7$(2),e.JRh(t.quantity),e.R7$(2),e.JRh(t.charges),e.R7$(2),e.Y8G("ngIf",t.orderForwardCategoryOfficials.length>0)}}function Bt(n,d){if(1&n&&(e.j41(0,"div"),e.DNE(1,St,16,10,"div",3),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.firstLoop)}}function Xt(n,d){if(1&n&&(e.j41(0,"div",12),e.DNE(1,Bt,2,1,"div",13),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.fwds)}}let Vt=(()=>{class n{constructor(t,r,s,o){this.fb=t,this.activatedRoute=r,this.service=s,this.toastr=o,this.form=new i.gE({}),this.fwds=[],this.fwdParams=new T,this.totalCount=0,this.hideCategory=!1,this.customerName="",this.orderNo=0,this.firstLoop=!0}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.fwds=t.DLForwarded.result,this.pagination=t.pagination,this.totalCount=t.totalCount,console.log("pagination",this.pagination);var r=this.fwds[0];r&&(this.customerName=r.customerName,this.orderNo=r.orderNo,this.orderDate=r.orderDate),console.log("fwded",r)}})}loadFwdRecords(t){this.service.setFwdParams(t),this.service.getForwardsBriefPaginated(t).subscribe({next:r=>{console.log("DLForwarded OrderFwdToAgent",r),r.result&&r.pagination&&(this.fwds=r.result,this.pagination=r.pagination,this.totalCount=r.pagination.totalItems)},error:r=>console.log(r)})}onPageChanged(t){const r=this.service.getFwdParams();r.pageNumber!==t&&(r.pageNumber=t,this.service.setFwdParams(r),this.loadFwdRecords(r))}orderFwdDelete(){this.service.deleteForward(this.fwds[0].id).subscribe({next:t=>{t?this.toastr.success("Deleted","The Order Forward along with its related records was deleted"):this.toastr.warning("Failed to delete the Order forward","Failure")}})}orderCategoryDelete(t){this.service.deleteOrderFwdCategory(t).subscribe({next:r=>{this.toastr.success("Deleted","The Order Forward along with its related records was deleted");var s=this.fwds?.findIndex(o=>o.id===t.id);-1!==s&&this.fwds?.splice(s,1)}})}orderCatOfficialDelete(t){}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(p.nX),e.rXU(I),e.rXU(g.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-order-fwds"]],decls:19,vars:3,consts:[["style","display: inline-block; margin-left: 15px;",4,"ngIf"],[2,"font-size","medium","font-weight","bold","display","inline-block"],["routerLink","/orders/orders",1,"stdd","btn","btn-outline-success","pull-right","fa","fa-window-close","fa-2x"],[4,"ngIf"],[1,"stdd","w200","b"],[1,"stdd","w100","b"],[1,"stdd","w150","b"],[1,"stdd","w50","b"],[1,"stdd","w70","b"],["class","form-inline container",4,"ngIf"],[2,"display","inline-block","margin-left","15px"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"form-inline","container"],[4,"ngFor","ngForOf"],[1,"stdd","w200"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w50"],[1,"stdd","w70"],["title","delete this category.  Any agency offcials forwarded to will also be deleted",1,"btn","btn-lg","fa","fa-trash",3,"click"],["style","margin-left: 50px;",4,"ngIf"],[2,"margin-left","50px"],[1,"off","b","w100"],[1,"off","b","w250"],[1,"off","b","w200"],[1,"off","w100"],[1,"off","w250"],[1,"off","w200"],["title","delete official",1,"btn","btn-sm","fa","fa-trash",2,"margin-left","17px",3,"click"]],template:function(r,s){1&r&&(e.DNE(0,Gt,3,3,"div",0),e.j41(1,"div",1),e.EFF(2," Demand Letter forwarded to Associates"),e.k0s(),e.nrm(3,"button",2)(4,"br"),e.DNE(5,Tt,2,0,"div",3),e.j41(6,"label",4),e.EFF(7,"Customer Name"),e.k0s(),e.j41(8,"label",5),e.EFF(9,"Order No"),e.k0s(),e.j41(10,"label",5),e.EFF(11,"Order Dated"),e.k0s(),e.j41(12,"label",6),e.EFF(13,"Category Name"),e.k0s(),e.j41(14,"label",7),e.EFF(15,"Qnty"),e.k0s(),e.j41(16,"label",8),e.EFF(17,"Charges"),e.k0s(),e.DNE(18,Xt,2,1,"div",9)),2&r&&(e.Y8G("ngIf",s.pagination),e.R7$(5),e.Y8G("ngIf",!s.fwds),e.R7$(13),e.Y8G("ngIf",s.fwds.length))},dependencies:[m.Sq,m.bT,p.Wk,G.eK,m.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;vertical-align:top;margin:0 2px;word-wrap:break-word}.stddLeft50[_ngcontent-%COMP%]{display:inline-block;font-size:small;vertical-align:top;margin:0 2px 0 50px}.off[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;font-stretch:semi-condensed;color:#f5ecec}.mL320[_ngcontent-%COMP%]{margin-left:326x}.ml170[_ngcontent-%COMP%]{margin-left:174px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.mL50[_ngcontent-%COMP%]{margin-left:50px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w300[_ngcontent-%COMP%]{width:300px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return n})();var Ut=l(9173),Qt=l(2576);const Yt=[{path:"",component:Mt},{path:"orders",component:Ge,resolve:{professions:J.p,customers:z}},{path:"edit/:id",component:pt,resolve:{order:n=>{var d=n.paramMap.get("id");return null===d?(0,h.of)(null):"0"===d?(0,h.of)(new ut):(0,e.WQX)(y.Q).getOrder(+d)},customers:z,employees:()=>(0,e.WQX)(H.O).getEmployeeIdAndKnownAs(),professions:J.p}},{path:"DLForwarded",component:Vt,resolve:{DLForwarded:()=>{var n=new T;return(0,e.WQX)(I).getForwardsBriefPaginated(n)}}},{path:"ordersforwarded/:orderid",component:bt,resolve:{orderfwd:n=>{var d=n.paramMap.get("orderid");return null===d?(0,h.of)(null):(0,e.WQX)(I).getOrderForwardOfAnOrder(+d)},customers:()=>(0,e.WQX)(D.h).getOfficialAndCustomerName()}},{path:"orderassessmentitem/:id",component:xt,resolve:{assessmentItem:n=>{var d=n.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.WQX)(k).getOrderAssessmentItem(+d)}}},{path:"orderitemreview/:id",component:W,resolve:{orderitemreview:n=>{var d=n.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.WQX)(P).getContractReviewItem(+d)}}},{path:"orderassessment/:id",component:Nt,resolve:{orderAssessment:n=>{var d=n.paramMap.get("id");return null===d?(0,h.of)(null):(0,e.WQX)(k).getOrderAssessment(+d)}}},{path:"cvsreferred/:orderid",component:Ut.H,resolve:{cvs:Qt.I}}];let qt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.$C({type:n});static#r=this.\u0275inj=e.G2t({imports:[m.MD,p.iI.forChild(Yt),p.iI]})}return n})(),Lt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.$C({type:n});static#r=this.\u0275inj=e.G2t({imports:[m.MD,i.YN,L.jN,qt,K.G,N.m_]})}return n})()}}]);