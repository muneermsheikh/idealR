"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[767],{8767:(z,I,c)=>{c.r(I),c.d(I,{FinanceModule:()=>Kt});var h=c(177),v=c(5743),T=c(5964),D=c(5558),F=c(9437),g=c(7673),p=c(8141);class E{constructor(){this.cOAId=0,this.accountName="",this.amount=0,this.cVRefId=0,this.voucherNo=0,this.voucherDated="",this.pageNumber=1,this.pageSize=15,this.sort="voucherNo",this.search=""}}var t=c(7705),s=c(1626),l=c(2771),m=c(6354),b=c(3587),x=c(6220);let _=(()=>{class o{constructor(e){this.http=e,this.apiUrl=b.c.apiUrl,this.currentUserSource=new l.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.sParams=new E,this.vouchers=[],this.count=0,this.cache=new Map}getVouchers(){const e=this.cache.get(Object.values(this.sParams).join("-"));if(e)return(0,g.of)(e);var n=this.sParams;let i=new s.Nl;return i=i.append("pageNumber",n.pageNumber.toString()),i=i.append("pageSize",n.pageSize.toString()),0!==n.cOAId&&(i=i.append("coaId",n.cOAId.toString())),0!==n.voucherNo&&(i=i.append("voucherNo",n.voucherNo.toString())),""!==n.voucherDated&&(i=i.append("vocherDated",n.voucherDated)),0!==n.cVRefId&&(i=i.append("cVRefId",n.cVRefId.toString())),0!==n.amount&&(i=i.append("amount",n.amount.toString())),""===n.accountName&&(i=i.append("accountName",n.accountName)),n.search&&(i=i.append("search",n.search)),i=i.append("sort",this.sParams.sort),(0,x.f8)(this.apiUrl+"finance/voucherspagedlist",i,this.http).pipe((0,m.T)(r=>(console.log("response in voucherservice:",r),this.cache.set(Object.values(n).join("-"),r),r)))}getVoucherFromId(e){return 0===e?(0,g.of)(void 0):this.http.get(this.apiUrl+"finance/voucher/"+e)}deleteVoucher(e){return this.http.delete(this.apiUrl+"finance/deletevoucher/"+e)}insertVoucherWithUploads(e){return this.http.post(this.apiUrl+"finance/newvoucherwithattachment",e,{reportProgress:!0,observe:"events"})}updateVoucher(e){return this.http.put(this.apiUrl+"finance/voucher",e)}saveNewVoucher(e){return this.http.post(this.apiUrl+"finance/newvoucher",e)}updateWithFiles(e){return this.http.put(this.apiUrl+"finance/updateVoucherwithattachment",e,{reportProgress:!0,observe:"events"})}getNextVoucherNo(){return this.http.get(this.apiUrl+"finance/nextvoucherno")}getStatementOfAccount(e,n,i){return this.http.get(this.apiUrl+"finance/soa/"+e+"/"+n+"/"+i)}deleteVoucherFromCache(e){this.cache.delete(e),this.pagination.totalItems--}setParams(e){this.sParams=e}getParams(){return this.sParams}static#t=this.\u0275fac=function(n){return new(n||o)(t.KVO(s.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var R=c(8256),V=c(778),G=c(3400),w=c(9213);function J(o,a){1&o&&(t.j41(0,"div"),t.EFF(1," No Financial tranaction on record "),t.k0s())}function W(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.EFF(3),t.k0s(),t.j41(4,"div",5),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"div",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.viewTransaction(i.t.id))}),t.EFF(8),t.k0s(),t.j41(9,"div",7),t.EFF(10),t.k0s(),t.j41(11,"div",8),t.EFF(12),t.k0s(),t.j41(13,"button",9),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.editTransaction(i.t.id))}),t.j41(14,"mat-icon"),t.EFF(15,"edit"),t.k0s()(),t.j41(16,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deleteTransaction(i.t.id))}),t.j41(17,"mat-icon"),t.EFF(18,"delete"),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(3),t.JRh(e.t.voucherNo),t.R7$(2),t.JRh(t.i5U(6,5,e.t.voucherDated,"dd-MMM-yy")),t.R7$(3),t.JRh(e.t.accountName),t.R7$(2),t.JRh(e.t.amount.toLocaleString()),t.R7$(2),t.JRh(e.t.narration)}}let H=(()=>{class o{constructor(){this.editEvent=new t.bkB,this.viewEvent=new t.bkB,this.deleteEvent=new t.bkB}editTransaction(e){this.editEvent.emit(e)}viewTransaction(e){this.viewEvent.emit(e)}deleteTransaction(e){this.deleteEvent.emit(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-voucher-item"]],inputs:{t:"t"},outputs:{editEvent:"editEvent",viewEvent:"viewEvent",deleteEvent:"deleteEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"row",2,"display","inline-block","font-size","small","margin-left","15px"],["title","edit the transaction",1,"stdd","w90"],[1,"stdd","w100"],["title","view this transaction",1,"stdd","w200","cursorPointer",3,"click"],[1,"stdd","w90","alignRight"],[1,"stdd","fSmall","w250"],["type","button","title","edit this Voucher",1,"btn",3,"click"],["title","delete this Voucher",1,"btn","red",3,"click"]],template:function(n,i){1&n&&(t.DNE(0,J,2,0,"div",0),t.DNE(1,W,19,8,"div",1)),2&n&&(t.Y8G("ngIf",null===i.t),t.R7$(1),t.Y8G("ngIf",null!=i.t))},dependencies:[h.bT,w.An,h.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;word-wrap:break-word;font-size:small}.alignRight[_ngcontent-%COMP%]{text-align:right}.hM[_ngcontent-%COMP%]{text-align:center}.fSmall[_ngcontent-%COMP%]{font-size:small}.red[_ngcontent-%COMP%]{color:red}.w30[_ngcontent-%COMP%]{width:30px}.w60[_ngcontent-%COMP%]{width:60px}.w75[_ngcontent-%COMP%]{width:75px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.cr[_ngcontent-%COMP%]{padding-left:90px;width:75px;padding-right:50px;text-align:right}.dr[_ngcontent-%COMP%]{padding-left:10x;width:75px;padding-right:130px;text-align:right}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:20px}"]})}return o})();const Q=["search"];function K(o,a){if(1&o){const e=t.RV6();t.j41(0,"pagination",17),t.bIt("pageChanged",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onPageChanged(i))}),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",15)}}function Z(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"app-voucher-item",18),t.bIt("viewEvent",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.viewTransaction(i,!0))})("editEvent",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editTransaction(i,!0))})("deleteEvent",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.deleteVoucher(i))}),t.k0s()()}if(2&o){const e=a.$implicit;t.R7$(1),t.Y8G("t",e)}}let q=(()=>{class o{constructor(e,n,i,r){this.service=e,this.toastr=n,this.router=i,this.confirmService=r,this.sParams=new E,this.totalCount=0,this.vouchers=[],this.bolNavigationExtras=!1,this.returnUrl="";let u=this.router.getCurrentNavigation();u?.extras&&u.extras.state&&(this.bolNavigationExtras=!0,u.extras.state.returnUrl&&(this.returnUrl=u.extras.state.returnUrl),u.extras.state.userobject&&(this.user=u.extras.state.userobject))}ngOnInit(){this.getVouchers()}getVouchers(){this.service.setParams(this.sParams),this.service.getVouchers().subscribe({next:e=>{this.vouchers=e.result,this.pagination=e.pagination,this.totalCount=e.count}})}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new E,this.getVouchers()}onPageChanged(e){this.sParams.pageNumber!==e.page&&(this.sParams.pageNumber=e.page,this.getVouchers())}onSearch(){this.sParams.search!==this.searchTerm.nativeElement.value&&(this.sParams.search=this.searchTerm.nativeElement.value,this.sParams.pageNumber=1,this.service.setParams(this.sParams),this.getVouchers())}addNewFinanceTransaction(){this.router.navigate(["/finance/voucherEdit/0"],{state:{toedit:!0,returnUrl:"/finance/voucherlist"}})}editTransaction(e,n){this.router.navigate(["/finance/voucherEdit/"+e],{state:{toedit:n,returnUrl:"/finance/voucherlist",userObject:this.user}})}viewTransaction(e,n){this.router.navigate(["/finance/voucherEdit/"+e],{state:{toedit:!1,readonly:n,returnUrl:"/finance/voucherlist",userObject:this.user}})}deleteVoucher(e){this.confirmService.confirm("confirm delete this voucher","confirm delete voucher").pipe((0,T.p)(n=>n),(0,D.n)(n=>this.service.deleteVoucher(e).pipe((0,F.W)(i=>(console.log("Error in deleting the voucher",i),(0,g.of)())),(0,p.M)(i=>this.toastr.success("deleted voucher")))),(0,F.W)(n=>(this.toastr.error("Error in getting delete confirmation",n),(0,g.of)()))).subscribe(n=>{console.log("deete succeeded"),this.toastr.success("voucher deleted")},n=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",n)})}removeTaskFromCache(e){this.service.deleteVoucherFromCache(e);var n=this.vouchers.findIndex(i=>i.id==e);this.vouchers.splice(n,1),this.toastr.success("task deleted")}returnToCaller(){this.router.navigateByUrl(this.returnUrl||"/")}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(_),t.rXU(R.tw),t.rXU(v.Ix),t.rXU(V.G))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-voucher-list"]],viewQuery:function(n,i){if(1&n&&t.GBs(Q,5),2&n){let r;t.mGM(r=t.lsd())&&(i.searchTerm=r.first)}},decls:28,vars:3,consts:[[2,"margin-right","15px","display","inline-block"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[2,"width","50px","display","inline-block","font-size","large","word-wrap","break-word","vertical-align","middle"],["type","text","placeholder","Search",1,"stdd","mx-5","w200",3,"keyup.enter"],["search",""],["title","search the text entered",1,"btn",3,"click"],["title","add a new Finance Voucher",1,"btn",3,"click"],["title","return to calling program",1,"btn",3,"click"],[2,"padding-top","0px","padding-bottom","0px","margin-top","0px","margin-bottom","0px","margin-left","10px","padding-right","10px"],[2,"display","inline-block","font-size","small","font-weight","bold","margin-left","120px"],[1,"stdd","vAlignM","w90","b"],[1,"stdd","vAlignM","w100","b"],[1,"stdd","vAlignM","mx-1","w200","b"],[1,"stdd","vAlignM","w90","b",2,"text-align","center"],[1,"stdd","vAlignM","w300","b"],[1,"my-0","py-0","ml-5"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[3,"t","viewEvent","editEvent","deleteEvent"]],template:function(n,i){1&n&&(t.j41(0,"h4",0),t.EFF(1,"Voucher Lists"),t.k0s(),t.DNE(2,K,1,3,"pagination",1),t.j41(3,"label",2),t.EFF(4),t.k0s(),t.j41(5,"input",3,4),t.bIt("keyup.enter",function(){return i.onSearch()}),t.k0s(),t.j41(7,"button",5),t.bIt("click",function(){return i.onSearch()}),t.j41(8,"mat-icon"),t.EFF(9,"search"),t.k0s()(),t.j41(10,"button",6),t.bIt("click",function(){return i.addNewFinanceTransaction()}),t.k0s(),t.j41(11,"button",7),t.bIt("click",function(){return i.returnToCaller()}),t.j41(12,"mat-icon"),t.EFF(13,"cancel"),t.k0s()(),t.nrm(14,"hr",8),t.j41(15,"div",9)(16,"div",10),t.EFF(17,"Voucher No"),t.k0s(),t.j41(18,"div",11),t.EFF(19,"Dated"),t.k0s(),t.j41(20,"div",12),t.EFF(21,"Account Name"),t.k0s(),t.j41(22,"div",13),t.EFF(23,"Amount"),t.k0s(),t.j41(24,"div",14),t.EFF(25,"Narration"),t.k0s(),t.nrm(26,"hr",15),t.DNE(27,Z,2,1,"div",16),t.k0s()),2&n&&(t.R7$(2),t.Y8G("ngIf",void 0!==i.pagination),t.R7$(2),t.SpI(" of ",null==i.pagination?null:i.pagination.totalItems,""),t.R7$(23),t.Y8G("ngForOf",i.vouchers))},dependencies:[h.Sq,h.bT,G.eK,w.An,H],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.VAlignM[_ngcontent-%COMP%]{vertical-align:middle}.hM[_ngcontent-%COMP%]{text-align:center}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:20px}"]})}return o})();var j=c(1274),et=c(6080);class it{constructor(){this.divn="",this.coaId=0,this.accountName="",this.transDate=new Date,this.amount=0,this.sort="transDate",this.pageNumber=1,this.pageSize=10,this.search=""}}function ot(o,a){1&o&&(t.j41(0,"div",7),t.EFF(1,"--"),t.k0s())}function rt(o,a){if(1&o&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.JRh(e.soaItem.dr.toLocaleString())}}function st(o,a){1&o&&(t.j41(0,"div",7),t.EFF(1,"--"),t.k0s())}function at(o,a){if(1&o&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.JRh(e.soaItem.cr.toLocaleString())}}function ct(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",1)(2,"div",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.displayVoucher())}),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"div",4),t.EFF(8),t.k0s(),t.DNE(9,ot,2,0,"div",5),t.DNE(10,rt,2,1,"div",5),t.DNE(11,st,2,0,"div",5),t.DNE(12,at,2,1,"div",5),t.j41(13,"div",6),t.EFF(14),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.soaItem.voucherNo," "),t.R7$(2),t.JRh(t.i5U(6,8,e.soaItem.transDate,"dd-MMM-yy")),t.R7$(3),t.JRh(e.soaItem.accountName),t.R7$(1),t.Y8G("ngIf",0===e.soaItem.dr),t.R7$(1),t.Y8G("ngIf",0!==e.soaItem.dr),t.R7$(1),t.Y8G("ngIf",0===e.soaItem.cr),t.R7$(1),t.Y8G("ngIf",0!==e.soaItem.cr),t.R7$(2),t.JRh(e.soaItem.narration)}}let lt=(()=>{class o{constructor(){this.displayVoucherEvent=new t.bkB}displayVoucher(){this.displayVoucherEvent.emit(this.soaItem.voucherNo)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-soa-line"]],inputs:{soaItem:"soaItem"},outputs:{displayVoucherEvent:"displayVoucherEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"stdd","row","mb-0"],["title","click to display voucher",1,"stdd","w100","vAlignTop",2,"vertical-align","top",3,"click"],[1,"stdd","w100"],[1,"stdd","w150"],["class","numberStdd w75",4,"ngIf"],[1,"w300",2,"font-size","x-small","margin","0 1px 0 1px","word-wrap","break-word"],[1,"numberStdd","w75"]],template:function(n,i){1&n&&t.DNE(0,ct,15,11,"div",0),2&n&&t.Y8G("ngIf",null!=i.soaItem)},dependencies:[h.bT,h.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;word-wrap:break-word;font-size:small;vertical-align:top}.numberStdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;text-align:right;font-size:small}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.fontSmaller[_ngcontent-%COMP%]{font-size:smaller}.vAlignTop[_ngcontent-%COMP%]{vertical-align:top}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return o})();const dt=["search"];function ut(o,a){1&o&&(t.j41(0,"div"),t.EFF(1," no data available\n"),t.k0s())}function ht(o,a){if(1&o){const e=t.RV6();t.j41(0,"div"),t.EFF(1," Extract of transactions of: "),t.j41(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.nI1(5,"date"),t.nI1(6,"date"),t.j41(7,"button",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.returnToCaller())}),t.j41(8,"mat-icon"),t.EFF(9,"cancel"),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.soa.accountName," "),t.R7$(1),t.Lme(" for the period between ",t.i5U(5,3,e.soa.fromDate,"dd-MMM-yy")," and ",t.i5U(6,6,e.soa.uptoDate,"dd-MMM-yy")," ")}}function pt(o,a){if(1&o&&(t.j41(0,"div",6),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.JRh(e.soa.opBalance)}}function mt(o,a){if(1&o&&(t.j41(0,"div",6),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.JRh(e.soa.opBalance)}}function ft(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"app-soa-line",13),t.bIt("displayVoucherEvent",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.displayVoucherClicked(i))}),t.k0s()()}if(2&o){const e=a.$implicit;t.R7$(1),t.Y8G("soaItem",e)}}function gt(o,a){if(1&o&&(t.j41(0,"div",3)(1,"label",4),t.EFF(2,"Voucher No "),t.k0s(),t.j41(3,"label",4),t.EFF(4,"Date"),t.k0s(),t.j41(5,"label",5),t.EFF(6,"Account"),t.k0s(),t.j41(7,"label",6),t.EFF(8,"Debit"),t.k0s(),t.j41(9,"label",7),t.EFF(10,"Credit"),t.k0s(),t.nrm(11,"hr"),t.j41(12,"div",8),t.EFF(13,"Opening Balance"),t.k0s(),t.DNE(14,pt,2,1,"div",9),t.DNE(15,mt,2,1,"div",9),t.nrm(16,"br")(17,"br"),t.DNE(18,ft,2,1,"div",10),t.nrm(19,"br"),t.j41(20,"div",8),t.EFF(21,"Overall Total"),t.k0s(),t.j41(22,"div",6),t.EFF(23),t.k0s(),t.j41(24,"div",6),t.EFF(25),t.k0s(),t.nrm(26,"br"),t.j41(27,"label",11),t.EFF(28,"Balance"),t.k0s(),t.j41(29,"div",12),t.EFF(30),t.k0s()()),2&o){const e=t.XpG();t.R7$(14),t.Y8G("ngIf",e.soa.opBalance>0),t.R7$(1),t.Y8G("ngIf",e.soa.opBalance<=0),t.R7$(3),t.Y8G("ngForOf",e.soa.statementOfAccountItems),t.R7$(5),t.JRh(e.overallTotalDr.toLocaleString()),t.R7$(2),t.JRh(e.overallTotalCr.toLocaleString()),t.R7$(5),t.Lme("",e.overallBal.toLocaleString()," ",e.overallBalSuffix,"")}}let vt=(()=>{class o{constructor(e,n,i,r){this.service=e,this.activatedRoute=n,this.router=i,this.toastr=r,this.routeId="",this.sParams=new it,this.totaldr=0,this.totalcr=0,this.thisPeriodSuffix="",this.thisPeriodTotalDr=0,this.thisPeriodTotalCr=0,this.thisPeriodBalance=0,this.thisPeriodDiff=0,this.overallBal=0,this.overallTotalDr=0,this.overallTotalCr=0,this.overallBalSuffix="",this.bolNavigationExtras=!1,this.returnUrl="",this.sortOptions=[{name:"By Account Name Asc",value:"name"},{name:"By Account Name Desc",value:"namedesc"},{name:"By Transaction Date Asc",value:"transdate"},{name:"By Transaction Date Desc",value:"trabsdatedesc"}],this.routeId=this.activatedRoute.snapshot.params.id,null==this.routeId&&(this.routeId="");let u=this.router.getCurrentNavigation();u?.extras&&u.extras.state&&(this.bolNavigationExtras=!0,u.extras.state.returnUrl&&(this.returnUrl=u.extras.state.returnUrl),u.extras.state.userobject&&(this.user=u.extras.state.userobject))}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.soa=e.soa,null!=this.soa?(this.thisPeriodTotalDr=this.soa.statementOfAccountItems.map(n=>n.dr).reduce((n,i)=>n+i,0),this.thisPeriodTotalCr=this.soa.statementOfAccountItems.map(n=>n.cr).reduce((n,i)=>n+i,0),this.thisPeriodDiff=this.thisPeriodTotalDr-this.thisPeriodTotalCr,this.thisPeriodSuffix=this.thisPeriodBalance>0?" DR":" CR",this.thisPeriodBalance=Math.abs(this.thisPeriodTotalDr-this.thisPeriodTotalCr),this.soa.opBalance>0?(this.overallTotalDr=this.thisPeriodTotalDr+this.soa.opBalance,this.overallTotalCr=this.thisPeriodTotalCr):(this.overallTotalCr=this.thisPeriodTotalCr+this.soa.opBalance,this.overallTotalDr=this.thisPeriodTotalDr),this.overallBal=this.overallTotalDr-this.overallTotalCr,this.overallBalSuffix=this.overallBal>0?" DR":" CR",this.overallBal=Math.abs(this.overallBal)):(this.toastr.warning("No statement of account could be generated agaisnt the inputs"),this.router.navigateByUrl(this.returnUrl))})}returnToCaller(){this.router.navigateByUrl(this.returnUrl||"")}displayVoucherClicked(e){this.router.navigate(["/finance/editfinancewithobject/"+e],{state:{toedit:!1,returnUrl:"/finance/voucherlist"}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(j.x),t.rXU(v.nX),t.rXU(v.Ix),t.rXU(R.tw))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-soa"]],viewQuery:function(n,i){if(1&n&&t.GBs(dt,5),2&n){let r;t.mGM(r=t.lsd())&&(i.searchTerm=r.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["class","container",4,"ngIf"],["type","button",1,"btn",3,"click"],[1,"container"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w75","tAlignRight"],[1,"stdd","mx-2","w75","tAlignRight"],[1,"opBal"],["class","stdd w75 tAlignRight",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"margin","1px 1px 1px 322px","font-size","small","font-weight","bold","text-align","right"],[1,"stdd","w75","b","tAlignRight"],[3,"soaItem","displayVoucherEvent"]],template:function(n,i){1&n&&(t.DNE(0,ut,2,0,"div",0),t.DNE(1,ht,10,9,"div",0),t.nrm(2,"br"),t.DNE(3,gt,31,7,"div",1)),2&n&&(t.Y8G("ngIf",void 0===i.soa),t.R7$(1),t.Y8G("ngIf",null!=i.soa),t.R7$(2),t.Y8G("ngIf",null!=i.soa))},dependencies:[h.Sq,h.bT,w.An,lt,h.vh],styles:["label[_ngcontent-%COMP%]{display:inline-block;font-weight:700;margin:0 1px;font-size:small;word-wrap:break-word}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;font-size:small;word-wrap:break-word}.opBal[_ngcontent-%COMP%]{display:inline-block;margin:1px 1px 1px 200px;font-size:small;font-weight:700;word-wrap:break-word;width:150px}.b[_ngcontent-%COMP%]{font-weight:700}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:20px}"]})}return o})();var k=c(7611);let U=(()=>{class o{constructor(e){this.http=e,this.apiUrl=b.c.apiUrl,this.currentUserSource=new l.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.oParams=new k.u,this.pParams=new k.u}getDebitApprovalsPending(){var e=this.pParams;const n=this.cache.get(Object.values(e).join("-"));if(n)return(0,g.of)(n);let i=this.populateCOAParams(e);return(0,x.f8)(this.apiUrl+"finance/DrApprovalsPending",i,this.http).pipe((0,m.T)(r=>(this.cache.set(Object.values(e).join("-"),r),r)))}updateVoucherEntries(e){return this.http.put(this.apiUrl+"finance/updateVoucherEntries",e)}approveDrApprovals(e){return this.http.put(this.apiUrl+"finance/updateDrApprovals",e)}updateVoucher(e){return this.http.put(this.apiUrl+"finance/voucher",e)}deleteVoucher(e){return this.http.delete(this.apiUrl+"finance/deletevoucher/"+e)}setParams(e){this.oParams=e}getParams(){return this.oParams}addNewVoucher(e){return this.http.post(this.apiUrl+"finance/newvocher",e)}populateCOAParams(e){let n=new s.Nl;return e.search&&(n=n.append("search",e.search)),""!==e.accountName&&(n=n.append("coaId",e.accountName)),""!==e.sort&&(n=n.append("sort",e.sort)),0!==e.cOAId&&(n=n.append("cOAIDId",e.cOAId.toString())),""!==e.accountType&&(n=n.append("accountType",e.accountType)),n}deleteFromCache(e){this.cache.delete(e),this.pagination.totalItems--}static#t=this.\u0275fac=function(n){return new(n||o)(t.KVO(s.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var d=c(9417),$=c(1822),bt=c(8882);function Ct(o,a){if(1&o){const e=t.RV6();t.j41(0,"pagination",13),t.bIt("pageChanged",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onPageChanged(i))}),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("maxSize",15)}}function Et(o,a){1&o&&(t.j41(0,"div",14),t.EFF(1,"No Voucher Entries pending for Debit Entry Approvals"),t.k0s())}function xt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"input",16),t.bIt("ngModelChange",function(i){const u=t.eBV(e).$implicit;return t.Njj(u.drEntryApproved=i)})("click",function(){const r=t.eBV(e).$implicit,u=t.XpG(2);return t.Njj(u.selectedClicked(r))}),t.k0s(),t.j41(2,"div",17),t.bIt("click",function(){const r=t.eBV(e).$implicit,u=t.XpG(2);return t.Njj(u.displayVoucher(r.id))}),t.EFF(3),t.k0s(),t.j41(4,"div",18),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"div",19),t.EFF(8),t.k0s(),t.j41(9,"div",20),t.EFF(10),t.k0s()()}if(2&o){const e=a.$implicit;t.R7$(1),t.Y8G("ngModel",e.drEntryApproved),t.R7$(2),t.JRh(e.voucherNo),t.R7$(2),t.JRh(t.i5U(6,5,e.voucherDated,"dd-MMM-yy")),t.R7$(3),t.JRh(e.drAccountName),t.R7$(2),t.JRh(e.drAmount.toLocaleString())}}function Ft(o,a){if(1&o&&(t.j41(0,"div"),t.DNE(1,xt,11,8,"div",15),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.pending)}}let wt=(()=>{class o{constructor(e,n,i,r,u,N,A,O){this.service=e,this.toastr=n,this.router=i,this.accountService=r,this.confirmService=u,this.activatedRoute=N,this.fb=A,this.msgService=O,this.pending=[],this.pendingSelected=[],this.totalCount=0,this.bolNavigationExtras=!1,this.returnUrl="",this.pParams=new k.u,this.drEntryReviewedOn=new Date,this.drEntryApproved=!1,this.form=new d.gE({}),this.bsValueDate=new Date,this.MESSAGE_TYPEID_REQUEST_PAYMENT_CONFIRMATION=24,this.MESSAGE_TYPEID_CONFIRM_PAYMENT_RECEIVED=25,this.MESSAGE_TYPEID_CONFIRM_PAYMENT_NOT_RECEIVED=26,this.MESSAGE_POST_ACTION=5;let y=this.router.getCurrentNavigation();y?.extras&&y.extras.state&&(this.bolNavigationExtras=!0,y.extras.state.returnUrl&&(this.returnUrl=y.extras.state.returnUrl))}ngOnInit(){this.accountService.currentUser$.subscribe({next:e=>{this.user=e}}),this.pParams=new k.u,this.activatedRoute.data.subscribe(e=>{this.pending=e.confirmationsPending.result,this.pagination=e.confirmationsPending.pagination,this.totalCount=e.confirmationsPending.totalCount}),this.getPendings()}getPendings(){this.service.setParams(this.pParams),this.service.getDebitApprovalsPending().subscribe({next:e=>{this.pending=e.result,this.pagination=e.pagination,this.totalCount=e.count}})}update(){var e=this.pendingSelected.map(n=>n.voucherEntryId);this.service.approveDrApprovals(e).subscribe({next:n=>{n?(this.toastr.success("selected payments confirmed as received"),e.forEach(i=>{var r=this.pending.findIndex(u=>u.voucherEntryId===i);-1!==r&&this.pending.splice(r,1)})):this.toastr.warning("Failed to register the approvals","failure")},error:n=>{this.toastr.error(n.error.details,"failed to register the payment confirmations")}})}selectedClicked(e){var n=this.pending.findIndex(i=>i.id===e.id);e.drEntryApproved?e.drEntryApproved?this.pendingSelected.splice(n,1):console.log("drEntryapproved not reached:",e.drEntryApproved):(e.drEntryApprovedByUsername=this.user.userName,e.drEntryApprovedOn=new Date,this.pendingSelected.push(e)),console.log("selected",this.pendingSelected)}PageChanged(e){const n=this.service.getParams();n.pageNumber!==e.page&&(n.pageNumber=e.page,this.service.setParams(n),this.getPendings())}displayVoucher(e){this.router.navigate(["/finance/voucherEdit/"+e],{state:{toedit:!1,returnUrl:"/finance/receiptspendingconfirmation",userObject:this.user}})}close(){}onPageChanged(e){this.pParams.pageNumber!==e.page&&(this.pParams.pageNumber=e.page,this.getPendings())}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(U),t.rXU(R.tw),t.rXU(v.Ix),t.rXU($.D),t.rXU(V.G),t.rXU(v.nX),t.rXU(d.ok),t.rXU(bt.b))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-confirm-fund-receipt"]],decls:27,vars:6,consts:[[1,"caption"],[1,"lbl","w200","mx-5"],["style","display: inline-block; margin-left: 15px","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[2,"width","50px","display","inline-block","font-size","large","word-wrap","break-word","vertical-align","middle"],["title","Confirm receipt of funds pending for acceptance",1,"btn",3,"disabled","click"],["title","Exit this page","routerLink","/finance",1,"btn",2,"margin-left","25px !important"],[1,"container","my-2"],[1,"lbl","w100"],[1,"lbl","w75"],[1,"lbl","w100","hAlignCenter"],[1,"lbl","w200"],["class","my-2",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block","margin-left","15px",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin","0 40px 0 40px","border-color","black",3,"ngModel","ngModelChange","click"],["title","display the Voucher",1,"stdd","w75","hAlignCenter","cursorPointer",3,"click"],[1,"stdd","w100","hAlignCenter"],[1,"stdd","w200"],[1,"stdd","w75","hAlignRight"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.EFF(1,"Transactions Pending approval"),t.k0s(),t.j41(2,"div",1),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.DNE(5,Ct,1,3,"pagination",2),t.j41(6,"label",3),t.EFF(7),t.k0s(),t.j41(8,"button",4),t.bIt("click",function(){return i.update()}),t.j41(9,"mat-icon"),t.EFF(10,"save"),t.k0s()(),t.j41(11,"button",5)(12,"mat-icon"),t.EFF(13,"cancel"),t.k0s()(),t.j41(14,"div",6)(15,"label",7),t.EFF(16,"Approved"),t.k0s(),t.j41(17,"label",8),t.EFF(18,"Voucher No"),t.k0s(),t.j41(19,"label",9),t.EFF(20,"Dated"),t.k0s(),t.j41(21,"label",10),t.EFF(22,"Account Name"),t.k0s(),t.j41(23,"label",8),t.EFF(24,"Amount"),t.k0s(),t.DNE(25,Et,2,0,"div",11),t.DNE(26,Ft,2,1,"div",12),t.k0s()),2&n&&(t.R7$(3),t.SpI("Logged in User: ",null==i.user?null:i.user.knownAs,""),t.R7$(2),t.Y8G("ngIf",void 0!==i.pagination),t.R7$(2),t.SpI(" of ",null==i.pagination?null:i.pagination.totalItems,""),t.R7$(1),t.Y8G("disabled",0===i.pendingSelected.length),t.R7$(17),t.Y8G("ngIf",!i.pending.length),t.R7$(1),t.Y8G("ngIf",i.pending))},dependencies:[h.Sq,h.bT,v.Wk,G.eK,d.Zm,d.BC,d.vS,w.An,h.vh],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;vertical-align:top}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.hAlignRight[_ngcontent-%COMP%]{text-align:right}.green[_ngcontent-%COMP%]{color:#006400}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#f0f8ff}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:small;font-weight:700;vertical-align:top}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:20px}.caption[_ngcontent-%COMP%]{display:inline-block;font-size:large;font-weight:700;margin-left:15px}"]})}return o})();var yt=c(2266),Dt=c(3291),kt=c(3794),It=c(779),B=c(9375),Rt=c(2510),Pt=c(6295),X=c(9726);function Tt(o,a){if(1&o&&t.nrm(0,"ng-select",39),2&o){const e=t.XpG(3);t.Y8G("items",e.coas)}}function Vt(o,a){if(1&o&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(1),t.SpI(" Please enter the ",e.type," Account ")}}function jt(o,a){1&o&&(t.j41(0,"div",27),t.EFF(1," Voucher Amount NOT totally disbursed"),t.k0s())}function Nt(o,a){if(1&o&&t.nrm(0,"ng-select",52),2&o){const e=t.XpG(4);t.Y8G("items",e.coas)}}function At(o,a){1&o&&(t.j41(0,"div",40),t.EFF(1," Please enter the Account "),t.k0s())}const P=function(){return{dateInputFormat:"YYYY-MM-DD"}};function Ot(o,a){if(1&o){const e=t.RV6();t.j41(0,"div"),t.nrm(1,"hr",41),t.j41(2,"div",42),t.nrm(3,"input",43),t.DNE(4,Nt,1,1,"ng-select",44),t.DNE(5,At,2,0,"div",21),t.j41(6,"input",45),t.bIt("change",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.recalculateTotal())}),t.k0s(),t.j41(7,"input",46),t.bIt("change",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.recalculateTotal())}),t.k0s(),t.nrm(8,"input",47)(9,"input",48)(10,"input",49)(11,"input",50),t.j41(12,"button",51),t.bIt("click",function(){const r=t.eBV(e).index,u=t.XpG(3);return t.Njj(u.removeVoucherEntry(r))}),t.k0s()()()}if(2&o){const e=a.index,n=t.XpG(3);let i;t.R7$(2),t.Y8G("formGroupName",e),t.R7$(1),t.Y8G("bsValue",n.bsValueDate)("bsConfig",t.lJ4(7,P)),t.R7$(1),t.Y8G("ngIf",n.coas),t.R7$(1),t.Y8G("ngIf",null==(i=n.form.get("cOAId"))?null:i.hasError("required")),t.R7$(6),t.Y8G("bsValue",n.bsValueDate)("bsConfig",t.lJ4(8,P))}}const Y=function(){return{adaptivePosition:!0,dateInputFormat:"YYYY-MM-DD"}};function Mt(o,a){if(1&o){const e=t.RV6();t.j41(0,"form",11),t.nrm(1,"br"),t.j41(2,"label",12),t.EFF(3,"Div Name:"),t.k0s(),t.nrm(4,"app-text-input",13),t.j41(5,"label",12),t.EFF(6,"Section:"),t.k0s(),t.nrm(7,"app-text-input",14),t.j41(8,"label",12),t.EFF(9,"Voucher No.:"),t.k0s(),t.nrm(10,"app-text-input",15),t.j41(11,"label",16),t.EFF(12,"Dated:"),t.k0s(),t.nrm(13,"input",17,18)(15,"br"),t.j41(16,"label",19),t.EFF(17,"Account:"),t.j41(18,"b"),t.EFF(19),t.k0s()(),t.DNE(20,Tt,1,1,"ng-select",20),t.DNE(21,Vt,2,1,"div",21),t.j41(22,"button",22),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addNewCOA())}),t.nrm(23,"mat-icon"),t.k0s(),t.j41(24,"label",16),t.EFF(25,"Narration:"),t.k0s(),t.nrm(26,"textarea",23)(27,"br")(28,"br"),t.j41(29,"label",24),t.EFF(30,"Amount:"),t.k0s(),t.j41(31,"input",25),t.bIt("change",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateVoucherAmount())}),t.k0s(),t.j41(32,"div",26),t.EFF(33,"Totals:"),t.k0s(),t.j41(34,"span",27),t.EFF(35,"DR"),t.k0s(),t.j41(36,"div",28),t.EFF(37),t.k0s(),t.j41(38,"span",27),t.EFF(39,"CR"),t.k0s(),t.j41(40,"div",28),t.EFF(41),t.k0s(),t.j41(42,"span",27),t.EFF(43,"DR/CR Diff"),t.k0s(),t.j41(44,"div",29),t.EFF(45),t.k0s(),t.DNE(46,jt,2,0,"div",30),t.nrm(47,"br")(48,"br"),t.j41(49,"label",31),t.EFF(50,"Date"),t.k0s(),t.j41(51,"label",32),t.EFF(52,"Account"),t.k0s(),t.j41(53,"label",33),t.EFF(54,"Debit"),t.k0s(),t.j41(55,"label",33),t.EFF(56,"Credit"),t.k0s(),t.j41(57,"label",32),t.EFF(58,"Narration"),t.k0s(),t.j41(59,"label",34),t.EFF(60,"Dr Approved"),t.k0s(),t.j41(61,"label",35),t.EFF(62,"by / on"),t.k0s(),t.j41(63,"button",36),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addVoucherEntry())}),t.j41(64,"mat-icon"),t.EFF(65,"library_add"),t.k0s()(),t.nrm(66,"br"),t.j41(67,"div",37),t.DNE(68,Ot,13,9,"div",38),t.k0s(),t.nrm(69,"br")(70,"hr"),t.k0s()}if(2&o){const e=t.XpG(2);let n;t.Y8G("formGroup",e.form),t.R7$(4),t.Y8G("label","Company Name"),t.R7$(3),t.Y8G("label","Divn"),t.R7$(3),t.Y8G("label","Voucher No"),t.R7$(3),t.Y8G("minDate",e.minTransDate)("maxDate",e.maxTransDate)("bsValue",e.bsValue)("bsConfig",t.lJ4(16,Y)),t.R7$(6),t.JRh(e.type),t.R7$(1),t.Y8G("ngIf",e.coas),t.R7$(1),t.Y8G("ngIf",null==(n=e.form.get("coaId"))?null:n.hasError("required")),t.R7$(16),t.JRh(e.totalAmountDR),t.R7$(4),t.JRh(e.totalAmountCR),t.R7$(4),t.SpI("",e.iDiff," "),t.R7$(1),t.Y8G("ngIf",0!==e.voucherAmount&&(e.totalAmountDR!==e.voucherAmount||e.totalAmountCR!==e.voucherAmount)),t.R7$(22),t.Y8G("ngForOf",e.voucherEntries.controls)}}function St(o,a){if(1&o&&(t.j41(0,"div"),t.DNE(1,Mt,71,17,"form",10),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.voucher)}}function Gt(o,a){if(1&o&&t.nrm(0,"ng-select",39),2&o){const e=t.XpG(3);t.Y8G("items",e.coas)}}function Ut(o,a){1&o&&(t.j41(0,"div",27),t.EFF(1," Voucher Amount NOT totally disbursed"),t.k0s())}function $t(o,a){if(1&o&&t.nrm(0,"ng-select",63),2&o){const e=t.XpG(4);t.Y8G("items",e.coas)}}function Bt(o,a){1&o&&(t.j41(0,"div",40),t.EFF(1," Please enter the Account "),t.k0s())}function Xt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div"),t.nrm(1,"hr",41),t.j41(2,"div",42),t.nrm(3,"input",61),t.DNE(4,$t,1,1,"ng-select",62),t.DNE(5,Bt,2,0,"div",21),t.j41(6,"input",45),t.bIt("change",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.recalculateTotal())}),t.k0s(),t.j41(7,"input",46),t.bIt("change",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.recalculateTotal())}),t.k0s(),t.nrm(8,"input",47)(9,"input",48)(10,"input",49)(11,"input",50),t.k0s()()}if(2&o){const e=a.index,n=t.XpG(3);let i;t.R7$(2),t.Y8G("formGroupName",e),t.R7$(1),t.Y8G("bsValue",n.bsValueDate)("bsConfig",t.lJ4(7,P)),t.R7$(1),t.Y8G("ngIf",n.coas),t.R7$(1),t.Y8G("ngIf",null==(i=n.form.get("cOAId"))?null:i.hasError("required")),t.R7$(6),t.Y8G("bsValue",n.bsValueDate)("bsConfig",t.lJ4(8,P))}}function Yt(o,a){if(1&o){const e=t.RV6();t.j41(0,"form",11)(1,"div",55),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.j41(4,"label",12),t.EFF(5,"Voucher No.:"),t.k0s(),t.nrm(6,"app-text-input",15),t.j41(7,"label",16),t.EFF(8,"Dated:"),t.k0s(),t.nrm(9,"input",56,18)(11,"br"),t.j41(12,"label",19),t.EFF(13,"Account:"),t.j41(14,"b"),t.EFF(15),t.k0s()(),t.DNE(16,Gt,1,1,"ng-select",20),t.j41(17,"label",16),t.EFF(18,"Narration:"),t.k0s(),t.nrm(19,"textarea",57)(20,"hr"),t.j41(21,"label",24),t.EFF(22,"Amount:"),t.k0s(),t.j41(23,"input",25),t.bIt("change",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateVoucherAmount())}),t.k0s(),t.j41(24,"div",26),t.EFF(25,"Totals:"),t.k0s(),t.j41(26,"span",27),t.EFF(27,"DR"),t.k0s(),t.j41(28,"div",28),t.EFF(29),t.k0s(),t.j41(30,"span",27),t.EFF(31,"CR"),t.k0s(),t.j41(32,"div",28),t.EFF(33),t.k0s(),t.j41(34,"span",27),t.EFF(35,"DR/CR Diff"),t.k0s(),t.j41(36,"div",29),t.EFF(37),t.k0s(),t.DNE(38,Ut,2,0,"div",30),t.nrm(39,"hr",58),t.j41(40,"label",59),t.EFF(41,"Date"),t.k0s(),t.j41(42,"label",60),t.EFF(43,"Account"),t.k0s(),t.j41(44,"label",33),t.EFF(45,"Debit"),t.k0s(),t.j41(46,"label",33),t.EFF(47,"Credit"),t.k0s(),t.j41(48,"label",32),t.EFF(49,"Narration"),t.k0s(),t.j41(50,"label",34),t.EFF(51,"Dr Approved"),t.k0s(),t.j41(52,"label",35),t.EFF(53,"by / on"),t.k0s(),t.nrm(54,"br"),t.j41(55,"div",37),t.DNE(56,Xt,12,9,"div",38),t.k0s(),t.nrm(57,"br")(58,"hr"),t.k0s()}if(2&o){const e=t.XpG(2);t.Y8G("formGroup",e.form),t.R7$(2),t.JRh(null==e.user?null:e.user.employer),t.R7$(4),t.Y8G("label","Voucher No"),t.R7$(3),t.Y8G("minDate",e.minTransDate)("maxDate",e.maxTransDate)("bsValue",e.bsValue)("bsConfig",t.lJ4(14,Y)),t.R7$(6),t.JRh(e.type),t.R7$(1),t.Y8G("ngIf",e.coas),t.R7$(13),t.JRh(e.totalAmountDR),t.R7$(4),t.JRh(e.totalAmountCR),t.R7$(4),t.SpI("",e.iDiff," "),t.R7$(1),t.Y8G("ngIf",0!==e.voucherAmount&&(e.totalAmountDR!==e.voucherAmount||e.totalAmountCR!==e.voucherAmount)),t.R7$(18),t.Y8G("ngForOf",e.voucherEntries.controls)}}function Lt(o,a){if(1&o&&(t.j41(0,"div",53)(1,"div",54),t.EFF(2),t.k0s(),t.DNE(3,Yt,59,15,"form",10),t.k0s()),2&o){const e=t.XpG();t.R7$(2),t.Lme(" ",null==e.user?null:e.user.employer," ",null==e.voucher?null:e.voucher.section," "),t.R7$(1),t.Y8G("ngIf",e.voucher)}}let zt=(()=>{class o{constructor(e,n,i,r,u,N,A,O,y,Zt){this.service=e,this.coaService=n,this.fileService=i,this.activatedRoute=r,this.router=u,this.toastr=N,this.fb=A,this.modalService=O,this.confirmService=y,this.accountService=Zt,this.onUploadFinished=new t.bkB,this.entries=[],this.coas=[],this.emps=[],this.selectedAccountId=0,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.minTransDate=new Date,this.maxTransDate=new Date,this.returnUrl="/finance",this.routeId="",this.routeResumeId="",this.type="",this.isAddMode=!1,this.isEditable=!1,this.loading=!1,this.submitted=!1,this.bolNavigationExtras=!1,this.totalAmountDR=0,this.totalAmountCR=0,this.voucherAmount=0,this.diff="",this.iDiff=0,this.form=new d.gE({}),this.suggestedDefaultCoaIdDR=0,this.suggestedDefaultCoaIdCR=0,this.suggestedDefaultAmountDR=0,this.suggestedDefaultAmountCR=0,this.attachmentid=0,this.fileAttachments=[],this.voucherFiles=[],this.progress=0,this.isMultipleUploaded=!1,this.isSingleUploaded=!1,this.urlAfterUpload="",this.percentUploaded=[0],this.lastTimeCalled=Date.now(),this.isPrintPDF=!1,this.printtitle="",this.uploadFileAndFormData=()=>{if(this.form.invalid)return void this.toastr.warning("Invalid form");var L=Date.now();if(L<this.lastTimeCalled+28e3)return void console.log("repeat call dialowed at",L," last time called at",this.lastTimeCalled);this.lastTimeCalled=Date.now();const S=new FormData;S.append("data",JSON.stringify(this.form.value)),0===this.voucher.id?this.service.insertVoucherWithUploads(S).subscribe({next:f=>{f.type===s.hv.UploadProgress?this.progress=Math.round(100*f.loaded/f.total):f.type===s.hv.Response&&(this.form.get("voucherNo")?.setValue(f.body.returnInt),this.returnToCaller(),this.toastr.success("the Voucher is created, and assigned Voucher No. "+f.body.returnInt))},error:f=>console.log(f)}):this.service.updateWithFiles(S).subscribe({next:f=>{f.type===s.hv.UploadProgress?this.progress=Math.round(100*f.loaded/f.total):f.type===s.hv.Response&&(this.toastr.success("Voucher Updated and Files uploaded"),this.onUploadFinished.emit(f.body),this.returnToCaller())},error:f=>console.log(f)})},this.uploadFinished=M=>{this.response=M},this.routeId=this.activatedRoute.snapshot.params.id,null==this.routeId&&(this.routeId=""),""===this.routeId&&(this.isAddMode=!0);let C=this.router.getCurrentNavigation();C?.extras&&C.extras.state&&(this.bolNavigationExtras=!0,C.extras.state.userObject&&(this.user=C.extras.state.userObject),C.extras.state.returnUrl&&(this.returnUrl=C.extras.state.returnUrl),C.extras.state.readonly&&(this.isEditable=!1),this.isEditable=C.extras.state.toedit||this.isAddMode),this.minDate.setDate(this.minDate.getDate()-365),this.maxDate.setDate(this.maxDate.getDate()+365),this.minTransDate.setDate(this.minTransDate.getDate()-365)}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.coas=e.coas,this.voucher=e.voucher}),null!=this.voucher&&(this.createForm(this.voucher),this.recalculateTotal()),this.user||this.accountService.currentUser$.pipe((0,m.T)(e=>this.user=e)),console.log("user:",this.user)}createForm(e){this.form=this.fb.group({id:e.id,section:[e.section,d.k0.required],divn:[e.divn,[d.k0.maxLength(1),d.k0.required]],voucherNo:[e.voucherNo,d.k0.required],voucherDated:[e.voucherDated,d.k0.required],coaId:[e.coaId,[d.k0.required,d.k0.min(1)]],amount:[e.amount,[d.k0.required,d.k0.min(1)]],totalAmountDR:[this.totalAmountDR],narration:e.narration,username:e.username,voucherEntries:this.fb.array(e.voucherEntries.map(n=>this.fb.group({id:n.id,financeVoucherId:n.id,coaId:[n.coaId,d.k0.required],accountName:n.accountName,transDate:n.transDate,dr:n.dr,cr:n.cr,narration:n.narration,drEntryApproved:[n.drEntryApproved],drEntryApprovedOn:n.drEntryApprovedOn,drEntryApprovedByUsername:n.drEntryApprovedByUsername})))}),this.voucherAmount=e.amount}matchValues(e){return n=>n.value===n.parent?.get(e)?.value?null:{isMatching:!0}}get voucherEntries(){return this.form.get("voucherEntries")}addVoucherEntry(){void 0!==this.type&&""!==this.type?(0==this.voucherEntries.length?(this.setDefaultEntryValues(),this.voucherEntries.push(this.newDRVoucherEntry()),this.voucherEntries.push(this.newCRVoucherEntry())):(this.iDiff=-this.totalAmountCR+this.form.get("amount")?.value,this.iDiff<0?(this.suggestedDefaultAmountDR=Math.abs(this.iDiff),this.voucherEntries.push(this.newDRVoucherEntry())):(this.suggestedDefaultAmountCR=Math.abs(this.iDiff),this.suggestedDefaultCoaIdCR=this.form.get("coaId")?.value,this.voucherEntries.push(this.newCRVoucherEntry()))),this.recalculateTotal()):this.toastr.warning("Please select the option of Debit or Credit Voucher","invalid input")}newDRVoucherEntry(){return this.fb.group({id:0,financeVoucherId:void 0===this.voucher?.id?0:this.voucher.id,transDate:new Date,coaId:["CR"===this.type?null:this.suggestedDefaultCoaIdDR,d.k0.required],accountName:"",dr:this.suggestedDefaultAmountDR,cr:0,narration:"",drEntryApproved:!1,drEntryApprovedOn:new Date,drEntryApprovedByUsername:this.user?.userName})}newCRVoucherEntry(){var e=this.form.get("coaId")?.value;return this.fb.group({id:0,financeVoucherId:void 0===this.voucher?.id?0:this.voucher.id,transDate:new Date,coaId:["DR"===this.type?null:e??this.suggestedDefaultCoaIdCR,d.k0.required],accountName:"",cr:this.suggestedDefaultAmountCR??0,dr:0,narration:"",drEntryApproved:!1,drEntryApprovedOn:new Date,drEntryApprovedByUsername:this.user?.userName})}removeVoucherEntry(e){this.voucherEntries.removeAt(e),this.voucherEntries.markAsDirty(),this.voucherEntries.markAsTouched(),this.recalculateTotal()}recalculateTotal(){this.totalAmountDR=+this.voucherEntries.value.map(n=>n.dr).reduce((n,i)=>n+i,0),this.totalAmountCR=+this.voucherEntries.value.map(n=>n.cr).reduce((n,i)=>n+i,0);var e=this.totalAmountDR-this.totalAmountCR;this.diff=Math.abs(e).toString(),this.diff+=e>0?" DR":" CR",this.iDiff=e}updateVoucherAmount(){this.totalAmountCR=this.form.get("amount")?.value,this.recalculateTotal()}setDefaultEntryValues(){var e=this.form.get("coaId").value,n=+this.form.get("amount").value,i=this.coas.filter(r=>r.id==e).map(r=>r.accountClass);"candidate"===(this.suggestedDefaultAmountCR=n,this.suggestedDefaultAmountDR=n,i[0])?"CR"===this.type?(this.suggestedDefaultCoaIdCR=e,this.suggestedDefaultCoaIdDR=20):(this.suggestedDefaultCoaIdDR=e,this.suggestedDefaultCoaIdCR=20):"CR"===this.type?this.suggestedDefaultCoaIdCR=e:this.suggestedDefaultCoaIdDR=e}deleteVoucher(){const e=this.service.deleteVoucher(this.voucher.id);this.confirmService.confirm("confirm Delete","Are you sure you want to delete this Voucher, along with all its contents?").pipe((0,T.p)(i=>i),(0,D.n)(()=>e)).subscribe(i=>{i?(this.toastr.success("Voucher deleted","deletion successful"),this.recalculateTotal()):this.toastr.error("Error in deleting the checklist","failed to delete")})}returnToCaller(){this.isPrintPDF?this.isPrintPDF=!1:this.router.navigateByUrl("/finance/voucherlist")}addNewCOA(){var e=new yt.u;this.bsModalRef=this.modalService.show(Dt.e,{class:"modal-dialog-centered modal-md",initialState:{title:"add a new Chart Of Account",coa:e}}),this.bsModalRef.content.editCOAEvent.pipe((0,D.n)(i=>this.coaService.addNewCOA(i).pipe((0,F.W)(r=>(console.log("Error for coaService.AddNewCOA",r),(0,g.of)())))),(0,F.W)(i=>(0,g.of)())).subscribe(i=>{this.coas.push(i)})}updateVoucher(){this.form.invalid?this.toastr.warning("Invalid form"):(this.voucherEntries.value.forEach(e=>{null===e.cr&&(e.cr=0),null!==e.coaId&&0!==e.coaId||this.toastr.warning("One of the Accounts not selected","invalid input")}),0===this.form.get("id")?.value?this.service.saveNewVoucher(this.form.value).subscribe({next:e=>{null!==e?(this.toastr.success("new Voucher updated"),this.form.get("voucherNo")?.setValue(e.voucherNo)):this.toastr.warning("Failed to insert the new voucher","Failure")}}):this.service.updateVoucher(this.form.value).subscribe({next:e=>{e?(this.toastr.success("Voucher updated","success"),this.router.navigateByUrl(this.returnUrl)):this.toastr.warning("Failed to update the voucher","failure")},error:e=>this.toastr.error(e.error?.details,"Error encountered")}),this.voucher&&(this.voucherAmount=this.voucher.amount))}generatePDF(){this.isPrintPDF=!0,this.printtitle="Finance Voucher No. "+this.voucher?.voucherNo}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(_),t.rXU(j.x),t.rXU(kt.E),t.rXU(v.nX),t.rXU(v.Ix),t.rXU(R.tw),t.rXU(d.ok),t.rXU(It.I8),t.rXU(V.G),t.rXU($.D))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-voucher-edit"]],outputs:{onUploadFinished:"onUploadFinished"},decls:25,vars:9,consts:[[2,"display","inline-block","font-weight","bold","font-size","x-large","margin-left","15px"],[2,"margin-left","15px","display","inline-block","font-weight","bold"],["type","radio","value","DR","id","Type",1,"mx-2",3,"ngModel","ngModelChange"],["type","radio","value","CR","id","Type",1,"mx-2",3,"ngModel","ngModelChange"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","displays the voucher in pdf format and enables printing",2,"display","inline-block","margin-left","100px",3,"previewOnly","useExistingCss","disabled","click"],["type","button","title","update this voucher",1,"btn",3,"disabled","click"],["type","button","title","delete this Voucher","disabled","voucher.Id===0",1,"btn","mx-5","red",3,"click"],["type","button","title","return",1,"btn",3,"click"],[4,"ngIf"],["id","print-section",4,"ngIf"],["autocomplete","off","style","margin-left: 15px;",3,"formGroup",4,"ngIf"],["autocomplete","off",2,"margin-left","15px",3,"formGroup"],[1,"lbl","w100"],["formControlName","section",1,"stdd","w150",3,"label"],["formControlName","divn",1,"stdd","w100","bgcolor",3,"label"],["formControlName","voucherNo",1,"stdd","w100",3,"label"],[1,"stdd","w100","tAlignRight"],["type","text","placeholder","Voucher dated","formControlName","voucherDated","bsDatepicker","","autocomplete","off",2,"display","inline-block","width","125px","font-size","small",3,"minDate","maxDate","bsValue","bsConfig"],["dp","bsDatepicker"],[1,"lbl","w100",2,"margin-top","2px"],["class","stdd w250","name","accountnm","bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",3,"items",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["title","insert a new Chart of Account","disabled","isAddMode",1,"btn",3,"click"],["formControlName","narration","cols","50","rows","2",1,"stdd"],[1,"lbl","w100","my-0"],["type","number","formControlName","amount",1,"stdd","w200",3,"change"],[1,"stdd","b",2,"margin-left","50px"],[1,"stdd"],[1,"stdd","w75",2,"text-align","right","border","solid"],[1,"stdd","w100",2,"text-align","right","border","solid"],["class","stdd",4,"ngIf"],[1,"stdd","w90","b","ml15"],[1,"stdd","w300","b"],[1,"stdd","w75","b"],[1,"stdd2","w60","b"],[1,"stdd2","w50","b"],["type","button","title","add a new voucher entry",1,"btn",3,"click"],["formArrayName","voucherEntries",1,"my-1","px-0","smallFont","height10px"],[4,"ngFor","ngForOf"],["name","accountnm","bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",1,"stdd","w250",3,"items"],[1,"invalid-feedback"],[1,"my-0"],[1,"my-0",3,"formGroupName"],["type","text","placeholder","Date","formControlName","transDate","bsDatepicker","",1,"stdd","w90","ml15",2,"font-size","x-small",3,"bsValue","bsConfig"],["class","stdd w300 bgcolor","style","font-size: x-small;","bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",3,"items",4,"ngIf"],["type","number","formControlName","dr",1,"stdd","w75","tAlignRight",3,"change"],["type","number","formControlName","cr",1,"stdd","w75","tAlignRight",3,"change"],["type","text","formControlName","narration",1,"stdd","w300"],["type","checkbox","formControlName","drEntryApproved",1,"stdd2",2,"border-color","black"],["type","text","formControlName","drEntryApprovedByUsername",1,"stdd2","w75"],["type","text","placeholder","Date","formControlName","drEntryApprovedOn","bsDatepicker","",1,"stdd2","w75",3,"bsValue","bsConfig"],["type","button",1,"stdd","red","ml-2","fa","fa-trash",3,"click"],["bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",1,"stdd","w300","bgcolor",2,"font-size","x-small",3,"items"],["id","print-section"],[2,"display","inline-block","font-size","large","font-weight","bold"],[1,"title",2,"display","inline-block","font-size","large","font-weight","bold"],["type","text","placeholder","Voucher dated","formControlName","voucherDated","bsDatepicker","","autocomplete","off",1,"stdd","w150",3,"minDate","maxDate","bsValue","bsConfig"],["formControlName","narration","cols","50","rows","2",1,"stdd","mb-2"],[2,"margin-top","3px"],[1,"stdd","w90","b"],[1,"stdd","w250","b"],["type","text","placeholder","Date","formControlName","transDate","bsDatepicker","",1,"stdd","w90",2,"font-size","smaller",3,"bsValue","bsConfig"],["class","stdd w250 bgcolor","style","font-size: smaller;","bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",3,"items",4,"ngIf"],["bindLabel","accountName","bindValue","id","labelForId","coaId","placeholder","Select Account","clearAllText","Clear","formControlName","coaId",1,"stdd","w250","bgcolor",2,"font-size","smaller",3,"items"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.j41(2,"label",1),t.EFF(3,"Voucher Type: "),t.k0s(),t.j41(4,"input",2),t.bIt("ngModelChange",function(u){return i.type=u}),t.k0s(),t.j41(5,"span"),t.EFF(6,"Debit"),t.k0s(),t.j41(7,"input",3),t.bIt("ngModelChange",function(u){return i.type=u}),t.k0s(),t.j41(8,"span"),t.EFF(9,"Credit"),t.k0s(),t.j41(10,"button",4),t.bIt("click",function(){return i.generatePDF()}),t.j41(11,"mat-icon"),t.EFF(12,"print"),t.k0s()(),t.j41(13,"button",5),t.bIt("click",function(){return i.updateVoucher()}),t.j41(14,"mat-icon"),t.EFF(15,"save"),t.k0s()(),t.j41(16,"button",6),t.bIt("click",function(){return i.deleteVoucher()}),t.j41(17,"mat-icon"),t.EFF(18,"delete"),t.k0s()(),t.j41(19,"button",7),t.bIt("click",function(){return i.returnToCaller()}),t.j41(20,"mat-icon"),t.EFF(21,"cancel"),t.k0s()(),t.nrm(22,"br"),t.DNE(23,St,2,1,"div",8),t.DNE(24,Lt,4,3,"div",9)),2&n&&(t.R7$(1),t.SpI(" ",0===i.voucher.id?"Create new Finance Voucher":"Edit Finance Voucher","\n"),t.R7$(3),t.Y8G("ngModel",i.type),t.R7$(3),t.Y8G("ngModel",i.type),t.R7$(3),t.Y8G("previewOnly",!1)("useExistingCss",!0)("disabled",0!==i.voucherAmount&&(i.totalAmountDR!==i.voucherAmount||i.totalAmountCR!==i.voucherAmount)),t.R7$(3),t.Y8G("disabled",!i.form.dirty&&0!==i.voucherAmount&&0!==i.iDiff&&i.voucherAmount!==i.totalAmountDR),t.R7$(10),t.Y8G("ngIf",!i.isPrintPDF),t.R7$(1),t.Y8G("ngIf",i.isPrintPDF))},dependencies:[h.Sq,h.bT,B.pc,B.p0,d.qT,d.me,d.Q0,d.Zm,d.Fm,d.BC,d.cb,d.vS,d.j4,d.JD,d.$R,d.v8,Rt.vr,Pt.f,w.An,X.GV],styles:['.title[_ngcontent-%COMP%]{text-align:center;width:600px;font-size:larger;font-weight:700;display:inline-block}.ml15[_ngcontent-%COMP%]{margin-left:15px}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;vertical-align:top;font-size:smaller}.stdd2[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:x-small;vertical-align:top}.lbl[_ngcontent-%COMP%]{font-weight:700;padding-bottom:0;vertical-align:top;margin:0 2px;text-align:right}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.b[_ngcontent-%COMP%]{font-weight:700}.green[_ngcontent-%COMP%]{color:#006400}.w50[_ngcontent-%COMP%]{width:50px}.w60[_ngcontent-%COMP%]{width:60px}.w75[_ngcontent-%COMP%]{width:75px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w290[_ngcontent-%COMP%]{width:290px}.w300[_ngcontent-%COMP%]{width:300px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{appearance:none;margin:0}.footer[_ngcontent-%COMP%]{position:relative;vertical-align:bottom}.displaynone[_ngcontent-%COMP%]{display:none}.fontSmall[_ngcontent-%COMP%]{font-size:small}.height10px[_ngcontent-%COMP%]{height:10px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.geeen[_ngcontent-%COMP%]{color:green}.red[_ngcontent-%COMP%]{color:red}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:15px;height:15px;border:1px solid #fff;border-radius:50%;margin-right:5px;background-color:#c3b1b1;position:relative;vertical-align:middle}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:9px;height:9px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;vertical-align:middle;width:20px}.mL10[_ngcontent-%COMP%]{margin-left:10px}']})}return o})();class Jt{constructor(){this.section="",this.partyName="",this.id=0,this.divn="",this.coaId=0,this.accountName="",this.voucherNo=0,this.voucherDated=new Date,this.username="",this.reviewedByUsername="",this.reviewedOn=new Date,this.amount=0,this.narration="",this.voucherEntries=[],this.voucherAttachments=[]}}const Wt=[{path:"voucherlist",component:q},{path:"voucherEdit/:id",component:zt,resolve:{voucher:o=>{var a=o.paramMap.get("id");return""===a||null==a?(0,g.of)(null):"0"===a?(0,g.of)(new Jt):(0,t.WQX)(_).getVoucherFromId(+a)},coas:()=>(0,t.WQX)(j.x).getCoaList()}},{path:"coalist",component:et.h,data:{breadcrumb:{alias:"Chart of Account"}}},{path:"soa/:id/:fromDate/:uptoDate",resolve:{soa:o=>{var a=o.paramMap.get("id");if(""===a)return(0,g.of)(void 0);var e=o.paramMap.get("fromDate"),n=o.paramMap.get("uptoDate");return""===e||""===n?(0,g.of)(void 0):(0,t.WQX)(_).getStatementOfAccount(+a,e,n)}},component:vt,data:{breakcrumb:{alias:"statement of account"}}},{path:"receiptspendingconfirmation",resolve:{confirmationsPending:()=>(new k.u,(0,t.WQX)(U).getDebitApprovalsPending())},component:wt}];let Ht=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[h.MD,v.iI.forChild(Wt),v.iI]})}return o})();var Qt=c(9485);let Kt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[h.MD,Ht,Qt.G,w.m_,X.jN]})}return o})()},9726:(z,I,c)=>{c.d(I,{GV:()=>F,jN:()=>g});var h=c(7705);let v=(()=>{class p{nonce;_printStyle=[];_styleSheetFile="";constructor(t){this.nonce=t}setPrintStyle(t){this._printStyle=[];for(let s in t)t.hasOwnProperty(s)&&this._printStyle.push((s+JSON.stringify(t[s])).replace(/['"]+/g,""))}returnStyleValues(){return`<style${this.nonce?` nonce="${this.nonce}"`:""}> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}returnStyleSheetLinkTags(){return this._styleSheetFile}setStyleSheetFile(t){const s=function(l){return`<link rel="stylesheet" type="text/css" href="${l}">`};if(-1!==t.indexOf(",")){const l=t.split(",");this._styleSheetFile=l.map(m=>s(m)).join("")}else this._styleSheetFile=s(t)}updateInputDefaults(t){for(let s=0;s<t.length;s++){const l=t[s];l.defaultValue=l.value,l.checked&&(l.defaultChecked=!0)}}updateSelectDefaults(t){for(let s=0;s<t.length;s++){const l=t[s];l.options[l.selectedIndex].defaultSelected=!0}}updateTextAreaDefaults(t){for(let s=0;s<t.length;s++){const l=t[s];l.defaultValue=l.value}}canvasToImageHtml(t){return`<img src="${t.toDataURL()}" style="max-width: 100%;">`}updateCanvasToImage(t){for(let s=0;s<t.length;s++){const l=this.canvasToImageHtml(t[s]);t[s].insertAdjacentHTML("afterend",l),t[s].remove()}}getHtmlContents(t){const s=document.getElementById(t);if(!s)return null;const l=s.getElementsByTagName("input"),m=s.getElementsByTagName("select"),b=s.getElementsByTagName("textarea"),x=s.getElementsByTagName("canvas");return this.updateInputDefaults(l),this.updateSelectDefaults(m),this.updateTextAreaDefaults(b),this.updateCanvasToImage(x),s.innerHTML}getElementTag(t){const s=[],l=document.getElementsByTagName(t);for(let m=0;m<l.length;m++)s.push(l[m].outerHTML);return s.join("\r\n")}print(t){let s="",l="",m="top=0,left=0,height=auto,width=auto";const b=this.getElementTag("base");t.useExistingCss&&(s=this.getElementTag("style"),l=this.getElementTag("link")),t.openNewTab&&(m="");const x=this.getHtmlContents(t.printSectionId);if(!x)return void console.error(`Print section with id ${t.printSectionId} not found.`);const _=window.open("","_blank",m);_?(_.document.open(),_.document.write(`\n          <html>\n            <head>\n              <title>${t.printTitle?t.printTitle:""}</title>\n              ${b}\n              ${this.returnStyleValues()}\n              ${this.returnStyleSheetLinkTags()}\n              ${s}\n              ${l}\n            </head>\n            <body ${t.bodyClass?`class="${t.bodyClass}"`:""}>\n              ${x}\n              <script defer>\n                function triggerPrint(event) {\n                  window.removeEventListener('load', triggerPrint, false);\n                  ${t.previewOnly?"":`setTimeout(function() {\n                    closeWindow(window.print());\n                  }, ${t.printDelay});`}\n                }\n                function closeWindow(){\n                  ${t.closeWindow?"window.close();":""}\n                }\n                window.addEventListener('load', triggerPrint, false);\n              <\/script>\n            </body>\n          </html>`),_.document.close()):console.error("Could not open print window.")}static \u0275fac=function(s){return new(s||p)(h.KVO(h.BIS,8))};static \u0275prov=h.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})();class D{printSectionId="";printTitle="";useExistingCss=!1;bodyClass="";openNewTab=!1;previewOnly=!1;closeWindow=!0;printDelay=0;constructor(E){E&&Object.assign(this,E)}}let F=(()=>{class p extends v{printOptions=new D;set previewOnly(t){this.printOptions={...this.printOptions,previewOnly:t}}set printSectionId(t){this.printOptions={...this.printOptions,printSectionId:t}}set printTitle(t){this.printOptions={...this.printOptions,printTitle:t}}set useExistingCss(t){this.printOptions={...this.printOptions,useExistingCss:t}}set printDelay(t){this.printOptions={...this.printOptions,printDelay:t}}set closeWindow(t){this.printOptions={...this.printOptions,closeWindow:t}}set bodyClass(t){this.printOptions={...this.printOptions,bodyClass:t}}set openNewTab(t){this.printOptions={...this.printOptions,openNewTab:t}}set printStyle(t){super.setPrintStyle(t)}set styleSheetFile(t){super.setStyleSheetFile(t)}print(){super.print(this.printOptions)}static \u0275fac=function(){let t;return function(l){return(t||(t=h.xGo(p)))(l||p)}}();static \u0275dir=h.FsC({type:p,selectors:[["button","ngxPrint",""]],hostBindings:function(s,l){1&s&&h.bIt("click",function(){return l.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",closeWindow:"closeWindow",bodyClass:"bodyClass",openNewTab:"openNewTab",printStyle:"printStyle",styleSheetFile:"styleSheetFile"},standalone:!0,features:[h.Vt3]})}return p})(),g=(()=>{class p{static \u0275fac=function(s){return new(s||p)};static \u0275mod=h.$C({type:p});static \u0275inj=h.G2t({})}return p})()}}]);