"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[499],{109:(j,_,i)=>{i.d(_,{l:()=>t});class t{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},5333:(j,_,i)=>{i.d(_,{L:()=>t});class t{constructor(){this.id=0,this.professionName="",this.professionGroup="",this.search="",this.pageNumber=1,this.pageSize=20}}},5323:(j,_,i)=>{i.d(_,{M:()=>b});var t=i(2771),l=i(7673),R=i(6354),P=i(3587),g=i(6220),E=i(5333),f=i(7705),e=i(1626);let b=(()=>{class M{constructor(p){this.http=p,this.apiUrl=P.c.apiUrl,this.currentUserSource=new t.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.mParams=new E.L,this.professions=[],this.cache=new Map}getCategoryList(){return this.http.get(this.apiUrl+"Profession/professionlist")}getVendorFacilityList(){return this.http.get(this.apiUrl+"masters/VendorFacilityList")}getCategoriesPaged(p,n=!0){if(n){const a=this.cache.get(Object.values(p).join("-"));if(a)return(0,l.of)(a)}else this.cache=new Map;let c=(0,g.cg)(p);return(0,g.f8)(this.apiUrl+"Profession",c,this.http).pipe((0,R.T)(a=>(this.cache.set(Object.values(p).join("-"),a),a)))}getCategory(p){let n;return this.cache.forEach(c=>{n=c.find(a=>a.id===p)}),n?(0,l.of)(n):this.http.get(this.apiUrl+"Profession/profession/"+p)}deleteCategory(p){return this.http.delete(this.apiUrl+"Profession/deletebyid/"+p)}updateCategory(p){return 0===p.id?this.http.post(this.apiUrl+"Profession/add",p):this.http.put(this.apiUrl+"Profession/edit",p)}copyProfessionXLSFileToDB(p){return this.http.post(this.apiUrl+"ProfessionUpload/professionsFromXLS",p)}copyCandidateXLSFileToDB(p){return this.http.post(this.apiUrl+"FileUpload/candidateXLS",p)}setParams(p){this.mParams=p}getParams(){return this.mParams}static#e=this.\u0275fac=function(n){return new(n||M)(f.KVO(e.Qq))};static#t=this.\u0275prov=f.jDH({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},1767:(j,_,i)=>{i.d(_,{z:()=>u});var t=i(2771),l=i(6697),R=i(7673),P=i(6354);class g{constructor(){this.candidateId=0,this.orderItemId=0,this.orderId=0,this.pageNumber=0,this.pageSize=10}}var E=i(3587),f=i(1626),e=i(6220),b=i(7705),M=i(1822);let u=(()=>{class n{constructor(a,v){this.accountService=a,this.http=v,this.apiUrl=E.c.apiUrl,this.currentUserSource=new t.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.qParams=new g,this.routeId="",this.cache=new Map,this.accountService.currentUser$.pipe((0,l.s)(1)).subscribe(m=>this.user=m)}candidateAssessments(a){const v=this.cache.get(Object.values(a).join("-"));if(v)return(0,R.of)(v);let m=function p(n){let c=new f.Nl;return c=c.append("pageNumber",n.pageNumber),c=c.append("pageSize",n.pageSize),c=c.append("orderId",n.orderId.toString()),c=c.append("orderItemId",n.orderItemId.toString()),c=c.append("candidateId",n.candidateId.toString()),c}(a);return(0,e.f8)(this.apiUrl+"CandidateAssessment/assessmentspaged",m,this.http).pipe((0,P.T)(x=>(this.cache.set(Object.values(a).join("-"),x),x)))}updateCandidateAssessment(a){return this.http.put(this.apiUrl+"CandidateAssessment/assessment",a)}saveNewCandidateAssessment(a){return this.http.post(this.apiUrl+"CandidateAssessment/assessment",a)}deleteCandidateAssessment(a){return this.http.delete(this.apiUrl+"CandidateAssessment/assessment/"+a)}getCandidateChecklistAndAssessment(a,v){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentandchecklist/"+a+"/"+v).pipe((0,P.T)(m=>m))}getCandidateAssessmentById(a){return this.http.get(this.apiUrl+"CandidateAssessment/assessmentById/"+a)}getCandidateAssessmentDto(a,v){return this.http.get(this.apiUrl+"CandidateAssessment/candidateAssessmentDto/"+a+"/"+v)}insertNewCVAssessment(a,v,m){return this.http.post(this.apiUrl+"CandidateAssessment/assess/"+a+"/"+v+"/"+m,{})}deleteAssessment(a){return this.http.delete(this.apiUrl+"candidateassessment/assessment/"+a)}generateCVAssessment(a,v){return this.http.get(this.apiUrl+"CandidateAssessment/generate/"+a+"/"+v)}categoriesOfCVsAvailableToRefer(){return this.http.get(this.apiUrl+"CandidateAssessment/categoryheaders")}static#e=this.\u0275fac=function(v){return new(v||n)(b.KVO(M.D),b.KVO(f.Qq))};static#t=this.\u0275prov=b.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},8028:(j,_,i)=>{i.d(_,{y:()=>p});var t=i(2771),l=i(6697),R=i(7673),P=i(6354),g=i(3587),E=i(109),f=i(6220),e=i(7705),b=i(5743),M=i(1822),u=i(1626);let p=(()=>{class n{constructor(a,v,m){this.activatedRoute=a,this.accountService=v,this.http=m,this.apiUrl=g.c.apiUrl,this.currentUserSource=new t.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new E.l,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,l.s)(1)).subscribe(x=>this.user=x)}referCVs(a){return this.http.post(this.apiUrl+"CVRef",a)}referredCVsPaginated(a=!1){if(a){const m=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(m)return(0,R.of)(m)}else this.cacheReferred=new Map;let v=(0,f.vn)(this.cvRefParams);return(0,f.f8)(this.apiUrl+"cvref/cvsreferred",v,this.http).pipe((0,P.T)(m=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),m),m)))}deleteCVRef(a){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+a)}getCVRefWithDeploys(a){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+a)}getCVRefWithCVRefId(a){return this.http.get(this.apiUrl+"CVRef/cvref/"+a)}registerSelectionDecisions(a){return this.http.post(this.apiUrl+"Selection",a)}getCVReferredOrderNosDto(a){return this.http.get(this.apiUrl+"CVRef/headers/"+a)}downloadCV(a){return this.http.get(this.apiUrl+"FileUpload/downloadcv/"+a,{reportProgress:!0,responseType:"blob"})}setParams(a){this.cvRefParams=a}getParams(){return this.cvRefParams}static#e=this.\u0275fac=function(v){return new(v||n)(e.KVO(b.nX),e.KVO(M.D),e.KVO(u.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},6341:(j,_,i)=>{i.d(_,{Z:()=>P});var t=i(3587),l=i(7705),R=i(1626);let P=(()=>{class g{constructor(f){this.http=f,this.apiUrl=t.c.apiUrl}downloadFile(f){return this.http.get(this.apiUrl+"candidate/downloadfile/"+f,{responseType:"blob"})}downloadProspectiveFile(f){return this.http.get(this.apiUrl+"FileUpload/downloadprospectivefile/"+f)}static#e=this.\u0275fac=function(e){return new(e||g)(l.KVO(R.Qq))};static#t=this.\u0275prov=l.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},1555:(j,_,i)=>{i.d(_,{U:()=>M});var t=i(7705),l=i(9417),R=i(779),P=i(1767),g=i(5743),E=i(177);function f(u,p){1&u&&(t.j41(0,"div"),t.EFF(1," No assessment record available for the candidate against the given Order item "),t.k0s())}function e(u,p){if(1&u&&(t.j41(0,"div")(1,"div",21),t.EFF(2),t.k0s(),t.j41(3,"div",21),t.EFF(4),t.k0s(),t.j41(5,"textarea",22),t.EFF(6),t.k0s(),t.j41(7,"div",23),t.EFF(8),t.k0s(),t.j41(9,"div",23),t.EFF(10),t.k0s()()),2&u){const n=p.$implicit;t.R7$(2),t.JRh(n.assessed?"Y":"N"),t.R7$(2),t.JRh(n.questionNo),t.R7$(2),t.JRh(n.question),t.R7$(2),t.JRh(n.maxPoints),t.R7$(2),t.JRh(n.points)}}function b(u,p){if(1&u){const n=t.RV6();t.j41(0,"form",7),t.bIt("ngSubmit",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.form.valid)}),t.j41(1,"div",8)(2,"label",9),t.EFF(3,"Application No"),t.k0s(),t.j41(4,"div",10),t.EFF(5),t.k0s(),t.j41(6,"label",11),t.EFF(7,"Candidate Name"),t.k0s(),t.j41(8,"div",12),t.EFF(9),t.k0s(),t.nrm(10,"br"),t.j41(11,"label",9),t.EFF(12,"Customer"),t.k0s(),t.j41(13,"div",12),t.EFF(14),t.k0s(),t.j41(15,"label",9),t.EFF(16,"Category Name"),t.k0s(),t.j41(17,"div",12),t.EFF(18),t.k0s(),t.nrm(19,"br"),t.j41(20,"label",9),t.EFF(21,"Assessed On"),t.k0s(),t.j41(22,"div",13),t.EFF(23),t.nI1(24,"date"),t.k0s(),t.j41(25,"label",14),t.EFF(26,"Grade:"),t.k0s(),t.j41(27,"div",10),t.EFF(28),t.k0s(),t.nrm(29,"hr",15),t.j41(30,"label",16),t.EFF(31,"Ass'd"),t.k0s(),t.j41(32,"label",16),t.EFF(33,"Q No."),t.k0s(),t.j41(34,"label",17),t.EFF(35,"Question"),t.k0s(),t.j41(36,"label",16),t.EFF(37,"Max"),t.nrm(38,"br"),t.EFF(39,"Points"),t.k0s(),t.j41(40,"label",16),t.EFF(41,"Points"),t.k0s(),t.nrm(42,"hr",15),t.DNE(43,e,11,5,"div",18),t.j41(44,"label",19),t.EFF(45,"Total"),t.k0s(),t.j41(46,"div",20),t.EFF(47),t.k0s(),t.j41(48,"div",20),t.EFF(49),t.k0s()()()}if(2&u){const n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(5),t.JRh(n.assess.applicationNo),t.R7$(4),t.JRh(n.assess.candidateName),t.R7$(5),t.SpI(" ",n.assess.customerName,""),t.R7$(4),t.SpI(" ",n.assess.professionName,""),t.R7$(5),t.JRh(t.i5U(24,10,n.assess.assessedOn,"dd-MMM-yy")),t.R7$(5),t.JRh(n.assess.assessResult),t.R7$(15),t.Y8G("ngForOf",n.assess.assessmentItemsDto),t.R7$(4),t.JRh(n.totalMaxPoints),t.R7$(2),t.JRh(n.totalPoints)}}let M=(()=>{class u{constructor(n,c,a,v,m){this.bsModalRef=n,this.assessService=c,this.activatedRoute=a,this.fb=v,this.router=m,this.candAssessEvent=new t.bkB,this.totalPoints=0,this.totalMaxPoints=0,this.form=new l.gE({})}ngOnInit(){void 0!==this.assess&&(this.InitializeFormArray(this.assess),this.calculateTotalPoints())}InitializeFormArray(n){this.form=this.fb.group({applicationNo:[n.applicationNo,l.k0.required],candidateId:[n.candidateId,l.k0.required],candidateName:[n.candidateName,l.k0.required],customerName:[n.customerName,l.k0.required],orderItemId:[n.orderItemId,l.k0.required],categoryRef:[n.categoryRef,l.k0.required],orderId:[n.orderId,l.k0.required],requireInternalReview:n.requireInternalReview,assessedByUsername:n.assessedByUsername,professionName:[n.professionName,l.k0.required],assessResult:[n.assessResult,l.k0.required],assessedOn:n.assessedOn,checklistHRId:n.checklistHRId,checklistedByName:n.checklistedByName,items:this.fb.array(n.assessmentItemsDto.map(c=>this.fb.group({id:c.id,candidateAssessmentId:c.candidateAssessmentId,questionNo:[c.questionNo,l.k0.required],question:[c.question,l.k0.required],assessed:[c.assessed],maxPoints:[c.maxPoints,l.k0.required],points:[c.points],remarks:c.remarks})))})}get items(){return this.form.get("items")}close(){this.candAssessEvent.emit(this.assess),this.bsModalRef.hide()}calculateTotalPoints(){this.totalMaxPoints=this.items.value.map(n=>n.maxPoints).reduce((n,c)=>n+c,0),this.totalPoints=this.items.value.map(n=>n.points).reduce((n,c)=>n+c,0)}static#e=this.\u0275fac=function(c){return new(c||u)(t.rXU(R.Y$),t.rXU(P.z),t.rXU(g.nX),t.rXU(l.ok),t.rXU(g.Ix))};static#t=this.\u0275cmp=t.VBU({type:u,selectors:[["app-cv-assess-modal"]],outputs:{candAssessEvent:"candAssessEvent"},decls:8,vars:2,consts:[[1,"modal-header"],[1,"stdd","b"],["type","button",1,"pull-right","fa","fa-window-close",3,"click"],[1,"modal-body"],[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"stdd","mt-2"],[1,"stdd","w100"],[1,"stdd","w50","b"],[1,"stdd","w125"],[1,"stdd","w250","b"],[1,"stdd","w125","b"],[1,"stdd","w50"],[1,"b","my-0","py-0"],[1,"stdd","w50","vAlignM"],[1,"stdd","w425","vAlignM"],[4,"ngFor","ngForOf"],[1,"stdd","w50","b",2,"margin-left","465px"],[1,"stdd","w50","alignR","b"],[1,"stdd","w50","alignC"],["rows","1","cols","60","name","question","id","question",1,"stdd"],[1,"stdd","w50","alignR"]],template:function(c,a){1&c&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2,"Candidate Assessment"),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return a.bsModalRef.hide()}),t.k0s()(),t.j41(4,"div",3),t.DNE(5,f,2,0,"div",4),t.DNE(6,b,50,13,"form",5),t.k0s(),t.nrm(7,"div",6)),2&c&&(t.R7$(5),t.Y8G("ngIf",!a.assess),t.R7$(1),t.Y8G("ngIf",a.assess))},dependencies:[E.Sq,E.bT,l.qT,l.cb,l.j4,E.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px}.alignR[_ngcontent-%COMP%]{text-align:right}.alignC[_ngcontent-%COMP%]{text-align:center}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w250[_ngcontent-%COMP%]{width:250px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w425[_ngcontent-%COMP%]{width:420px}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return u})()},9173:(j,_,i)=>{i.d(_,{H:()=>Z});var t=i(5964),l=i(5558),R=i(9437),P=i(7673),g=i(8141),E=i(109),f=i(1555),e=i(7705),b=i(5743),M=i(8028),u=i(8256),p=i(779),n=i(1767),c=i(6341),a=i(778),v=i(177),m=i(9417),x=i(3400),w=i(2510),D=i(9213),y=i(9726);function N(d,C){if(1&d){const s=e.RV6();e.j41(0,"input",12),e.bIt("change",function(){e.eBV(s);const r=e.XpG(2);return e.Njj(r.CVChecked())}),e.k0s()}if(2&d){const s=e.XpG(2);e.Y8G("checked",s.cv.checked)}}function U(d,C){if(1&d&&(e.j41(0,"div",7),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&d){const s=e.XpG(2);e.R7$(1),e.JRh(e.i5U(2,1,s.cv.selectionStatusDate,"dd-MMM-yy"))}}function T(d,C){1&d&&(e.j41(0,"div",13),e.EFF(1,"--"),e.k0s())}function A(d,C){if(1&d){const s=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(s);const r=e.XpG(2);return e.Njj(r.deleteClicked(r.cv.id))}),e.k0s()}}function S(d,C){if(1&d){const s=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(s);const r=e.XpG(2);return e.Njj(r.download(r.cv.candidateId))}),e.k0s()}}function V(d,C){if(1&d&&(e.j41(0,"div",1),e.DNE(1,N,1,1,"input",2),e.j41(2,"div",3),e.EFF(3),e.k0s(),e.j41(4,"div",4),e.EFF(5),e.k0s(),e.j41(6,"div",5),e.EFF(7),e.k0s(),e.j41(8,"div",6),e.EFF(9),e.k0s(),e.j41(10,"div",7),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",7),e.EFF(14),e.k0s(),e.DNE(15,U,3,4,"div",8),e.DNE(16,T,2,0,"div",9),e.DNE(17,A,1,0,"button",10),e.DNE(18,S,1,0,"button",11),e.k0s()),2&d){const s=e.XpG();e.R7$(1),e.Y8G("ngIf",s.isPrintPdf),e.R7$(2),e.JRh(s.cv.applicationNo),e.R7$(1),e.Mz_("routerLink","/candidate/historyfromcvid/",s.cv.candidateId,""),e.R7$(1),e.JRh(s.cv.candidateName),e.R7$(2),e.JRh(s.cv.categoryRefAndName),e.R7$(2),e.JRh(s.cv.customerName),e.R7$(2),e.JRh(e.i5U(12,12,s.cv.referredOn,"dd-MMM-yy")),e.R7$(3),e.JRh(s.cv.selectionStatus),e.R7$(1),e.Y8G("ngIf",s.shouldDisplayDate(s.cv.selectionStatusDate)),e.R7$(1),e.Y8G("ngIf",!s.shouldDisplayDate(s.cv.selectionStatusDate)),e.R7$(1),e.Y8G("ngIf",!s.isPrintPdf),e.R7$(1),e.Y8G("ngIf",!s.isPrintPdf)}}let B=(()=>{class d{constructor(){this.isPrintPdf=!1,this.msgEvent=new e.bkB,this.downloadEvent=new e.bkB,this.cvAssessEvent=new e.bkB,this.cvCheckedEvent=new e.bkB,this.deleteEvent=new e.bkB,this.currentId=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(s){return s.stopPropagation(),this.xPosTabMenu=s.clientX,this.yPosTabMenu=s.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(s){this.downloadEvent.emit(s)}deleteClicked(s){this.deleteEvent.emit(s)}onClickLoadDocument(s){this.msgEvent.emit(s)}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(s){this.currentId=s}showhistory(s){this.msgEvent.emit(s)}CVChecked(){this.cvCheckedEvent.emit(this.cv)}shouldDisplayDate(s){return new Date(s).getFullYear()>2e3}static#e=this.\u0275fac=function(o){return new(o||d)};static#t=this.\u0275cmp=e.VBU({type:d,selectors:[["app-cvreferred-line"]],inputs:{cv:"cv",isPrintPdf:"isPrintPdf"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",deleteEvent:"deleteEvent"},decls:1,vars:1,consts:[["class","stdd row","style","margin-left: 75px; margin-top: 0px; margin-bottom: 0px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","75px","margin-top","0px","margin-bottom","0px"],["type","checkbox","class","stdd form-check-input","style","border-color: black ;","value","cv.id",3,"checked","change",4,"ngIf"],["title","click to edit",1,"stdd","fSmall","w60"],["title","contact history of the candidate",1,"stdd","fSmall","w130",3,"routerLink"],[1,"stdd","fSmall","w200"],[1,"stdd","fSmall","w150"],[1,"stdd","fSmall","w100"],["class","stdd fSmall w100",4,"ngIf"],["class","stdd fSmall w100","style","text-align: center;",4,"ngIf"],["type","button","class","btn fa fa-trash w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary fa fa-regular fa-download w20","type","button","title","download the CV",3,"click",4,"ngIf"],["type","checkbox","value","cv.id",1,"stdd","form-check-input",2,"border-color","black",3,"checked","change"],[1,"stdd","fSmall","w100",2,"text-align","center"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-trash","w20",3,"click"],["type","button","type","button","title","download the CV",1,"btn","btn-outline-secondary","fa","fa-regular","fa-download","w20",3,"click"]],template:function(o,r){1&o&&e.DNE(0,V,19,15,"div",0),2&o&&e.Y8G("ngIf",null!=r.cv)},dependencies:[v.bT,b.Wk,v.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;word-wrap:break-word}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.btn[_ngcontent-%COMP%]{color:#ff0}.b[_ngcontent-%COMP%]{font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w60[_ngcontent-%COMP%]{width:60px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}"]})}return d})();const G=["search"];function $(d,C){if(1&d){const s=e.RV6();e.j41(0,"pagination",15),e.bIt("pageChanged",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.onPageChanged(r))}),e.EFF(1,"\n>"),e.k0s()}if(2&d){const s=e.XpG();e.Y8G("totalItems",s.pagination.totalItems)("itemsPerPage",s.pagination.itemsPerPage)("maxSize",15)}}function L(d,C){if(1&d){const s=e.RV6();e.j41(0,"div",16)(1,"label",17),e.EFF(2,"Order#"),e.k0s(),e.j41(3,"input",18,19),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.cvParams.orderNo=r)}),e.k0s(),e.j41(5,"button",20),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.onSearch())}),e.j41(6,"mat-icon"),e.EFF(7,"search"),e.k0s()(),e.j41(8,"input",21),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.cvParams.selectionStatus=r)}),e.k0s(),e.j41(9,"label",22),e.EFF(10,"Selections Pending"),e.k0s(),e.j41(11,"input",23),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.cvParams.selectionStatus=r)}),e.k0s(),e.j41(12,"label",22),e.EFF(13,"All Status"),e.k0s(),e.j41(14,"input",24),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.cvParams.selectionStatus=r)}),e.k0s(),e.j41(15,"label",22),e.EFF(16,"Selected"),e.k0s(),e.j41(17,"input",25),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.cvParams.selectionStatus=r)}),e.k0s(),e.j41(18,"label",22),e.EFF(19,"Rejected"),e.k0s(),e.j41(20,"button",20),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.onReset())}),e.j41(21,"mat-icon"),e.EFF(22,"refresh"),e.k0s()(),e.j41(23,"label",26),e.EFF(24,"Choose Order No"),e.k0s(),e.j41(25,"div",27)(26,"ng-select",28),e.bIt("ngModelChange",function(r){e.eBV(s);const h=e.XpG();return e.Njj(h.distinctOrderNo=r)})("change",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.distinctOrderNoChanged())}),e.k0s()(),e.j41(27,"button",29),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.generatePDF())}),e.j41(28,"mat-icon"),e.EFF(29,"print"),e.k0s()(),e.j41(30,"button",30),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.close())}),e.j41(31,"mat-icon"),e.EFF(32,"cancel"),e.k0s()()()}if(2&d){const s=e.XpG();e.R7$(3),e.Y8G("ngModel",s.cvParams.orderNo),e.R7$(5),e.Y8G("ngModel",s.cvParams.selectionStatus),e.R7$(3),e.Y8G("ngModel",s.cvParams.selectionStatus),e.R7$(3),e.Y8G("ngModel",s.cvParams.selectionStatus),e.R7$(3),e.Y8G("ngModel",s.cvParams.selectionStatus),e.R7$(9),e.Y8G("items",s.headers)("ngModel",s.distinctOrderNo),e.R7$(1),e.Y8G("previewOnly",!1)("useExistingCss",!0)("disabled",""===s.distinctOrderNo)}}function X(d,C){if(1&d){const s=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(s);const r=e.XpG();return e.Njj(r.isPrintPDF=!1)}),e.j41(1,"mat-icon"),e.EFF(2,"cancel"),e.k0s()()}}function K(d,C){if(1&d&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&d){const s=e.XpG();e.R7$(1),e.Lme(" CVs referred, with conditions: Order No.: ",s.distinctOrderNo,", and Status ",s.cvParams.selectionStatus," ")}}function Y(d,C){1&d&&(e.j41(0,"div",32),e.EFF(1,"Select"),e.k0s())}function W(d,C){1&d&&(e.j41(0,"div",33),e.EFF(1," No candidates available to refer "),e.k0s())}function z(d,C){if(1&d){const s=e.RV6();e.j41(0,"div")(1,"button",20),e.bIt("click",function(){e.eBV(s);const r=e.XpG(3);return e.Njj(r.isPrintPDF=!1)}),e.j41(2,"mat-icon"),e.EFF(3,"cancel"),e.k0s()(),e.nrm(4,"app-cvreferred-line",36),e.k0s()}if(2&d){const s=e.XpG().$implicit;e.R7$(4),e.Y8G("cv",s)("isPrintPdf",!0)}}function J(d,C){if(1&d){const s=e.RV6();e.j41(0,"div")(1,"app-cvreferred-line",37),e.bIt("downloadEvent",function(r){e.eBV(s);const h=e.XpG(3);return e.Njj(h.downloadFileEvent(r))})("cvCheckedEvent",function(r){e.eBV(s);const h=e.XpG(3);return e.Njj(h.cvCheckedEvent(r))})("cvAssessEvent",function(r){e.eBV(s);const h=e.XpG(3);return e.Njj(h.displayAssessmentModalBySwitchMap(r))})("deleteEvent",function(r){e.eBV(s);const h=e.XpG(3);return e.Njj(h.deleteClicked(r))}),e.k0s()()}if(2&d){const s=e.XpG().$implicit;e.R7$(1),e.Y8G("cv",s)("isPrintPdf",!1)}}function H(d,C){if(1&d&&(e.j41(0,"div",35),e.DNE(1,z,5,2,"div",14),e.DNE(2,J,2,2,"div",14),e.k0s()),2&d){const s=e.XpG(2);e.R7$(1),e.Y8G("ngIf",s.isPrintPDF),e.R7$(1),e.Y8G("ngIf",!s.isPrintPDF)}}function Q(d,C){if(1&d&&(e.j41(0,"div"),e.DNE(1,H,3,2,"div",34),e.k0s()),2&d){const s=e.XpG();e.R7$(1),e.Y8G("ngForOf",s.cvs)}}let Z=(()=>{class d{constructor(s,o,r,h,F,I,k,q){this.router=s,this.service=o,this.toastr=r,this.modalService=h,this.candAssessService=F,this.downloadService=I,this.route=k,this.confirm=q,this.returnUrl="",this.cvParams=new E.l,this.cvs=[],this.selectedCVs=[],this.totalCount=0,this.paramNames="",this.id=0,this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctOrderNos=[],this.distinctOrderNo="";var ee=this.route.snapshot.paramMap.get("id")??"0";this.id=+ee;let O=this.router.getCurrentNavigation();O?.extras&&O.extras.state&&(O.extras.state.returnUrl&&(this.returnUrl=O.extras.state.returnUrl),O.extras.state.user&&(this.user=O.extras.state.user))}ngOnInit(){this.service.setParams(this.cvParams),this.route.data.subscribe(s=>{this.cvs=s.cvrefPaged.result,this.pagination=s.cvrefPaged.pagination,this.totalCount=s.cvrefPaged.count,this.headers=s.headers})}loadCVsReferred(){this.service.setParams(this.cvParams),this.service.referredCVsPaginated(!0).subscribe({next:s=>{s.result&&s.pagination&&(this.cvs=s.result,this.pagination=s.pagination)}})}onSearch(){const s=this.service.getParams()??new E.l;""!==this.searchTerm?.nativeElement.value&&(s.orderNo=this.searchTerm.nativeElement.value),s.pageNumber=1,this.service.setParams(s),this.loadCVsReferred()}onReset(){this.cvParams.pageNumber=1,this.service.setParams(this.cvParams),this.loadCVsReferred()}onPageChanged(s){this.cvParams&&this.cvParams.pageNumber!==s.page&&(this.cvParams.pageNumber=s.page,this.service.setParams(this.cvParams),this.loadCVsReferred())}downloadFileEvent(s){return this.service.downloadCV(s).subscribe(()=>{this.toastr.success("document downloaded")},o=>{console.log("error:",o),this.toastr.error(o.error?.details,"failed to download document")})}displayAssessmentModalBySwitchMap(s){this.candAssessService.getCandidateAssessmentDto(s.candidateId,s.orderItemId).pipe((0,t.p)(F=>void 0!==F),(0,l.n)(F=>(this.bsModalRef=this.modalService.show(f.U,{class:"modal-dialog-centered modal-lg",initialState:{assess:F,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(F=>{console.log("inner response:",F)})}navigateByUrl(s,o,r){this.router.navigate([s],{state:{cvbrief:o,userobject:this.service.user,toedit:r,returnUrl:"/candidates"}})}cvCheckedEvent(s){var o=this.selectedCVs.find(h=>h.candidateId==s.id),r=this.selectedCVs.findIndex(h=>h.candidateId===s.id);void 0!==o?o.checked?this.selectedCVs.push(s):this.selectedCVs.splice(r,1):this.selectedCVs.push(s)}deleteClicked(s){const o=this.service.deleteCVRef(s);this.confirm.confirm("Confirm Delete","This will delete this CV Referral").pipe((0,l.n)(F=>o.pipe((0,R.W)(I=>(console.log("Error in deleting the CV Referral",I),(0,P.of)())),(0,g.M)(I=>this.toastr.success("deleted the CV Referral")))),(0,R.W)(F=>(this.toastr.error("Error in getting delete confirmation",F),(0,P.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},F=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",F)})}close(){this.router.navigateByUrl(this.returnUrl||"/")}distinctOrderNoChanged(){var s=new E.l;s.orderNo=+this.distinctOrderNo,s.selectionStatus=this.cvParams.selectionStatus,this.service.setParams(s),this.service.referredCVsPaginated(!1).subscribe({next:o=>{void 0!==o?(this.cvs=o.result,this.pagination=o.pagination,this.totalCount=o.result.length):this.toastr.warning("Failed to retrieve headers","Failed")}})}generatePDF(){this.isPrintPDF=!this.isPrintPDF,this.printtitle="Listing of CVS Referred, with Order No."+this.distinctOrderNo+" and Selection Status "+this.cvParams.selectionStatus+", as on "+new Date}closePrintSection(){this.isPrintPDF=!1,this.distinctOrderNo=""}static#e=this.\u0275fac=function(o){return new(o||d)(e.rXU(b.Ix),e.rXU(M.y),e.rXU(u.tw),e.rXU(p.I8),e.rXU(n.z),e.rXU(c.Z),e.rXU(b.nX),e.rXU(a.G))};static#t=this.\u0275cmp=e.VBU({type:d,selectors:[["app-cvsreferred"]],viewQuery:function(o,r){if(1&o&&e.GBs(G,5),2&o){let h;e.mGM(h=e.lsd())&&(r.searchTerm=h.first)}},decls:25,vars:7,consts:[[1,"my-0","mx-4",2,"display","inline-block","font-weight","bold"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],["class","btn","type","button",3,"click",4,"ngIf"],["id","print-section"],[2,"margin-left","70px"],["class","b",4,"ngIf"],["class","lbl w30 mx-1",4,"ngIf"],[1,"lbl","w50","mx-1"],[1,"lbl","w130"],[1,"lbl","w200","mx-1"],[1,"lbl","w150","mx-1"],[1,"lbl","w100","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],[1,"stdd","w75","fSmall","b",2,"text-align","right","vertical-align","middle !important"],["type","text","title","enter Order No to search","placeholder","Order No",1,"stdd","form-control","fSmall","w75",2,"margin-left","20px",3,"ngModel","ngModelChange"],["search",""],["type","button",1,"btn",3,"click"],["type","radio","value","Pending",1,"radio","form-check-input",3,"ngModel","ngModelChange"],[1,"fSmall"],["type","radio","value","",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Selected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],["type","radio","value","Rejected",1,"radio","form-check-input",3,"ngModel","ngModelChange"],[1,"lbl","w75","tAlignRight"],[1,"stdd","w100","mx-2"],["bindLabel","orderno","bindValue","orderno","labelForId","orderno","clearAllText","Clear",3,"items","ngModel","ngModelChange","change"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","disabled","click"],["title","close this page","type","button",1,"btn",3,"click"],[1,"b"],[1,"lbl","w30","mx-1"],[2,"margin-left","100px","margin-top","5px","font-weight","bold"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","isPrintPdf"],[3,"cv","isPrintPdf","downloadEvent","cvCheckedEvent","cvAssessEvent","deleteEvent"]],template:function(o,r){1&o&&(e.j41(0,"h4",0),e.EFF(1,"CVs refferred to clients"),e.k0s(),e.DNE(2,$,2,3,"pagination",1),e.DNE(3,L,33,10,"div",2),e.DNE(4,X,3,0,"button",3),e.j41(5,"div",4)(6,"div",5),e.DNE(7,K,2,2,"div",6),e.DNE(8,Y,2,0,"div",7),e.j41(9,"div",8),e.EFF(10,"App No"),e.k0s(),e.j41(11,"div",9),e.EFF(12,"Candidate Name"),e.k0s(),e.j41(13,"div",10),e.EFF(14,"Category Ref"),e.k0s(),e.j41(15,"div",11),e.EFF(16,"Customer Name"),e.k0s(),e.j41(17,"div",12),e.EFF(18,"Referred On"),e.k0s(),e.j41(19,"div",12),e.EFF(20,"Selection Decision"),e.k0s(),e.j41(21,"div",12),e.EFF(22,"Sel Decision Dt"),e.k0s()(),e.DNE(23,W,2,0,"div",13),e.DNE(24,Q,2,1,"div",14),e.k0s()),2&o&&(e.R7$(2),e.Y8G("ngIf",void 0!==r.pagination&&!r.isPrintPDF),e.R7$(1),e.Y8G("ngIf",r.cvs&&!r.isPrintPDF),e.R7$(1),e.Y8G("ngIf",r.isPrintPDF),e.R7$(3),e.Y8G("ngIf",r.isPrintPDF),e.R7$(1),e.Y8G("ngIf",r.isPrintPDF),e.R7$(15),e.Y8G("ngIf",0===r.cvs.length),e.R7$(1),e.Y8G("ngIf",r.cvs.length))},dependencies:[v.Sq,v.bT,m.me,m.Fm,m.BC,x.eK,m.vS,w.vr,D.An,y.GV,B],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;color:hsl(from color h s l)}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.radio[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 2px;border-color:#000;width:20px;height:1em;font-size:medium}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small;margin:0 3px 0 1px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px}.b[_ngcontent-%COMP%]{font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;size:20px;vertical-align:middle}"]})}return d})()}}]);