"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[750],{4023:(A,k,a)=>{a.d(k,{d:()=>e});var l=a(7705),j=a(8256),x=a(779),P=a(9417);let e=(()=>{class _{constructor(g,u){this.toastr=g,this.bsModalRef=u,this.inputValue="",this.outputEvent=new l.bkB,this.title=""}ngOnInit(){}returnInputValue(){""!==this.inputValue?(this.outputEvent.emit(this.inputValue),this.bsModalRef.hide()):this.toastr.warning("no value entered")}static#e=this.\u0275fac=function(u){return new(u||_)(l.rXU(j.tw),l.rXU(x.Y$))};static#t=this.\u0275cmp=l.VBU({type:_,selectors:[["app-input-modal"]],inputs:{inputValue:"inputValue"},outputs:{outputEvent:"outputEvent"},decls:10,vars:2,consts:[[1,"modal-header"],[1,"b"],["type","button","title","submit",1,"stdd","btn","btn-default","green","fa","fa-2x","fa-check",3,"click"],["type","button","aria-label","Close",1,"stdd","close","pull-right","fa","fa-2x","fa-close",3,"click"],[1,"modal-body"],[1,"stdd","w75","b"],["name","txt","id","txt","cols","60","rows","5",3,"ngModel","ngModelChange"],[1,"modal-footer"]],template:function(u,m){1&u&&(l.j41(0,"div",0)(1,"div",1),l.EFF(2),l.k0s(),l.j41(3,"button",2),l.bIt("click",function(){return m.returnInputValue()}),l.k0s(),l.j41(4,"button",3),l.bIt("click",function(){return m.bsModalRef.hide()}),l.k0s()(),l.j41(5,"div",4)(6,"label",5),l.EFF(7,"Enter the value: "),l.k0s(),l.j41(8,"textarea",6),l.bIt("ngModelChange",function(R){return m.inputValue=R}),l.k0s()(),l.nrm(9,"div",7)),2&u&&(l.R7$(2),l.JRh(m.title),l.R7$(6),l.Y8G("ngModel",m.inputValue))},dependencies:[P.me,P.BC,P.vS],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:medium}.w75[_ngcontent-%COMP%]{width:75px}.w110[_ngcontent-%COMP%]{width:110px}"]})}return _})()},9750:(A,k,a)=>{a.r(k),a.d(k,{ProspectiveModule:()=>Se});var l=a(177),j=a(9485),x=a(9213),P=a(8834),e=a(7705);let _=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-menu"]],decls:2,vars:0,template:function(i,n){1&i&&(e.j41(0,"p"),e.EFF(1,"menu works!"),e.k0s())}})}return s})();var E=a(6697),g=a(5964),u=a(5558),m=a(9437),C=a(7673),R=a(8141),D=a(8359),X=a(1413),w=a(235),V=a(2777),T=a(5337),S=a(779),h=a(5743),I=a(8256),G=a(778),y=a(1822);let L=(()=>{class s{constructor(){this.voices=[]}updateSpeech(t){const{name:i,value:n}=t;localStorage.setItem(i,n),this.toggle()}setVoices(t){this.voices=t}updateVoice(t){localStorage.setItem("voice",t),this.toggle()}findVoice(t){return this.voices.find(n=>n.name===t)||null}toggle(t=!0){const i=this.makeRequest();speechSynthesis.cancel(),t&&speechSynthesis.speak(i)}makeRequest(){const t=new SpeechSynthesisUtterance;t.text=localStorage.getItem("text")||"",t.rate=+(localStorage.getItem("rate")||"1"),t.pitch=+(localStorage.getItem("pitch")||"1");const i=this.findVoice(localStorage.getItem("voice")||"");return i&&(t.voice=i),t}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var N=a(3400),v=a(9417),U=a(2510),O=a(9726),Y=a(7440),z=a(5561);function J(s,r){1&s&&(e.j41(0,"div"),e.EFF(1," No active prospetive candidates on record matching the conditions\n"),e.k0s())}function W(s,r){if(1&s){const t=e.RV6();e.j41(0,"div",7)(1,"input",8),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prospective.checked=n)})("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.selectedClicked())}),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(1),e.Y8G("ngModel",t.prospective.checked)}}function Q(s,r){if(1&s){const t=e.RV6();e.j41(0,"div",7)(1,"input",9),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prospective.bySMS=n)}),e.k0s(),e.j41(2,"input",9),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prospective.byMail=n)}),e.k0s(),e.j41(3,"input",9),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.prospective.byPhone=n)}),e.k0s(),e.j41(4,"button",10),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.editEventClicked())}),e.k0s(),e.j41(5,"button",11),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.convertToCandidateClicked())}),e.k0s(),e.j41(6,"button",12),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.deleteEventClicked())}),e.k0s(),e.j41(7,"app-register-call-records",13),e.bIt("callStatusEvent",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.callStatusChanged(n))}),e.k0s()()}if(2&s){const t=e.XpG(2);e.R7$(1),e.Y8G("ngModel",t.prospective.bySMS),e.R7$(1),e.Y8G("ngModel",t.prospective.byMail),e.R7$(1),e.Y8G("ngModel",t.prospective.byPhone),e.R7$(4),e.Y8G("id",t.prospective.id)("status",t.prospective.status)("categoryRef",t.prospective.categoryRef)("personId",t.prospective.personId)("personType","Prospective")}}function K(s,r){if(1&s&&(e.j41(0,"div")(1,"div",1),e.DNE(2,W,2,1,"div",2),e.j41(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",5),e.EFF(8),e.k0s(),e.j41(9,"div",6),e.EFF(10),e.k0s(),e.j41(11,"div",6),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.j41(14,"div",5),e.EFF(15),e.k0s(),e.DNE(16,Q,8,8,"div",2),e.k0s()()),2&s){const t=e.XpG();let i;e.R7$(2),e.Y8G("ngIf",!t.isReport),e.R7$(2),e.JRh(t.prospective.candidateName),e.R7$(2),e.JRh(t.prospective.categoryRef),e.R7$(2),e.JRh(t.prospective.phoneNo),e.R7$(2),e.JRh(t.prospective.nationality),e.R7$(2),e.JRh(e.i5U(13,8,t.prospective.dateRegistered,"dd-MMM-yy")),e.R7$(3),e.JRh(null!==(i=t.prospective.status)&&void 0!==i?i:"undefined"),e.R7$(1),e.Y8G("ngIf",!t.isReport)}}let H=(()=>{class s{constructor(t,i){this.callRecService=t,this.toastr=i,this.isReport=!1,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.selectedEvent=new e.bkB,this.convertToCandidateEvent=new e.bkB,this.ComposeMessageEvent=new e.bkB,this.StatusSelected=""}ngOnInit(){}selected(t){this.StatusSelected=t}editEventClicked(){this.prospective&&this.callRecService.getCallRecordWithItems("Prospective",this.prospective.personId).subscribe({next:t=>{console.log("prospective line:",t),t&&(console.log("editebentclicked",t),this.editEvent.emit(t))},error:t=>this.editEvent.emit(null)})}selectedClicked(){this.selectedEvent.emit(this.prospective)}deleteEventClicked(){this.deleteEvent.emit(this.prospective?.id)}convertToCandidateClicked(){this.convertToCandidateEvent.emit(this.prospective?.id)}callStatusChanged(t){this.prospective.status=t}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(Y.S),e.rXU(I.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-prospective-line"]],inputs:{prospective:"prospective",isReport:"isReport"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",selectedEvent:"selectedEvent",convertToCandidateEvent:"convertToCandidateEvent",ComposeMessageEvent:"ComposeMessageEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"stdd",2,"width","max-content"],["class","stdd",4,"ngIf"],[1,"stdd","w125",2,"margin-left","25px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"stdd"],["type","checkbox",1,"checkbox","form-check-input",2,"margin-left","10px",3,"ngModel","ngModelChange","click"],["type","checkbox",1,"form-check-input","checkbox",3,"ngModel","ngModelChange"],[1,"stdd","w20","fa","fa-pencil",3,"click"],["title","converts this prospective candidate to a candidate, and removes it from the prospectives list",1,"stdd","w20","fa","fa-arrow-right",3,"click"],[1,"stdd","w20","fa","fa-trash","red",3,"click"],[3,"id","status","categoryRef","personId","personType","callStatusEvent"]],template:function(i,n){1&i&&(e.DNE(0,J,2,0,"div",0),e.DNE(1,K,17,11,"div",0)),2&i&&(e.Y8G("ngIf",!n.prospective),e.R7$(1),e.Y8G("ngIf",n.prospective))},dependencies:[l.bT,v.Zm,v.BC,v.vS,z.z,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 1px;font-size:small;word-wrap:break-word!important;vertical-align:top}.stddS[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 1px;font-size:smaller;word-wrap:break-word!important;vertical-align:top}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:top}.fSmallest[_ngcontent-%COMP%]{font-size:smaller;font-weight:700;border-style:groove;vertical-align:top;cursor:pointer;color:#ff0;margin:0 2px;padding:0 2px}.undefinedColor[_ngcontent-%COMP%]{color:#deb887}.disabled[_ngcontent-%COMP%]{pointer-events:none;display:none}.checkbox[_ngcontent-%COMP%]{vertical-align:top;border-color:#000;text-align:center;width:15px}.red[_ngcontent-%COMP%]{color:red}.w15[_ngcontent-%COMP%]{width:15px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return s})();const Z=["search"],q=["searchPhoneNo"],ee=["searchName"],te=["discussions"];function ie(s,r){if(1&s){const t=e.RV6();e.j41(0,"pagination",36),e.bIt("pageChanged",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onPageChanged(n))}),e.EFF(1," >"),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function se(s,r){1&s&&(e.j41(0,"div",37),e.EFF(1," No prospective candidates found matching your criteria "),e.k0s())}function ne(s,r){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"app-prospective-line",39),e.bIt("deleteEvent",function(n){e.eBV(t);const o=e.XpG(4);return e.Njj(o.deleteProspectiveClicked(n))})("editEvent",function(n){e.eBV(t);const o=e.XpG().$implicit,c=e.XpG(3);return e.Njj(c.editCallRecord(n,o))})("selectedEvent",function(n){e.eBV(t);const o=e.XpG(4);return e.Njj(o.selectedClicked(n))})("convertToCandidateEvent",function(n){e.eBV(t);const o=e.XpG(4);return e.Njj(o.convertProspectiveToCandidate(n))}),e.k0s()()}if(2&s){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("prospective",t)}}function oe(s,r){if(1&s&&(e.j41(0,"div"),e.nrm(1,"app-prospective-line",40),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("prospective",t)("isReport",!0)}}function ae(s,r){if(1&s&&(e.j41(0,"div"),e.DNE(1,ne,2,1,"div",0),e.DNE(2,oe,2,2,"div",0),e.k0s()),2&s){const t=e.XpG(3);e.R7$(1),e.Y8G("ngIf",!t.isPrintPDF),e.R7$(1),e.Y8G("ngIf",t.isPrintPDF)}}function re(s,r){if(1&s&&(e.j41(0,"div"),e.DNE(1,ae,3,2,"div",38),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.prospectives)}}function ce(s,r){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"h4",9),e.EFF(2,"Prospective Candidates"),e.k0s(),e.j41(3,"div",10),e.DNE(4,ie,2,3,"pagination",11),e.j41(5,"label",12),e.EFF(6,"Choose Status"),e.k0s(),e.j41(7,"ng-select",13),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pParams.statusClass=n)}),e.k0s(),e.j41(8,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.refreshDataset())}),e.k0s(),e.nrm(9,"button",15)(10,"br"),e.j41(11,"label",16),e.EFF(12,"Search on"),e.k0s(),e.j41(13,"label",17),e.EFF(14,"Category:"),e.k0s(),e.nrm(15,"input",18,19),e.j41(17,"label",20),e.EFF(18,"Phone No"),e.k0s(),e.nrm(19,"input",21,22),e.j41(21,"label",17),e.EFF(22,"Name"),e.k0s(),e.nrm(23,"input",23,24),e.j41(25,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSearch())}),e.k0s(),e.j41(26,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.composeMessages())}),e.k0s(),e.j41(27,"button",27),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onReset())}),e.k0s(),e.j41(28,"label",20),e.EFF(29,"Choose Order No"),e.k0s(),e.j41(30,"div",28)(31,"ng-select",29),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.distinctRefCat=n)})("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.distinctRefChanged())}),e.k0s()(),e.j41(32,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.generatePDF())}),e.j41(33,"mat-icon"),e.EFF(34,"print"),e.k0s()()(),e.j41(35,"div",3)(36,"label",31),e.EFF(37,"Sel"),e.k0s(),e.j41(38,"label",4),e.EFF(39,"Candidate Name"),e.k0s(),e.j41(40,"label",5),e.EFF(41,"Category Ref"),e.k0s(),e.j41(42,"label",6),e.EFF(43,"Phone No"),e.k0s(),e.j41(44,"label",7),e.EFF(45,"Nationality"),e.k0s(),e.j41(46,"label",7),e.EFF(47,"Dt Regd"),e.k0s(),e.j41(48,"label",6),e.EFF(49,"Status"),e.k0s(),e.j41(50,"label",32),e.EFF(51,"Advise By"),e.k0s(),e.j41(52,"div",33)(53,"mat-icon",34),e.EFF(54,"mail_outline"),e.k0s(),e.j41(55,"mat-icon",34),e.EFF(56,"textsms"),e.k0s(),e.j41(57,"mat-icon",34),e.EFF(58,"phone_forwarded"),e.k0s()()(),e.nrm(59,"hr",8),e.DNE(60,se,2,0,"div",35),e.DNE(61,re,2,1,"div",0),e.k0s()}if(2&s){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",void 0!==t.pagination),e.R7$(3),e.Y8G("items",t.paramsStatus)("ngModel",t.pParams.statusClass),e.R7$(24),e.Y8G("items",t.headers)("ngModel",t.distinctRefCat),e.R7$(1),e.Y8G("previewOnly",!1)("useExistingCss",!0)("disabled",""===t.distinctRefCat),e.R7$(21),e.Y8G("inline",!0),e.R7$(2),e.Y8G("inline",!0),e.R7$(2),e.Y8G("inline",!0),e.R7$(3),e.Y8G("ngIf",!t.prospectives),e.R7$(1),e.Y8G("ngIf",t.prospectives)}}function le(s,r){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",41)(2,"mat-icon"),e.EFF(3,"print"),e.k0s()(),e.j41(4,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closePrintSection())}),e.j41(5,"mat-icon"),e.EFF(6,"clear"),e.k0s()()()}2&s&&(e.R7$(1),e.Y8G("previewOnly",!1)("useExistingCss",!0))}function de(s,r){if(1&s&&(e.j41(0,"div"),e.nrm(1,"app-prospective-line",40),e.k0s()),2&s){const t=r.$implicit;e.R7$(1),e.Y8G("prospective",t)("isReport",!0)}}function pe(s,r){if(1&s&&(e.j41(0,"div"),e.DNE(1,de,2,2,"div",38),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.printProspectives)}}let B=(()=>{class s{constructor(t,i,n,o,c,d,p,f){this.service=t,this.modalService=i,this.router=n,this.toastr=o,this.confirm=c,this.activatedRoute=d,this.accountService=p,this.speechService=f,this.returnUrl="",this.prospectives=[],this.printProspectives=[],this.totalCount=0,this.pParams=new w.Q,this.statusSelected="",this.categoryReferences=[],this.ProspList=[],this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctRefCats=[],this.distinctRefCat="",this.paramsStatus=[{status:"All"},{status:"Active"},{status:"Declined"},{status:"Interested"}],this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"}];let b=this.router.getCurrentNavigation();b?.extras&&b.extras.state&&(b.extras.state.returnUrl&&(this.returnUrl=b.extras.state.returnUrl),b.extras.state.user&&(this.user=b.extras.state.user),this.user||this.accountService.currentUser$.pipe((0,E.s)(1)).subscribe(Ge=>this.user=Ge))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.prospectives=t.prospectives.result,this.pagination=t.prospectives.pagination,this.totalCount=t.prospectives.totalCount,this.headers=t.headers})}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t&&(i.pageNumber=t.page,this.service.setParams(i),this.loadProspectives())}refreshDataset(){this.service.setParams(this.pParams),this.loadProspectives()}loadProspectives(){var t=this.service.getParams();this.service.getProspectivesPaged(t)?.subscribe({next:i=>{null!=i?(this.prospectives=i.result,this.totalCount=i?.count,this.pagination=i.pagination):console.log("response is undefined")},error:i=>console.log(i)})}selectedClicked(t){}selected(t){this.statusSelected=t}deleteProspectiveClicked(t){var i=t;const o=this.service.deleteProspectiveRecord(i);this.confirm.confirm("confirm Delete","confirm delete this prospective Candidate?. WARNING: this cannot be undone").pipe((0,g.p)(d=>d),(0,u.n)(d=>o)).subscribe(d=>{if(d){this.toastr.success("Prospective Candidate deleted","deletion successful");var p=this.prospectives.findIndex(f=>f.id==i);p>=0&&this.prospectives.splice(p,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}editCallRecord(t,i){null!==t?(this.bsModalRef=this.modalService.show(V.J,{class:"modal-dialog-centered modal-lg",initialState:{callRecord:t,contactResults:this.callRecordStatus,candidateName:i.candidateName,userName:this.user?.userName}}),this.bsModalRef.content.passCallRecordEvent.pipe((0,g.p)(c=>null!==c),(0,u.n)(c=>this.service.updateCallRecord(c))).subscribe(c=>{if(c){this.toastr.success("Call Record updated","Update successful");var d=this.prospectives.findIndex(p=>p.id===i.id);-1!==d&&(i.status=c.status,this.prospectives[d]=i)}else this.toastr.error("Error in deleting the checklist","failed to delete")})):this.toastr.warning("No Call Record object returned from the modal form")}convertProspectiveToCandidate(t){var i=t;const o=this.service.convertProspectiveToCandidate(i);this.confirm.confirm("confirm Convert Prospective To Candidate","this will convert the selected prospective candidate to a candidate, and remove it from this prospectives list. WARNING: this cannot be undone").pipe((0,g.p)(d=>d),(0,u.n)(()=>o.pipe((0,m.W)(d=>(0,C.of)()),(0,R.M)(d=>{if(0===d)this.toastr.warning("Failed to convert the prospective to candidate","Failed to convert");else{this.toastr.success("Converted the prospective to candidate, with Application No "+d,"success");var p=this.prospectives.findIndex(f=>f.id);p>=0&&this.prospectives.slice(p,1)}})))).subscribe(d=>{if(d){this.toastr.success("Prospective Candidate converted, with application No "+d,"Conversion successful");var p=this.prospectives.findIndex(f=>f.id==i);p>=0&&this.prospectives.splice(p,1)}else this.toastr.error("Error in converting the prospective candidate to a Candidate","failed to convert")})}onSearch(){const t=this.service.getParams();""!==this.searchTerm?.nativeElement.value&&(t.search=this.searchTerm?.nativeElement.value),""!==this.searchPhoneNo?.nativeElement.value&&(t.search=this.searchPhoneNo?.nativeElement.value),""!==this.searchTermName?.nativeElement.value&&(t.search=this.searchTermName?.nativeElement.value),t.pageNumber=1,this.service.setParams(t),this.loadProspectives()}onReset(){this.searchTerm.nativeElement.value="",this.pParams=new w.Q,this.service.setParams(this.pParams),this.loadProspectives()}composeMessages(){new D.yU,new X.B;var n=[],o=this.prospectives.filter(c=>!0===c.checked);0!==o.length?(o.forEach(c=>{n.push({modeOfAdvise:c.byMail?"Mail":c.bySMS?"SMS":c.byPhone?"Phone":"",candidateResponse:c.status,candidateName:c.candidateName,phoneNo:c.phoneNo,emailId:c.email,candidateTitle:"Mr. ",subject:c.categoryRef,candidateUsername:c.userName,messageText:"",recipientUsername:"",senderUsername:"",dateComposed:new Date,prospectiveId:c.id,candidateId:0})}),this.service.composeCallRecordMessage(n).subscribe({next:c=>{c.length>0&&this.toastr.success("message composed","Success")}})):this.toastr.warning("No candidate selected","Entry Error")}modeAdviseSelected(t){}distinctRefChanged(){0===this.headers.length&&this.service.getProspectiveHeadersDto(this.pParams.statusClass).subscribe({next:t=>{null!==t&&t.length>0?(this.headers=t,this.isPrintPDF=!0):this.toastr.warning("Failed to retrieve headers","Failed")}})}generatePDF(){this.isPrintPDF=!this.isPrintPDF;var t=this.distinctRefCat,i=this.pParams.statusClass;this.printtitle="Prospective Candidate Availability Status as on "+new Date+"<br>For Order No. "+t+", status = "+i,this.service.getParams(),this.service.getProspectivesList(t,i).subscribe({next:o=>{null!==o&&o.length>0?this.printProspectives=o:console.log("response is undefined")},error:o=>console.log(o)})}closePrintSection(){this.isPrintPDF=!1,this.distinctRefCat=""}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(T.k),e.rXU(S.I8),e.rXU(h.Ix),e.rXU(I.tw),e.rXU(G.G),e.rXU(h.nX),e.rXU(y.D),e.rXU(L))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-prospective-list"]],viewQuery:function(i,n){if(1&i&&(e.GBs(Z,5),e.GBs(q,5),e.GBs(ee,5),e.GBs(te,5)),2&i){let o;e.mGM(o=e.lsd())&&(n.searchTerm=o.first),e.mGM(o=e.lsd())&&(n.searchPhoneNo=o.first),e.mGM(o=e.lsd())&&(n.searchTermName=o.first),e.mGM(o=e.lsd())&&(n.discussionTerm=o.first)}},decls:23,vars:6,consts:[[4,"ngIf"],["id","print-section"],[1,"b","fontLarger"],[1,"form-inline"],[1,"lbl","w125",2,"margin-left","15px"],[1,"lbl","w150"],[1,"lbl","w100"],[1,"lbl","w75"],[1,"my-0"],[2,"display","inline-block","font-weight","bold"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["class","mx-2","style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","The paged list that will retreive records based upon the status you select",1,"lbl","w100","mx-2"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear",1,"stdd",2,"border-style","double","width","100px","font-size","small",3,"items","ngModel","ngModelChange"],["title","filters the records based upon the status selected",1,"btn","fa","fa-filter","fa-2x",2,"color","aliceblue",3,"click"],["title","go back","routerLink","/",1,"btn","fa","fa-window-close","fa-2x","mx-5",2,"color","aliceblue"],[1,"lbl","w50","b"],[1,"lbl","w50","tAlignRight"],["type","text","title","enter any part of category ref to search by","placeholder","Category",1,"stdd","fa-solid","fa-magnifying-glass","w100"],["search",""],[1,"lbl","w75","tAlignRight"],["type","text","title","enter the phone number to search by","placeholder","phone no",1,"stdd","fa-solid","fa-magnifying-glass","w100"],["searchPhoneNo",""],["type","text","title","enter any part of cnadidate name to search by","placeholder","Candidate Name",1,"stdd","fa-solid","fa-magnifying-glass","w150"],["searchName",""],["title","search the text entered",1,"btn","fa","fa-search",3,"click"],["title","compose messages for changes in candidate interests",1,"btn","fa","fa-check","fa-2x",2,"color","yellow",3,"click"],[1,"btn","fa","fa-refresh",3,"click"],[1,"stdd","w100","mx-2"],["bindLabel","orderno","bindValue","orderno","labelForId","orderno","clearAllText","Clear",3,"items","ngModel","ngModelChange","change"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","disabled","click"],[1,"lbl","w35"],[1,"lbl","w75",2,"margin-top","0px !important"],[1,"icon"],[3,"inline"],["class","my-2",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"mx-2",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[4,"ngFor","ngForOf"],[3,"prospective","deleteEvent","editEvent","selectedEvent","convertToCandidateEvent"],[3,"prospective","isReport"],["printSectionId","print-section","printTitle","printtitle","ngxPrint","","title","shows the report in pdf format and enables printing",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss"],[3,"click"]],template:function(i,n){1&i&&(e.DNE(0,ce,62,13,"div",0),e.DNE(1,le,7,2,"div",0),e.j41(2,"div",1)(3,"div",2),e.EFF(4),e.nI1(5,"uppercase"),e.k0s(),e.j41(6,"div",3)(7,"label",4),e.EFF(8,"Candidate Name"),e.k0s(),e.j41(9,"label",5),e.EFF(10,"Category Ref"),e.k0s(),e.j41(11,"label",6),e.EFF(12,"Phone No"),e.k0s(),e.j41(13,"label",7),e.EFF(14,"Nationality"),e.k0s(),e.j41(15,"label",7),e.EFF(16,"Date"),e.nrm(17,"br"),e.EFF(18,"Registered"),e.k0s(),e.j41(19,"label",6),e.EFF(20,"Status"),e.k0s()(),e.nrm(21,"hr",8),e.DNE(22,pe,2,1,"div",0),e.k0s()),2&i&&(e.Y8G("ngIf",!n.isPrintPDF),e.R7$(1),e.Y8G("ngIf",n.isPrintPDF),e.R7$(3),e.JRh(e.bMT(5,4,null==n.user?null:n.user.employer)),e.R7$(18),e.Y8G("ngIf",n.prospectives))},dependencies:[l.Sq,l.bT,N.eK,v.BC,v.vS,U.vr,O.GV,x.An,h.Wk,H,l.Pc],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:smaller;word-wrap:normal;vertical-align:middle;font-weight:700}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.fontLarger[_ngcontent-%COMP%]{font-size:larger}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.icon[_ngcontent-%COMP%]{font-size:15px;margin:0 0 0 695px}"]})}return s})();var he=a(8966);class F{constructor(){this.recipientUsername="",this.senderUsername="",this.candidateName="",this.applicationNo=0,this.dateComposed=new Date,this.feedbackReceived=0,this.pageNumber=1,this.pageSize=15}}var ge=a(4412),me=a(6354),fe=a(3587),$=a(1626),_e=a(6220);let M=(()=>{class s{constructor(t,i){this.http=t,this.accountService=i,this.apiUrl=fe.c.apiUrl,this.currentUserSource=new ge.t(null),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.accountService.currentUser$.pipe((0,E.s)(1)).subscribe({next:n=>{n&&(this.audioParams=this.audioParams),this.user=n}})}getAudioMessagesPaged(t=!0){if(t){const n=this.cache.get(Object.values(this.audioParams).join("-"));if(n)return(0,C.of)(n)}else this.cache=new Map;let i=function Ce(s){let r=new $.Nl;return r=r.append("pageNumber",s.pageNumber.toString()),r=r.append("pageSize",s.pageSize.toString()),""!==s.candidateName&&(r=r.append("candidateName",s.candidateName)),0!==s.feedbackReceived&&(r=r.append("feedbackReceived",s.feedbackReceived.toString())),s.dateComposed.getFullYear()>2e3&&(r=r.append("dateComposed",s.dateComposed.toDateString())),""!==s.recipientUsername&&(r=r.append("recipientUsername",s.recipientUsername)),r}(this.audioParams);return(0,_e.f8)(this.apiUrl+"prospectives/audioMessagePagedlist",i,this.http).pipe((0,me.T)(n=>(this.cache.set(Object.values(this.audioParams).join("-"),n),n)))}setAudioText(t){return this.http.put(this.apiUrl+"prospectives/setAudioText",t)}setParams(t){this.audioParams=t}getParams(){return this.audioParams}static#e=this.\u0275fac=function(i){return new(i||s)(e.KVO($.Qq),e.KVO(y.D))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function be(s,r){if(1&s){const t=e.RV6();e.j41(0,"pagination",9),e.bIt("pageChanged",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChanged(n))}),e.EFF(1,"\n>"),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function Pe(s,r){1&s&&(e.j41(0,"div"),e.EFF(1," No matching audio messages on record "),e.k0s())}function ke(s,r){if(1&s&&(e.j41(0,"div")(1,"div",11),e.EFF(2),e.k0s(),e.j41(3,"div",12),e.EFF(4),e.k0s(),e.j41(5,"div",12),e.EFF(6),e.k0s(),e.j41(7,"div",13),e.EFF(8),e.k0s(),e.j41(9,"div",14),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"div",15),e.EFF(13),e.k0s()()),2&s){const t=r.$implicit;e.R7$(2),e.JRh(t.applicationNo),e.R7$(2),e.JRh(t.candidateName),e.R7$(2),e.JRh(t.subject),e.R7$(2),e.JRh(t.messageText.substring(0,248)),e.R7$(2),e.JRh(e.i5U(11,6,t.dateComposed,"dd-mmm-yy")),e.R7$(3),e.JRh(t.feedbackReceived)}}function xe(s,r){if(1&s&&(e.j41(0,"div"),e.DNE(1,ke,14,9,"div",10),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.audioDtos)}}let Fe=(()=>{class s{constructor(t,i){this.service=t,this.router=i,this.returnUrl="",this.audioDtos=[],this.totalCount=0,this.aParams=new F,this.isPrintPDF=!1,this.printtitle="",t.setParams(this.aParams)}ngOnInit(){this.loadAudioLists(!1)}loadAudioLists(t=!0){this.service.getParams(),this.service.setParams(this.aParams),this.service.getAudioMessagesPaged(t)?.subscribe({next:n=>{null!=n&&(this.audioDtos=n.result,this.totalCount=n?.count,this.pagination=n.pagination)},error:n=>console.log(n)}),console.log("audiodtos",this.audioDtos)}close(){this.router.navigateByUrl(this.returnUrl)}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setParams(i),this.loadAudioLists())}setParameters(){var t=new F;this.service.setParams(t),this.loadAudioLists()}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(M),e.rXU(h.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-audio"]],decls:20,vars:3,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","close this page",1,"stdd","pull-right","fa","fa-window-close","mx-5",3,"click"],[1,"my-0"],[1,"lbl","w100",2,"margin-left","25px !important"],[1,"lbl","w200"],[1,"lbl","w250"],[1,"lbl","w100"],[1,"lbl","w75"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[4,"ngFor","ngForOf"],[1,"stdd","w100",2,"margin-left","25px !important"],[1,"stdd","w200"],[1,"stdd","w250"],[1,"stdd","w100"],[1,"stdd","w75"]],template:function(i,n){1&i&&(e.j41(0,"h4"),e.EFF(1,"Audio Message Listing"),e.k0s(),e.DNE(2,be,2,3,"pagination",0),e.j41(3,"button",1),e.bIt("click",function(){return n.close()}),e.k0s(),e.nrm(4,"hr",2),e.j41(5,"label",3),e.EFF(6,"App No"),e.k0s(),e.j41(7,"label",4),e.EFF(8,"Candidate Name"),e.k0s(),e.j41(9,"label",4),e.EFF(10,"Subject"),e.k0s(),e.j41(11,"label",5),e.EFF(12,"Message Text"),e.k0s(),e.j41(13,"label",6),e.EFF(14,"Date Composed"),e.k0s(),e.j41(15,"label",7),e.EFF(16,"Feedback"),e.k0s(),e.nrm(17,"hr"),e.DNE(18,Pe,2,0,"div",8),e.DNE(19,xe,2,1,"div",8)),2&i&&(e.R7$(2),e.Y8G("ngIf",void 0!==n.pagination),e.R7$(16),e.Y8G("ngIf",!n.audioDtos),e.R7$(1),e.Y8G("ngIf",n.audioDtos))},dependencies:[l.Sq,l.bT,N.eK,l.vh],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w250[_ngcontent-%COMP%]{width:250px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top;word-wrap:normal;vertical-align:middle;font-weight:700}"]})}return s})();var Me=a(4023);function je(s,r){if(1&s){const t=e.RV6();e.j41(0,"pagination",11),e.bIt("pageChanged",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChanged(n))}),e.EFF(1,"\n>"),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Ee(s,r){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"input",13),e.bIt("ngModelChange",function(n){const c=e.eBV(t).$implicit;return e.Njj(c.checked=n)})("click",function(){const o=e.eBV(t).$implicit;return e.Njj(o.checked=!o.checked)}),e.k0s(),e.j41(2,"div",14),e.EFF(3),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s(),e.j41(6,"div",15),e.EFF(7),e.k0s(),e.j41(8,"div",16),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"input",17),e.bIt("ngModelChange",function(n){const c=e.eBV(t).$implicit;return e.Njj(c.messageText=n)})("dblclick",function(){const o=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.editMessageText(o.id,o.messageText))}),e.k0s(),e.j41(12,"div",15),e.EFF(13),e.k0s(),e.j41(14,"div",16),e.EFF(15),e.k0s()()}if(2&s){const t=r.$implicit;e.R7$(1),e.Y8G("ngModel",t.checked),e.R7$(2),e.JRh(t.applicationNo),e.R7$(2),e.JRh(t.candidateName),e.R7$(2),e.JRh(t.subject),e.R7$(2),e.JRh(e.i5U(10,8,t.dateComposed,"dd-MMM-yy")),e.R7$(2),e.Y8G("ngModel",t.messageText),e.R7$(2),e.JRh(t.fileName),e.R7$(2),e.JRh(t.feedbackReceived)}}function Re(s,r){if(1&s&&(e.j41(0,"div"),e.DNE(1,Ee,16,11,"div",12),e.k0s()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.audioMessages)}}const Ie=[{path:"",component:_},{path:"prospective",component:B,resolve:{prospectives:()=>{var s=new w.Q;return(0,e.WQX)(T.k).getProspectivesPaged(s)},headers:he.C}},{path:"prospectiveReport/:orderno",component:B,resolve:{reports:s=>{var r=s.paramMap.get("orderno")??"0";return"0"===r||""===r?(0,C.of)(null):(0,e.WQX)(T.k).getProspectivesList(r,"active")}}},{path:"audiomessages",component:Fe},{path:"autodial",component:(()=>{class s{constructor(t,i,n,o,c,d){this.service=t,this.toastr=i,this.confirm=n,this.activatedRoute=o,this.accountService=c,this.modalService=d,this.returnUrl="",this.audioMessages=[],this.totalCount=0,this.pParams=new F,this.viewMessageText=!1,this.AllSelected=!1,this.accountService.currentUser$.pipe((0,E.s)(1)).subscribe(p=>this.user=p)}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.audioMessages=t.audioMessages.result,this.pagination=t.pagination,this.totalCount=t.audioMessages.totalCount}),this.loadMessages()}loadMessages(){var t=this.service.getParams();this.service.setParams(t),this.service.getAudioMessagesPaged(!0)?.subscribe({next:i=>{null!=i?(this.audioMessages=i.result,this.totalCount=i?.count,this.pagination=i.pagination):console.log("response is undefined")},error:i=>console.log(i)})}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t&&(i.pageNumber=t.page,this.service.setParams(i),this.loadMessages())}editMessageText(t,i){this.bsModalRef=this.modalService.show(Me.d,{class:"modal-dialog-centered modal-md",initialState:{title:"Edit message text",inputValue:i}}),this.bsModalRef.content.outputEvent.subscribe(o=>{if(""!==o){var c=this.audioMessages.findIndex(p=>p.id==t);-1!==c&&(this.audioMessages[c].messageText=o),this.service.setAudioText({id:t,textMessage:o}).subscribe({next:p=>this.toastr.success("message text updated","Success")})}})}selectedChanged(){this.audioMessages.forEach(t=>{t.checked=this.AllSelected})}update(){var t=this.audioMessages.filter(i=>i.checked);console.log(t)}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(M),e.rXU(I.tw),e.rXU(G.G),e.rXU(h.nX),e.rXU(y.D),e.rXU(S.I8))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-autodial"]],decls:25,vars:3,consts:[[2,"display","inline-block","font-weight","bold"],[1,"fa","fa-check","fa-2x",2,"margin-left","300px",3,"click"],["routerLink","/",1,"fa","fa-window-close","fa-2x",2,"margin-left","200px"],["class","mx-2","style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"form-inline"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","15px","border-color","black",3,"ngModel","ngModelChange","change"],[1,"lbl","w75",2,"margin-left","10px"],[1,"lbl","w150"],[1,"lbl","w100"],[1,"lbl","w250"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"mx-2",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","15px","border-color","black",3,"ngModel","ngModelChange","click"],[1,"stdd","w75",2,"margin-left","10px","text-align","center"],[1,"stdd","w150"],[1,"stdd","w100"],["type","text","title","double-click to edit this value",1,"stdd","w250",3,"ngModel","ngModelChange","dblclick"]],template:function(i,n){1&i&&(e.j41(0,"h4",0),e.EFF(1,"Audio Messages For Prospective Candidates"),e.k0s(),e.j41(2,"button",1),e.bIt("click",function(){return n.update()}),e.k0s(),e.nrm(3,"button",2)(4,"br"),e.DNE(5,je,2,3,"pagination",3),e.j41(6,"div",4)(7,"input",5),e.bIt("ngModelChange",function(c){return n.AllSelected=c})("change",function(){return n.selectedChanged()}),e.k0s(),e.j41(8,"label",6),e.EFF(9,"App No"),e.k0s(),e.j41(10,"label",7),e.EFF(11,"Candidate Name"),e.k0s(),e.j41(12,"label",7),e.EFF(13,"Subject"),e.k0s(),e.j41(14,"label",8),e.EFF(15,"Composed On"),e.k0s(),e.j41(16,"label",9),e.EFF(17,"Message"),e.k0s(),e.j41(18,"label",8),e.EFF(19,"Played Bk On"),e.k0s(),e.j41(20,"label",7),e.EFF(21,"FileName"),e.k0s(),e.j41(22,"label",8),e.EFF(23,"Feedback"),e.k0s()(),e.DNE(24,Re,2,1,"div",10)),2&i&&(e.R7$(5),e.Y8G("ngIf",void 0!==n.pagination),e.R7$(2),e.Y8G("ngModel",n.AllSelected),e.R7$(17),e.Y8G("ngIf",n.audioMessages.length>0))},dependencies:[l.Sq,l.bT,N.eK,v.me,v.Zm,v.BC,v.vS,h.Wk,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:smaller;overflow:auto}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;font-size:smaller;font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}"]})}return s})(),resolve:{audioMessages:()=>{var s=new F;return(0,e.WQX)(M).setParams(s),(0,e.WQX)(M).getAudioMessagesPaged(!1)}}}];let ye=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#i=this.\u0275inj=e.G2t({imports:[l.MD,h.iI.forChild(Ie),h.iI]})}return s})();var Ne=a(4056);let Se=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#i=this.\u0275inj=e.G2t({imports:[l.MD,j.G,P.Hl,O.jN,x.m_,ye,Ne.Qt]})}return s})()}}]);