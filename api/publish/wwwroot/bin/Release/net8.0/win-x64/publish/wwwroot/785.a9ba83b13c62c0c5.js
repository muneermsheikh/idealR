"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[785],{3785:(Ne,P,r)=>{r.r(P),r.d(P,{ProspectiveModule:()=>Me});var p=r(6814),O=r(3983),b=r(617),R=r(2296),e=r(5879);let E=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu"]],decls:2,vars:0,template:function(i,s){1&i&&(e.TgZ(0,"p"),e._uU(1,"menu works!"),e.qZA())}})}return n})();var T=r(8180),m=r(2181),f=r(4664),k=r(6306),_=r(2096),Z=r(9397),I=r(7394),L=r(8645),C=r(162),q=r(369),x=r(2503),J=r(2051),u=r(7850),w=r(8763),F=r(7411),M=r(7783);let Q=(()=>{class n{constructor(){this.voices=[]}updateSpeech(t){const{name:i,value:s}=t;localStorage.setItem(i,s),this.toggle()}setVoices(t){this.voices=t}updateVoice(t){localStorage.setItem("voice",t),this.toggle()}findVoice(t){return this.voices.find(s=>s.name===t)||null}toggle(t=!0){const i=this.makeRequest();speechSynthesis.cancel(),t&&speechSynthesis.speak(i)}makeRequest(){const t=new SpeechSynthesisUtterance;t.text=localStorage.getItem("text")||"",t.rate=+(localStorage.getItem("rate")||"1"),t.pitch=+(localStorage.getItem("pitch")||"1");const i=this.findVoice(localStorage.getItem("voice")||"");return i&&(t.voice=i),t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A=r(7012),h=r(6223),G=r(4807),N=r(8983),H=r(3574),D=r(4104);function Y(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," No active prospetive candidates on record matching the conditions\n"),e.qZA())}function z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"input",8),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.prospective.checked=s)})("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selectedClicked())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.prospective.checked)}}function K(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"input",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.prospective.bySMS=s)}),e.qZA(),e.TgZ(2,"input",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.prospective.byMail=s)}),e.qZA(),e.TgZ(3,"input",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.prospective.byPhone=s)}),e.qZA(),e.TgZ(4,"button",10),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.editEventClicked())}),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.convertToCandidateClicked())}),e.qZA(),e.TgZ(6,"button",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deleteEventClicked())}),e.qZA(),e.TgZ(7,"app-register-call-records",13),e.NdJ("callStatusEvent",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.callStatusChanged(s))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.prospective.bySMS),e.xp6(1),e.Q6J("ngModel",t.prospective.byMail),e.xp6(1),e.Q6J("ngModel",t.prospective.byPhone),e.xp6(4),e.Q6J("id",t.prospective.id)("status",t.prospective.status)("categoryRef",t.prospective.categoryRef)("personId",t.prospective.personId)("personType","Prospective")}}function B(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",1),e.YNc(2,z,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.TgZ(11,"div",6),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"div",5),e._uU(15),e.qZA(),e.YNc(16,K,8,8,"div",2),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(2),e.Q6J("ngIf",!t.isReport),e.xp6(2),e.Oqu(t.prospective.candidateName),e.xp6(2),e.Oqu(t.prospective.categoryRef),e.xp6(2),e.Oqu(t.prospective.phoneNo),e.xp6(2),e.Oqu(t.prospective.nationality),e.xp6(2),e.Oqu(e.xi3(13,8,t.prospective.dateRegistered,"dd-MMM-yy")),e.xp6(3),e.Oqu(null!==(i=t.prospective.status)&&void 0!==i?i:"undefined"),e.xp6(1),e.Q6J("ngIf",!t.isReport)}}let j=(()=>{class n{constructor(t,i){this.callRecService=t,this.toastr=i,this.isReport=!1,this.editEvent=new e.vpe,this.deleteEvent=new e.vpe,this.selectedEvent=new e.vpe,this.convertToCandidateEvent=new e.vpe,this.ComposeMessageEvent=new e.vpe,this.StatusSelected=""}ngOnInit(){}selected(t){this.StatusSelected=t}editEventClicked(){this.prospective&&this.callRecService.getCallRecordWithItems("Prospective",this.prospective.personId).subscribe({next:t=>{console.log("prospective line:",t),t&&(console.log("editebentclicked",t),this.editEvent.emit(t))},error:t=>this.editEvent.emit(null)})}selectedClicked(){this.selectedEvent.emit(this.prospective)}deleteEventClicked(){this.deleteEvent.emit(this.prospective?.id)}convertToCandidateClicked(){this.convertToCandidateEvent.emit(this.prospective?.id)}callStatusChanged(t){this.prospective.status=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(H.C),e.Y36(w._W))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-prospective-line"]],inputs:{prospective:"prospective",isReport:"isReport"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",selectedEvent:"selectedEvent",convertToCandidateEvent:"convertToCandidateEvent",ComposeMessageEvent:"ComposeMessageEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"stdd",2,"width","max-content"],["class","stdd",4,"ngIf"],[1,"stdd","w125",2,"margin-left","25px"],[1,"stdd","w150"],[1,"stdd","w100"],[1,"stdd","w75"],[1,"stdd"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black",3,"ngModel","ngModelChange","click"],["type","checkbox",1,"form-check-input","checkbox",3,"ngModel","ngModelChange"],[1,"stdd","w20","fa","fa-pencil",3,"click"],["title","converts this prospective candidate to a candidate, and removes it from the prospectives list",1,"stdd","w20","fa","fa-arrow-right",3,"click"],[1,"stdd","w20","fa","fa-trash","red",3,"click"],[3,"id","status","categoryRef","personId","personType","callStatusEvent"]],template:function(i,s){1&i&&(e.YNc(0,Y,2,0,"div",0),e.YNc(1,B,17,11,"div",0)),2&i&&(e.Q6J("ngIf",!s.prospective),e.xp6(1),e.Q6J("ngIf",s.prospective))},dependencies:[p.O5,h.Wl,h.JJ,h.On,D.N,p.uU],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 1px;font-size:small;word-wrap:break-word!important;vertical-align:top}.stddS[_ngcontent-%COMP%]{display:inline-block;margin:0 2px 0 1px;font-size:smaller;word-wrap:break-word!important;vertical-align:top}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:top}.fSmallest[_ngcontent-%COMP%]{font-size:smaller;font-weight:700;border-style:groove;vertical-align:top;cursor:pointer;color:#ff0;margin:0 2px;padding:0 2px}.undefinedColor[_ngcontent-%COMP%]{color:#deb887}.disabled[_ngcontent-%COMP%]{pointer-events:none;display:none}.checkbox[_ngcontent-%COMP%]{vertical-align:top;border-color:#000;text-align:center;width:15px}.red[_ngcontent-%COMP%]{color:red}.w15[_ngcontent-%COMP%]{width:15px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return n})();const $=["search"],W=["searchPhoneNo"],V=["searchName"],X=["discussions"];function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"pagination",36),e.NdJ("pageChanged",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onPageChanged(s))}),e._uU(1," >"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function te(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," No prospective candidates found matching your criteria "),e.qZA())}function ie(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"app-prospective-line",39),e.NdJ("deleteEvent",function(s){e.CHM(t);const o=e.oxw(4);return e.KtG(o.deleteProspectiveClicked(s))})("editEvent",function(s){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.editCallRecord(s,o))})("selectedEvent",function(s){e.CHM(t);const o=e.oxw(4);return e.KtG(o.selectedClicked(s))})("convertToCandidateEvent",function(s){e.CHM(t);const o=e.oxw(4);return e.KtG(o.convertProspectiveToCandidate(s))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("prospective",t)}}function ne(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-prospective-line",40),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("prospective",t)("isReport",!0)}}function se(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ie,2,1,"div",0),e.YNc(2,ne,2,2,"div",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.isPrintPDF),e.xp6(1),e.Q6J("ngIf",t.isPrintPDF)}}function oe(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,se,3,2,"div",38),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.prospectives)}}function ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",9),e._uU(2,"Prospective Candidates"),e.qZA(),e.TgZ(3,"div",10),e.YNc(4,ee,2,3,"pagination",11),e.TgZ(5,"label",12),e._uU(6,"Choose Status"),e.qZA(),e.TgZ(7,"ng-select",13),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.pParams.statusClass=s)}),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.refreshDataset())}),e.qZA(),e._UZ(9,"button",15)(10,"br"),e.TgZ(11,"label",16),e._uU(12,"Search on"),e.qZA(),e.TgZ(13,"label",17),e._uU(14,"Category:"),e.qZA(),e._UZ(15,"input",18,19),e.TgZ(17,"label",20),e._uU(18,"Phone No"),e.qZA(),e._UZ(19,"input",21,22),e.TgZ(21,"label",17),e._uU(22,"Name"),e.qZA(),e._UZ(23,"input",23,24),e.TgZ(25,"button",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSearch())}),e.qZA(),e.TgZ(26,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.composeMessages())}),e.qZA(),e.TgZ(27,"button",27),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onReset())}),e.qZA(),e.TgZ(28,"label",20),e._uU(29,"Choose Order No"),e.qZA(),e.TgZ(30,"div",28)(31,"ng-select",29),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.distinctRefCat=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.distinctRefChanged())}),e.qZA()(),e.TgZ(32,"button",30),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.generatePDF())}),e.TgZ(33,"mat-icon"),e._uU(34,"print"),e.qZA()()(),e.TgZ(35,"div",3)(36,"label",31),e._uU(37,"Sel"),e.qZA(),e.TgZ(38,"label",4),e._uU(39,"Candidate Name"),e.qZA(),e.TgZ(40,"label",5),e._uU(41,"Category Ref"),e.qZA(),e.TgZ(42,"label",6),e._uU(43,"Phone No"),e.qZA(),e.TgZ(44,"label",7),e._uU(45,"Nationality"),e.qZA(),e.TgZ(46,"label",7),e._uU(47,"Dt Regd"),e.qZA(),e.TgZ(48,"label",6),e._uU(49,"Status"),e.qZA(),e.TgZ(50,"label",32),e._uU(51,"Advise By"),e.qZA(),e.TgZ(52,"div",33)(53,"mat-icon",34),e._uU(54,"mail_outline"),e.qZA(),e.TgZ(55,"mat-icon",34),e._uU(56,"textsms"),e.qZA(),e.TgZ(57,"mat-icon",34),e._uU(58,"phone_forwarded"),e.qZA()()(),e._UZ(59,"hr",8),e.YNc(60,te,2,0,"div",35),e.YNc(61,oe,2,1,"div",0),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",void 0!==t.pagination),e.xp6(3),e.Q6J("items",t.paramsStatus)("ngModel",t.pParams.statusClass),e.xp6(24),e.Q6J("items",t.headers)("ngModel",t.distinctRefCat),e.xp6(1),e.Q6J("previewOnly",!1)("useExistingCss",!0)("disabled",""===t.distinctRefCat),e.xp6(21),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(3),e.Q6J("ngIf",!t.prospectives),e.xp6(1),e.Q6J("ngIf",t.prospectives)}}function re(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",41)(2,"mat-icon"),e._uU(3,"print"),e.qZA()(),e.TgZ(4,"button",42),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closePrintSection())}),e.TgZ(5,"mat-icon"),e._uU(6,"clear"),e.qZA()()()}2&n&&(e.xp6(1),e.Q6J("previewOnly",!1)("useExistingCss",!0))}function ce(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-prospective-line",40),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("prospective",t)("isReport",!0)}}function le(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ce,2,2,"div",38),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.printProspectives)}}let y=(()=>{class n{constructor(t,i,s,o,c,l,d,v){this.service=t,this.modalService=i,this.router=s,this.toastr=o,this.confirm=c,this.activatedRoute=l,this.accountService=d,this.speechService=v,this.returnUrl="",this.prospectives=[],this.printProspectives=[],this.totalCount=0,this.pParams=new C.F,this.statusSelected="",this.categoryReferences=[],this.ProspList=[],this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctRefCats=[],this.distinctRefCat="",this.paramsStatus=[{status:"All"},{status:"Active"},{status:"Declined"},{status:"Interested"}],this.callRecordStatus=[{status:"wrong number"},{status:"Not Responding"},{status:"Will Revert later"},{status:"Declined-Family issues"},{status:"Declined for overseas"},{status:"Declined-Low remuneration"},{status:"Declined - SC Not agreed"},{status:"Interested - to negotiate remuneration"},{status:"Interested, and keen"},{status:"Interested, but doubtful"}];let g=this.router.getCurrentNavigation();g?.extras&&g.extras.state&&(g.extras.state.returnUrl&&(this.returnUrl=g.extras.state.returnUrl),g.extras.state.user&&(this.user=g.extras.state.user),this.user||this.accountService.currentUser$.pipe((0,T.q)(1)).subscribe(Ae=>this.user=Ae))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.prospectives=t.prospectives.result,this.pagination=t.prospectives.pagination,this.totalCount=t.prospectives.totalCount,this.headers=t.headers})}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t&&(i.pageNumber=t.page,this.service.setParams(i),this.loadProspectives())}refreshDataset(){this.service.setParams(this.pParams),this.loadProspectives()}loadProspectives(){var t=this.service.getParams();this.service.getProspectivesPaged(t)?.subscribe({next:i=>{null!=i?(this.prospectives=i.result,this.totalCount=i?.count,this.pagination=i.pagination):console.log("response is undefined")},error:i=>console.log(i)})}selectedClicked(t){}selected(t){this.statusSelected=t}deleteProspectiveClicked(t){var i=t;const o=this.service.deleteProspectiveRecord(i);this.confirm.confirm("confirm Delete","confirm delete this prospective Candidate?. WARNING: this cannot be undone").pipe((0,m.h)(l=>l),(0,f.w)(l=>o)).subscribe(l=>{if(l){this.toastr.success("Prospective Candidate deleted","deletion successful");var d=this.prospectives.findIndex(v=>v.id==i);d>=0&&this.prospectives.splice(d,1)}else this.toastr.error("Error in deleting the checklist","failed to delete")})}editCallRecord(t,i){null!==t?(this.bsModalRef=this.modalService.show(q.h,{class:"modal-dialog-centered modal-lg",initialState:{callRecord:t,contactResults:this.callRecordStatus,candidateName:i.candidateName,userName:this.user?.userName}}),this.bsModalRef.content.passCallRecordEvent.pipe((0,m.h)(c=>null!==c),(0,f.w)(c=>this.service.updateCallRecord(c))).subscribe(c=>{if(c){this.toastr.success("Call Record updated","Update successful");var l=this.prospectives.findIndex(d=>d.id===i.id);-1!==l&&(i.status=c.status,this.prospectives[l]=i)}else this.toastr.error("Error in deleting the checklist","failed to delete")})):this.toastr.warning("No Call Record object returned from the modal form")}convertProspectiveToCandidate(t){var i=t;const o=this.service.convertProspectiveToCandidate(i);this.confirm.confirm("confirm Convert Prospective To Candidate","this will convert the selected prospective candidate to a candidate, and remove it from this prospectives list. WARNING: this cannot be undone").pipe((0,m.h)(l=>l),(0,f.w)(()=>o.pipe((0,k.K)(l=>(0,_.of)()),(0,Z.b)(l=>{if(0===l)this.toastr.warning("Failed to convert the prospective to candidate","Failed to convert");else{this.toastr.success("Converted the prospective to candidate, with Application No "+l,"success");var d=this.prospectives.findIndex(v=>v.id);d>=0&&this.prospectives.slice(d,1)}})))).subscribe(l=>{if(l){this.toastr.success("Prospective Candidate converted, with application No "+l,"Conversion successful");var d=this.prospectives.findIndex(v=>v.id==i);d>=0&&this.prospectives.splice(d,1)}else this.toastr.error("Error in converting the prospective candidate to a Candidate","failed to convert")})}onSearch(){const t=this.service.getParams();""!==this.searchTerm?.nativeElement.value&&(t.search=this.searchTerm?.nativeElement.value),""!==this.searchPhoneNo?.nativeElement.value&&(t.search=this.searchPhoneNo?.nativeElement.value),""!==this.searchTermName?.nativeElement.value&&(t.search=this.searchTermName?.nativeElement.value),t.pageNumber=1,this.service.setParams(t),this.loadProspectives()}onReset(){this.searchTerm.nativeElement.value="",this.pParams=new C.F,this.service.setParams(this.pParams),this.loadProspectives()}composeMessages(){var t=new I.w0,i=new L.x,s=[],o=this.prospectives.filter(c=>!0===c.checked);0!==o.length?(o.forEach(c=>{s.push({modeOfAdvise:c.byMail?"Mail":c.bySMS?"SMS":c.byPhone?"Phone":"",candidateResponse:c.status,candidateName:c.candidateName,phoneNo:c.phoneNo,emailId:c.email,candidateTitle:"Mr. ",subject:c.categoryRef,candidateUsername:c.userName,messageText:"",recipientUsername:"",senderUsername:"",dateComposed:new Date,candidateId:c.id})}),this.service.composeCallRecordMessage(s).subscribe({next:c=>{c.length>0?(console.log("response from composecallrecordmessage",c),c.forEach(l=>{"Phone"===l.modeOfAdvise&&(t.add(i.pipe((0,Z.b)(()=>this.speechService.updateSpeech({name:"text",value:l.messageText}))).subscribe()),i.subscribe({next:d=>{console.log("voice file name",d.name)}}))}),this.toastr.success("message composed","Success")):this.toastr.info("failed to compose message","Failed to compose msg")}})):this.toastr.warning("No candidate selected","Entry Error")}modeAdviseSelected(t){}distinctRefChanged(){0===this.headers.length&&this.service.getProspectiveHeadersDto(this.pParams.statusClass).subscribe({next:t=>{null!==t&&t.length>0?(this.headers=t,this.isPrintPDF=!0):this.toastr.warning("Failed to retrieve headers","Failed")}})}generatePDF(){this.isPrintPDF=!this.isPrintPDF;var t=this.distinctRefCat,i=this.pParams.statusClass;this.printtitle="Prospective Candidate Availability Status as on "+new Date+"<br>For Order No. "+t+", status = "+i,this.service.getParams(),this.service.getProspectivesList(t,i).subscribe({next:o=>{null!==o&&o.length>0?this.printProspectives=o:console.log("response is undefined")},error:o=>console.log(o)})}closePrintSection(){this.isPrintPDF=!1,this.distinctRefCat=""}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(x.k),e.Y36(J.tT),e.Y36(u.F0),e.Y36(w._W),e.Y36(F.z),e.Y36(u.gz),e.Y36(M.B),e.Y36(Q))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-prospective-list"]],viewQuery:function(i,s){if(1&i&&(e.Gf($,5),e.Gf(W,5),e.Gf(V,5),e.Gf(X,5)),2&i){let o;e.iGM(o=e.CRH())&&(s.searchTerm=o.first),e.iGM(o=e.CRH())&&(s.searchPhoneNo=o.first),e.iGM(o=e.CRH())&&(s.searchTermName=o.first),e.iGM(o=e.CRH())&&(s.discussionTerm=o.first)}},decls:23,vars:6,consts:[[4,"ngIf"],["id","print-section"],[1,"b","fontLarger"],[1,"form-inline"],[1,"lbl","w125",2,"margin-left","15px"],[1,"lbl","w150"],[1,"lbl","w100"],[1,"lbl","w75"],[1,"my-0"],[2,"display","inline-block","font-weight","bold"],[2,"display","inline-block","margin-left","15px","vertical-align","top"],["class","stdd mx-2","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","The paged list that will retreive records based upon the status you select",1,"lbl","w100","mx-2"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear",1,"stdd",2,"border-style","double","width","100px","font-size","small",3,"items","ngModel","ngModelChange"],["title","filters the records based upon the status selected",1,"btn","fa","fa-filter","fa-2x",2,"color","aliceblue",3,"click"],["title","go back","routerLink","/",1,"btn","fa","fa-window-close","fa-2x","mx-5",2,"color","aliceblue"],[1,"lbl","w50","b"],[1,"lbl","w50","tAlignRight"],["type","text","title","enter any part of category ref to search by","placeholder","Category",1,"stdd","fa-solid","fa-magnifying-glass","w100"],["search",""],[1,"lbl","w75","tAlignRight"],["type","text","title","enter the phone number to search by","placeholder","phone no",1,"stdd","fa-solid","fa-magnifying-glass","w100"],["searchPhoneNo",""],["type","text","title","enter any part of cnadidate name to search by","placeholder","Candidate Name",1,"stdd","fa-solid","fa-magnifying-glass","w150"],["searchName",""],["title","search the text entered",1,"btn","fa","fa-search",3,"click"],["title","compose messages for changes in candidate interests",1,"btn","fa","fa-check","fa-2x",2,"color","yellow",3,"click"],[1,"btn","fa","fa-refresh",3,"click"],[1,"stdd","w100","mx-2"],["bindLabel","orderno","bindValue","orderno","labelForId","orderno","clearAllText","Clear",3,"items","ngModel","ngModelChange","change"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","disabled","click"],[1,"lbl","w35"],[1,"lbl","w75",2,"margin-top","0px !important"],[1,"icon"],[3,"inline"],["class","my-2",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd","mx-2",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-2"],[4,"ngFor","ngForOf"],[3,"prospective","deleteEvent","editEvent","selectedEvent","convertToCandidateEvent"],[3,"prospective","isReport"],["printSectionId","print-section","printTitle","printtitle","ngxPrint","","title","shows the report in pdf format and enables printing",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss"],[3,"click"]],template:function(i,s){1&i&&(e.YNc(0,ae,62,13,"div",0),e.YNc(1,re,7,2,"div",0),e.TgZ(2,"div",1)(3,"div",2),e._uU(4),e.ALo(5,"uppercase"),e.qZA(),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Candidate Name"),e.qZA(),e.TgZ(9,"label",5),e._uU(10,"Category Ref"),e.qZA(),e.TgZ(11,"label",6),e._uU(12,"Phone No"),e.qZA(),e.TgZ(13,"label",7),e._uU(14,"Nationality"),e.qZA(),e.TgZ(15,"label",7),e._uU(16,"Date"),e._UZ(17,"br"),e._uU(18,"Registered"),e.qZA(),e.TgZ(19,"label",6),e._uU(20,"Status"),e.qZA()(),e._UZ(21,"hr",8),e.YNc(22,le,2,1,"div",0),e.qZA()),2&i&&(e.Q6J("ngIf",!s.isPrintPDF),e.xp6(1),e.Q6J("ngIf",s.isPrintPDF),e.xp6(3),e.Oqu(e.lcZ(5,4,null==s.user?null:s.user.employer)),e.xp6(18),e.Q6J("ngIf",s.prospectives))},dependencies:[p.sg,p.O5,A.Qt,h.JJ,h.On,G.w9,N.IH,b.Hw,u.rH,j,p.gd],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.lbl[_ngcontent-%COMP%]{display:inline-block;margin-left:2px;margin-right:1px;font-size:smaller;word-wrap:normal;vertical-align:middle;font-weight:700}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.tAlignRight[_ngcontent-%COMP%]{text-align:right}.fontLarger[_ngcontent-%COMP%]{font-size:larger}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.icon[_ngcontent-%COMP%]{font-size:15px;margin:0 0 0 695px}"]})}return n})();var ve=r(4794);class U{constructor(){this.recipientUsername="",this.senderUsername="",this.candidateName="",this.applicationNo=0,this.dateComposed=new Date,this.feedbackReceived=0,this.pageNumber=1,this.pageSize=15}}var ue=r(5619),ge=r(7398),he=r(5516),S=r(9862),me=r(1436);let fe=(()=>{class n{constructor(t,i){this.http=t,this.accountService=i,this.apiUrl=he.N.apiUrl,this.currentUserSource=new ue.X(null),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.accountService.currentUser$.pipe((0,T.q)(1)).subscribe({next:s=>{s&&(this.audioParams=this.audioParams),this.user=s}})}getAudioMessagesPaged(t=!0){if(t){const s=this.cache.get(Object.values(this.audioParams).join("-"));if(s)return(0,_.of)(s)}else this.cache=new Map;let i=function _e(n){let a=new S.LE;return a=a.append("pageNumber",n.pageNumber.toString()),a=a.append("pageSize",n.pageSize.toString()),""!==n.candidateName&&(a=a.append("candidateName",n.candidateName)),0!==n.feedbackReceived&&(a=a.append("feedbackReceived",n.feedbackReceived.toString())),n.dateComposed.getFullYear()>2e3&&(a=a.append("dateComposed",n.dateComposed.toDateString())),""!==n.recipientUsername&&(a=a.append("recipientUsername",n.recipientUsername)),a}(this.audioParams);return(0,me.Tr)(this.apiUrl+"prospectives/audioMessagePagedlist",i,this.http).pipe((0,ge.U)(s=>(this.cache.set(Object.values(this.audioParams).join("-"),s),s)))}setParams(t){this.audioParams=t}getParams(){return this.audioParams}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(S.eN),e.LFG(M.B))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ce(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"pagination",9),e.NdJ("pageChanged",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.onPageChanged(s))}),e._uU(1,"\n>"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}function xe(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," No matching customers on record "),e.qZA())}function Pe(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",11),e._uU(2),e.qZA(),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.TgZ(5,"div",12),e._uU(6),e.qZA(),e.TgZ(7,"div",13),e._uU(8),e.qZA(),e.TgZ(9,"div",11),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",14),e._uU(13),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.applicationNo),e.xp6(2),e.Oqu(t.candidateName),e.xp6(2),e.Oqu(t.subject),e.xp6(2),e.Oqu(t.messageText),e.xp6(2),e.Oqu(e.xi3(11,6,t.dateComposed,"dd-mmm-yy")),e.xp6(3),e.Oqu(t.feedbackReceived)}}function be(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Pe,14,9,"div",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.audioDtos)}}const Ze=[{path:"",component:E},{path:"prospective",component:y,resolve:{prospectives:()=>{var n=new C.F;return(0,e.f3M)(x.k).getProspectivesPaged(n)},headers:ve.y}},{path:"prospectiveReport/:orderno",component:y,resolve:{reports:n=>{var a=n.paramMap.get("orderno")??"0";return"0"===a||""===a?(0,_.of)(null):(0,e.f3M)(x.k).getProspectivesList(a,"active")}}},{path:"audiomessages",component:(()=>{class n{constructor(t,i){this.service=t,this.router=i,this.returnUrl="",this.audioDtos=[],this.totalCount=0,this.aParams=new U,this.isPrintPDF=!1,this.printtitle="",t.setParams(this.aParams)}ngOnInit(){this.loadAudioLists(!1)}loadAudioLists(t=!0){this.service.getParams(),this.service.setParams(this.aParams),this.service.getAudioMessagesPaged(t)?.subscribe({next:s=>{null!=s&&(this.audioDtos=s.result,this.totalCount=s?.count,this.pagination=s.pagination)},error:s=>console.log(s)})}close(){this.router.navigateByUrl(this.returnUrl)}onPageChanged(t){const i=this.service.getParams();i.pageNumber!==t.page&&(i.pageNumber=t.page,this.service.setParams(i),this.loadAudioLists())}setParameters(){var t=new U;this.service.setParams(t),this.loadAudioLists()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(fe),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-audio"]],decls:20,vars:3,consts:[["class","stdd","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["title","close this page",1,"btn","btn-outline-success","fa","fa-window-close","mx-1",3,"click"],[1,"my-0"],[1,"lbl","w100",2,"margin-left","25px !important"],[1,"lbl","w200"],[1,"lbl","w250"],[1,"lbl","w100"],[1,"lbl","w75"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"stdd",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[4,"ngFor","ngForOf"],[1,"stdd","w100"],[1,"stdd","w200"],[1,"stddS","w250"],[1,"stdd","w75"]],template:function(i,s){1&i&&(e.TgZ(0,"h4"),e._uU(1,"Customer Listing"),e.qZA(),e.YNc(2,Ce,2,3,"pagination",0),e.TgZ(3,"button",1),e.NdJ("click",function(){return s.close()}),e.qZA(),e._UZ(4,"hr",2),e.TgZ(5,"label",3),e._uU(6,"App No"),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"Candidate Name"),e.qZA(),e.TgZ(9,"label",4),e._uU(10,"Subject"),e.qZA(),e.TgZ(11,"label",5),e._uU(12,"Message Text"),e.qZA(),e.TgZ(13,"label",6),e._uU(14,"Date Composed"),e.qZA(),e.TgZ(15,"label",7),e._uU(16,"Feedback"),e.qZA(),e._UZ(17,"hr"),e.YNc(18,xe,2,0,"div",8),e.YNc(19,be,2,1,"div",8)),2&i&&(e.xp6(2),e.Q6J("ngIf",void 0!==s.pagination),e.xp6(16),e.Q6J("ngIf",!s.audioDtos),e.xp6(1),e.Q6J("ngIf",s.audioDtos))},dependencies:[p.sg,p.O5,A.Qt,p.uU],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w250[_ngcontent-%COMP%]{width:250px}.w200[_ngcontent-%COMP%]{width:200px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;word-wrap:normal;vertical-align:top}.stddS[_ngcontent-%COMP%]{display:inline-block;font-size:x-small;margin:0 2px;word-wrap:normal;vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;vertical-align:top;word-wrap:normal;vertical-align:middle;font-weight:700}"]})}return n})()}];let we=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[p.ez,u.Bz.forChild(Ze),u.Bz]})}return n})(),Me=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[p.ez,O.m,R.ot,N.K8,b.Ps,we]})}return n})()}}]);