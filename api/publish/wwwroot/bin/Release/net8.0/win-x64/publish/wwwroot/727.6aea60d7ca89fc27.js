"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[727],{109:(I,S,a)=>{a.d(S,{l:()=>l});class l{constructor(){this.candidateId=0,this.candidateName="",this.applicationNo=0,this.agentId=0,this.customerId=0,this.orderId=0,this.orderNo=0,this.selectionStatus="",this.sort="name",this.pageNumber=1,this.pageSize=15,this.search=""}}},778:(I,S,a)=>{a.d(S,{G:()=>P});var l=a(7705),c=a(779);let y=(()=>{class p{constructor(f){this.bsModalRef=f,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(u){return new(u||p)(l.rXU(c.Y$))};static#t=this.\u0275cmp=l.VBU({type:p,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(u,g){1&u&&(l.j41(0,"div",0)(1,"h4",1),l.EFF(2),l.k0s()(),l.j41(3,"div",2)(4,"p"),l.EFF(5),l.k0s()(),l.j41(6,"div",3)(7,"button",4),l.bIt("click",function(){return g.confirm()}),l.EFF(8),l.k0s(),l.j41(9,"button",5),l.bIt("click",function(){return g.decline()}),l.EFF(10),l.k0s()()),2&u&&(l.R7$(2),l.JRh(g.title),l.R7$(3),l.JRh(g.message),l.R7$(3),l.JRh(g.btnOkText),l.R7$(2),l.JRh(g.btnCancelText))}})}return p})();var e=a(6354),E=a(3587),F=a(1626);let P=(()=>{class p{constructor(f,u){this.modalService=f,this.http=u,this.baseUrl=E.c.apiUrl}confirm(f="Confirmation",u="Are you sure you want to do this?",g="Ok",b="Cancel"){return this.bsModelRef=this.modalService.show(y,{initialState:{title:f,message:u,btnOkText:g,btnCancelText:b}}),this.bsModelRef.onHidden.pipe((0,e.T)(()=>this.bsModelRef.content.result))}getHelp(f){return this.http.get(this.baseUrl+"Help/help/"+f)}static#e=this.\u0275fac=function(u){return new(u||p)(l.KVO(c.I8),l.KVO(F.Qq))};static#t=this.\u0275prov=l.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},8028:(I,S,a)=>{a.d(S,{y:()=>g});var l=a(2771),c=a(6697),y=a(7673),e=a(6354),E=a(3587),F=a(109),P=a(6220),p=a(7705),_=a(5743),f=a(1822),u=a(1626);let g=(()=>{class b{constructor(m,w,C){this.activatedRoute=m,this.accountService=w,this.http=C,this.apiUrl=E.c.apiUrl,this.currentUserSource=new l.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cache=new Map,this.cacheReferred=new Map,this.cvRefParams=new F.l,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-High Salary Expectation"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}],this.accountService.currentUser$.pipe((0,c.s)(1)).subscribe(D=>this.user=D)}referCVs(m){return this.http.post(this.apiUrl+"CVRef",m)}referredCVsPaginated(m=!1){if(m){const C=this.cacheReferred.get(Object.values(this.cvRefParams).join("-"));if(C)return(0,y.of)(C)}else this.cacheReferred=new Map;let w=(0,P.vn)(this.cvRefParams);return(0,P.f8)(this.apiUrl+"cvref/cvsreferred",w,this.http).pipe((0,e.T)(C=>(this.cacheReferred.set(Object.values(this.cvRefParams).join("-"),C),C)))}deleteCVRef(m){return this.http.delete(this.apiUrl+"CVRef/deleteCVRef/"+m)}getCVRefWithDeploys(m){return this.http.get(this.apiUrl+"CVRef/cvrefwithdeploys/"+m)}getCVRefWithCVRefId(m){return this.http.get(this.apiUrl+"CVRef/cvref/"+m)}registerSelectionDecisions(m){return this.http.post(this.apiUrl+"Selection",m)}getCVReferredOrderNosDto(m){return this.http.get(this.apiUrl+"CVRef/headers/"+m)}downloadCV(m){return this.http.get(this.apiUrl+"FileUpload/downloadcv/"+m,{reportProgress:!0,responseType:"blob"})}setParams(m){this.cvRefParams=m}getParams(){return this.cvRefParams}static#e=this.\u0275fac=function(w){return new(w||b)(p.KVO(_.nX),p.KVO(f.D),p.KVO(u.Qq))};static#t=this.\u0275prov=p.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})()},1727:(I,S,a)=>{a.r(S),a.d(S,{SelectionModule:()=>be});var l=a(177),c=a(9417),y=a(9485),e=a(7705);let E=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selection-menu"]],decls:2,vars:0,template:function(n,i){1&n&&(e.j41(0,"p"),e.EFF(1,"selection-menu works!"),e.k0s())}})}return o})();var F=a(109),P=a(8028),p=a(8256),_=a(5743),f=a(3400),u=a(2510),g=a(9213),b=a(3409);function N(o,h){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"input",1),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.SelectedClicked())})("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.pending.checked=i)}),e.k0s(),e.j41(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"div",3),e.EFF(5),e.k0s(),e.j41(6,"div",4),e.EFF(7),e.k0s(),e.j41(8,"div",5),e.EFF(9),e.k0s(),e.j41(10,"div",6),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",6),e.EFF(14),e.nI1(15,"timeago"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(1),e.Y8G("checked",t.pending.checked)("ngModel",t.pending.checked),e.R7$(2),e.JRh(t.pending.applicationNo),e.R7$(2),e.JRh(t.pending.candidateName),e.R7$(2),e.JRh(t.pending.customerName),e.R7$(2),e.JRh(t.pending.categoryRefAndName),e.R7$(2),e.JRh(e.i5U(12,8,t.pending.referredOn,"dd-MMM-yy")),e.R7$(3),e.JRh(e.bMT(15,11,t.pending.referredOn))}}let m=(()=>{class o{constructor(){this.selectedEvent=new e.bkB}ngOnInit(){}SelectedClicked(){this.selectedEvent.emit(this.pending)}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selection-pending-line"]],inputs:{pending:"pending"},outputs:{selectedEvent:"selectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["type","checkbox",1,"form-check-input","stdd","mL85",2,"border","aliceblue","border","inset",3,"checked","ngModel","change","ngModelChange"],[2,"display","inline-block","vertical-align","top","margin-left","30px !important","width","50px"],[1,"stdd","w150","mL10"],[1,"stdd","w200"],[1,"stdd","w150"],[1,"stdd","w100"]],template:function(n,i){1&n&&e.DNE(0,N,16,13,"div",0),2&n&&e.Y8G("ngIf",i.pending)},dependencies:[l.bT,c.Zm,c.BC,c.vS,l.vh,b.PZ],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL85[_ngcontent-%COMP%]{margin-left:85px!important}.mL10[_ngcontent-%COMP%]{margin-left:10px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})();const w=["search"];function C(o,h){if(1&o){const t=e.RV6();e.j41(0,"pagination",19),e.bIt("pageChanged",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onPageChanged(i))}),e.EFF(1," >"),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",20)}}function D(o,h){1&o&&(e.j41(0,"div",20)(1,"h4"),e.EFF(2,"No selections pending as per your parameters"),e.k0s()())}function L(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",21)(1,"app-selection-pending-line",22),e.bIt("selectedEvent",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.pendingSelected(i))}),e.k0s()()}if(2&o){const t=h.$implicit;e.R7$(1),e.Y8G("pending",t)}}let X=(()=>{class o{constructor(t,n,i,s){this.service=t,this.toastr=n,this.activatedRoute=i,this.router=s,this.selectionsPending=[],this.pendingSelectionsSelected=[],this.selectionStatus="",this.cvsSelected=[],this.sParams=new F.l,this.rejectionStatuses=[],this.pageIndex=1,this.totalCount=0,this.title="Selections pending",this.todayDate=new Date(Date.now());let r=this.router.getCurrentNavigation();r?.extras&&r.extras.state&&(r.extras.state.title&&(this.title=r.extras.state.title),r.extras.state.user&&(this.user=r.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.rejectionStatuses=t.rejReasons,this.selectionsPending=t.selPending.result,this.pagination=t.selPending.pagination,this.totalCount=t.selPending.count}),this.sParams.selectionStatus="Pending"}getPendingSelectionsPaged(t=!0){this.service.setParams(this.sParams),this.service.referredCVsPaginated().subscribe({next:n=>{n.result&&n.pagination?(this.selectionsPending=n.result,this.totalCount=n.count,this.pagination=n.pagination):this.toastr.warning("There are no pending selections","No record found")},error:n=>this.toastr.error(n)})}convertSelDecisionToDto(t){if(0!==t.length){var n=[];return t.forEach(i=>{n.push({cVRefId:i.cvRefId,selectionStatus:this.selectionStatus??"",decisionDate:this.todayDate,remarks:i.remarks??""})}),n}this.toastr.warning("no selections made to save")}UpdateSelections(){if(0!==this.pendingSelectionsSelected.length){if(this.pendingSelectionsSelected=this.pendingSelectionsSelected.filter(n=>n.checked),""===this.selectionStatus||0===this.pendingSelectionsSelected.length)return void this.toastr.warning("Please press the MARK AS SELECTED Button, or choose one of the rejectioon reasons to proceed. also, atleast one candidate must be selected","Selection Status not chosen");var t=this.convertSelDecisionToDto(this.pendingSelectionsSelected);return this.service.registerSelectionDecisions(t).subscribe({next:n=>{console.log("selectionpending.ts, response:",n),this.toastr.success("Selections Registered.  The employment details can be viewed/edited from Selections Page","selection decisions registered"),null==n.errortring||""===n.errortring?n.cvRefIdsInserted.forEach(i=>{var s=this.selectionsPending.findIndex(d=>d.cvRefId===i);if(s>=0){this.selectionsPending.splice(s,1);var r=this.pendingSelectionsSelected.findIndex(d=>d.cvRefId===i);r>=0&&this.pendingSelectionsSelected.splice(r,1)}}):""!==n.notification?this.toastr.info(n.notification,"Failed to register the selection decisions"):""!==n.errortring&&this.toastr.warning(n.errortring,"Failed to register the selection decisions")},error:n=>{console.log("error:",n),this.toastr.error(n.error.details?n.error.details:n.details,"Error in registering the selections")}})}}onPageChanged(t){const n=this.service.getParams();n.pageNumber!==t.page&&(n.pageNumber=t.page,this.service.setParams(n),this.getPendingSelectionsPaged(!0))}onSortSelected(t){var n=t.value;const i=this.service.getParams();i.sort=n,i.pageNumber=1,i.pageSize=10,this.service.setParams(i),this.getPendingSelectionsPaged(!0)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getPendingSelectionsPaged(!0)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new F.l,this.service.setParams(this.sParams),this.getPendingSelectionsPaged(!0)}changeSelectionStatus(t){this.selectionStatus=t.name,console.log("selection status",this.selectionStatus)}pendingSelected(t){if(t.checked){var n=this.pendingSelectionsSelected.find(s=>s.cvRefId===t.cvRefId);n?n.checked=t.checked:this.pendingSelectionsSelected.push(t)}else{var i=this.pendingSelectionsSelected.findIndex(s=>s.cvRefId===t.cvRefId);i>=0&&this.pendingSelectionsSelected.splice(i,1)}}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(P.y),e.rXU(p.tw),e.rXU(_.nX),e.rXU(_.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selection-pending"]],viewQuery:function(n,i){if(1&n&&e.GBs(w,5),2&n){let s;e.mGM(s=e.lsd())&&(i.searchTerm=s.first)}},decls:40,vars:7,consts:[[2,"display","inline-block","font-weight","bold"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[2,"width","50px","display","inline-block","padding-left","5px","font-size","larger","word-wrap","break-word","vertical-align","middle"],[1,"form-inline",2,"margin-left","50px !important","display","inline-block"],["type","text","placeholder","Search",1,"stdd","form-control","w300",3,"keyup.enter"],["search",""],[1,"btn","matContrast","btn-outline-primary","mx-1",3,"click"],[1,"btn",3,"click"],["title","Choose the rejection Status.  Press the UPDATE SELECTION button to save these changes",1,"stdd","w200","mx-2"],["bindLabel","name","bindValue","name","labelForId","selectionStatus","clearAllText","Clear",2,"border-style","double",3,"items","ngModel","ngModelChange","change"],["title","update the selections/rejections",1,"btn","mx-2",3,"disabled","click"],["routerLink","/","title","Close",1,"btn","mx-2"],[1,"stdd","w50","mL80"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","my-5",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"my-5"],[1,"row"],[3,"pending","selectedEvent"]],template:function(n,i){1&n&&(e.j41(0,"h4",0),e.EFF(1,"Selections Pending as on date"),e.k0s(),e.nrm(2,"br"),e.DNE(3,C,2,3,"pagination",1),e.j41(4,"label",2),e.EFF(5),e.k0s(),e.j41(6,"div",3)(7,"input",4,5),e.bIt("keyup.enter",function(){return i.onSearch()}),e.k0s(),e.j41(9,"button",6),e.bIt("click",function(){return i.onSearch()}),e.j41(10,"mat-icon"),e.EFF(11,"search"),e.k0s()(),e.j41(12,"button",7),e.bIt("click",function(){return i.onReset()}),e.j41(13,"mat-icon"),e.EFF(14,"refresh"),e.k0s()(),e.j41(15,"div",8)(16,"ng-select",9),e.bIt("ngModelChange",function(r){return i.selectionStatus=r})("change",function(r){return i.changeSelectionStatus(r)}),e.k0s()()(),e.j41(17,"button",10),e.bIt("click",function(){return i.UpdateSelections()}),e.j41(18,"mat-icon"),e.EFF(19,"check"),e.k0s()(),e.j41(20,"button",11)(21,"mat-icon"),e.EFF(22,"cancel"),e.k0s()(),e.nrm(23,"br"),e.j41(24,"label",12),e.EFF(25,"Check"),e.k0s(),e.j41(26,"label",13),e.EFF(27,"App No"),e.k0s(),e.j41(28,"label",14),e.EFF(29,"Candidate Name"),e.k0s(),e.j41(30,"label",15),e.EFF(31,"Customer Name"),e.k0s(),e.j41(32,"label",14),e.EFF(33,"Category Ref"),e.k0s(),e.j41(34,"label",16),e.EFF(35,"Referred On"),e.k0s(),e.j41(36,"label",16),e.EFF(37,"Days since"),e.k0s(),e.DNE(38,D,3,0,"div",17),e.DNE(39,L,2,1,"div",18)),2&n&&(e.R7$(3),e.Y8G("ngIf",i.selectionsPending&&i.pagination),e.R7$(2),e.SpI(" of ",i.pagination.totalItems,""),e.R7$(11),e.Y8G("items",i.rejectionStatuses)("ngModel",i.selectionStatus),e.R7$(1),e.Y8G("disabled",""===i.selectionStatus||0===i.pendingSelectionsSelected.length),e.R7$(21),e.Y8G("ngIf",!i.selectionsPending||0===i.selectionsPending.length),e.R7$(1),e.Y8G("ngForOf",i.selectionsPending))},dependencies:[l.Sq,l.bT,c.BC,c.vS,f.eK,u.vr,_.Wk,g.An,m],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle;font-weight:700}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.b[_ngcontent-%COMP%]{font-weight:700}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.matContrast[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})();var Y=a(8434),T=a(5964),j=a(5558),R=a(9437),k=a(7673),G=a(8141),A=a(4161),U=a(779),V=a(778),z=a(2771),H=a(6354),B=a(1626),W=a(3587);class K{constructor(){this.approved="null",this.selDecisionId=0,this.cvRefId=0,this.orderItemId=0,this.categoryId=0,this.orderId=0,this.orderNo=0,this.candidateId=0,this.applicationNo=0,this.customerId=0,this.customerName="",this.categoryName="",this.candidateName="",this.selectionDateFrom=new Date("1900-01-01"),this.selectionDateUpto=new Date("1900-01-01"),this.sort="orderitemid",this.searchOn="appno",this.pageNumber=1,this.pageSize=10,this.search=""}}var $=a(6220);let Q=(()=>{class o{constructor(t){this.http=t,this.apiUrl=W.c.apiUrl,this.currentUserSource=new z.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.eParams=new K,this.cache=new Map}getEmployments(t){const n=this.cache.get(Object.values(t).join("-"));if(n)return(0,k.of)(n);let i=(0,$.y1)(t);return(0,$.f8)(this.apiUrl+"Employment",i,this.http).pipe((0,H.T)(s=>(this.cache.set(Object.values(t).join("-"),s),s)))}GetEmploymentObject(t){return this.http.get(this.apiUrl+"employment/generate/"+t)}updateEmployment(t){return this.http.put(this.apiUrl+"employment/employment",t)}deleteEmployment(t){return this.http.delete(this.apiUrl+"employment/"+t)}downloadAttachment(t){let n=new B.Nl;return n=n.append("fullpath",t),this.http.get(this.apiUrl+"FileUpload/downloadfile",{params:n,responseType:"blob"})}setEParams(t){this.eParams=t}getEParams(){return this.eParams}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(B.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var M=a(9375);function Z(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",3)(1,"h4"),e.EFF(2,"Employment details"),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateEmployment())}),e.j41(4,"mat-icon"),e.EFF(5,"save"),e.k0s()(),e.j41(6,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.j41(7,"mat-icon"),e.EFF(8,"cancel"),e.k0s()()()}}const q=function(){return{dateInputFormat:"YYYY-MM-DD"}};function ee(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"form",7)(2,"label",8),e.EFF(3,"Application No:"),e.k0s(),e.j41(4,"div",9),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.j41(7,"label",10),e.EFF(8,"Customer Name"),e.k0s(),e.j41(9,"div",9),e.EFF(10),e.k0s(),e.nrm(11,"br"),e.j41(12,"label",10),e.EFF(13,"Category Ref"),e.k0s(),e.j41(14,"div",9),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"label",11),e.EFF(18,"Offer Acceptance"),e.k0s(),e.j41(19,"div",12),e.nrm(20,"ng-select",13),e.k0s(),e.nrm(21,"br"),e.j41(22,"label",14),e.EFF(23,"Accept/Decline `On"),e.k0s(),e.j41(24,"div",15),e.nrm(25,"input",16),e.k0s(),e.nrm(26,"br")(27,"br"),e.j41(28,"input",17),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onFileInputChange(i))}),e.k0s(),e.j41(29,"label",18),e.EFF(30,"Offer Attachment File Name"),e.k0s(),e.nrm(31,"input",19)(32,"br"),e.j41(33,"label",18),e.EFF(34,"Offer Attachment Full Path"),e.k0s(),e.nrm(35,"input",20),e.j41(36,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.download())}),e.k0s(),e.nrm(37,"hr",22),e.j41(38,"label",11),e.EFF(39,"Currency & Salary"),e.k0s(),e.nrm(40,"input",23)(41,"input",24)(42,"hr",25),e.j41(43,"label",11),e.EFF(44,"Perks"),e.k0s(),e.j41(45,"label",26),e.EFF(46,"Allowance"),e.k0s(),e.j41(47,"label",26),e.EFF(48,"Provided Free"),e.k0s(),e.j41(49,"label",26),e.EFF(50,"Not Provided"),e.k0s(),e.nrm(51,"br"),e.j41(52,"label",27),e.EFF(53,"Housing"),e.k0s(),e.nrm(54,"input",28)(55,"input",29)(56,"input",30)(57,"br"),e.j41(58,"label",31),e.EFF(59,"Food"),e.k0s(),e.nrm(60,"input",32)(61,"input",33)(62,"input",34)(63,"br"),e.j41(64,"label",35),e.EFF(65,"Transportation"),e.k0s(),e.nrm(66,"input",36)(67,"input",37)(68,"input",38)(69,"br"),e.j41(70,"label",39),e.EFF(71,"Other Allowance"),e.k0s(),e.nrm(72,"input",40)(73,"br"),e.j41(74,"label",31),e.EFF(75,"Contract Period"),e.k0s(),e.nrm(76,"input",41),e.j41(77,"label",42),e.EFF(78,"Months"),e.k0s(),e.nrm(79,"br"),e.j41(80,"label",31),e.EFF(81,"Annual Leave"),e.k0s(),e.nrm(82,"input",43),e.j41(83,"label",44),e.EFF(84,"days, after"),e.k0s(),e.nrm(85,"input",45),e.j41(86,"label",46),e.EFF(87,"months of employment"),e.k0s()()()}if(2&o){const t=e.XpG();let n;e.R7$(1),e.Y8G("formGroup",t.form),e.R7$(4),e.JRh(t.candidateName),e.R7$(5),e.JRh(t.companyName),e.R7$(5),e.JRh(t.categoryRef),e.R7$(5),e.Y8G("items",t.statuses),e.R7$(5),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(8,q)),e.R7$(11),e.Y8G("disabled",""===(null==(n=t.form.get("offerAttachmentFullPath"))?null:n.value))}}let te=(()=>{class o{constructor(t,n,i,s,r){this.bsModalRef=t,this.toastr=n,this.confirmService=i,this.fb=s,this.service=r,this.updateEmp=new e.bkB,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.categoryRef="",this.companyName="",this.candidateName="",this.form=new c.gE({}),this.formData=new FormData,this.statuses=[{status:"Accepted"},{status:"Declined - Salary Low"},{status:"Declined - Company history suspicious"},{status:"Declined - Work Hours too long"},{status:"Declined - Cannot pay Services Charges"},{status:"Declined - Family problems"}]}ngOnInit(){this.emp&&this.InitializeForm(this.emp)}InitializeForm(t){this.form=this.fb.group({id:[t.id],selDecisionId:[t.selectionDecisionId],cvRefId:[t.cvRefId],selectionDecisionId:[t.selectionDecisionId],selectedOn:[t.selectedOn],charges:[t.charges],offerAttachmentFileName:[t.offerAttachmentFileName],offerAttachmentFullPath:[t.offerAttachmentFullPath],salaryCurrency:[t.salaryCurrency,c.k0.required],salary:[t.salary,c.k0.required],contractPeriodInMonths:[t.contractPeriodInMonths,c.k0.required],weeklyHours:[t.weeklyHours,c.k0.required],housingProvidedFree:[t.housingProvidedFree],housingNotProvided:[t.housingNotProvided??!1],housingAllowance:[t.housingAllowance],foodProvidedFree:[t.foodProvidedFree],foodNotProvided:[t.foodNotProvided??!1],foodAllowance:[t.foodAllowance],transportProvidedFree:[t.transportProvidedFree],transportNotProvided:[t.transportNotProvided??!1],transportAllowance:[t.transportAllowance],otherAllowance:[t.otherAllowance],leavePerYearInDays:[t.leavePerYearInDays],leaveAirfareEntitlementAfterMonths:[t.leaveAirfareEntitlementAfterMonths],offerAccepted:[t.offerAccepted],offerAcceptedOn:[t.offerAcceptedOn]})}updateEmployment(){var t=this.form.value;t.housingAllowance=t.housingAllowance??0,t.foodAllowance=t.foodAllowance??0,t.transportAllowance=t.transportAllowance??0;var n="";t.foodAllowance>0&&(t.foodNotProvided||t.foodProvidedFree)&&(n="only one value allowed : either Food Allowance, Food Not Provided Or Food Provided "),t.housingAllowance>0&&(t.housingProvidedFree||t.housingNotProvided)&&(n+="only one value allowed : either Housing Allowance, Housing Not Provided Or Housing Provided "),t.transportAllowance>0&&(t.transportProvidedFree||t.transportNotProvided)&&(n+="only one value allowed : either Transport Allowance, Transport Not Provided Or Transport Provided "),null===t.cVRefId&&(t.cVRefId=0),""===n?(this.formData.append("data",JSON.stringify(t)),this.updateEmp.emit(this.formData),this.bsModalRef.hide()):this.toastr.warning(n,"Invalid data")}close(){this.bsModalRef.hide()}onFileInputChange(t){const s=t.target.files[0];s.size>0&&(this.formData.append("file",s,s.name),this.form.get("offerAttachmentFileName")?.setValue(s.name))}download(){var t=this.form.get("offerAttachmentFullPath")?.value;null===t||""===t||this.service.downloadAttachment(t).subscribe({next:n=>{const i=document.createElement("a"),s=URL.createObjectURL(n);i.href=s;var r=t.lastIndexOf("\\");i.download=-1!==r?t.substring(r+1):"filename.ext",i.click(),URL.revokeObjectURL(s)},error:n=>this.toastr.error(n.error.details,"Error encountered while downloading the file ")})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(U.Y$),e.rXU(p.tw),e.rXU(V.G),e.rXU(c.ok),e.rXU(Q))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-employment-modal"]],inputs:{emp:"emp",updateEmp:"updateEmp"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer","my-0"],[1,"modal-header","my-0"],["title","edit emp data",1,"btn",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","pull-right",3,"click"],[1,"modal-body","my-0"],[3,"formGroup"],["for","applicationNo",1,"stdd","w150","b"],[1,"stdd","w200"],["for","customerName",1,"stdd","w150","b"],[1,"stdd","w150","b"],[1,"stdd","w175"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","offerAccepted",2,"border","color(from color srgb r g b)","font-size","smaller",3,"items"],[1,"stdd","b","w150"],[2,"display","inline-block","width","110px"],["type","text","placeholder","Offer accepted On","formControlName","offerAcceptedOn","bsDatepicker","",1,"stdd","w110",3,"bsValue","bsConfig"],["type","file","id","file","title","click to choose the Offer Letter to upload",1,"stdd","d-flex","align-items-center",3,"change"],[1,"stdd","b","w175"],["type","text","formControlName","offerAttachmentFileName",1,"stdd","w200"],["type","text","formControlName","offerAttachmentFullPath",1,"stdd","w200"],["title","click to download the offer letter - disabled if not uploaded",1,"btn","fa","fa-download",3,"disabled","click"],[2,"border","double","margin-top","2px","margin-bottom","2px"],["type","text","title","salary currency","formControlName","salaryCurrency",1,"stdd","w50","ml-10"],["type","number","title","salary","formControlName","salary",1,"stdd","w75"],[1,"my-0"],[1,"stdd","w100","b"],["for","housingAllowance",1,"stdd","w150"],["type","number","title","housing allowance","formControlName","housingAllowance",1,"stdd","w75"],["type","checkbox","formControlName","housingProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","housingNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],[1,"stdd","w150"],["type","number","title","Food Allowance","formControlName","foodAllowance",1,"stdd","w75"],["type","checkbox","formControlName","foodProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","foodNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","Transportation",1,"stdd","w150"],["type","number","title","Transportation allowance","formControlName","transportAllowance",1,"stdd","w75"],["type","checkbox","formControlName","transportProvidedFree",1,"form-check-input","w20","hAlignCenter",2,"margin-left","50px"],["type","checkbox","formControlName","transportNotProvided",1,"form-check-input","w20","hAlignCenter",2,"margin-left","75px"],["for","otherAllowance",1,"stdd","w150"],["type","number","title","Other allowance","formControlName","otherAllowance",1,"stdd","w75"],["type","number","title","Contract Period n months","formControlName","contractPeriodInMonths",1,"stdd","w50"],[1,"stdd","w50"],["type","number","title","Number of days leave in a year","formControlName","leavePerYearInDays",1,"stdd","w50"],[1,"stdd","w75"],["type","number","title","after months of employment","formControlName","leaveAirfareEntitlementAfterMonths",1,"stdd","w50"],[1,"stdd","w100"]],template:function(n,i){1&n&&(e.DNE(0,Z,9,0,"div",0),e.DNE(1,ee,88,9,"div",1),e.nrm(2,"div",2)),2&n&&(e.Y8G("ngIf",i.emp),e.R7$(1),e.Y8G("ngIf",i.emp))},dependencies:[l.bT,c.qT,c.me,c.Q0,c.Zm,c.BC,c.cb,M.pc,M.p0,c.j4,c.JD,u.vr,g.An],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w35[_ngcontent-%COMP%]{width:35px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.bordernone[_ngcontent-%COMP%]{border:none}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.mL5[_ngcontent-%COMP%]{margin-right:5px!important}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:middle}.b[_ngcontent-%COMP%]{font-weight:700}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0;padding:0;width:15px}"]})}return o})();var x=a(1512);function ne(o,h){if(1&o&&(e.j41(0,"div",5)(1,"div",6),e.EFF(2,"Candidate:"),e.k0s(),e.j41(3,"div",7),e.EFF(4),e.k0s()()),2&o){const t=e.XpG();e.R7$(4),e.JRh(t.candidateName)}}const ie=function(){return{dateInputFormat:"YYYY-MM-DD"}};function oe(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",8)(1,"div",9),e.EFF(2,"Customer"),e.k0s(),e.j41(3,"div",10),e.EFF(4),e.k0s(),e.j41(5,"div",11)(6,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.update())}),e.j41(7,"mat-icon"),e.EFF(8,"save"),e.k0s()(),e.j41(9,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.bsModalRef.hide())}),e.j41(10,"mat-icon"),e.EFF(11,"cancel"),e.k0s()(),e.j41(12,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSel())}),e.j41(13,"mat-icon"),e.EFF(14,"delete"),e.k0s()()(),e.nrm(15,"br"),e.j41(16,"div",9),e.EFF(17,"Category Selected"),e.k0s(),e.j41(18,"div",10),e.EFF(19),e.k0s(),e.nrm(20,"br"),e.j41(21,"div",9),e.EFF(22,"Selected On"),e.k0s(),e.nrm(23,"input",15)(24,"br"),e.j41(25,"label",9),e.EFF(26,"Selection Status"),e.k0s(),e.j41(27,"div",10),e.nrm(28,"ng-select",16),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(4),e.JRh(t.customerName),e.R7$(15),e.JRh(t.categoryRefAndName),e.R7$(4),e.Y8G("bsValue",t.bsValueDate)("bsConfig",e.lJ4(5,ie)),e.R7$(5),e.Y8G("items",t.statuses)}}let se=(()=>{class o{constructor(t,n,i,s,r){this.bsModalRef=t,this.confirmService=n,this.toastr=i,this.fb=s,this.service=r,this.updateObj=new e.bkB,this.candidateName="",this.customerName="",this.categoryRefAndName="",this.form=new c.gE({}),this.bsValueDate=new Date,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.statuses=[{status:"selected"},{status:"Rejected - Profile does not match"},{status:"Rejected - High Salary expectation"},{status:"Rejected - over-age"},{status:"Rejected - Qualification does not match"},{status:"Rejected - Low Exp"},{status:"Rejected - Exp not relevant"},{status:"Rejected - profile not relevant"}]}ngOnInit(){this.sel&&this.Initialize(this.sel),console.log("recd in in modal ngOnINit:",this.sel)}Initialize(t){this.form=this.fb.group({id:[t.id],candidateId:t.candidateId??0,candidateName:[t.candidateName],applicationNo:[t.applicationNo??0],customerName:[t.customerName],professionName:[t.professionName],cvRefId:[t.cvRefId],orderItemId:t.orderItemId??0,professionId:t.professionId??0,selectedOn:[t.selectedOn],selectionStatus:[t.selectionStatus],remarks:t.remarks})}update(){this.updateObj.emit(this.form.value),this.bsModalRef.hide()}deleteSel(){if(this.sel){const n=this.service.deleteSelectionDecisions(this.sel.id);this.confirmService.confirm("Confirm Delete","This will delete this selection record, along with all related records like Employments and all deployment records.  Or, depending upon settings, the deletion might fail if there are related records").pipe((0,j.n)(s=>n.pipe((0,R.W)(r=>(console.log("Error in deleting the order",r),(0,k.of)())),(0,G.M)(r=>this.toastr.success("deleted Selection record")))),(0,R.W)(s=>(this.toastr.error("Error in getting delete confirmation",s),(0,k.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},s=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",s)}),this.bsModalRef.hide()}}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(U.Y$),e.rXU(V.G),e.rXU(p.tw),e.rXU(c.ok),e.rXU(x.A))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selection-modal"]],inputs:{updateObj:"updateObj"},decls:5,vars:3,consts:[["class","modal-header my-0",4,"ngIf"],[1,"modal-body","my-0"],[3,"formGroup"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"stdd","w100","b"],[1,"stdd","w400","blue","mx-1"],[1,"mt-2"],[1,"stdd","w150","b"],[1,"stdd","w175"],[1,"stdd","pull-right"],["type","button",1,"btn","green",3,"click"],["type","button","aria-label","Close",1,"btn",3,"click"],["type","button","title","Delete this Selection",1,"btn",3,"click"],["type","text","placeholder","Selected On","formControlName","selectedOn","bsDatepicker","",1,"stdd","w150",3,"bsValue","bsConfig"],["bindLabel","status","bindValue","status","labelForId","status","clearAllText","Clear","formControlName","selectionStatus",2,"border","color(from color srgb r g b)",3,"items"]],template:function(n,i){1&n&&(e.DNE(0,ne,5,1,"div",0),e.j41(1,"div",1)(2,"form",2),e.DNE(3,oe,29,6,"div",3),e.k0s()(),e.nrm(4,"div",4)),2&n&&(e.Y8G("ngIf",i.sel),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(1),e.Y8G("ngIf",i.sel))},dependencies:[l.bT,c.qT,c.me,c.BC,c.cb,M.pc,M.p0,c.j4,c.JD,u.vr,g.An],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:2px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.green[_ngcontent-%COMP%]{color:#006400}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0;padding:0;width:15px}"]})}return o})();function re(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.displayEmployment())}),e.EFF(1,"No"),e.k0s()}}function ae(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.displayEmployment())}),e.EFF(1,"Yes"),e.k0s()}}function le(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",1)(1,"div",2),e.EFF(2),e.k0s(),e.j41(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",4),e.EFF(8),e.k0s(),e.j41(9,"div",5),e.EFF(10),e.k0s(),e.j41(11,"div",6),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.j41(14,"div",6),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.DNE(17,re,2,0,"div",7),e.DNE(18,ae,2,0,"div",8),e.j41(19,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editSelection())}),e.j41(20,"mat-icon"),e.EFF(21,"edit"),e.k0s()(),e.j41(22,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSelection())}),e.j41(23,"mat-icon"),e.EFF(24,"delete"),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.JRh(t.selection.applicationNo),e.R7$(2),e.JRh(t.selection.candidateName),e.R7$(2),e.JRh(t.selection.customerName),e.R7$(2),e.JRh(t.selection.categoryRef),e.R7$(2),e.JRh(t.selection.selectionStatus),e.R7$(2),e.JRh(e.i5U(13,9,t.selection.selectedOn,"dd-MMM-yy")),e.R7$(3),e.JRh(e.i5U(16,12,t.selection.referredOn,"dd-MMM-yy")),e.R7$(2),e.Y8G("ngIf",0===t.selection.employmentId),e.R7$(1),e.Y8G("ngIf",t.selection.employmentId>0)}}let ce=(()=>{class o{constructor(t,n){this.service=t,this.toastr=n,this.editEmploymentEvent=new e.bkB,this.deleteSelectionEvent=new e.bkB,this.editSelectionEvent=new e.bkB}displayEmployment(){this.service.getorGenerateEmploymentFromSelDecisionId(this.selection.id).subscribe({next:t=>{this.editEmploymentEvent.emit(null!==t?t:null)}})}editSelection(){this.service.getSelectionBySelDecisionId(this.selection?.id).subscribe({next:t=>{console.log("response from selection-line",t),this.editSelectionEvent.emit(t)}})}deleteSelection(){this.selection&&this.deleteSelectionEvent.emit(this.selection.id)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(x.A),e.rXU(p.tw))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selection-line"]],inputs:{selection:"selection"},outputs:{editEmploymentEvent:"editEmploymentEvent",deleteSelectionEvent:"deleteSelectionEvent",editSelectionEvent:"editSelectionEvent"},decls:1,vars:1,consts:[["style","margin-left: 5px;",4,"ngIf"],[2,"margin-left","5px"],[1,"stdd","w50"],[1,"stdd","w150","cursorPointer"],[1,"stdd","w200"],[1,"stdd","w150"],[1,"stdd","w100"],["class","stdd w50 cursorPointer yellow","title","Employment data not generated for this candidate. Click to generate new",3,"click",4,"ngIf"],["class","stdd w50 cursorPointer","title","Click to view the employment details of this candidate",3,"click",4,"ngIf"],["title","edit selection detais of this candidate",1,"btn",3,"click"],["title","delete this selection data",1,"btn","red",3,"click"],["title","Employment data not generated for this candidate. Click to generate new",1,"stdd","w50","cursorPointer","yellow",3,"click"],["title","Click to view the employment details of this candidate",1,"stdd","w50","cursorPointer",3,"click"]],template:function(n,i){1&n&&e.DNE(0,le,25,15,"div",0),2&n&&e.Y8G("ngIf",i.selection)},dependencies:[l.bT,g.An,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding-top:0;padding-bottom:0;vertical-align:top}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer}.green[_ngcontent-%COMP%]{color:#006400}.yellow[_ngcontent-%COMP%]{color:#ff0}.blue[_ngcontent-%COMP%]{color:#00008b}.red[_ngcontent-%COMP%]{color:red}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.matContrast[_ngcontent-%COMP%]{color:#f0f8ff}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0;padding:0}"]})}return o})();const de=["search"];function me(o,h){1&o&&(e.j41(0,"div"),e.EFF(1," No selection records found matching your criteria\n"),e.k0s())}function pe(o,h){if(1&o){const t=e.RV6();e.j41(0,"pagination",16),e.bIt("pageChanged",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onPageChanged(i))}),e.EFF(1," >"),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",20)}}function he(o,h){if(1&o){const t=e.RV6();e.j41(0,"div",17)(1,"app-selection-line",18),e.bIt("editEmploymentEvent",function(i){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.displayEmploymentModal(i,r))})("deleteSelectionEvent",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.deleteSelection(i))})("editSelectionEvent",function(i){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.displaySelectionModal(i,r))}),e.k0s()()}if(2&o){const t=h.$implicit;e.R7$(1),e.Y8G("selection",t)}}const fe=[{path:"",component:E},{path:"pendingSelections",component:X,resolve:{selPending:Y.o,rejReasons:o=>(0,e.WQX)(P.y).selectionStatuses}},{path:"selections",component:(()=>{class o{constructor(t,n,i,s,r){this.service=t,this.confirmService=n,this.toastr=i,this.activatedRoute=s,this.bsModalService=r,this.selections=[],this.selectionStatus=[],this.sParams=new A.f,this.totalCount=0,this.pageIndex=1,this.todayDate=new Date(Date.now()),this.loading=!1,this.SelMsgsToCandidates=!1,this.SelSMSToCandidates=!1,this.RejMsgsToCandidates=!1,this.RejSMSToCandidates=!1,this.MsgsToClient=!1,this.selectionStatuses=[{name:"Selected"},{name:"Rejected-Low Salary"},{name:"Rejected-Low Exp"},{name:"Rejected-irrelevant Exp"},{name:"Rejected-other reasons"}]}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.selections=t.selections.result,this.pagination=t.selections.pagination,this.totalCount=t.selections.count})}getSelectionsPaged(t){this.service.setParams(this.sParams),this.service.getSelectionRecords(t).subscribe({next:n=>{n.result&&n.pagination&&(this.selections=n.result,this.pagination=n.pagination,this.totalCount=n.count)},error:n=>console.log(n)})}registerCandidateAcceptance(t){}updateSelection(t){return this.service.editSelectionDecision(t).subscribe(()=>{this.toastr.success("selection decision updated")},n=>{this.toastr.error(n)})}remindCandidateForAcceptances(t){this.service.remindCandidatesForAcceptance(t).subscribe({next:n=>{""===n?this.toastr.success("Messages composed and saved.  You can view/edit/send these messages from the Messages Component","Messages composed"):this.toastr.warning("Failed to generate/save Messages","Failed")},error:n=>{this.toastr.error(n?.error?.error?n?.error?.error:n,"Error encountered")}})}deleteSelection(t){var n=this.selections.filter(d=>d.id==t).map(d=>d.candidateName);const i=this.service.deleteSelectionDecisions(t);this.confirmService.confirm("Confirm Delete","This will delete selection records of "+n+". along with all related records like Employments and all deployment records.  Or, depending upon settings, the deletion might fail if there are related records").pipe((0,T.p)(d=>!0===d),(0,j.n)(d=>i.pipe((0,R.W)(v=>(this.toastr.error(v.error.details,"Error in deleting the selection record"),console.log("Error in deleting the Selection",v),(0,k.of)())),(0,G.M)(v=>{this.toastr.success("deleted Selection records","Success");var O=this.selections.findIndex(_e=>_e.id===t);-1===O?this.toastr.warning("cannot find index of the selection record just deleted"):this.selections.splice(O,1)}))),(0,R.W)(d=>(this.toastr.error(d.error.details,"Error in deleting the selection"),(0,k.of)()))).subscribe(()=>{console.log("delete succeeded"),this.toastr.success("Selection record deleted")},d=>{console.log("any error NOT handed in catchError() or if throwError() is returned instead of of() inside catcherror()",d)})}displayEmploymentModal(t,n){null!==t?(this.bsModalRef=this.bsModalService.show(te,{class:"modal-dialog-centered modal-md",initialState:{emp:t,candidateName:n.applicationNo+"-"+n.candidateName,categoryRef:n.categoryRef,companyName:n.customerName}}),this.bsModalRef.content.updateEmp.pipe((0,T.p)(r=>null!==r),(0,j.n)(r=>{var d=this.selections.findIndex(O=>O.id==n.id);d>=0&&this.selections[d].selectionStatus!==r.selectionStatus&&(this.selections[d].selectionStatus=r.selectionStatus);let v=new Date(r.offerAcceptanceConcludedOn);return v.setHours(v.getHours()+9),r.offerAcceptanceConcludedOn=v,this.service.updateEmploymentWithUploads(r)})).subscribe(r=>{if(r>0){this.toastr.success("Employment updated","Success");var d=this.selections.findIndex(v=>v.id==n.id);-1!==d&&(this.selections[d].employmentId=r,console.log(n),this.selections[d].selectionStatus=n.selectionStatus)}else this.toastr.error("Failed to update the employment data","error encountered")})):this.toastr.warning("No Employment data could be retrieved from the database")}displaySelectionModal(t,n){this.bsModalRef=this.bsModalService.show(se,{class:"modal-dialog-centered modal-md",initialState:{sel:t,candidateName:n.applicationNo+"-"+n.candidateName,customerName:n.customerName,categoryRefAndName:n.categoryRef}}),this.bsModalRef.content.updateObj.pipe((0,T.p)(r=>null!==r),(0,j.n)(r=>{var d=this.selections.findIndex(v=>v.id==n.id);return d>=0&&(this.selections[d].selectedOn=r.selectedOn,this.selections[d].selectionStatus=r.selectionStatus),r.selectedOn.setHours(r.selectedOn.getHours()+9),this.service.editSelectionDecision(r)})).subscribe(r=>{r?this.toastr.success("Selection model edited","Success"):this.toastr.warning("Failed to update the selection model","Failure")})}onPageChanged(t){this.service.getParams(),this.sParams.pageNumber!==t.page&&(this.sParams.pageNumber=t.page,this.service.setParams(this.sParams),this.getSelectionsPaged(!0))}onSortSelected(t){var n=t.value;const i=this.service.getParams();i.sort=n,i.pageNumber=1,i.pageSize=10,this.service.setParams(i),this.getSelectionsPaged(!0)}onSearch(){const t=this.service.getParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setParams(t),this.getSelectionsPaged(!0)}onReset(){this.searchTerm.nativeElement.value="",this.sParams=new A.f,this.service.setParams(this.sParams),this.getSelectionsPaged(!0)}DoHousekeeping(){this.service.Housekeeping().subscribe({next:t=>{console.log("response housekeeping",t),""===t?this.toastr.success("houskeeping done for processes CVRef and Selections","success"):this.toastr.warning(t,"failed to do housekeeping")},error:t=>{this.toastr.error(t,"Failed to carry out the housekeeping for CVRef and Selections")}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(x.A),e.rXU(V.G),e.rXU(p.tw),e.rXU(_.nX),e.rXU(U.I8))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-selections"]],viewQuery:function(n,i){if(1&n&&e.GBs(de,5),2&n){let s;e.mGM(s=e.lsd())&&(i.searchTerm=s.first)}},decls:43,vars:6,consts:[[4,"ngIf"],[1,"mx-5",2,"display","inline-block","font-weight","bold"],["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[2,"width","50px","display","inline-block","padding-left","5px","font-size","larger","word-wrap","break-word","vertical-align","middle"],["type","text","placeholder","Search",1,"stdd","mx-5","w150",3,"keyup.enter"],["search",""],["bindLabel","name","bindValue","name","labelForId","name","clearAllText","Clear",1,"stdd","w150",3,"items","ngModel","ngModelChange"],[1,"btn",3,"click"],["title","align values in CVRef with Selections",1,"btn",3,"click"],["routerLink","/",1,"btn"],[2,"margin-left","25px"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w200"],[1,"stdd","w100"],["class","row",4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"row"],[3,"selection","editEmploymentEvent","deleteSelectionEvent","editSelectionEvent"]],template:function(n,i){1&n&&(e.DNE(0,me,2,0,"div",0),e.j41(1,"h4",1),e.EFF(2,"Selections and Rejections"),e.k0s(),e.DNE(3,pe,2,3,"pagination",2),e.j41(4,"label",3),e.EFF(5),e.k0s(),e.j41(6,"input",4,5),e.bIt("keyup.enter",function(){return i.onSearch()}),e.k0s(),e.j41(8,"ng-select",6),e.bIt("ngModelChange",function(r){return i.sParams.selectionStatus=r}),e.k0s(),e.j41(9,"button",7),e.bIt("click",function(){return i.onSearch()}),e.j41(10,"mat-icon"),e.EFF(11,"search"),e.k0s()(),e.j41(12,"button",7),e.bIt("click",function(){return i.onReset()}),e.j41(13,"mat-icon"),e.EFF(14,"refresh"),e.k0s()(),e.j41(15,"button",8),e.bIt("click",function(){return i.DoHousekeeping()}),e.j41(16,"mat-icon"),e.EFF(17,"settings_applications"),e.k0s()(),e.j41(18,"button",9)(19,"mat-icon"),e.EFF(20,"home"),e.k0s()(),e.j41(21,"div",10)(22,"label",11),e.EFF(23,"App No"),e.k0s(),e.j41(24,"label",12),e.EFF(25,"Candidate Name"),e.k0s(),e.j41(26,"label",13),e.EFF(27,"Customer Name"),e.k0s(),e.j41(28,"label",13),e.EFF(29,"Category Ref"),e.k0s(),e.j41(30,"label",12),e.EFF(31,"Selection Decision"),e.k0s(),e.j41(32,"label",14),e.EFF(33,"Sel/Rej"),e.nrm(34,"br"),e.EFF(35,"Date"),e.k0s(),e.j41(36,"label",14),e.EFF(37,"Referred On"),e.k0s(),e.j41(38,"label",11),e.EFF(39,"Employmt"),e.nrm(40,"br"),e.EFF(41,"available"),e.k0s(),e.DNE(42,he,2,1,"div",15),e.k0s()),2&n&&(e.Y8G("ngIf",!i.selections),e.R7$(3),e.Y8G("ngIf",i.selections&&i.pagination),e.R7$(2),e.SpI(" of ",null==i.pagination?null:i.pagination.totalItems,""),e.R7$(3),e.Y8G("items",i.selectionStatuses)("ngModel",i.sParams.selectionStatus),e.R7$(34),e.Y8G("ngForOf",i.selections))},dependencies:[l.Sq,l.bT,c.BC,c.vS,f.eK,u.vr,_.Wk,g.An,ce],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding:0;font-weight:700;vertical-align:middle}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.mL80[_ngcontent-%COMP%]{margin-left:80px!important}.btn[_ngcontent-%COMP%]{color:#f0f8ff}"]})}return o})(),resolve:{selections:o=>{var h=o.paramMap.get("id"),t=(0,e.WQX)(x.A);if(""!==h&&"0"!==h){var n=new A.f;n.orderId=+h,t.setParams(n)}return t.getSelectionRecords(!1)}}}];let ve=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[l.MD,_.iI.forChild(fe),_.iI]})}return o})(),be=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[l.MD,c.YN,y.G,ve,g.m_]})}return o})()}}]);