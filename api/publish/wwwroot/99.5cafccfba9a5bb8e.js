"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[99],{4099:(ms,B,c)=>{c.r(B),c.d(B,{ProfileModule:()=>cs});var l=c(177);class X{constructor(){this.customerId=0,this.orderId=0,this.professionIds=[],this.orderItemIds=[],this.pageNumber=1,this.pageSize=10}}class f{constructor(){this.id=0,this.applicationNoFrom=0,this.applicationNoUpto=0,this.candidateName="",this.categoryName="",this.passportNo="",this.professionId=0,this.professionName="",this.agentId=0,this.typeOfCandidate="",this.sort="name",this.pageNumber=1,this.pageSize=20,this.search=""}}var e=c(7705),v=c(779),o=c(9417);function ae(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"span",16)(2,"input",17),e.bIt("change",function(){const r=e.eBV(t).$implicit;return e.Njj(r.checked=!r.checked)}),e.k0s()(),e.j41(3,"div",18),e.EFF(4),e.k0s(),e.j41(5,"div",19),e.EFF(6),e.k0s(),e.j41(7,"div",20),e.EFF(8),e.k0s(),e.j41(9,"div",18),e.EFF(10),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(2),e.Y8G("checked",t.checked)("disabled","closed"===t.status||"canceled"===t.status),e.R7$(2),e.JRh(t.orderNo),e.R7$(2),e.JRh(t.categoryName),e.R7$(2),e.JRh(t.quantity),e.R7$(2),e.JRh(t.status)}}let Y=(()=>{class n{constructor(t){this.bsModalRef=t,this.emitterObj=new e.bkB,this.title="",this.orderItems=[],this.ids=[]}ngOnInit(){}emitSelectedIds(){this.emitterObj.emit(this.ids),this.bsModalRef.hide()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Y$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-ids-modal"]],inputs:{emitterObj:"emitterObj"},decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left",2,"font-size","smaller","font-weight","bold"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"stdd","b","w100",2,"margin-left","17px"],[1,"stdd","b","w150"],[1,"stdd","b","w75"],[2,"display","inline-inline-block","margin-top","0px","margin-bottom","0px","padding-top","0px","padding-bottom","0px"],["id","agentsForm"],["agentsForm","ngForm"],["class","form-check stdd",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"form-check","stdd"],[2,"width","3px","display","inline-block","padding","0px","vertical-align","top"],["type","checkbox",1,"form-check-input",3,"checked","disabled","change"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w75"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return i.bsModalRef.hide()}),e.j41(4,"span",3),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",4)(7,"div",5),e.EFF(8,"Order No"),e.k0s(),e.j41(9,"div",6),e.EFF(10,"Category Name"),e.k0s(),e.j41(11,"div",7),e.EFF(12,"Qnty"),e.k0s(),e.j41(13,"div",6),e.EFF(14,"Status"),e.k0s(),e.nrm(15,"hr",8),e.j41(16,"form",9,10),e.DNE(18,ae,11,6,"div",11),e.k0s()(),e.j41(19,"div",12)(20,"button",13),e.bIt("click",function(){return i.bsModalRef.hide()}),e.EFF(21,"Cancel"),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return i.emitSelectedIds()}),e.EFF(23,"Submit"),e.k0s()()),2&s&&(e.R7$(2),e.SpI("",i.title," "),e.R7$(16),e.Y8G("ngForOf",i.orderItems))},dependencies:[l.Sq,o.qT,o.cb,o.cV],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w75[_ngcontent-%COMP%]{width:75p}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}"]})}return n})();var H=c(2771),M=c(6697),g=c(7673),C=c(6354),O=c(3587),F=c(1626),w=c(6220),A=c(1822);let k=(()=>{class n{constructor(t,s){this.http=t,this.accountService=s,this.apiUrl=O.c.apiUrl,this.currentUserSource=new H.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cities=[],this.cache=new Map,this.accountService.currentUser$.pipe((0,M.s)(1)).subscribe({next:i=>{i&&(this.cvParams=new f),this.user=i}})}onClickLoadDocument(){return this.http.get(this.apiUrl+"candidates/loaddocument")}getAvailableCandidateList(){return this.http.get(this.apiUrl+"CandidateAssessment/cvsAvailableList")}getAvailableCandidatesPaged(t,s=!0){if(s){const r=this.cache.get(Object.values(t).join("-"));if(r)return(0,g.of)(r)}else this.cache=new Map;let i=(0,w.rH)(t);return(0,w.f8)(this.apiUrl+"candidate/cvsAvailable",i,this.http).pipe((0,C.T)(r=>(this.cache.set(Object.values(t).join("-"),r),r)))}getCandidatesPaged(t,s=!0){if(s){const r=this.cache.get(Object.values(t).join("-"));if(r)return(0,g.of)(r)}else this.cache=new Map;let i=(0,w.rH)(t);return(0,w.f8)(this.apiUrl+"candidate",i,this.http).pipe((0,C.T)(r=>(this.cache.set(Object.values(t).join("-"),r),r)))}getCandidate(t){return this.http.get(this.apiUrl+"candidate/byid/"+t)}getCandidateBrief(t){const s=[...this.cache.values()].reduce((i,r)=>i.concat(r.result),[]).find(i=>i.id===t);return s?(0,g.of)(s):this.http.get(this.apiUrl+"candidate/briefdtobyid/"+t)}getCandidateBriefDtoFromAppNo(t){let s=new F.Nl;return s.append("applicationNo",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:s})}getCandidateBriefDtoFromId(t){var s=new F.Nl;return s=s.append("candidateId",t.toString()),this.http.get(this.apiUrl+"Candidate/briefbyparams",{params:s})}registerNewWithFiles(t){return this.http.post(this.apiUrl+"Candidate/RegisterByUpload",t)}UpdateCandidateWithFiles(t){return this.http.put(this.apiUrl+"candidate/updatecandidatewithfiles",t)}setCurrentUser(t){localStorage.setItem("token",t.token),this.currentUserSource.next(t)}setCVParams(t){this.cvParams=t}getCVParams(){return this.cvParams}getCandidateCities(){return this.cities.length>0?(0,g.of)(this.cities):this.http.get(this.apiUrl+"candidate/cities").pipe((0,C.T)(t=>(this.cities=t,t)))}downloadAttachmentFile(t){return this.http.get(this.apiUrl+"fileupload/downloadattachmentfile/"+t,{responseType:"blob"})}updateAttachments(t){var s=[];return s.push(t),this.http.post(this.apiUrl+"Candidate/attachment",s)}getAttachments(t){return this.http.get(this.apiUrl+"Candidate/userattachments"+t)}deleteAttachment(t){return this.http.delete(this.apiUrl+"Candidate/userattachment/"+t)}deleteCV(t){return this.http.delete(this.apiUrl+"Candidate/"+t)}setPhoto(t){return this.http.put(this.apiUrl+"userattachment/setPhoto",t)}candidateHistory(t){return this.http.get(this.apiUrl+"users/candidateDto/"+t)}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(F.Qq),e.KVO(A.D))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u=c(5743),T=c(8281),L=c(6341),b=c(8256),z=c(3400),N=c(9213),oe=c(3281),P=c(778);function de(n,a){1&n&&(e.j41(0,"div",11),e.EFF(1,"No interview categories found matching the candidate's professions'"),e.k0s())}function ce(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"input",12),e.bIt("ngModelChange",function(i){const d=e.eBV(t).$implicit;return e.Njj(d.checked=i)})("click",function(){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.selectedClicked(r.id,r.checked))}),e.k0s(),e.j41(2,"div",13),e.EFF(3),e.k0s(),e.j41(4,"div",14),e.EFF(5),e.k0s(),e.j41(6,"div",13),e.EFF(7),e.k0s(),e.j41(8,"div",15),e.EFF(9),e.nI1(10,"date"),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(1),e.Y8G("ngModel",t.checked),e.R7$(2),e.JRh(t.categoryName),e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.customerName),e.R7$(2),e.JRh(e.i5U(10,5,t.interviewDateFrom,"dd-MMM-yy"))}}let le=(()=>{class n{constructor(t,s,i,r,d){this.service=t,this.toastr=s,this.modalService=i,this.confirm=r,this.candService=d,this.interviews=[],this.categoryMatching=[],this.candidateId=0,this.candidateName="",this.applicationNo=0,this.interviewDate=new Date,this.EmitEvent=new e.bkB,this.selected=[],this.orderNoToGet=0,this.totalCount=0}ngOnInit(){this.service.getInterviewItemsMatchingCategory(this.categoryMatching).subscribe({next:t=>{null!==t&&t.length>0&&(this.interviews=t)}})}selectedClicked(t,s){var i=this.selected.findIndex(d=>d.id===t);-1===i?this.selected.push({id:t,checked:s}):this.selected[i].checked=s,s&&(this.selected.filter(d=>d.id!==t)[0].checked=!1),this.interviews.find(d=>d.id==t).checked=s,this.interviews.find(d=>d.id===t).checked=s}close(){this.EmitEvent.emit(!1),this.modalService.hide()}assignToInterviewItem(){var t=this.interviews.filter(i=>i.checked)[0].id;this.service.insertInterviewItemCandidate({id:0,interviewItemId:t,intervwItemId:t,candidateId:this.candidateId,applicationNo:this.applicationNo,candidateName:this.candidateName,passportNo:"",scheduledFrom:this.interviewDate,reportedAt:void 0,interviewedAt:void 0,interviewStatus:"Not Interviewed",interviewerRemarks:"",prospectiveCandidateId:0,personId:"",attachmentFileNameWithPath:""}).subscribe({next:i=>this.EmitEvent.emit(i)}),this.modalService.hide()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(oe.P),e.rXU(b.tw),e.rXU(v.I8),e.rXU(P.G),e.rXU(k))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-interview-brief-pending-modal"]],outputs:{EmitEvent:"EmitEvent"},decls:19,vars:3,consts:[[1,"modal-header"],[1,"b"],[1,"btn","fa","fa-check",3,"click"],[1,"btn","fa","fa-window-close",3,"click"],[1,"modal-body"],[1,"lbl","w50"],[1,"lbl","w200"],[1,"lbl","w100"],["class","text-danger",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"text-danger"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin","0 10px 0 10px",3,"ngModel","ngModelChange","click"],[1,"stdd","w200"],[1,"stdd","w50"],[1,"stdd","w100"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return i.assignToInterviewItem()}),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return i.close()}),e.k0s()(),e.j41(5,"div",4)(6,"label",5),e.EFF(7,"Select"),e.k0s(),e.j41(8,"label",6),e.EFF(9,"Interview Category"),e.k0s(),e.j41(10,"label",6),e.EFF(11,"Customer"),e.k0s(),e.j41(12,"label",5),e.EFF(13,"Order Ref"),e.k0s(),e.j41(14,"label",7),e.EFF(15,"Interview On"),e.k0s(),e.DNE(16,de,2,0,"div",8),e.DNE(17,ce,11,8,"div",9),e.k0s(),e.nrm(18,"div",10)),2&s&&(e.R7$(2),e.SpI("Interviews available matching the category ",i.categoryMatching,""),e.R7$(14),e.Y8G("ngIf",!i.interviews),e.R7$(1),e.Y8G("ngForOf",i.interviews))},dependencies:[l.Sq,l.bT,o.Zm,o.BC,o.vS,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:2px 0;vertical-align:top;font-size:smaller;word-wrap:break-word}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w200[_ngcontent-%COMP%]{width:200px}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}.b[_ngcontent-%COMP%]{font-weight:700}  .ng-select-container{height:5px!important;font-size:.8em!important}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function me(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"h4",4),e.EFF(2,"Candidate History"),e.k0s(),e.j41(3,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeOk())}),e.k0s(),e.j41(4,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s()()}}function he(n,a){1&n&&(e.j41(0,"div"),e.EFF(1," No deployment data available for the candidate "),e.k0s())}function pe(n,a){if(1&n&&(e.j41(0,"div")(1,"div",16),e.EFF(2),e.k0s(),e.j41(3,"div",17),e.EFF(4),e.k0s(),e.j41(5,"div",18),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"div",18),e.EFF(9),e.k0s(),e.j41(10,"div",18),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",16),e.EFF(14),e.k0s(),e.j41(15,"div",18),e.EFF(16),e.nI1(17,"date"),e.k0s()()),2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.customerName),e.R7$(2),e.JRh(t.categoryRef),e.R7$(2),e.JRh(e.i5U(7,7,t.referredOn,"dd-MMM-yy")),e.R7$(3),e.JRh(t.selectionStatus),e.R7$(2),e.JRh(e.i5U(12,10,t.selectionStatusDate,"dd-MMM-yy")),e.R7$(3),e.JRh(t.deploymentStatus),e.R7$(2),e.JRh(e.i5U(17,13,t.deploymentStatusDate,"dd-MMM-yy"))}}function ue(n,a){if(1&n&&(e.j41(0,"div",7)(1,"div",8)(2,"strong"),e.EFF(3,"Candidate: "),e.k0s(),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.j41(6,"div",9)(7,"strong"),e.EFF(8,"Profession:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"div",10)(11,"strong"),e.EFF(12,"Amount due:"),e.k0s(),e.EFF(13),e.k0s(),e.nrm(14,"br"),e.j41(15,"label",11),e.EFF(16,"Customer"),e.k0s(),e.j41(17,"label",12),e.EFF(18,"Category Ref"),e.k0s(),e.j41(19,"label",13),e.EFF(20,"Referred On"),e.k0s(),e.j41(21,"label",13),e.EFF(22,"Selection"),e.nrm(23,"br"),e.EFF(24,"Status"),e.k0s(),e.j41(25,"label",13),e.EFF(26,"Selection"),e.nrm(27,"br"),e.EFF(28,"Status Date"),e.k0s(),e.j41(29,"label",11),e.EFF(30,"Current"),e.nrm(31,"br"),e.EFF(32,"Deployment Status"),e.k0s(),e.j41(33,"label",13),e.EFF(34,"Deployment"),e.nrm(35,"br"),e.EFF(36,"Status Date"),e.k0s(),e.DNE(37,he,2,0,"div",14),e.DNE(38,pe,18,16,"div",15),e.k0s()),2&n){const t=e.XpG();e.R7$(4),e.Lme("",t.candidateDto.applicationNo," - ",t.candidateDto.candidateName,""),e.R7$(5),e.JRh(t.candidateDto.coreProfession),e.R7$(4),e.Lme("",t.candidateDto.amountDue," ",t.candidateDto.amountDue>0?"CR":0==t.candidateDto.amountDue?"":"DR",""),e.R7$(24),e.Y8G("ngIf",0===t.candidateDto.candidateHistoriesDto.length),e.R7$(1),e.Y8G("ngForOf",t.candidateDto.candidateHistoriesDto)}}let fe=(()=>{class n{constructor(t,s,i,r,d){this.bsModalRef=t,this.toastr=s,this.confirm=i,this.service=r,this.bsModalService=d,this.CandidateId=0,this.Displayed=new e.bkB}ngOnInit(){this.service.candidateHistory(this.CandidateId).subscribe({next:t=>{this.candidateDto=t},error:t=>this.toastr.error(t.error?.details,"Error encountered")})}close(){this.Displayed.emit(!1),this.bsModalRef.hide()}closeOk(){this.Displayed.emit(!0),this.bsModalRef.hide()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Y$),e.rXU(b.tw),e.rXU(P.G),e.rXU(k),e.rXU(v.I8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-candidate-history-modal"]],inputs:{CandidateId:"CandidateId"},outputs:{Displayed:"Displayed"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"b"],["type","button",1,"stdd","btn","fa","fa-check","fa-2x",3,"click"],["type","button",1,"stdd","btn","fa","fa-window-close","fa-2x",3,"click"],[1,"modal-body","my-0"],[1,"stdd","w300","blue","mx-1"],[1,"stdd","w300","b"],[1,"stdd","w100","mx-1"],[1,"lbl","w100"],[1,"lbl","w150"],[1,"lbl","w90"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"stdd","w100"],[1,"stdd","w150"],[1,"stdd","w90"]],template:function(s,i){1&s&&(e.DNE(0,me,5,0,"div",0),e.DNE(1,ue,39,7,"div",1),e.nrm(2,"div",2)),2&s&&(e.Y8G("ngIf",i.candidateDto),e.R7$(1),e.Y8G("ngIf",i.candidateDto))},dependencies:[l.Sq,l.bT,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:top;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:middle;font-size:small;font-weight:700}.b[_ngcontent-%COMP%]{font-weight:700}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();function ve(n,a){1&n&&(e.j41(0,"div"),e.EFF(1," No candidate detail available\n"),e.k0s())}function ge(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",2)(1,"input",3),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.CVChecked(i.cv))}),e.k0s(),e.j41(2,"div",4),e.EFF(3),e.k0s(),e.j41(4,"div",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.candidateHistory(i.cv.id))}),e.EFF(5),e.k0s(),e.j41(6,"div",6),e.EFF(7),e.k0s(),e.j41(8,"div",7),e.EFF(9),e.k0s(),e.j41(10,"div",8),e.EFF(11),e.k0s(),e.j41(12,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editCV(i.cv.id))}),e.j41(13,"mat-icon"),e.EFF(14,"edit"),e.k0s()(),e.j41(15,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cvAssessClicked(i.cv))}),e.j41(16,"mat-icon"),e.EFF(17,"playlist_add_check"),e.k0s()(),e.j41(18,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.download(i.cv.id))}),e.k0s(),e.j41(19,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.assignToInterview(i.cv.id))}),e.j41(20,"mat-icon"),e.EFF(21,"forward"),e.k0s()(),e.j41(22,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteCV(i.cv.id))}),e.j41(23,"mat-icon"),e.EFF(24,"delete"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("checked",t.cv.checked),e.R7$(1),e.Mz_("routerLink","/candidates/edit/",t.cv.id,""),e.R7$(1),e.JRh(t.cv.applicationNo),e.R7$(2),e.JRh(t.cv.fullName),e.R7$(2),e.JRh(t.cv.city),e.R7$(2),e.JRh(t.cv.referredByName),e.R7$(2),e.SpI("",t.cv.userProfessions.flat()," ")}}let _e=(()=>{class n{constructor(t,s){this.modalService=t,this.toastr=s,this.msgEvent=new e.bkB,this.downloadEvent=new e.bkB,this.cvAssessEvent=new e.bkB,this.cvCheckedEvent=new e.bkB,this.cvEditEvent=new e.bkB,this.cvDeleteEvent=new e.bkB,this.candidateHistoryEvent=new e.bkB,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){this.msgEvent.emit(t)}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}cvAssessClicked(t){this.cvAssessEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}editCV(t){this.cvEditEvent.emit(t)}deleteCV(t){this.cvDeleteEvent.emit(t)}assignToInterview(t){const s={class:"modal-dialog-centered modal-lg",initialState:{candidateId:this.cv?.id,candidateName:this.cv?.fullName,applicationNo:this.cv?.applicationNo,interviewDate:new Date,categoryMatching:this.cv?.userProfessions.flat()}};console.log("config",this.cv?.userProfessions,this.cv?.userProfessions.flat()),this.bsModalRef=this.modalService.show(le,s),this.bsModalRef.content.EmitEvent.subscribe({next:i=>{i&&this.toastr.success("selected candidate added to the interview item  selected","Success")}})}candidateHistory(t){this.bsModalRef=this.modalService.show(fe,{class:"modal-dialog-centered modal-lg",initialState:{CandidateId:t}}),this.bsModalRef.content.Displayed.subscribe({next:i=>this.toastr.success("candidate history displayed"),error:i=>this.toastr.error("Failed to display the candidaate history")})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.I8),e.rXU(b.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile-item"]],inputs:{cv:"cv"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent",cvEditEvent:"cvEditEvent",cvDeleteEvent:"cvDeleteEvent",candidateHistoryEvent:"candidateHistoryEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd row","style","margin-left: 25px;",4,"ngIf"],[1,"stdd","row",2,"margin-left","25px"],["type","checkbox","value","cv.id",1,"form-check-input",3,"checked","change"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","w70",3,"routerLink"],["title","contact history of the candidate",1,"stdd","mx-1","w160",3,"click"],[1,"stdd","mx-1","w100"],[1,"stdd","mx-1","w200"],[1,"stdd","mx-1","w300",2,"border","aqua"],["type","button","type","button","title","edit the candidate profile",1,"btn",3,"click"],["type","button","type","button","title","Assess the CV",1,"btn","compress",3,"click"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-download",3,"click"],["type","button","type","button","title","assign candidates to an open interview category",1,"btn","w10",3,"click"],["type","button","type","button","title","delete this CV along with all its attachments",1,"btn",3,"click"]],template:function(s,i){1&s&&(e.DNE(0,ve,2,0,"div",0),e.DNE(1,ge,25,7,"div",1)),2&s&&(e.Y8G("ngIf",null===i.cv),e.R7$(1),e.Y8G("ngIf",null!=i.cv))},dependencies:[l.bT,u.Wk,N.An],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;word-wrap:break-word;font-size:small}.compress[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;word-wrap:break-word;font-size:small;word-spacing:-2px}.fSmall[_ngcontent-%COMP%]{font-size:small;vertical-align:middle;margin:0 2px;word-break:break-word}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w15[_ngcontent-%COMP%]{width:15px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;display:inline-block;height:16px;width:16px;margin:0 1px}"]})}return n})();const be=["search"],ke=["searchCat"];function Ce(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",9)(1,"h4",10),e.EFF(2,"Listing of Candidates"),e.k0s(),e.j41(3,"pagination",11),e.bIt("pageChanged",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onPageChanged(i))}),e.EFF(4," >"),e.k0s(),e.j41(5,"label",12),e.EFF(6),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(3),e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15),e.R7$(3),e.SpI(" of ",t.pagination.totalItems,"")}}function we(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"label",13),e.EFF(2,"Name or App Nos to search, separated by commas"),e.k0s(),e.nrm(3,"input",14,15),e.j41(5,"label",16),e.EFF(6,"Category Name to search"),e.k0s(),e.nrm(7,"input",17,18),e.j41(9,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.j41(10,"mat-icon"),e.EFF(11,"search"),e.k0s()(),e.j41(12,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onReset())}),e.j41(13,"mat-icon"),e.EFF(14,"refresh"),e.k0s()(),e.j41(15,"button",21)(16,"mat-icon"),e.EFF(17,"library_add"),e.k0s()(),e.j41(18,"button",22)(19,"mat-icon"),e.EFF(20,"cancel"),e.k0s()()()}}function xe(n,a){1&n&&(e.j41(0,"div"),e.EFF(1," No compliant CVs available on record "),e.k0s())}function Fe(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",24)(1,"app-profile-item",25),e.bIt("downloadEvent",function(i){const d=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.downloadFileEvent(i,d.fullName))})("cvAssessEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.cvAssessEvent(i))})("cvCheckedEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.cvCheckedEvent(i))})("cvEditEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.cvEditClicked(i))})("cvDeleteEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.cvDeleteClicked(i))}),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(1),e.Y8G("cv",t)}}function Ie(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,Fe,2,1,"div",23),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.cvs)}}let ye=(()=>{class n{constructor(t,s,i,r,d,m,_){this.service=t,this.router=s,this.activatedRoute=i,this.modalService=r,this.orderService=d,this.downloadservice=m,this.toastr=_,this.cvs=[],this.selectedCVs=[],this.cvParams=new f,this.totalCount=0,this.professions=[],this.existingQBankCategories=[],this.agents=[],this.idFromChild=0,this.selectedProfIds=[],this.events=[],this.documentLoading=!1,this.sortOptions=[{name:"By Application No Asc",value:"appno"},{name:"By Application No Desc",value:"apppnodesc"},{name:"By City Asc",value:"city"},{name:"By City Desc",value:"citydesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Agent",value:"agent"},{name:"By Agent Desc",value:"agentdesc"}],this.cvParams=new f,this.service.setCVParams(this.cvParams)}ngOnInit(){this.service.setCVParams(this.cvParams),this.activatedRoute.data.subscribe(t=>{this.cvs=t.candidateBriefs.result,this.totalCount=t.candidateBriefs.count,this.pagination=t.candidateBriefs.pagination,this.professions=t.professions,this.agents=t.agents})}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,t).subscribe({next:s=>{s.result&&s.pagination&&(this.cvs=s.result,this.pagination=s.pagination)}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination?(this.cvs=t.result,this.totalCount=t.count):t.result&&0==t.length&&this.toastr.warning("Your instructions did not produce any data","input error")},error:t=>this.toastr.error(t.error?.details,"Error")}))}onSearch(){const t=this.service.getCVParams()??new f;var s=this.searchTerm.nativeElement.value;""!==s&&(+s>0?t.applicationNoFrom=+s:t.candidateName=s);var i=this.searchTermCat.nativeElement.value;""!==i&&(t.categoryName=i),t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new f,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var r=[];const d={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:r}};this.bsModalRef=this.modalService.show(Y,d),this.bsModalRef.content.updateSelectedRoles.subscribe(m=>{r=m})}onAgentSelected(t){const s=this.service.getCVParams()??new f;s.agentId=t,s.pageNumber=1,this.service.setCVParams(s),this.getCVs()}getOpenOrderItemsArray(){let s=[],r=new X;return this.orderService.getOrderItemsBriefDto(r).subscribe(d=>{if(s=d,0!==s.length)return s},d=>{console.log("failed to retrieve roles array",d)}),s}downloadFileEvent(t,s){return this.downloadservice.downloadFile(t).subscribe({next:i=>{const r=document.createElement("a"),d=URL.createObjectURL(i);r.href=d,r.download="filename.ext",r.click(),URL.revokeObjectURL(d)},error:i=>this.toastr.error(i.error.details,"Error encountered while downloading the file ")})}cvAssessEvent(t){this.navigateByUrl("/candidates/cvassess/"+t.id,t,!1)}navigateByUrl(t,s,i){this.router.navigate([t],{state:{cvbrief:s,userobject:this.service.user,toedit:i,returnUrl:"/candidates/listing"}})}cvCheckedEvent(t){var s=this.selectedCVs.find(r=>r.id==t.id),i=this.selectedCVs.findIndex(r=>r.id===t.id);void 0!==s?s.checked?this.selectedCVs.push(t):this.selectedCVs.splice(i,1):this.selectedCVs.push(t)}cvEditClicked(t){this.navigateByUrl("/candidates/register/edit/"+t,void 0,!0)}cvAssessClicked(){this.navigateByUrl("/candidates/assessments",this.selectedCVs,!1)}cvDeleteClicked(t){this.service.deleteCV(t).subscribe({next:s=>{s?this.toastr.success("CV Deleted","Success"):this.toastr.warning("Failed to delete the CV","Failure")},error:s=>this.toastr.error(s.error.details,"Error in deleting the CV")})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(k),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(v.I8),e.rXU(T.Q),e.rXU(L.Z),e.rXU(b.tw))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile-list"]],viewQuery:function(s,i){if(1&s&&(e.GBs(be,5),e.GBs(ke,5)),2&s){let r;e.mGM(r=e.lsd())&&(i.searchTerm=r.first),e.mGM(r=e.lsd())&&(i.searchTermCat=r.first)}},decls:17,vars:4,consts:[["class","stdd",4,"ngIf"],[4,"ngIf"],[2,"margin-left","60px","margin-top","5px"],[1,"stddm","w15"],[1,"stddM","w70"],[1,"stddM","w160","mx-2"],[1,"stddM","w100","mx-1"],[1,"stddM","w200","mx-1"],[1,"stddM","w300","mx-1"],[1,"stdd"],[1,"b",2,"display","inline-block"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"mx-1",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[2,"width","50px","display","inline-block","font-size","medium","word-wrap","break-word","vertical-align","middle"],[1,"lbl","w160"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search on name or app nos",1,"stdd","form-control","w200",2,"margin-left","20px"],["search",""],[1,"lbl","w100","mx-2"],["type","text","title","enter category name to search","placeholder","Search on category",1,"stdd","form-control","mx-2","w150"],["searchCat",""],["type","button","title","Press this button after you enter the search criteria",1,"btn",3,"click"],["type","button","title","reset the search criteria",1,"btn",3,"click"],["type","button","title","Add a new candidate","routerLink","/candidates/register/edit/0",1,"btn"],["type","button","title","close this page","routerLink","/",1,"btn"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"cv","downloadEvent","cvAssessEvent","cvCheckedEvent","cvEditEvent","cvDeleteEvent"]],template:function(s,i){1&s&&(e.DNE(0,Ce,7,4,"div",0),e.nrm(1,"br"),e.DNE(2,we,21,0,"div",1),e.j41(3,"div",2),e.nrm(4,"div",3),e.j41(5,"div",4),e.EFF(6,"Appl No"),e.k0s(),e.j41(7,"div",5),e.EFF(8,"Candidate Name"),e.k0s(),e.j41(9,"div",6),e.EFF(10,"City"),e.k0s(),e.j41(11,"div",7),e.EFF(12,"Agent"),e.k0s(),e.j41(13,"div",8),e.EFF(14,"Professions"),e.k0s()(),e.DNE(15,xe,2,0,"div",1),e.DNE(16,Ie,2,1,"div",1)),2&s&&(e.Y8G("ngIf",void 0!==i.pagination),e.R7$(2),e.Y8G("ngIf",i.cvs),e.R7$(13),e.Y8G("ngIf",!i.cvs),e.R7$(1),e.Y8G("ngIf",i.cvs.length))},dependencies:[l.Sq,l.bT,u.Wk,z.eK,N.An,_e],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block}.vAlignTop[_ngcontent-%COMP%]{vertical-align:top}.lbl[_ngcontent-%COMP%]{display:inline-block;text-align:right;font-weight:700;font-size:smaller;vertical-align:top;word-wrap:break-word}.stddlist[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:200px;font-size:medium}.stddM[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w45[_ngcontent-%COMP%]{width:45px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w160[_ngcontent-%COMP%]{width:160px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 2px;size:20px;vertical-align:middle}"]})}return n})();var S=c(249),Ee=c(8892);const G=()=>(0,e.WQX)(Ee.h).getAgentIdAndNames();var q=c(1584),x=c(5558),J=c(8057),Q=c(3794),W=c(3816),K=c(2510),Z=c(6295),ee=c(9375);function je(n,a){if(1&n&&(e.j41(0,"div",3),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.SpI("",t.label," is required")}}let Re=(()=>{class n{constructor(t){this.ngControl=t,this.label="",this.ngControl.valueAccessor=this,this.bsConfig={containerClass:"theme-red",dateInputFormat:"DD MMM YYYY"}}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}get control(){return this.ngControl.control}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(o.vO,2))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-date-picker"]],inputs:{label:"label",maxDate:"maxDate"},decls:3,vars:7,consts:[[1,"mb-3"],["type","text","bsDatepicker","",1,"form-control",3,"formControl","placeholder","bsConfig","maxDate"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(s,i){1&s&&(e.j41(0,"div",0),e.nrm(1,"input",1),e.DNE(2,je,2,1,"div",2),e.k0s()),2&s&&(e.R7$(1),e.AVh("is-invalid",i.control.touched&&i.control.invalid),e.FS9("placeholder",i.label),e.Y8G("formControl",i.control)("bsConfig",i.bsConfig)("maxDate",i.maxDate),e.R7$(1),e.Y8G("ngIf",null==i.control.errors?null:i.control.errors.required))},dependencies:[l.bT,ee.pc,ee.p0,o.me,o.BC,o.l_]})}return n})();const Ae=["memberTabs"],Ne=["password"];function Pe(n,a){1&n&&(e.j41(0,"div"),e.EFF(1," No valid Candidate object\n"),e.k0s())}function Me(n,a){if(1&n&&(e.j41(0,"div",67),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.SpI(" ",t.strAddMode," ")}}function Oe(n,a){1&n&&(e.j41(0,"div",68),e.nrm(1,"br"),e.j41(2,"label",69),e.EFF(3,"Password"),e.k0s(),e.nrm(4,"app-text-input",70)(5,"app-text-input",71),e.k0s()),2&n&&(e.R7$(4),e.Y8G("label","Password")("type","password"),e.R7$(1),e.Y8G("label","Confirm Password")("type","password"))}function Te(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"label",72),e.EFF(2,"Referred By"),e.k0s(),e.j41(3,"ng-select",73),e.bIt("change",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.getAgentValue(i))}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.agents)("searchable",!0)}}function Se(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",74)(2,"div",47),e.EFF(3),e.k0s(),e.j41(4,"div",48),e.nrm(5,"app-text-input",75),e.k0s(),e.j41(6,"div",49),e.nrm(7,"input",76),e.k0s(),e.j41(8,"button",77),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeUserPhone(r))}),e.k0s()()()}if(2&n){const t=a.index;e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.JRh(t+1),e.R7$(2),e.Y8G("label","Mobile No")}}function Ge(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",74)(2,"div",47),e.EFF(3),e.k0s(),e.j41(4,"ng-select",78),e.bIt("change",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.getProfessionValue(i))}),e.k0s(),e.nrm(5,"input",79),e.j41(6,"button",80),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeUserProfession(r))}),e.k0s()()()}if(2&n){const t=a.index,s=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.JRh(t+1),e.R7$(1),e.Y8G("items",s.professions)("searchable",!0)}}function De(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",74)(2,"div",55),e.EFF(3),e.k0s(),e.j41(4,"ng-select",81),e.bIt("change",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.getValues(i))}),e.k0s(),e.nrm(5,"input",76)(6,"input",82),e.j41(7,"button",80),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeUserQualification(r))}),e.k0s()()()}if(2&n){const t=a.index,s=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.JRh(t+1),e.R7$(1),e.Y8G("items",s.qualifications)("searchable",!0)}}function Ve(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",74)(2,"div",83),e.nrm(3,"app-text-input",84),e.k0s(),e.j41(4,"div",85),e.nrm(5,"app-text-input",86),e.k0s(),e.j41(6,"div",87),e.nrm(7,"app-text-input",88),e.k0s(),e.j41(8,"div",89),e.nrm(9,"app-date-picker",90),e.k0s(),e.j41(10,"div",89),e.nrm(11,"app-date-picker",91),e.k0s(),e.j41(12,"button",80),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeUserExp(r))}),e.k0s()()()}if(2&n){const t=a.index,s=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("label","Sr No"),e.R7$(2),e.Y8G("label","Position"),e.R7$(2),e.Y8G("label","Company"),e.R7$(2),e.Y8G("maxDate",s.maxDate)("label","Worked From"),e.R7$(2),e.Y8G("maxDate",s.maxDate)("label","Worked Upto")}}function Ue(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",74)(2,"div",92),e.nrm(3,"app-text-input",93),e.k0s(),e.nrm(4,"ng-select",94),e.j41(5,"button",95),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.downloadattachment(r))}),e.k0s(),e.j41(6,"button",96),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeUserAttachment(r))}),e.k0s()()()}if(2&n){const t=a.index,s=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("label","File Name"),e.R7$(1),e.Y8G("items",s.attachmentTypes)("searchable",!0)}}function $e(n,a){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.R7$(1),e.SpI(" ",t," ")}}function Be(n,a){if(1&n&&(e.j41(0,"div",97)(1,"ul",98),e.DNE(2,$e,2,1,"li",51),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.validationErrors)}}function Xe(n,a){if(1&n){const t=e.RV6();e.j41(0,"form",3),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.registerForm.valid)}),e.DNE(1,Me,2,1,"div",4),e.j41(2,"div",5)(3,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancel())}),e.k0s(),e.j41(4,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.savewithattachments())}),e.k0s()(),e.nrm(5,"br"),e.j41(6,"div",8)(7,"label",9),e.EFF(8,"Gender: "),e.k0s(),e.nrm(9,"input",10),e.EFF(10,"Male "),e.nrm(11,"input",11),e.EFF(12,"Female "),e.nrm(13,"br"),e.j41(14,"label",12),e.EFF(15,"First Name"),e.k0s(),e.nrm(16,"app-text-input",13),e.j41(17,"label",14),e.EFF(18,"Second Name"),e.k0s(),e.nrm(19,"app-text-input",15)(20,"br"),e.j41(21,"label",16),e.EFF(22,"Family Name"),e.k0s(),e.nrm(23,"app-text-input",17),e.j41(24,"label",18),e.EFF(25,"Known As"),e.k0s(),e.nrm(26,"app-text-input",19)(27,"br"),e.j41(28,"label",20),e.EFF(29,"Aadhar No"),e.k0s(),e.nrm(30,"app-text-input",21),e.j41(31,"label",22),e.EFF(32,"Passport No"),e.k0s(),e.nrm(33,"app-text-input",23)(34,"br"),e.j41(35,"label",9),e.EFF(36,"ECR/ECNR: "),e.k0s(),e.nrm(37,"input",24),e.EFF(38," ECNR "),e.nrm(39,"input",25),e.EFF(40," ECR "),e.nrm(41,"br"),e.j41(42,"label",26),e.EFF(43,"Date of Birth"),e.k0s(),e.nrm(44,"app-date-picker",27),e.j41(45,"label",28),e.EFF(46,"Place of Birth"),e.k0s(),e.nrm(47,"app-text-input",29)(48,"br"),e.j41(49,"label",30),e.EFF(50,"Address"),e.k0s(),e.nrm(51,"app-text-input",31)(52,"br"),e.j41(53,"label",32),e.EFF(54,"City"),e.k0s(),e.nrm(55,"app-text-input",33),e.j41(56,"label",34),e.EFF(57,"PIN"),e.k0s(),e.nrm(58,"app-text-input",35)(59,"br"),e.j41(60,"label",36),e.EFF(61,"District"),e.k0s(),e.nrm(62,"app-text-input",37),e.j41(63,"label",38),e.EFF(64,"Email"),e.k0s(),e.nrm(65,"app-text-input",39),e.DNE(66,Oe,6,4,"div",40),e.DNE(67,Te,4,2,"div",0),e.nrm(68,"br"),e.k0s(),e.j41(69,"div",41)(70,"tabset",42,43)(72,"tab",44),e.bIt("selectTab",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onTabActivated(i))}),e.j41(73,"h4",45),e.EFF(74,"Phones"),e.k0s(),e.j41(75,"div",46)(76,"div",47),e.EFF(77,"Sr No"),e.k0s(),e.j41(78,"div",48),e.EFF(79,"Phone"),e.k0s(),e.j41(80,"div",49),e.EFF(81,"Is Main"),e.k0s(),e.j41(82,"button",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addPhone())}),e.k0s(),e.DNE(83,Se,9,3,"div",51),e.k0s(),e.nrm(84,"br"),e.j41(85,"label",9),e.EFF(86,"Professions"),e.k0s(),e.j41(87,"div",52)(88,"div",47),e.EFF(89,"Sr No"),e.k0s(),e.j41(90,"div",48),e.EFF(91,"Category"),e.k0s(),e.j41(92,"div",49),e.EFF(93,"Is Main"),e.k0s(),e.j41(94,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addUserProfession())}),e.k0s(),e.DNE(95,Ge,7,4,"div",51),e.k0s(),e.nrm(96,"br"),e.j41(97,"label",9),e.EFF(98,"Qualifications"),e.k0s(),e.j41(99,"div",54)(100,"div",55),e.EFF(101,"Sr No"),e.k0s(),e.j41(102,"div",56),e.EFF(103,"Qualification"),e.k0s(),e.j41(104,"div",57),e.EFF(105,"Is Main"),e.k0s(),e.j41(106,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addQualification())}),e.k0s(),e.DNE(107,De,8,4,"div",51),e.k0s()(),e.j41(108,"tab",58),e.bIt("selectTab",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onTabActivated(i))}),e.j41(109,"label",9),e.EFF(110,"Experiences"),e.k0s(),e.j41(111,"div",59)(112,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addUserExp())}),e.k0s(),e.DNE(113,Ve,13,8,"div",51),e.k0s()(),e.j41(114,"tab",60),e.bIt("selectTab",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onTabActivated(i))}),e.j41(115,"div",61),e.EFF(116,"File to upload"),e.k0s(),e.j41(117,"div",62),e.EFF(118,"Type"),e.k0s(),e.j41(119,"div",63)(120,"div",64)(121,"input",65),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileInputChange(i))}),e.k0s()(),e.DNE(122,Ue,7,4,"div",51),e.k0s()()()(),e.DNE(123,Be,3,1,"div",66),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.registerForm),e.R7$(1),e.Y8G("ngIf",t.candidate),e.R7$(3),e.Y8G("disabled",!t.registerForm.dirty),e.R7$(12),e.Y8G("label","First Name"),e.R7$(3),e.Y8G("label","Second Name"),e.R7$(4),e.Y8G("label","Family Name"),e.R7$(3),e.Y8G("label","Known As"),e.R7$(4),e.Y8G("label","Aadhar No"),e.R7$(3),e.Y8G("label","Passport No"),e.R7$(11),e.Y8G("maxDate",t.maxDate)("label","Date of birth"),e.R7$(3),e.Y8G("label","Place of birth"),e.R7$(4),e.Y8G("label","address"),e.R7$(4),e.Y8G("label","city"),e.R7$(3),e.Y8G("label","pin"),e.R7$(4),e.Y8G("label","district"),e.R7$(3),e.Y8G("label","email"),e.R7$(1),e.Y8G("ngIf",0===t.candidate.id),e.R7$(1),e.Y8G("ngIf",t.agents),e.R7$(16),e.Y8G("ngForOf",null==t.userPhones?null:t.userPhones.controls),e.R7$(12),e.Y8G("ngForOf",null==t.userProfessions?null:t.userProfessions.controls),e.R7$(12),e.Y8G("ngForOf",null==t.userQualifications?null:t.userQualifications.controls),e.R7$(6),e.Y8G("ngForOf",null==t.userExperiences?null:t.userExperiences.controls),e.R7$(9),e.Y8G("ngForOf",null==t.userAttachments?null:t.userAttachments.controls),e.R7$(1),e.Y8G("ngIf",t.validationErrors)}}let Ye=(()=>{class n{constructor(t,s,i,r,d,m,_,I,y,E){this.accountService=t,this.toastrService=s,this.fb=i,this.activatedRoute=r,this.candidateService=d,this.router=m,this.toastr=_,this.qualService=y,this.downloadService=E,this.myPassword="",this.cancelRegister=new e.bkB,this.registerForm=new o.gE({}),this.maxDate=new Date,this.professions=[],this.agents=[],this.qualifications=[],this.errors=[],this.isAddMode=!1,this.strAddMode="",this.loading=!1,this.submitted=!1,this.bsValueDate=new Date,this.fileToUpload=null,this.filesToUpload=[],this.selectedProfession="",this.events=[],this.onUploadFinished=new e.bkB,this.progress={loaded:0,total:0},this.message="",this.isMultipleUploaded=!1,this.isSingleUploaded=!1,this.urlAfterUpload="",this.percentUploaded=0,this.attachmentType="",this.userFiles=[],this.attachmentid=0,this.routeId="",this.returnUrl="/",this.qrDataPPNo="",this.attachmentTypes=[{typeName:"CV"},{typeName:"Educational Certificate"},{typeName:"Experience Certificate"},{typeName:"Passport Copy"},{typeName:"Photograph"},{typeName:"affidavit"},{typeName:"Air Ticket"},{typeName:"Travel Insurance"},{typeName:"Medical Fit certificate"},{typeName:"Visa Copy"},{typeName:"Job Offer"}],this.lastTimeCalled=Date.now(),this.savewithattachments=()=>{if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();const R=new FormData;this.userFiles.length>0&&this.userFiles.forEach(p=>{R.append("file",p,p.name)}),R.append("data",JSON.stringify(this.registerForm.value)),this.candidate||void 0!==R.get("password")?0===this.candidate.id?(this.toastrService.info("inserting ..."),this.candidateService.registerNewWithFiles(R).subscribe({next:p=>{null!==p.errorMessage?this.toastrService.error(p.errorMessage,"failed to save the candidate data"):(this.toastrService.success("candidate saved, with Application No. "+p.returnInt.toString(),"Profile successfully inserted"),this.registerForm.setValue({applicationNo:p.returnInt}))},error:p=>{this.toastrService.error(p.error?.details,"failed to insert the candidate")}})):(this.toastrService.info("udating ..."),this.candidateService.UpdateCandidateWithFiles(R).subscribe({next:p=>{""!==p?.errorMessage?this.toastrService.error("failed to update the candidate",p.errorMessage,{closeButton:!0}):(this.toastrService.success("updated the candidate successfully"),this.router.navigateByUrl(this.returnUrl))},error:p=>{this.toastrService.error(p.error?.details,"failed to update the candidate"),console.log(p)}})):this.toastrService.info("Password not provided")},this.uploadFinished=j=>{this.response=j},this.passwordElement=I,this.routeId=this.activatedRoute.snapshot.params.id,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1;let h=this.router.getCurrentNavigation();h?.extras&&h.extras.state&&(h.extras.state.returnUrl&&(this.returnUrl=h.extras.state.returnUrl),h.extras.state.user&&(this.user=h.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.professions=t.categories,this.qualifications=t.qualifications,this.agents=t.agents,this.candidate=t.candidate,this.isAddMode=0===this.candidate?.id,this.strAddMode=this.isAddMode?"Entering new candidate":"Editing Application No."+this.candidate?.applicationNo}),this.candidate&&this.InitializeAndPopulateFormArray(this.candidate)}InitializeAndPopulateFormArray(t){this.registerForm=this.fb.group({id:[t.id,o.k0.required],applicationNo:[t.applicationNo],gender:[t.gender,[o.k0.required,o.k0.maxLength(1)]],nationality:["Indian"],firstName:[t.firstName,o.k0.required],secondName:[t.secondName],familyName:[t.familyName],knownAs:[t.knownAs,o.k0.required],dOB:[t.dOB,this.matchValues("firstName")],placeOfBirth:[t.placeOfBirth],aadharNo:[t.aadharNo],ppNo:[t.ppNo,o.k0.maxLength(12)],ecnr:[t.ecnr,[o.k0.required,o.k0.maxLength(1)]],customerId:[t.customerId],referredByName:[t.referredByName],address:[t.address],city:[t.city,o.k0.required],country:[t.country??"India",o.k0.required],pin:[t.pin],district:[t.district],email:[t.email,o.k0.required],userPhones:this.fb.array(t.userPhones.map(s=>this.fb.group({id:s.id,candidateId:[s.candidateId],mobileNo:[s.mobileNo,[o.k0.required,o.k0.maxLength(15),o.k0.minLength(10)]],isMain:[s.isMain],remarks:[s.remarks],isValid:[s.isValid]}))),userQualifications:this.fb.array(t.userQualifications.map(s=>this.fb.group({id:s.id,candidateId:[s.candidateId],qualificationId:[s.qualificationId,o.k0.required],isMain:[s.isMain]}))),userProfessions:this.fb.array(t.userProfessions.map(s=>this.fb.group({id:s.id,candidateId:s.candidateId,professionId:[s.professionId,o.k0.required],isMain:[s.isMain]}))),userExperiences:this.fb.array(t.userExperiences.map(s=>this.fb.group({id:s.id,candidateId:s.candidateId,employer:s.employer,position:s.position,salaryCurrency:s.salaryCurrency,monthlySalaryDrawn:s.monthlySalaryDrawn,workedFrom:s.workedFrom,workedUpto:s.workedUpto}))),userAttachments:this.fb.array(t.userAttachments.map(s=>this.fb.group({id:s.id,candidateId:s.candidateId,appUserId:s.appUserId,attachmentType:s.attachmentType,name:[s.name,o.k0.required],attachmentSizeInBytes:s.attachmentSizeInBytes,url:s.url})))}),this.registerForm.controls.password&&this.registerForm.controls.password.valueChanges.subscribe({next:()=>this.registerForm.controls.confirmPassword.updateValueAndValidity()})}get userPhones(){return this.registerForm.get("userPhones")}get userQualifications(){return this.registerForm.get("userQualifications")}get userProfessions(){return this.registerForm.get("userProfessions")}get userExperiences(){return this.registerForm.get("userExperiences")}newUserPhone(){return this.fb.group({candidateId:this.candidate?.id,mobileNo:["",[o.k0.required,o.k0.minLength(10),o.k0.maxLength(15)]],isMain:!1,remarks:""})}addPhone(){this.userPhones.push(this.newUserPhone())}removeUserPhone(t){this.userPhones.removeAt(t)}newQualification(){return this.fb.group({candidateId:this.candidate?.id,qualificationId:0,qualificationName:"",isMain:[!1]})}addQualification(){this.userQualifications.push(this.newQualification())}removeUserQualification(t){this.userQualifications.removeAt(t)}newUserProfession(){return this.fb.group({professionId:[0,o.k0.required],isMain:[!1,o.k0.required],candidateId:this.candidate?.id})}addUserProfession(){this.userProfessions.push(this.fb.group({candidateId:[0,o.k0.required],professionId:[0,o.k0.required],isMain:[!1,o.k0.required]}))}removeUserProfession(t){this.userProfessions.removeAt(t)}newUserExp(){return this.fb.group({candidateId:this.candidate?.id,srNo:[0,o.k0.required],position:["",o.k0.required],company:["",o.k0.required],workedFrom:"",workedUpto:""})}addUserExp(){this.userExperiences.push(this.newUserExp())}removeUserExp(t){this.userExperiences.removeAt(t)}get userAttachments(){return this.registerForm.get("userAttachments")}newUserAttachment(){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:[""],name:["",o.k0.required],attachmentSizeInBytes:0,url:""})}newUserAttachmentWithFile(t){return this.fb.group({id:0,candidateId:void 0===this.candidate?0:this.candidate.id,attachmentType:["",o.k0.required],name:[t.name,o.k0.required],attachmentSizeInBytes:t.size,url:""})}addUserAttachment(){this.userAttachments.push(this.newUserAttachment())}removeUserAttachment(t){this.userAttachments.removeAt(t)}getCVById(t){return this.candidateService.getCandidate(t).subscribe({next:s=>{this.candidate=s,this.InitializeAndPopulateFormArray(this.candidate)},error:s=>this.toastrService.error("failed to get candidate to edit:",s)})}getQualifications(){return this.qualService.getQualificationList().subscribe({next:t=>this.qualifications=t,error:t=>this.toastrService.error("error in qualificatin",t)})}matchValues(t){return s=>s.value===s.parent?.get(t)?.value?null:{notMatching:!0}}cancel(){this.cancelRegister.emit(!1),this.router.navigateByUrl(this.returnUrl)}selectTab(t){this.memberTabs.tabs[t].active=!0}onTabActivated(t){this.activeTab=t}validateEmailNotTaken(){return t=>(0,q.O)(10).pipe((0,x.n)(()=>t.value?this.accountService.checkEmailExists(t.value).pipe((0,C.T)(s=>s?{emailExists:!0}:null)):(0,g.of)(null)))}validatePPNotTaken(){return t=>(0,q.O)(10).pipe((0,x.n)(()=>t.value?this.accountService.checkPPExists(t.value).pipe((0,C.T)(s=>(null!==s&&this.toastrService.warning("that passport number is taken by "+s),s?{ppExists:!0}:null))):(0,g.of)(null)))}handleFileInput(t){this.fileToUpload=t[0],this.filesToUpload.push(t[0])}getAgentValue(t){console.log("agent selected",t)}getProfessionValue(t){console.log("ngx dropdown selected",t)}getValues(t){console.log("ngx dropdown selected",this.selectedProfession)}onFileInputChange(t){const r=t.target.files[0];r.size>0&&(this.userFiles.push(r),this.userAttachments.push(this.newUserAttachmentWithFile(r)))}downloadattachment(t){var s=this.userAttachments.at(t).value;if(0!==s.id){var r=s.name;this.downloadService.download(s.id).subscribe({next:d=>{const m=document.createElement("a"),_=URL.createObjectURL(d);m.href=_,m.download=r,m.click(),URL.revokeObjectURL(_)},error:d=>this.toastr.error(d.error.details,"Error while downloading")})}else this.toastrService.warning("this item has no primary key value")}IsNewAttachment(t){return void 0!==this.userAttachments.value.map(i=>i.id).findIndex(i=>0===i.id)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(A.D),e.rXU(b.tw),e.rXU(o.ok),e.rXU(u.nX),e.rXU(k),e.rXU(u.Ix),e.rXU(b.tw),e.rXU(e.aKT),e.rXU(J.P),e.rXU(Q.E))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-candidate-edit"]],viewQuery:function(s,i){if(1&s&&(e.GBs(Ae,7),e.GBs(Ne,7)),2&s){let r;e.mGM(r=e.lsd())&&(i.memberTabs=r.first),e.mGM(r=e.lsd())&&(i.passwordElement=r.first)}},outputs:{cancelRegister:"cancelRegister",onUploadFinished:"onUploadFinished"},decls:5,vars:5,consts:[[4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],[2,"font-size","smaller"],["autocomplete","off",3,"formGroup","ngSubmit"],["class","my-0","style","font-weight: bold; display: inline-block;",4,"ngIf"],[1,"my-0",2,"margin-left","225px","display","inline-block","vertical-align","top"],["type","button",1,"btn","btn-default","fa","fa-window-close","fa-2x",2,"color","aliceblue",3,"click"],["title","Update","type","button",1,"btn","btn-success","me-2","fa","fa-save",3,"disabled","click"],[1,"stdd","col-5","mt-1",2,"border-style","groove","margin-left","5px"],[1,"lbl"],["type","radio","checked","","value","M","formControlName","gender",1,"inputcheck","form-check-input"],["type","radio","value","F","formControlName","gender",1,"inputcheck","form-check-input"],["for","firstName",1,"lbl"],["formControlName","firstName",1,"stdd","w150",3,"label"],["for","secondName",1,"lbl"],["formControlName","secondName",1,"stdd","w150",3,"label"],["for","familyName",1,"lbl"],["formControlName","familyName",1,"stdd","w150",3,"label"],["for","knownAs",1,"lbl"],["formControlName","knownAs",1,"stdd","w150",3,"label"],["for","aadharNo",1,"lbl"],["formControlName","aadharNo",1,"stdd","w150",3,"label"],["for","ppNo",1,"lbl",2,"margin-left","5px"],["formControlName","ppNo",1,"stdd","w150",3,"label"],["type","radio","formControlName","ecnr","value","T",1,"form-check-input","inputcheck"],["type","radio","formControlName","ecnr","value","F","checked","",1,"form-check-input","inputcheck"],["for","dOB",1,"lbl"],["formControlName","dOB",1,"stdd","w150",3,"maxDate","label"],["for","placeOfBirth",1,"lbl"],["formControlName","placeOfBirth",1,"stdd","w150",3,"label"],["for","address",1,"lbl"],["formControlName","address",1,"stdd","w450",3,"label"],["for","city",1,"lbl"],["formControlName","city",1,"stdd","w150",3,"label"],["for","pin",1,"lbl"],["formControlName","pin",1,"stdd","w150",3,"label"],["for","district",1,"lbl"],["formControlName","district",1,"stdd","w150",3,"label"],["for","email",2,"display","inline-block","width","50px","font-size","small"],["formControlName","email",1,"stdd","w250",3,"label"],["class","stdd w500",4,"ngIf"],[1,"stdd","col-5","mt-1",2,"margin-left","5px"],[1,"member-tabset",2,"background-color","black","color","whitesmoke"],["memberTabs",""],["heading","Phones, Prof & Qualification",3,"selectTab"],[2,"background-color","auto !important"],["formArrayName","userPhones",1,"col-12","my-1","px-0",2,"font-size","small"],[1,"stdd","col-1"],[1,"stdd","col-4"],[1,"stdd","col-2"],["type","button",1,"stdd","my-1","fa","fa-plus",2,"color","blue",3,"click"],[4,"ngFor","ngForOf"],["formArrayName","userProfessions",1,"col-12","my-1","px-0",2,"font-size","small"],["type","button",1,"my-1","fa","fa-plus",2,"color","blue",3,"click"],["formArrayName","userQualifications",1,"my-1","px-0",2,"font-size","small"],[2,"width","50px","display","inline-block"],[2,"width","300px","display","inline-block"],[2,"width","50px","margin-left","10px","display","inline-block"],["heading","Experience",3,"selectTab"],["formArrayName","userExperiences",1,"col-12","my-1","px-0",2,"height","10px","font-size","small"],["heading","Attachments",3,"selectTab"],[1,"stdd","col-6"],[1,"stdd","col-3"],["formArrayName","userAttachments",2,"height","12px"],[1,"stdd",2,"font-size","x-small"],["type","file","id","file",1,"stdd",3,"change"],["class","row",4,"ngIf"],[1,"my-0",2,"font-weight","bold","display","inline-block"],[1,"stdd","w500"],["for","password",1,"lbl"],["formControlName","password",3,"label","type"],[3,"label","type"],["for","referredBy",1,"lbl"],["bindLabel","customerName","bindValue","id","formControlName","customerId",2,"display","inline-block","font-size","smaller","width","300px",3,"items","searchable","change"],[3,"formGroupName"],["formControlName","mobileNo",3,"label"],["type","checkbox","formControlName","isMain",2,"width","50px","margin-left","30","display","inline-block"],[1,"btn","w25","fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","professionName","bindValue","id","formControlName","professionId",1,"stdd","col-4",3,"items","searchable","change"],["type","checkbox","formControlName","isMain",1,"stdd","col-2"],[1,"fa","fa-trash",2,"color","red","display","inline-block",3,"click"],["bindLabel","qualificationName","bindValue","id","formControlName","qualificationId",1,"stdd","w300","py-0","my-0",3,"items","searchable","change"],["type","text","formControlName","candidateId",1,"stdd","w15"],[1,"stdd","w50"],["formControlName","srNo",3,"label"],[1,"stdd","w250"],["formControlName","position",3,"label"],[1,"stdd","w300"],["formControlName","company",3,"label"],[1,"stdd","w100"],["formControlName","workedFrom",3,"maxDate","label"],["formControlName","workedUpto",3,"maxDate","label"],[1,"stdd","col-5"],["formControlName","name",3,"label"],["bindLabel","typeName","bindValue","typeName","formControlName","attachmentType",1,"stdd","mx-10","w150","fSmaller",3,"items","searchable"],["type","button",1,"w25","mx-1","fa","fa-download",3,"click"],["type","button","title","remove the attachment",1,"w25","red","fa","fa-trash",2,"margin-left","20px",3,"click"],[1,"row"],[1,"text-danger"]],template:function(s,i){1&s&&(e.DNE(0,Pe,2,0,"div",0),e.DNE(1,Xe,124,25,"form",1),e.j41(2,"div",2),e.EFF(3),e.nI1(4,"json"),e.k0s()),2&s&&(e.Y8G("ngIf",!i.candidate),e.R7$(1),e.Y8G("ngIf",i.candidate),e.R7$(2),e.JRh(e.bMT(4,3,i.registerForm.value)))},dependencies:[l.Sq,l.bT,o.qT,o.me,o.Zm,o.Fm,o.BC,o.cb,o.j4,o.JD,o.$R,o.v8,W.V6,W.fw,K.vr,Z.f,Re,l.TG],styles:['.stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-left:5px;margin-top:5px;color:#f0f8ff;font-size:small}tab[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 2px;color:#f0f8ff;background-color:gray}.inputCheck[_ngcontent-%COMP%]{margin-right:5px;width:40px;margin-left:10px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin-right:10px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}.lblS[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;vertical-align:top;font-weight:700;width:40px;margin-top:5px}.lbl[_ngcontent-%COMP%]{font-size:smaller;display:inline-block;font-weight:700;width:80px;margin-top:5px;margin-left:5px;vertical-align:middle}.chkLabel[_ngcontent-%COMP%]{width:100px;margin-right:2px;padding-left:2px}.tAlignR[_ngcontent-%COMP%]{text-align:right}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w350[_ngcontent-%COMP%]{width:350px}.w450[_ngcontent-%COMP%]{width:450px}.red[_ngcontent-%COMP%]{color:red}']})}return n})();class Le{constructor(){this.id=0,this.applicationNo=0,this.gender="",this.firstName="",this.secondName="",this.familyName="",this.knownAs="",this.referredBy=0,this.referredByName="",this.placeOfBirth="",this.aadharNo="",this.ppNo="",this.ecnr="F",this.address="",this.city="",this.pin="",this.district="",this.country="India",this.nationality="",this.email="",this.companyId=0,this.created=new Date,this.appUserIdNotEnforced="",this.appUserId=0,this.notificationDesired=!1,this.candidateStatus="",this.photoUrl="",this.lastActive=new Date,this.userPhones=[],this.userQualifications=[],this.userProfessions=[],this.userAttachments=[],this.userExperiences=[],this.userPhotos=[]}}var D=c(5964),qe=c(1555),V=c(1767),te=c(8028),se=c(9726);function Je(n,a){1&n&&(e.j41(0,"div"),e.EFF(1," No candidate detail available\n"),e.k0s())}function Qe(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",13)(1,"input",14),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.CVChecked(i.cv))}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("checked",t.cv.checked)}}function We(n,a){if(1&n&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.R7$(1),e.SpI(" ",t.professionName," - ")}}function Ke(n,a){1&n&&(e.j41(0,"div",15),e.nrm(1,"pre"),e.k0s())}function Ze(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.download(i.cv))}),e.k0s()}}function et(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",2),e.DNE(1,Qe,2,1,"div",3),e.j41(2,"div",4),e.EFF(3),e.k0s(),e.j41(4,"div",5),e.EFF(5),e.k0s(),e.j41(6,"div",6),e.EFF(7),e.k0s(),e.j41(8,"div",7),e.EFF(9),e.k0s(),e.j41(10,"div",8),e.EFF(11),e.k0s(),e.j41(12,"div",7),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"div",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.displayAssessment())}),e.EFF(16),e.k0s(),e.DNE(17,We,2,1,"div",10),e.DNE(18,Ke,2,0,"div",11),e.DNE(19,Ze,1,0,"button",12),e.k0s()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",!t.isPrintPDF),e.R7$(2),e.JRh(t.cv.gender),e.R7$(1),e.Mz_("routerLink","/candidates/edit/",t.cv.candidateId,""),e.R7$(1),e.JRh(t.cv.applicationNo),e.R7$(1),e.Mz_("routerLink","/candidate/historyfromcvid/",t.cv.candidateId,""),e.R7$(1),e.JRh(t.cv.fullName),e.R7$(2),e.JRh(t.cv.city),e.R7$(2),e.JRh(t.cv.orderCategoryRef),e.R7$(2),e.JRh(e.i5U(14,13,t.cv.assessedOn,"dd-MMM-yy")),e.R7$(3),e.JRh(t.cv.gradeAssessed),e.R7$(1),e.Y8G("ngForOf",t.cv.userProfessions),e.R7$(1),e.Y8G("ngIf",t.cv.userProfessions.length>0),e.R7$(1),e.Y8G("ngIf",!t.isPrintPDF)}}let tt=(()=>{class n{constructor(){this.isPrintPDF=!1,this.msgEvent=new e.bkB,this.downloadEvent=new e.bkB,this.cvAssessEvent=new e.bkB,this.cvCheckedEvent=new e.bkB,this.currentId=0,this.cvidForDocumentView=0,this.isHidden=!0,this.xPosTabMenu=0,this.yPosTabMenu=0}ngOnInit(){console.log(this.isPrintPDF)}rightClick(t){return t.stopPropagation(),this.xPosTabMenu=t.clientX,this.yPosTabMenu=t.clientY,this.isHidden=!1,!1}closeRightClickMenu(){this.isHidden=!0}download(t){this.downloadEvent.emit(t)}onClickLoadDocument(t){this.msgEvent.emit(t)}displayAssessment(){this.cvAssessEvent.emit(this.cv)}setCurrentId(t){this.currentId=t}showhistory(t){this.msgEvent.emit(t)}CVChecked(t){this.cvCheckedEvent.emit(t)}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-available-item"]],inputs:{cv:"cv",isPrintPDF:"isPrintPDF"},outputs:{msgEvent:"msgEvent",downloadEvent:"downloadEvent",cvAssessEvent:"cvAssessEvent",cvCheckedEvent:"cvCheckedEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","stdd","style","width: max-content;",4,"ngIf"],[1,"stdd",2,"width","max-content"],["class","stdd",4,"ngIf"],[1,"stdd","w40",2,"text-align","center"],["title","click to edit","mouseover","style.cursor = 'pointer'",1,"stdd","w50",2,"margin-left","10px",3,"routerLink"],["title","contact history of the candidate",1,"stdd","w130",3,"routerLink"],[1,"stdd","w100"],[1,"stdd","w300"],["title","click to show the assessment sheet",1,"stdd","w50","cursorpointer",2,"text-align","center",3,"click"],["class","prof",4,"ngFor","ngForOf"],["class","prof",4,"ngIf"],["type","button","class","btn fa fa-download w20","type","button","title","download the CV",3,"click",4,"ngIf"],[1,"stdd"],["type","checkbox",1,"checkbox","form-check-input",2,"margin-left","50px",3,"checked","change"],[1,"prof"],["type","button","type","button","title","download the CV",1,"btn","fa","fa-download","w20",3,"click"]],template:function(s,i){1&s&&(e.DNE(0,Je,2,0,"div",0),e.DNE(1,et,20,16,"div",1)),2&s&&(e.Y8G("ngIf",null===i.cv),e.R7$(1),e.Y8G("ngIf",i.cv))},dependencies:[l.Sq,l.bT,u.Wk,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:small;margin:0 2px}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#9acd32}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w10[_ngcontent-%COMP%]{width:10px}.w20[_ngcontent-%COMP%]{width:20px}.w25[_ngcontent-%COMP%]{width:25px}.w30[_ngcontent-%COMP%]{width:30px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:180px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.blue[_ngcontent-%COMP%]{color:#00008b}.prof[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:0 2px;border:aqua;width:200px}.checkbox[_ngcontent-%COMP%]{vertical-align:top;border-color:#000;text-align:center;width:15px}"]})}return n})();const st=["search"];function it(n,a){if(1&n){const t=e.RV6();e.j41(0,"pagination",12),e.bIt("pageChanged",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.onPageChanged(i))}),e.EFF(1," >"),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",20)}}function nt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",13)(1,"input",14,15),e.bIt("keyup.enter",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.k0s(),e.j41(3,"button",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSearch())}),e.k0s(),e.j41(4,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onReset())}),e.k0s(),e.j41(5,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.referCVs())}),e.k0s(),e.j41(6,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s(),e.j41(7,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.generatePDF())}),e.j41(8,"mat-icon"),e.EFF(9,"print"),e.k0s()()()}2&n&&(e.R7$(7),e.Y8G("previewOnly",!1)("useExistingCss",!0))}function rt(n,a){1&n&&(e.j41(0,"div",21),e.EFF(1," No candidates available to refer "),e.k0s())}function at(n,a){if(1&n&&(e.j41(0,"div",23),e.nrm(1,"app-available-item",24),e.k0s()),2&n){const t=a.$implicit;e.R7$(1),e.Y8G("isPrintPDF",!0)("cv",t)}}function ot(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,at,2,2,"div",22),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.printCVs)}}function dt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",23)(1,"app-available-item",25),e.bIt("downloadEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.downloadcv(i))})("cvCheckedEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.cvCheckedEvent(i))})("cvAssessEvent",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.displayAssessmentModalBySwitchMap(i))}),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(1),e.Y8G("isPrintPDF",!1)("cv",t)}}function ct(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,dt,2,2,"div",22),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.cvs)}}let lt=(()=>{class n{constructor(t,s,i,r,d,m,_,I,y,E){this.router=t,this.activatedRoute=s,this.service=i,this.candAssessService=r,this.referService=d,this.toastr=m,this.modalService=_,this.orderService=I,this.fileService=y,this.downloadService=E,this.professions=[],this.agents=[],this.cvs=[],this.selectedCVs=[],this.printCVs=[],this.returnUrl="",this.cvParams=new f,this.totalCount=0,this.ProspList=[],this.headers=[],this.printtitle="",this.isPrintPDF=!1,this.distinctRefCats=[],this.distinctRefCat="",this.cvParams.typeOfCandidate="available";let h=this.router.getCurrentNavigation();h?.extras&&h.extras.state&&(h.extras.state.returnUrl&&(this.returnUrl=h.extras.state.returnUrl),h.extras.state.user&&(this.user=h.extras.state.user))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.cvs=t.cvs.result,this.pagination=t.cvs.pagination,this.professions=t.professions,this.agents=t.agents}),this.selectedCVs=[]}loadCandidates(t=!0){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,t).subscribe({next:s=>{s.result&&s.pagination&&(this.cvs=s.result,this.pagination=s.pagination,console.log("cvs",this.cvs))}}))}getCVs(){this.cvParams&&(this.service.setCVParams(this.cvParams),this.service.getAvailableCandidatesPaged(this.cvParams,!0).subscribe({next:t=>{t.result&&t.pagination&&(this.cvs=t.result,this.totalCount=t.count)}}))}onSearch(){const t=this.service.getCVParams()??new f;t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.service.setCVParams(t),this.getCVs()}onReset(){this.searchTerm.nativeElement.value="",this.cvParams=new f,this.service.setCVParams(this.cvParams),this.getCVs()}onPageChanged(t){this.cvParams&&this.cvParams.pageNumber!==t.page&&(this.cvParams.pageNumber=t.page,this.service.setCVParams(this.cvParams),this.getCVs())}openChecklistModal(t){var r=[];const d={class:"modal-dialog-centered",initialState:{user:t,title:"Choose Order Item to refer selected CVs to",orderItems:this.getOpenOrderItemsArray(),ids:r}};this.bsModalRef=this.modalService.show(Y,d),this.bsModalRef.content.updateSelectedRoles.subscribe(m=>{r=m})}getOpenOrderItemsArray(){let s=[],r=new X;return this.orderService.getOrderItemsBriefDto(r).subscribe(d=>{if(s=d,0!==s.length)return s},d=>{console.log("failed to retrieve roles array",d)}),s}downloadcv(t){var s=t.fullName;this.fileService.downloadCV(t.candidateId).subscribe({next:i=>{console.log("downloadcv blob: ",i);const r=document.createElement("a"),d=URL.createObjectURL(i);r.href=d,r.download=s,r.click(),URL.revokeObjectURL(d)},error:i=>{this.toastr.error(i.error?.details,"Error while downloading"),console.log("error",i)}})}downloadFileEvent(t){return this.downloadService.downloadFile(t).subscribe(()=>{this.toastr.success("document downloaded")},s=>{this.toastr.error("failed to download document",s)})}displayAssessmentModalBySwitchMap(t){this.candAssessService.getCandidateAssessmentDto(t.candidateId,t.orderItemId).pipe((0,D.p)(d=>void 0!==d),(0,x.n)(d=>(this.bsModalRef=this.modalService.show(qe.U,{class:"modal-dialog-centered modal-lg",initialState:{assess:d,username:this.user?.userName}}),this.bsModalRef.content.candAssessEvent))).subscribe(d=>{console.log("inner response:",d)})}navigateByUrl(t,s,i){this.router.navigate([t],{state:{cvbrief:s,userobject:this.service.user,toedit:i,returnUrl:"/candidates"}})}cvCheckedEvent(t){var s=this.cvs.findIndex(d=>d.candAssessmentId==t.candAssessmentId);if(-1!==s){var i=this.cvs[s];if(i.checked)this.selectedCVs.push(i);else{var r=this.selectedCVs.findIndex(d=>d.candAssessmentId==i.candAssessmentId);-1!==r?this.selectedCVs.splice(r,1):this.selectedCVs.push(i)}}}referCVs(){if(0!==this.selectedCVs.length){var t=this.selectedCVs.map(s=>s.candAssessmentId);this.referService.referCVs(t).subscribe({next:s=>{console.log("refer cvs response:",s),""!==s.successString?(this.toastr.success(s.successString,"success"),this.clearSelections(t),this.toastr.success("CVs referred","Success")):""!==s.errorString&&(this.clearSelections(t),this.toastr.error(s.errorString,"Error in referrals"))},error:s=>{console.log("error in cvref",s),this.toastr.error(s.error?.details,s.length>0?"error in referring the CVs":"Error in referring the CVs;")}}),this.selectedCVs=[]}else this.toastr.warning("No CVs selected to forward to client","No selections made")}clearSelections(t){this.removeReferredRows(t)}removeReferredRows(t){t.forEach(s=>{var i=this.selectedCVs.findIndex(r=>r.candAssessmentId==r.candAssessmentId);-1!==i&&(console.log("deleted row",this.selectedCVs[i].applicationNo),this.selectedCVs.splice(i,1))})}close(){this.router.navigateByUrl(this.returnUrl)}generatePDF(){this.isPrintPDF=!this.isPrintPDF,this.printtitle="CVs Available to refer as on "+new Date,this.service.getAvailableCandidateList().subscribe({next:t=>{null!==t&&t.length>0?(this.printCVs=t,console.log("printCVs:",this.printCVs)):console.log("response is undefined")},error:t=>console.log(t)})}closePrintSection(){this.isPrintPDF=!1,this.distinctRefCat=""}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(k),e.rXU(V.z),e.rXU(te.y),e.rXU(b.tw),e.rXU(v.I8),e.rXU(T.Q),e.rXU(Q.E),e.rXU(L.Z))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-cvs-available-to-ref"]],viewQuery:function(s,i){if(1&s&&e.GBs(st,5),2&s){let r;e.mGM(r=e.lsd())&&(i.searchTerm=r.first)}},decls:23,vars:5,consts:[["style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["class","stdd",4,"ngIf"],["id","print-section"],[2,"margin-left","70px"],[2,"width","40px","margin-left","30px","margin","0 2px 0 2px","display","inline-block"],[1,"lbl","w50","mx-1"],[1,"lbl","w130","mx-1"],[1,"lbl","w100","mx-1"],[1,"lbl","w300"],[1,"lbl","w200","mx-1"],["style","margin-left: 100px; margin-top: 5px; font-weight: bold; color: pink; ",4,"ngIf"],[4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"stdd"],["type","text","title","enter name or app nos, separated by commma","placeholder","Search",1,"stdd","form-control","w300",2,"margin-left","20px",3,"keyup.enter"],["search",""],["type","button",1,"btn","btn-outline-primary","fa","fa-search","fa-2x",3,"click"],["type","button",1,"btn","fa","fa-arrows-rotate","fa-refresh","fa-2x",3,"click"],["title","refers selected CVs to client",1,"btn","fa","fa-arrow-right","fa-2x",3,"click"],["title","close this page",1,"btn","fa","fa-window-close","fa-2x",3,"click"],["printSectionId","print-section","printTitle","printTitle","ngxPrint","","title","shows the report in pdf format and enables printing","title","print pdf for current category Ref",2,"display","inline-block","margin-left","50px",3,"previewOnly","useExistingCss","click"],[2,"margin-left","100px","margin-top","5px","font-weight","bold","color","pink"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[3,"isPrintPDF","cv"],[3,"isPrintPDF","cv","downloadEvent","cvCheckedEvent","cvAssessEvent"]],template:function(s,i){1&s&&(e.DNE(0,it,2,3,"pagination",0),e.DNE(1,nt,10,2,"div",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4),e.EFF(5,"Gndr"),e.k0s(),e.j41(6,"div",5),e.EFF(7,"App No"),e.k0s(),e.j41(8,"div",6),e.EFF(9,"Candidate Name"),e.k0s(),e.j41(10,"div",7),e.EFF(11,"City"),e.k0s(),e.j41(12,"div",8),e.EFF(13,"Category Ref"),e.k0s(),e.j41(14,"div",7),e.EFF(15,"Assessed On"),e.k0s(),e.j41(16,"div",5),e.EFF(17,"Grade"),e.k0s(),e.j41(18,"div",9),e.EFF(19,"Professions"),e.k0s()(),e.DNE(20,rt,2,0,"div",10),e.DNE(21,ot,2,1,"div",11),e.DNE(22,ct,2,1,"div",11),e.k0s()),2&s&&(e.Y8G("ngIf",void 0!==i.pagination),e.R7$(1),e.Y8G("ngIf",i.cvs),e.R7$(19),e.Y8G("ngIf",0===i.cvs.length),e.R7$(1),e.Y8G("ngIf",i.isPrintPDF),e.R7$(1),e.Y8G("ngIf",i.cvs.length&&!i.isPrintPDF))},dependencies:[l.Sq,l.bT,z.eK,N.An,se.GV,tt],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;word-wrap:break-word}.lbl[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:small;vertical-align:middle}.fMedium[_ngcontent-%COMP%]{font-size:medium}.fSmall[_ngcontent-%COMP%]{font-size:small}.btn[_ngcontent-%COMP%]{color:#f0f8ff;width:15px;margin:0 2px}.b[_ngcontent-%COMP%]{font-weight:700}.w15[_ngcontent-%COMP%]{width:15px}.w30[_ngcontent-%COMP%]{width:30px}.w45[_ngcontent-%COMP%]{width:45px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:70px}.w100[_ngcontent-%COMP%]{width:100px}.w130[_ngcontent-%COMP%]{width:130px}.w180[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w300[_ngcontent-%COMP%]{width:300px}"]})}return n})();var U=c(9173),ie=c(2576),ht=c(1413),ne=c(9437),pt=c(8141);function ut(n,a){if(1&n&&(e.j41(0,"ul")(1,"li",7),e.EFF(2),e.k0s(),e.j41(3,"li",6),e.EFF(4),e.k0s()()),2&n){const t=a.$implicit,s=e.XpG(2).$implicit;e.R7$(2),e.Lme("",s.sequence,"-",t.sequence,""),e.R7$(2),e.JRh(t.helpText)}}function ft(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,ut,5,3,"ul",4),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngForOf",t.helpSubItems)}}function vt(n,a){if(1&n&&(e.j41(0,"div")(1,"ul")(2,"li",5),e.EFF(3),e.k0s(),e.j41(4,"li",6),e.EFF(5),e.k0s(),e.DNE(6,ft,2,1,"div",0),e.k0s()()),2&n){const t=a.$implicit;e.R7$(3),e.SpI(" ",t.sequence," "),e.R7$(2),e.SpI(" ",t.helpText," "),e.R7$(1),e.Y8G("ngIf",t.helpSubItems)}}function gt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",1),e.EFF(2),e.j41(3,"button",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.bsModalRef.hide())}),e.j41(4,"span",3),e.EFF(5,"\xd7"),e.k0s()()(),e.DNE(6,vt,7,3,"div",4),e.k0s()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",t.help.topic," Help "),e.R7$(4),e.Y8G("ngForOf",t.help.helpItems)}}let _t=(()=>{class n{constructor(t){this.bsModalRef=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Y$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-help-modal"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container","stdd","b"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[1,"stdd","w20"],[1,"stdd","w700"],[1,"stdd","w30","ml-25"]],template:function(s,i){1&s&&e.DNE(0,gt,7,2,"div",0),2&s&&e.Y8G("ngIf",void 0!==i.help)},dependencies:[l.Sq,l.bT],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;vertical-align:top}li[_ngcontent-%COMP%]{vertical-align:top;font-size:small}.b[_ngcontent-%COMP%]{font-weight:700}.w20[_ngcontent-%COMP%]{width:20px}.w30[_ngcontent-%COMP%]{width:30px}.w50[_ngcontent-%COMP%]{width:50px}.w100[_ngcontent-%COMP%]{width:100px}.w700[_ngcontent-%COMP%]{width:700px}"]})}return n})();var bt=c(2588),kt=c(4412);let re=(()=>{class n{constructor(t){this.http=t,this.apiUrl=O.c.apiUrl,this.checklistSource=new kt.t(null),this.checklist$=this.checklistSource.asObservable()}getChecklist(t,s){return this.http.get(this.apiUrl+"checklist/generateorget/"+t+"/"+s)}getOrComposeChecklist(t,s){return this.http.get(this.apiUrl+"checklist/")}updateChecklist(t){return this.http.put(this.apiUrl+"Checklist/checklisthr",t)}generateChecklistHR(t,s){return this.http.get(this.apiUrl+"Checklist/"+t+"/"+s)}saveNewChecklistHR(t){return this.http.post(this.apiUrl+"CandidateAssessment/newchecklist",t)}deleteChecklistHR(t){return this.http.delete(this.apiUrl+"Checklist/checklist/"+t)}getRemuneration(t){return this.http.get(this.apiUrl+"orders/remuneration/"+t)}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(F.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ct(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"h4",6),e.EFF(2,"Candidate Checklist"),e.k0s(),e.nrm(3,"br"),e.j41(4,"div",7),e.EFF(5,"Candidate:"),e.k0s(),e.j41(6,"div",8),e.EFF(7),e.k0s(),e.j41(8,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.Update())}),e.k0s(),e.j41(9,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.bsmodalRef.hide())}),e.k0s(),e.j41(10,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteChecklist())}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(7),e.Lme("",t.chklst.applicationNo," - ",t.chklst.candidateName,"")}}function wt(n,a){1&n&&(e.j41(0,"div",44),e.EFF(1,"Not Defined"),e.k0s())}function xt(n,a){if(1&n&&(e.j41(0,"div",45),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(t.chklst.charges)}}function Ft(n,a){if(1&n&&(e.j41(0,"div",48)(1,"div",49),e.EFF(2,"On: "),e.k0s(),e.j41(3,"div",16),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"div",50),e.EFF(7,"By:"),e.k0s(),e.j41(8,"div",51),e.EFF(9),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(e.i5U(5,2,t.chklst.exceptionApprovedOn,"d-MMM-yy")),e.R7$(5),e.JRh(t.chklst.exceptionApprovedBy)}}function It(n,a){if(1&n&&(e.j41(0,"div",46),e.EFF(1,"Fees Diff Approved: "),e.DNE(2,Ft,10,5,"div",47),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.chklst.exceptionApproved)}}function yt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",52),e.nrm(2,"input",53)(3,"input",54)(4,"input",55)(5,"input",56)(6,"input",57)(7,"input",58),e.j41(8,"button",59),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeChecklistItem(r))}),e.k0s()()()}if(2&n){const t=a.index;e.R7$(1),e.Y8G("formGroupName",t)}}function Et(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",12)(1,"div",13),e.EFF(2,"Category:"),e.k0s(),e.j41(3,"div",14),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.j41(6,"div",15),e.EFF(7,"HR Exec assigned to:"),e.k0s(),e.j41(8,"div",16),e.EFF(9),e.k0s(),e.j41(10,"div",17),e.EFF(11,"Logged-In User:"),e.k0s(),e.j41(12,"div",16),e.EFF(13),e.k0s(),e.nrm(14,"br"),e.j41(15,"div",18),e.EFF(16,"Fees:"),e.k0s(),e.DNE(17,wt,2,0,"div",19),e.DNE(18,xt,2,1,"div",20),e.j41(19,"div",21),e.EFF(20,"Agreed:"),e.k0s(),e.j41(21,"input",22),e.bIt("dblclick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.ChargesDoubleClicked())}),e.k0s(),e.j41(22,"label",23),e.EFF(23,"Charges Exception approved"),e.k0s(),e.j41(24,"input",24),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.chklst.exceptionApproved!=i.chklst.exceptionApproved)}),e.k0s(),e.DNE(25,It,3,1,"div",25),e.nrm(26,"br"),e.j41(27,"label",17),e.EFF(28,"Salary Offered"),e.k0s(),e.j41(29,"div",26),e.bIt("dblclick",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.displayRemunerationModal())}),e.EFF(30),e.k0s(),e.j41(31,"label",27),e.EFF(32,"Expected:"),e.k0s(),e.nrm(33,"app-text-input",28)(34,"br"),e.j41(35,"div",29),e.EFF(36,"checklisted on:"),e.k0s(),e.j41(37,"div",30),e.EFF(38),e.nI1(39,"date"),e.k0s(),e.j41(40,"div",31)(41,"span",6),e.EFF(42,"Checklist Completed:"),e.k0s(),e.j41(43,"span",32),e.EFF(44),e.k0s()(),e.nrm(45,"hr",33),e.j41(46,"label",34),e.EFF(47,"Sr#"),e.k0s(),e.j41(48,"label",35),e.EFF(49,"Parameter"),e.k0s(),e.j41(50,"label",36),e.EFF(51,"Must"),e.nrm(52,"br"),e.EFF(53,"accept"),e.k0s(),e.j41(54,"label",37),e.EFF(55,"Candidt"),e.nrm(56,"br"),e.EFF(57,"accepts"),e.k0s(),e.j41(58,"label",38),e.EFF(59,"Candidt"),e.nrm(60,"br"),e.EFF(61,"Response"),e.k0s(),e.j41(62,"label",39),e.EFF(63,"Exception"),e.k0s(),e.j41(64,"button",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addChecklistItem())}),e.k0s(),e.nrm(65,"hr",41),e.j41(66,"div",42),e.DNE(67,yt,9,1,"div",43),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(4),e.SpI("",t.chklst.categoryRef," "),e.R7$(5),e.JRh(t.chklst.hrExecUsername),e.R7$(4),e.JRh(t.chklst.userLoggedName),e.R7$(4),e.Y8G("ngIf",void 0===(null==t.chklst?null:t.chklst.charges)||void 0===t.chklst.charges),e.R7$(1),e.Y8G("ngIf",null!==t.chklst.charges),e.R7$(3),e.Y8G("name","chargesAgreed"),e.R7$(3),e.Y8G("checked",t.chklst.exceptionApproved),e.R7$(1),e.Y8G("ngIf",t.chklst.charges!=t.chklst.chargesAgreed&&t.chklst.charges>0),e.R7$(5),e.JRh(t.chklst.salaryOffered),e.R7$(3),e.Y8G("label","Salary Expectation"),e.R7$(5),e.JRh(e.i5U(39,13,t.chklst.checkedOn,"d-MMM-yy")),e.R7$(6),e.SpI(" ",t.chklst.checklistedOk?"Yes":"No",""),e.R7$(23),e.Y8G("ngForOf",t.checklistHRItems.controls)}}let jt=(()=>{class n{constructor(t,s,i,r,d,m){this.bsmodalRef=t,this.confirmService=s,this.toastr=i,this.checklistService=r,this.fb=d,this.bsModalService=m,this.updateObj=new e.bkB,this.form=new o.gE({}),this.username=""}ngOnInit(){this.chklst&&this.Initialize(this.chklst)}verifyData(){var t="";if(this.chklst){t=this.form.value.charges>0&&this.form.get("charges")?.value!==this.form.get("chargesAgreed")?.value&&!this.form.value.exceptionApproved?"If Salary Agreed does not lie within the offered range, it is considered as an exception and this exception must be approved by choosing the option provided for this purpose":"";var s=this.form.value.checklistHRItems.filter(i=>i.mandatoryTrue&&!i.accepts).map(i=>i.parameter).join(", ");""!==s&&(t+="Mandatory parameters "+s+"  not accepted")}else this.chklst.checklistedOk=!0,this.chklst.checkedOn=new Date;return t}ChargesDoubleClicked(){void 0!==this.chklst&&0===this.form.value.chargesAgreed&&(this.form.value.chargesAgreed=this.chklst.charges,this.form.get("chargesAgreed")?.setValue(this.chklst.charges))}checkednoerror(){if(this.chklst?.exceptionApproved&&(""===this.chklst.exceptionApprovedBy||this.chklst.exceptionApprovedOn.getFullYear()<2e3))return!1;var t=this.chklst?.checklistHRItems.filter(s=>s.mandatoryTrue&&!s.response).map(s=>s.parameter).join(", ");return""!==t?this.confirmService.confirm("Mandatory parameters not accepted","Following mandatory parameters not accepted"+t,"Update as it is","Cancel and edit response").subscribe(s=>s?(this.chklst.checklistedOk=!1,this.chklst.checkedOn=new Date,console.log("result is:",s),!0):(console.log("result is:",s),!1)):(this.chklst.checklistedOk=!0,this.chklst.checkedOn=new Date),!0}Update(){var t=this.verifyData();if(""===t){this.form.get("checklistedOk")?.setValue(!0),this.form.get("userLoggedName")?.setValue(this.username);var s=this.form.value;0===s.id?this.checklistService.saveNewChecklistHR(s).subscribe({next:r=>{console.log("checlistmodal update return:",r),null===r?this.toastr.warning("Failed to insert the new checklist","Failure"):(this.toastr.success("saved the new checklist and retrieved related assessment","Success"),this.updateObj.emit(r),this.bsmodalRef.hide())},error:r=>this.toastr.error(r,"Error in saving the checklist")}):this.checklistService.updateChecklist({id:s.id,candidateId:s.candidateId,orderItemId:s.orderItemId,userName:s.userName,checkedOn:s.checkedOn,userComments:s.userComments,hRExecUsername:s.hrExecUsername,charges:s.charges,chargesAgreed:s.chargesAgreed,exceptionApproved:s.exceptionApproved,exceptionApprovedOn:s.exceptionApprovedOn,exceptionApprovedBy:s.exceptionApprovedBy,salaryOffered:s.salaryOffered,salaryExpectation:s.salaryExpectation,checklistedOk:s.checklistedOk,checklistHRItems:s.checklistHRItems}).subscribe({next:r=>{""===r?(this.updateObj.emit(""),this.bsmodalRef.hide()):this.toastr.warning(r,"Failed to update the checklist")},error:r=>{console.log("failed to update the Checklist data",r),this.updateObj.emit("failed to update the Checklist "+r),this.bsmodalRef.hide()}})}else this.toastr.warning(t)}Initialize(t){this.form=this.fb.group({id:t.id,candidateId:t.candidateId,applicationNo:t.applicationNo,candidateName:t.candidateName,categoryRef:t.categoryRef,OrderItemId:t.orderItemId,userLoggedName:t.userLoggedName,orderItemId:t.orderItemId,hrExecUsername:t.hrExecUsername,checkedOn:t.checkedOn,charges:t.charges,chargesAgreed:t.chargesAgreed,exceptionApproved:t.exceptionApproved,exceptionApprovedOn:t.exceptionApprovedOn,exceptionApprovedBy:t.exceptionApprovedBy,salaryOffered:t.salaryOffered,salaryExpectation:[t.salaryExpectation,o.k0.required],checklistedOk:t.checklistedOk,assessmentIsNull:t.assessmentIsNull,checklistHRItems:this.fb.array(t.checklistHRItems.map(s=>this.fb.group({id:s.id,checklistHRId:[s.checklistHRId,o.k0.required],srNo:s.srNo,parameter:[s.parameter,o.k0.required],accepts:[s.accepts],exceptions:s.exceptions,mandatoryTrue:[s.mandatoryTrue],response:s.response})))})}get checklistHRItems(){return this.form.get("checklistHRItems")}addChecklistItem(){this.checklistHRItems.push(this.newChecklistItem())}newChecklistItem(){return this.fb.group({id:0,checklistHRId:this.chklst?.id,srNo:[0,o.k0.required],parameter:["",o.k0.required],accepts:[!1],exceptions:"",mandatoryTrue:!1})}removeChecklistItem(t){this.checklistHRItems.removeAt(t),this.checklistHRItems.markAsDirty(),this.checklistHRItems.markAsTouched()}deleteChecklist(){const i=this.checklistService.deleteChecklistHR(this.chklst.id);this.confirmService.confirm("confirm Delete","confirm delete this Checklist. WARNING: this cannot be undone").pipe((0,D.p)(d=>d),(0,x.n)(()=>i)).subscribe(d=>{d?(this.toastr.success("Checklist deleted","deletion successful"),console.log("subscribed response:",d),this.bsmodalRef.hide()):this.toastr.error("Error in deleting the checklist","failed to delete")})}displayRemunerationModal(){var t=this.chklst?.orderItemId;this.checklistService.getRemuneration(t).pipe((0,D.p)(i=>null!==i),(0,x.n)(i=>(this.bsmodalRef=this.bsModalService.show(bt.E,{class:"modal-dialog-centered modal-lg",initialState:{remun:i,editable:!1}}),this.bsmodalRef.content.updateSelectedRemuneration))).subscribe(()=>{})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Y$),e.rXU(P.G),e.rXU(b.tw),e.rXU(re),e.rXU(o.ok),e.rXU(v.I8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-checklist-modal"]],inputs:{updateObj:"updateObj"},decls:5,vars:3,consts:[["class","modal-header my-0",4,"ngIf"],[1,"modal-body","my-0"],[3,"formGroup"],["class","mx-2 mt-2",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],[1,"b"],[1,"stdd","w70","b"],[1,"stdd","w200","blue","mx-1"],["type","button",1,"stdd","btn","btn-success","fa","fa-save",3,"click"],["type","button","aria-label","Close",1,"stdd","btn","btn-close","close","mx-10",3,"click"],["title","Delete this checklist",1,"btn","btn-danger","pull-right","fa","fa-trash","fa-sm",3,"click"],[1,"mx-2","mt-2"],[1,"stdd","w75","b"],[1,"stdd","w400","blue","mx-1"],[1,"stdd","w150","b"],[1,"stdd","w100","blue"],[1,"stdd","w100","b"],[1,"stdd","w75","b","my-0","mx-1"],["class","stdd mx-1 w100 text-danger",4,"ngIf"],["style","border: blue;","class","stdd blue w70",4,"ngIf"],[1,"stdd","b","mx-1"],["title","this is charges agreed box","formControlName","chargesAgreed",1,"form-text-input","blue","stdd","w70","mx-1",3,"name","dblclick"],[1,"stdd","w20",2,"margin-left","10px"],["type","checkbox","formControlName","exceptionApproved",1,"form-check-input","stdd","mx-1",2,"margin-left","80px","border","aliceblue","border","inset",3,"checked","change"],["class","stdd w150 b ml-5 mx-1","style","padding-right: 5px;",4,"ngIf"],["title","double-click to display the remuneration modal.  Once this form is displayed and closed, please click any where out of this modal form to close it.",1,"stdd","w150","blue",3,"dblclick"],[1,"stdd","w70","b",2,"margin-left","10px"],["title","Minimum Salary Expectation of the candidate","formControlName","salaryExpectation",1,"stdd","w70",3,"label"],[1,"stdd","b"],[1,"stdd","blue"],[1,"stdd","ml-5","b"],[1,"b","mx-2","blue"],[1,"mt-0","mb-0","b"],[1,"lbl","w40"],[1,"lbl","w250"],[1,"lbl","w50"],[1,"lbl","mx-2","fontSmall",2,"width","50px"],[1,"lbl","w100"],[1,"lbl","w125"],["title","Add an assessment item for the candidate",1,"stdd","btn","fa","fa-plus","blue","mx-1",3,"click"],[1,"mt-0","mb-0"],["formArrayName","checklistHRItems",1,"my-1"],[4,"ngFor","ngForOf"],[1,"stdd","mx-1","w100","text-danger"],[1,"stdd","blue","w70",2,"border","blue"],[1,"stdd","w150","b","ml-5","mx-1",2,"padding-right","5px"],["class","stdd",4,"ngIf"],[1,"stdd"],[1,"stdd","w50"],[1,"stdd","w75","ml-20","b"],[1,"stdd","w75","blue"],[1,"my-1",3,"formGroupName"],["type","number","title","Sr. No.","formControlName","srNo",1,"stddT","w40",2,"text-align","right"],["type","text","title","Parameter","formControlName","parameter",1,"stddT","w250"],["type","checkbox","formControlName","mandatoryTrue",1,"stddT","ML5","w50"],["type","checkbox","formControlName","accepts",1,"stddT","ML5","w50"],["type","text","title","Parameter","formControlName","response",1,"stddT","w100",2,"margin-left","10px"],["type","text","formControlName","exceptions",1,"stddT","w125"],[1,"btn","fa","fa-trash","red","mx-2",3,"click"]],template:function(s,i){1&s&&(e.DNE(0,Ct,11,2,"div",0),e.j41(1,"div",1)(2,"form",2),e.DNE(3,Et,68,16,"div",3),e.k0s()(),e.nrm(4,"div",4)),2&s&&(e.Y8G("ngIf",i.chklst),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(1),e.Y8G("ngIf",i.chklst))},dependencies:[l.Sq,l.bT,o.qT,o.me,o.Q0,o.Zm,o.BC,o.cb,o.j4,o.JD,o.$R,o.v8,Z.f,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:top;font-size:small}.stddT[_ngcontent-%COMP%]{display:inline-block;margin:0 1px;vertical-align:top;font-size:small}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;white-space:normal;vertical-align:middle;font-size:small;font-weight:700}.b[_ngcontent-%COMP%]{font-weight:700}.blue[_ngcontent-%COMP%]{color:#00f}.red[_ngcontent-%COMP%]{color:red}.fontSmall[_ngcontent-%COMP%]{font-size:small}.w15[_ngcontent-%COMP%]{width:15px}.w40[_ngcontent-%COMP%]{width:40px}.w50[_ngcontent-%COMP%]{width:50px}.w70[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w275[_ngcontent-%COMP%]{width:275px}.w300[_ngcontent-%COMP%]{width:300px}.w400[_ngcontent-%COMP%]{width:400px}"]})}return n})();function Rt(n,a){1&n&&(e.j41(0,"div",12),e.EFF(1," No Existing Assessments "),e.k0s())}function At(n,a){if(1&n){const t=e.RV6();e.j41(0,"ul",28)(1,"li",29),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(3);return e.Njj(d.displayAssessment(r.candidateAssessmentId))}),e.EFF(2),e.nI1(3,"date"),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(2),e.E5c(" ",t.categoryRef," for ",t.customerName.substring(0,10)," on ",e.i5U(3,3,t.assessedOn,"ddMMM")," ")}}function Nt(n,a){if(1&n&&(e.j41(0,"div"),e.DNE(1,At,4,6,"ul",27),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.existingAssessmentsDto)}}function Pt(n,a){1&n&&(e.j41(0,"div",30),e.EFF(1," No Orders currently open"),e.k0s())}function Mt(n,a){1&n&&(e.j41(0,"div",31),e.EFF(1,"Requirement for which the candidate is to be assessed"),e.k0s())}function Ot(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"ng-select",32),e.bIt("ngModelChange",function(i){e.eBV(t);const r=e.XpG(2);return e.Njj(r.orderItemSelectedId=i)})("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.chooseSelectedOrderItem())}),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("items",t.openOrderItems)("ngModel",t.orderItemSelectedId)}}function Tt(n,a){1&n&&(e.j41(0,"div",33),e.EFF(1," Order category Not Selected "),e.k0s())}function St(n,a){1&n&&(e.j41(0,"div",34),e.EFF(1,"Order Item selected"),e.k0s())}function Gt(n,a){if(1&n&&(e.j41(0,"div",35)(1,"span",36),e.EFF(2,"Category: "),e.k0s(),e.j41(3,"span",37),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.j41(6,"span",38),e.EFF(7,"Order dated: "),e.k0s(),e.j41(8,"span",39),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.nrm(11,"br"),e.j41(12,"span",10),e.EFF(13,"Customer: "),e.k0s(),e.j41(14,"span",39),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",10),e.EFF(18,"Require Internal Review: "),e.k0s(),e.j41(19,"span",12),e.EFF(20),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.orderItemSelected.categoryRefAndName," "),e.R7$(5),e.JRh(e.bMT(10,4,t.orderItemSelected.orderDate)),e.R7$(6),e.JRh(t.orderItemSelected.customerName),e.R7$(5),e.SpI(" ",void 0!==t.requireInternalReview&&t.requireInternalReview?"Yes":"No","")}}function Dt(n,a){1&n&&(e.j41(0,"div",40),e.EFF(1," Candidate not checklisted for above category "),e.k0s())}function Vt(n,a){if(1&n&&(e.j41(0,"div",41),e.EFF(1," Checklist initiated by : "),e.j41(2,"label",42),e.EFF(3),e.k0s(),e.j41(4,"label",42),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.nrm(7,"br"),e.j41(8,"label",10),e.EFF(9,"Checklist Concluded: "),e.k0s(),e.j41(10,"span",43),e.EFF(11),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(3),e.SpI("",t.checklist.userLoggedName," "),e.R7$(2),e.SpI("on: ",e.bMT(6,4,t.checklist.checkedOn)," "),e.R7$(5),e.Y8G("ngClass",t.checklist.checklistedOk?"yellow":"red"),e.R7$(1),e.SpI(" ",t.checklist.checklistedOk?" Yes":" No"," ")}}function Ut(n,a){1&n&&(e.j41(0,"div",44),e.EFF(1,' Assessment Questions for the Order Category selected not designed. In the Assessment form, you can press the + button to the right to create custom assessment questions, or add standard questions to the order category" '),e.k0s())}function $t(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"label",5),e.EFF(2,"Candidate Assessment"),e.k0s(),e.j41(3,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openShortlistCandidateHelpModal())}),e.k0s(),e.j41(4,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.returnToCalling())}),e.k0s(),e.j41(5,"div",8),e.EFF(6,"Candidate Details"),e.k0s(),e.j41(7,"div",9)(8,"span",10),e.EFF(9,"Application No.: "),e.k0s(),e.j41(10,"span",11),e.EFF(11),e.k0s(),e.nrm(12,"br"),e.j41(13,"span",10),e.EFF(14,"Name: "),e.k0s(),e.j41(15,"span",11),e.EFF(16),e.k0s(),e.nrm(17,"br"),e.j41(18,"span",10),e.EFF(19,"Referred By:"),e.k0s(),e.j41(20,"span",11),e.EFF(21),e.k0s(),e.nrm(22,"br"),e.j41(23,"span",12),e.EFF(24,"Categories:"),e.k0s(),e.j41(25,"div",13),e.EFF(26),e.k0s()(),e.nrm(27,"br"),e.j41(28,"div",14),e.EFF(29,"Existing Assessments of the candidate:"),e.k0s(),e.DNE(30,Rt,2,0,"div",15),e.DNE(31,Nt,2,1,"div",16),e.DNE(32,Pt,2,0,"div",17),e.DNE(33,Mt,2,0,"div",18),e.DNE(34,Ot,2,2,"div",16),e.nrm(35,"br"),e.DNE(36,Tt,2,0,"div",19),e.j41(37,"div",20),e.DNE(38,St,2,0,"div",21),e.DNE(39,Gt,21,6,"div",22),e.DNE(40,Dt,2,0,"div",23),e.DNE(41,Vt,12,6,"div",24),e.k0s(),e.nrm(42,"br"),e.DNE(43,Ut,2,0,"div",25),e.nrm(44,"br"),e.j41(45,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openChecklistModal())}),e.EFF(46," Show Checklist "),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(11),e.JRh(t.cvBrief.applicationNo),e.R7$(5),e.JRh(t.cvBrief.fullName),e.R7$(5),e.JRh(t.cvBrief.referredByName),e.R7$(5),e.SpI(" ",t.cvBrief.userProfessions.flat(),", "),e.R7$(4),e.Y8G("ngIf",!t.existingAssessmentsDto),e.R7$(1),e.Y8G("ngIf",t.existingAssessmentsDto),e.R7$(1),e.Y8G("ngIf",void 0===t.openOrderItems),e.R7$(1),e.Y8G("ngIf",void 0!==t.openOrderItems),e.R7$(1),e.Y8G("ngIf",t.openOrderItems),e.R7$(2),e.Y8G("ngIf",!t.orderItemSelected),e.R7$(2),e.Y8G("ngIf",t.orderItemSelected),e.R7$(1),e.Y8G("ngIf",t.orderItemSelected),e.R7$(1),e.Y8G("ngIf",t.orderItemSelected&&!t.checklist),e.R7$(1),e.Y8G("ngIf",t.orderItemSelected&&t.checklist),e.R7$(2),e.Y8G("ngIf",t.orderItemSelected&&t.requireInternalReview&&!t.qDesigned)}}function Bt(n,a){1&n&&(e.j41(0,"div",11),e.EFF(1," No internal review required "),e.k0s())}function Xt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"label",64),e.EFF(2,"Result: "),e.k0s(),e.j41(3,"label",65),e.EFF(4,"Excellent"),e.k0s(),e.j41(5,"input",66),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.markAsDirty())}),e.k0s(),e.j41(6,"label",65),e.EFF(7,"V Good"),e.k0s(),e.j41(8,"input",67),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.markAsDirty())}),e.k0s(),e.j41(9,"label",65),e.EFF(10,"Good"),e.k0s(),e.j41(11,"input",68),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.markAsDirty())}),e.k0s(),e.j41(12,"label",65),e.EFF(13,"Poor"),e.k0s(),e.j41(14,"input",69),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.markAsDirty())}),e.k0s()()}}function Yt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",84),e.nrm(2,"input",85)(3,"input",86)(4,"input",87)(5,"input",88),e.j41(6,"input",89),e.bIt("click",function(){e.eBV(t);const i=e.XpG(5);return e.Njj(i.maxMarksTotal())}),e.k0s(),e.j41(7,"input",90),e.bIt("change",function(){const r=e.eBV(t).index,d=e.XpG(5);return e.Njj(d.pointsGainedTotal(r))}),e.k0s(),e.nrm(8,"input",91),e.j41(9,"button",92),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(5);return e.Njj(d.removeCandidateAssessmentItem(r))}),e.k0s()()()}if(2&n){const t=a.index;e.R7$(1),e.Y8G("formGroupName",t)}}function Ht(n,a){if(1&n&&(e.j41(0,"div",82),e.DNE(1,Yt,10,1,"div",83),e.k0s()),2&n){const t=e.XpG(4);e.R7$(1),e.Y8G("ngForOf",t.candidateAssessmentItems.controls)}}function Lt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",71),e.EFF(2,"Q No."),e.k0s(),e.j41(3,"div",72),e.EFF(4,"Asses-"),e.nrm(5,"br"),e.EFF(6,"sed"),e.k0s(),e.j41(7,"div",73),e.EFF(8,"Is Man-"),e.nrm(9,"br"),e.EFF(10,"datory"),e.k0s(),e.j41(11,"div",74),e.EFF(12,"Question"),e.k0s(),e.j41(13,"div",71),e.EFF(14,"Max"),e.nrm(15,"br"),e.EFF(16,"Points"),e.k0s(),e.j41(17,"div",71),e.EFF(18,"Points"),e.k0s(),e.j41(19,"div",75),e.EFF(20,"Remarks"),e.k0s(),e.j41(21,"button",76),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.addCandidateAssessmentItem())}),e.k0s(),e.nrm(22,"hr",60),e.DNE(23,Ht,2,1,"div",77),e.j41(24,"div",78),e.EFF(25,"totals: "),e.k0s(),e.j41(26,"div",79),e.EFF(27),e.k0s(),e.j41(28,"div",80),e.EFF(29),e.k0s(),e.j41(30,"div",81),e.EFF(31),e.k0s()()}if(2&n){const t=e.XpG(3);e.R7$(23),e.Y8G("ngIf",t.cvAssessment.candidateAssessmentItems),e.R7$(4),e.JRh(t.totalPoints),e.R7$(2),e.JRh(t.totalGained),e.R7$(2),e.Lme("Grade: ",t.cvAssessment.assessResult," (",t.percentage,"%)")}}function zt(n,a){if(1&n&&(e.j41(0,"div",70),e.DNE(1,Lt,32,5,"div",16),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.cvAssessment.requireInternalReview)}}function qt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",45)(1,"div",46)(2,"label",47),e.EFF(3,"Customer Name: "),e.k0s(),e.j41(4,"span",48),e.EFF(5),e.k0s(),e.j41(6,"label",49),e.EFF(7,"Category:"),e.k0s(),e.j41(8,"span",50),e.EFF(9),e.k0s(),e.j41(10,"div",11),e.EFF(11),e.k0s()(),e.nrm(12,"br"),e.j41(13,"label",49),e.EFF(14,"Order dated"),e.k0s(),e.j41(15,"div",51),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"label",52),e.EFF(19,"Checklisted:"),e.k0s(),e.j41(20,"div",53),e.EFF(21),e.k0s(),e.j41(22,"label",54),e.EFF(23,"Internal Review Reqd:"),e.k0s(),e.j41(24,"span",53),e.EFF(25),e.k0s(),e.j41(26,"label",47),e.EFF(27,"Assessmt Q designed:"),e.k0s(),e.j41(28,"span",53),e.EFF(29),e.k0s(),e.j41(30,"div",55)(31,"span"),e.EFF(32,"Assessed by: "),e.k0s(),e.EFF(33),e.nI1(34,"date"),e.k0s(),e.DNE(35,Bt,2,0,"div",56),e.j41(36,"div",57)(37,"button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateAssessment())}),e.k0s(),e.j41(38,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteAssessment())}),e.k0s()(),e.nrm(39,"hr",60),e.j41(40,"form",61),e.DNE(41,Xt,15,0,"div",62),e.DNE(42,zt,2,1,"div",63),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(5),e.JRh(t.cvAssessment.customerName||(null==t.orderItemSelected?null:t.orderItemSelected.customerName)),e.R7$(4),e.JRh(t.cvAssessment.categoryRefAndName||(null==t.orderItemSelected?null:t.orderItemSelected.categoryRefAndName)),e.R7$(2),e.JRh(0===t.cvAssessment.id?"New":"Update"),e.R7$(5),e.JRh(e.bMT(17,14,t.cvAssessment.orderDate)),e.R7$(5),e.JRh(t.checklist?"Yes":"No"),e.R7$(4),e.JRh(t.cvAssessment.requireInternalReview?"Yes":"No"),e.R7$(4),e.JRh(t.qDesigned?"Yes":"No"),e.R7$(4),e.Lme(" ",t.cvAssessment.assessedByEmployeeName," on ",e.bMT(34,16,t.cvAssessment.assessedOn)," "),e.R7$(2),e.Y8G("ngIf",!t.cvAssessment.requireInternalReview),e.R7$(2),e.Y8G("disabled",!t.form.dirty),e.R7$(3),e.Y8G("formGroup",t.form),e.R7$(1),e.Y8G("ngIf",!t.cvAssessment.requireInternalReview),e.R7$(1),e.Y8G("ngIf",t.cvAssessment)}}function Jt(n,a){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.R7$(1),e.SpI(" ",t," ")}}function Qt(n,a){if(1&n&&(e.j41(0,"div",93)(1,"ul",94),e.DNE(2,Jt,2,1,"li",83),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.validationErrors)}}let Wt=(()=>{class n{unloadNotification(t){this.form.dirty&&(t.returnValue=!0)}constructor(t,s,i,r,d,m,_,I,y,E){this.fb=t,this.service=s,this.candidateAssessmentService=i,this.bsModalService=r,this.checklistService=d,this.toastr=m,this.activatedRoute=_,this.accountsService=I,this.confirmService=y,this.router=E,this.openOrderItems=[],this.orderItemSelectedId=0,this.helpfile=this.getHelp("candidate assessment"),this.existingAssessmentsDto=[],this.checklistitems=[],this.totalPoints=0,this.totalGained=0,this.percentage=0,this.qDesigned=!1,this.requireInternalReview=!1,this.lastOrderItemIdSelected=-1,this.routeId="",this.bolNavigationExtras=!1,this.returnUrl="",this.form=new o.gE({}),this.validationErrors=[],this.bDisplayHelp=!1,this.displayText="Show Help",this.orderItemChangedEventSubject=new ht.B,this.assessmentResults=[{grade:"Excellent"},{grade:"Very Good"},{grade:"Good"},{grade:"Poor"}],this.accountsService.currentUser$.pipe((0,M.s)(1)).subscribe(j=>this.user=j),this.routeId=this.activatedRoute.snapshot.params.id,null==this.routeId&&(this.routeId="");let h=this.router.getCurrentNavigation();h?.extras&&h.extras.state&&(this.bolNavigationExtras=!0,h.extras.state.returnUrl&&(this.returnUrl=h.extras.state.returnUrl),h.extras.state.cvbrief&&(this.cvBrief=h.extras.state.cvbrief))}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.openOrderItems=t.openOrderItemsBrief,this.existingAssessmentsDto=t.assessmentsDto})}chooseSelectedOrderItem(){if(!(this.lastOrderItemIdSelected>=0&&this.orderItemSelectedId==this.lastOrderItemIdSelected)&&(this.orderItemSelected=this.openOrderItems.find(t=>t.orderItemId===this.orderItemSelectedId),void 0!==this.orderItemSelected)){if(this.requireInternalReview="1"===this.orderItemSelected.requireInternalReview,this.orderItemSelectedId=this.orderItemSelected.orderItemId,this.requireInternalReview&&(this.qDesigned=this.orderItemSelected.assessmentQDesigned,!this.qDesigned))return void this.toastr.error("assessment Questions not designed - from component");this.service.getCandidateChecklistAndAssessment(this.cvBrief.id,this.orderItemSelectedId).subscribe({next:t=>{this.assessmentAndChecklist=t,this.checklist=t.checklistHRDto,this.cvAssessment=this.assessmentAndChecklist.assessed,this.qDesigned=this.orderItemSelected.assessmentQDesigned,this.cvAssessment?null===this.cvAssessment.candidateAssessmentItems?this.initializeWithoutArray(this.cvAssessment):this.initializeWithArray(this.cvAssessment):this.requireInternalReview&&this.toastr.warning("the candidate has not been assessed for the category selected.")},error:t=>this.toastr.error(t,"failed to retrieve candidate assessment")}),this.lastOrderItemIdSelected=this.orderItemSelectedId}}returnToCalling(){this.router.navigateByUrl(this.returnUrl||"")}updateAssessment(){var t=this.form.value;if(this.cvAssessment){if(this.toastr.info("cvassessmentid",this.cvAssessment.id.toString()),this.cvAssessment&&null===this.cvAssessment.candidateAssessmentItems&&(t={assessResult:this.form.get("assessResult").value,assessedByEmployeeName:this.user.userName,assessedOn:new Date,candidateId:this.cvAssessment.candidateId,checklistHRId:this.cvAssessment.checklistHRId,id:this.cvAssessment.id,orderItemId:this.cvAssessment.orderItemId,requireInternalReview:this.cvAssessment.requireInternalReview,customerName:this.cvAssessment.customerName||this.orderItemSelected.customerName,categoryRefAndName:this.cvAssessment.categoryRefAndName||this.orderItemSelected.categoryRefAndName,orderDate:this.cvAssessment.orderDate,taskIdDocControllerAdmin:this.cvAssessment.taskIdDocControllerAdmin,candidateAssessmentItems:this.cvAssessment.candidateAssessmentItems,remarks:this.cvAssessment.remarks}),0===this.cvAssessment.id)return this.service.saveNewCandidateAssessment(t).subscribe({next:i=>{null===i?this.toastr.warning("Failed to insert the CV Assessment","Failure"):this.toastr.success("Inserted the CV Assessment","Success")},error:i=>this.toastr.error(i,"failed to save the Assessment")});this.service.updateCandidateAssessment(t).subscribe({next:i=>{i?(this.toastr.success("updated the Candidate Assessment"),this.form.markAsPristine()):this.toastr.warning("failed to update the candidate assessment")},error:i=>this.toastr.error(i,"failed to update the candidate assessment")})}}openShortlistCandidateHelpModal(){null!==this.helpfile?(this.bsModalRef=this.bsModalService.show(_t,{class:"modal-dialog-centered modal-lg",initialState:{help:this.helpfile}}),this.bsModalRef.content.updateSelectedRoles.subscribe(()=>{})):this.toastr.info("No help file available for the topic 'Candidate Assessment'")}getHelp(t){return this.confirmService.getHelp(t).subscribe(s=>{this.helpfile=s},s=>{console.log("failed to retrieve roles array",s)}),null}openSwitchMapModalChecklist(){if(this.checklist&&this.cvBrief){const t=this.checklistService.getChecklist(this.cvBrief?.id,this.orderItemSelectedId),s=this.bsModalRef?.content.updateObj;t.pipe((0,x.n)(i=>s.pipe((0,ne.W)(r=>(0,g.of)()),(0,pt.M)(r=>{this.toastr.success("modal call subscribed"),""===r&&this.service.getCandidateChecklistAndAssessment(this.cvBrief.id,this.orderItemSelectedId).subscribe({next:d=>{this.assessmentAndChecklist=d,this.checklist=d.checklistHRDto,this.cvAssessment=this.assessmentAndChecklist.assessed,this.qDesigned=this.orderItemSelected.assessmentQDesigned,this.cvAssessment&&this.initializeWithoutArray(this.cvAssessment)}})}))),(0,ne.W)(i=>(this.toastr.error(i,"error in subscribing to bsModalRef contents"),(0,g.of)()))).subscribe(()=>{this.toastr.success("inner subscription success")},i=>{console.log("error unhandled in catchError")})}}openChecklistModal(){null!==this.checklist?(this.bsModalRef=this.bsModalService.show(jt,{class:"modal-dialog-centered modal-lg",initialState:{chklst:this.checklist}}),this.bsModalRef.content.updateObj.subscribe(s=>{null===s?this.toastr.warning("Failed to update the Checklist object -"+s):(this.toastr.success("Updated the checklist object"),this.checklist.checklistedOk=!0,this.cvAssessment=s.assessed,this.initializeWithArray(this.cvAssessment))})):this.toastr.warning("An order item must be selected, to display related checklist","Order Item not selected")}CheckChecklist(t){var s=[];return t.charges>0&&t.chargesAgreed!=t.charges&&!t.exceptionApproved&&s.push("Charges not agreed"),t.checklistHRItems.forEach(i=>{i.mandatoryTrue&&!i.accepts&&s.push(i.parameter+" is mandatory, and not resolved")}),s}DisplayHelp(){this.bDisplayHelp=!this.bDisplayHelp,this.displayText=this.bDisplayHelp?"Hide help text":"display Help Text"}addCandidateAssessmentItem(){this.toastr.info("qDesigned set to true"),this.candidateAssessmentItems.push(this.newCandidateAssessmentItem())}newCandidateAssessmentItem(){return this.fb.group({id:0,candidateAssessmentId:0,questionNo:0,question:["",o.k0.required],assessed:!1,isMandatory:!1,maxPoints:0,points:[0,[o.k0.min(0),this.matchValues("maxPoints")]],remarks:""})}matchValues(t){return s=>s.value===s.parent?.get(t)?.value?null:{notMatching:!0}}removeCandidateAssessmentItem(t){this.candidateAssessmentItems.removeAt(t),this.candidateAssessmentItems.markAsDirty(),this.candidateAssessmentItems.markAsTouched()}deleteAssessment(){this.cvAssessment.id?this.service.deleteAssessment(this.cvAssessment.id).subscribe(t=>{t?(this.toastr.success("Candidate Assessment object deleted"),this.cvAssessment=void 0):this.toastr.warning("failed to delete the assessment object")},t=>{this.toastr.error("error in deleting the object",t)}):this.toastr.warning("CV Assessment object is undefined.  It cannot be deleted unless it is saved first")}initializeWithArray(t){console.log("initializedWithArray"),this.form=this.fb.group({id:t.id,orderItemId:t.orderItemId,candidateId:t.candidateId,assessedOn:t.assessedOn,assessResult:t.assessResult,remarks:t.remarks,requireInternalReview:t.requireInternalReview,assessedByEmployeeName:t.assessedByEmployeeName||this.user?.userName,categoryRefAndName:t.categoryRefAndName,customerName:t.customerName,checklistHRId:t.checklistHRId,candidateAssessmentItems:this.fb.array(t.candidateAssessmentItems.map(s=>this.fb.group({id:s.id,assessed:[s.assessed],isMandatory:[s.isMandatory],candidateAssessmentId:[s.candidateAssessmentId,o.k0.required],questionNo:[s.questionNo,o.k0.required],question:[s.question,o.k0.required],maxPoints:[s.maxPoints,o.k0.required],points:s.points,remarks:s.remarks})))}),this.calculatePercentage()}initializeWithoutArray(t){this.form=this.fb.group({id:t.id,orderItemId:t.orderItemId,candidateId:t.candidateId,assessedOn:t.assessedOn,assessResult:t.assessResult,remarks:t.remarks,requireInternalReview:t.requireInternalReview,assessedByEmployeeName:t.assessedByEmployeeName,categoryRefAndName:t.categoryRefAndName})}get candidateAssessmentItems(){return this.form.get("candidateAssessmentItems")}maxMarksTotal(){this.totalPoints=this.candidateAssessmentItems.value.map(t=>t.maxPoints).reduce((t,s)=>t+s,0),this.calculatePercentage()}pointsGainedTotal(t){if(null!==this.candidateAssessmentItems){var i=this.candidateAssessmentItems.value[t].maxPoints;if(this.candidateAssessmentItems.value[t].points>i)return this.toastr.warning("Max points for this parameter is:"+i+".  You cannot exceed this number"),this.candidateAssessmentItems.at(t).get("points")?.setValue(0),this.candidateAssessmentItems.at(t).get("assessed")?.setValue(!1),void this.calculatePercentage();this.totalGained=this.candidateAssessmentItems.value.map(r=>r.points).reduce((r,d)=>r+d,0),this.calculatePercentage(),this.candidateAssessmentItems.at(t).get("assessed")?.setValue(!0)}}calculatePercentage(){this.totalPoints=this.candidateAssessmentItems.value.map(t=>t.maxPoints).reduce((t,s)=>t+s,0),this.totalGained=this.candidateAssessmentItems.value.map(t=>t.points).reduce((t,s)=>t+s,0),this.percentage=void 0===this.totalGained||void 0===this.totalPoints?0:Math.round(100*this.totalGained/this.totalPoints),this.calculateGrade()}calculateGrade(){var t;return this.cvAssessment.assessResult=t=this.cvAssessment&&null!==this.cvAssessment?.candidateAssessmentItems?this.percentage<41?"Poor":this.percentage>40&&this.percentage<=60?"Average":this.percentage>60&&this.percentage<=70?"Good":this.percentage<70&&this.percentage<=80?"Very Good":"Excellent":"Not Assessed",this.form.get("assessResult")?.setValue(t),t}displayAssessment(t){this.candidateAssessmentService.getCandidateAssessmentById(t).subscribe({next:s=>{console.log("displayAssessment:",s),s?(this.cvAssessment=s,null!==s&&null===s.candidateAssessmentItems?this.initializeWithoutArray(s):null!==s&&null!==s.candidateAssessmentItems&&this.initializeWithArray(s)):this.toastr.warning("Normally, this should not happen, but we failed to retrieve the Candidate Assessment","failed")},error:s=>this.toastr.error(s,"Error in retrieving the Candidate Assessment")})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(o.ok),e.rXU(V.z),e.rXU(V.z),e.rXU(v.I8),e.rXU(re),e.rXU(b.tw),e.rXU(u.nX),e.rXU(A.D),e.rXU(P.G),e.rXU(u.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-cv-assess"]],hostBindings:function(s,i){1&s&&e.bIt("beforeunload",function(){return i.unloadNotification(i.event)},!1,e.tSv)},decls:4,vars:3,consts:[["class","stdd col-3 vAlignTop","style","margin-top: 5px; margin-left: 2px;",4,"ngIf"],[1,"stdd","my-5","col-8","fontSmall",2,"vertical-align","top","margin-left","5px","border","brown"],["style","font-weight: normal;","class","stdd vAlignTop",4,"ngIf"],["class","row",4,"ngIf"],[1,"stdd","col-3","vAlignTop",2,"margin-top","5px","margin-left","2px"],[1,"stdd","w150","b"],[1,"btn","btn-primary","w30","fa","fa-question","ML20",3,"click"],[1,"btn","mx-2","w30","fa","fa-window-close","fa-2x","pull-right",3,"click"],[1,"stdd","b","my-1"],[2,"padding-left","5px","border","blue"],[1,"stdd"],[1,"stdd","b"],[1,"b"],[1,"stdd","fontSmaller"],[1,"b","fontSmall"],["class","b",4,"ngIf"],[4,"ngIf"],["class","yellow  b",4,"ngIf"],["class","mt-2 b",4,"ngIf"],["class","text-danger fontSmaller b",4,"ngIf"],[2,"border","inset"],["class","fontSmall b mt-2",4,"ngIf"],["style","padding-left: 5px; border-color: initial ;",4,"ngIf"],["class","text-danger fontSmall b",4,"ngIf"],["class","fontSmall my-1",4,"ngIf"],["class","fontSmall text-danger b",4,"ngIf"],["type","button","title","talk to the candidate for consent to requirements","title","show checklist for the candidate",1,"fontSmall","b","my-1","w150","btn","btn-success","cursorpointer",2,"text-align","center",3,"click"],["class","py-0 my-0",4,"ngFor","ngForOf"],[1,"py-0","my-0"],[1,"stdd","my-0","py-0","fontSmaller","cursorpointer",3,"click"],[1,"yellow","b"],[1,"mt-2","b"],["bindLabel","categoryRefAndName","bindValue","orderItemId","labelForId","orderItemId","clearAllText","Clear",2,"border-bottom","yellow","font-size","small",3,"items","ngModel","ngModelChange","click"],[1,"text-danger","fontSmaller","b"],[1,"fontSmall","b","mt-2"],[2,"padding-left","5px","border-color","initial"],[1,"fontSmall","stdd"],[1,"fontSmall"],[1,"stdd","fontSmall"],[1,"stdd","fontSmall","mx-2","b"],[1,"text-danger","fontSmall","b"],[1,"fontSmall","my-1"],[1,"fontSmall","b"],[1,"stdd",3,"ngClass"],[1,"fontSmall","text-danger","b"],[1,"stdd","vAlignTop",2,"font-weight","normal"],[1,"col-12"],[1,"stdd","w150"],[1,"stdd","w300","b"],[1,"stdd","w125"],[1,"stdd","400","b"],[1,"stdd","w100","b"],[1,"stdd","w100"],[1,"stdd","w50","b"],[1,"lbl","w150"],[1,"stdd","w400"],["class","stdd b",4,"ngIf"],[1,"stdd","pull-right"],["type","button","title","Save the assessment form",1,"stdd","btn","btn-success","fa","fa-save","fa-2x",3,"disabled","click"],["type","button","title","delete complete Assessment Object",1,"btn","btn-primary","stdd","fa","fa-trash","fa-2x",3,"click"],[1,"mt-0","mb-0"],[3,"formGroup"],["class","stdd",4,"ngIf"],["style","vertical-align: top",4,"ngIf"],[1,"stdd","w50"],[1,"stdd","w50","b","hAlignRight"],["type","radio","name","assessResult","id","assessmentResult","formControlName","assessResult","value","Excellent",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Very Good",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Good",1,"inputcheck","form-check-input",3,"change"],["type","radio","name","assessResult","id","assessResult","formControlName","assessResult","value","Poor",1,"inputcheck","form-check-input",3,"change"],[2,"vertical-align","top"],[1,"stdd","b","fSmall","vAlignM","w50"],[1,"stdd","b","fSmall","vAlignM","w50","ML20"],[1,"stdd","b","fSmall","vAlignM","w50","ML5"],[1,"stdd","b","fSmall","vAlignM","w400"],[1,"stdd","b","fSmall","vAlignM","w200"],["title","Add an assessment item for the candidate",1,"stdd","btn","fa","fa-plus","mx-1",3,"click"],["formArrayName","candidateAssessmentItems","class","my-1",4,"ngIf"],[1,"stdd","b","w50","mb-5","mt-2",2,"margin-left","500px"],[1,"stdd","b","w50","hAlignRight"],[1,"stdd","b","w50","mx-2","hAlignRight"],[1,"stdd","b","w150","hAlignRight"],["formArrayName","candidateAssessmentItems",1,"my-1"],[4,"ngFor","ngForOf"],[1,"my-1",3,"formGroupName"],["type","text","formControlName","questionNo",1,"stdd","fSmall","ML20","w50"],["type","checkbox","formControlName","assessed",1,"stdd","fSmall","w50"],["type","checkbox","formControlName","isMandatory",1,"stdd","fSmall","w50"],["type","text","title","question","formControlName","question",1,"stdd","fSmall","w400"],["type","text","title","maxPoints","formControlName","maxPoints",1,"stdd","fSmall","w50",3,"click"],["type","number","title","points","formControlName","points",1,"stdd","fSmall","w50",2,"text-align","right",3,"change"],["type","text","title","remarks","formControlName","remarks",1,"stdd","fSmall","w200"],[1,"stdd","red","fa","fa-trash","mx-2",3,"click"],[1,"row"],[1,"text-danger"]],template:function(s,i){1&s&&(e.DNE(0,$t,47,15,"div",0),e.j41(1,"div",1),e.DNE(2,qt,43,18,"div",2),e.k0s(),e.DNE(3,Qt,3,1,"div",3)),2&s&&(e.Y8G("ngIf",i.cvBrief),e.R7$(2),e.Y8G("ngIf",i.cvAssessment),e.R7$(1),e.Y8G("ngIf",i.validationErrors.length>0))},dependencies:[l.YU,l.Sq,l.bT,o.qT,o.me,o.Q0,o.Zm,o.Fm,o.BC,o.cb,o.j4,o.JD,o.$R,o.v8,o.vS,K.vr,l.vh],styles:['.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.w300[_ngcontent-%COMP%]{width:300px}.w400[_ngcontent-%COMP%]{width:400px}.b[_ngcontent-%COMP%]{font-weight:700}.stdd[_ngcontent-%COMP%]{display:inline-block;margin:0 2px;padding:0}.lbl[_ngcontent-%COMP%]{display:inline-block;margin:0 2px}.ML20[_ngcontent-%COMP%]{margin-left:20px;vertical-align:middle;text-align:center}.ML5[_ngcontent-%COMP%]{margin-left:5px;vertical-align:middle;text-align:center}.fontSmaller[_ngcontent-%COMP%]{font-size:x-small}.fontSmall[_ngcontent-%COMP%]{font-size:small}.btn[_ngcontent-%COMP%]{color:#f0f8ff}.ww[_ngcontent-%COMP%]{word-wrap:break-word}.red[_ngcontent-%COMP%]{color:red}.vAlignM[_ngcontent-%COMP%]{vertical-align:middle}.vAlignTop[_ngcontent-%COMP%]{vertical-align:top!important}.hAlignRight[_ngcontent-%COMP%]{text-align:right}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.dimText[_ngcontent-%COMP%]{color:#a9a9a9}.dblLine[_ngcontent-%COMP%]{border-bottom:1px double #333;border-top:1px double #999;padding:2px 0;margin:0}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#ff0}.inputCheck[_ngcontent-%COMP%]{margin:0 5px 0 10px;width:40px;border:2px;border-color:#000}input[type=radio][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border:1px solid #fff;border-radius:50%;margin:0 10px 0 5px;background-color:#c3b1b1;position:relative}input[type=radio][_ngcontent-%COMP%]:checked:before{content:"";display:block;width:12px;height:12px;background-color:#4a0fec;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:appear .8s}']})}return n})();var Kt=c(1701);class es{constructor(){this.candidateId=0,this.assessmentId=0,this.pageNumber=1,this.pageSize=10}}let ts=(()=>{class n{constructor(t,s){this.http=t,this.accountService=s,this.apiUrl=O.c.apiUrl,this.currentUserSource=new H.m(1),this.currentUser$=this.currentUserSource.asObservable(),this.cvBriefs=[],this.cache=new Map,this.cvParams=new es,this.accountService.currentUser$.pipe((0,M.s)(1)).subscribe(i=>this.user=i)}getCVBriefData(t){const s=this.cache.get(Object.values(t).join("-"));if(s)return(0,g.of)(s);let i=(0,w.eB)(t);return(0,w.f8)(this.apiUrl+"Candidate",i,this.http).pipe((0,C.T)(r=>(this.cache.set(Object.values(t).join("-"),r),r)))}updateCVAssessment(t){return this.http.put(this.apiUrl+"CandidateAssessment/assessment",t)}getOrderItemAssessmentQs(t){return this.http.get(this.apiUrl+"OrderAssessment/orderitemassessmentQ/"+t)}getCVAssessmentObject(t,s,i,r){return this.http.get(this.apiUrl+"CandidateAssessment/assessobject/"+t+"/"+s+"/"+i)}insertCVAssessment(t){return this.http.post(this.apiUrl+"candidateassessment/assess",t)}getCVAssessment(t,s){return this.http.get(this.apiUrl+"candidateassessment/"+s+"/"+t)}GetOrCreateNewCheckist(t,s){return this.http.get(this.apiUrl+"candidateassessment/checklist/"+s+"/"+t)}getCVAssessmentAndChecklist(t,s){return this.http.get(this.apiUrl+"candidateassessment/assessmentandchecklist/"+s+"/"+t)}getAssessmentsOfACandidate(t){return this.http.get(this.apiUrl+"CandidateAssessment/candidateassessments/"+t)}deleteAssessment(t){return this.http.delete(this.apiUrl+"candidateassessment/assess/"+t)}setCVParams(t){this.cvParams=t}getCVParams(){return this.cvParams}getCVBrief(){return this.cvBriefs.filter(s=>s.id===this.cvParams.candidateId)[0]}setCVBriefData(t){this.cvBriefs=t,this.cache.set(Object.values(this.cvParams).join("-"),t),this.pagination.totalItems=this.cvBriefs.length}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(F.Qq),e.KVO(A.D))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ns=c(8966);const $=n=>{var a=n.paramMap.get("status")??"pending";return(0,e.WQX)(te.y).getCVReferredOrderNosDto(a)};var rs=c(8434);const as=[{path:"listing",component:ye,resolve:{professions:S.p,agents:G,candidateBriefs:n=>{var a=new f;return(0,e.WQX)(k).getCandidatesPaged(a,!1)},headers:ns.C}},{path:"register/edit/:id",component:Ye,resolve:{categories:S.p,qualifications:()=>(0,e.WQX)(J.P).getQualificationList(),agents:G,candidate:n=>{var a=n.paramMap.get("id");return console.log("candidate resolver id:",a),null===a||""===a||"0"===a?(0,g.of)(new Le):(0,e.WQX)(k).getCandidate(+a)}},data:{breadcrumb:"Edit Candidate"}},{path:"availableToRef",component:lt,resolve:{cvs:n=>{var a=new f;return(0,e.WQX)(k).getAvailableCandidatesPaged(a,!1)},professions:S.p,agents:G}},{path:"cvsreferred",component:U.H,resolve:{cvrefPaged:ie.I,headers:$}},{path:"cvsreferred",component:U.H,resolve:{cvrefPaged:ie.I,headers:$}},{path:"selectionsPending",component:U.H,resolve:{cvrefPaged:rs.o,headers:$}},{path:"cvassess/:id",component:Wt,canActivate:[Kt.W],resolve:{openOrderItemsBrief:()=>(0,e.WQX)(T.Q).getOpenOrderItemsBriefListDto(),assessmentsDto:n=>{var a=n.paramMap.get("id");return null===a?(0,g.of)(null):(0,e.WQX)(ts).getAssessmentsOfACandidate(+a)}},data:{breadcrumb:"CV Assessment"}}];let os=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#s=this.\u0275inj=e.G2t({imports:[l.MD,u.iI.forChild(as),u.iI]})}return n})();var ds=c(9485);let cs=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#s=this.\u0275inj=e.G2t({imports:[l.MD,o.X1,os,ds.G,N.m_,se.jN]})}return n})()}}]);