"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[221],{778:(U,S,u)=>{u.d(S,{G:()=>E});var l=u(7705),I=u(779);let e=(()=>{class f{constructor(m){this.bsModalRef=m,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(g){return new(g||f)(l.rXU(I.Y$))};static#t=this.\u0275cmp=l.VBU({type:f,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(g,_){1&g&&(l.j41(0,"div",0)(1,"h4",1),l.EFF(2),l.k0s()(),l.j41(3,"div",2)(4,"p"),l.EFF(5),l.k0s()(),l.j41(6,"div",3)(7,"button",4),l.bIt("click",function(){return _.confirm()}),l.EFF(8),l.k0s(),l.j41(9,"button",5),l.bIt("click",function(){return _.decline()}),l.EFF(10),l.k0s()()),2&g&&(l.R7$(2),l.JRh(_.title),l.R7$(3),l.JRh(_.message),l.R7$(3),l.JRh(_.btnOkText),l.R7$(2),l.JRh(_.btnCancelText))}})}return f})();var D=u(6354),r=u(3587),C=u(1626);let E=(()=>{class f{constructor(m,g){this.modalService=m,this.http=g,this.baseUrl=r.c.apiUrl}confirm(m="Confirmation",g="Are you sure you want to do this?",_="Ok",y="Cancel"){return this.bsModelRef=this.modalService.show(e,{initialState:{title:m,message:g,btnOkText:_,btnCancelText:y}}),this.bsModelRef.onHidden.pipe((0,D.T)(()=>this.bsModelRef.content.result))}getHelp(m){return this.http.get(this.baseUrl+"Help/help/"+m)}static#e=this.\u0275fac=function(g){return new(g||f)(l.KVO(I.I8),l.KVO(C.Qq))};static#t=this.\u0275prov=l.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},7221:(U,S,u)=>{u.r(S),u.d(S,{DeploymentModule:()=>we});var l=u(177),I=u(9485),e=u(7705),D=u(2286),r=u(9417),C=u(779),E=u(8256),f=u(778),b=u(3508),m=u(5743),g=u(9375),_=u(2510);function y(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"h4"),e.EFF(2,"Edit Deployment records"),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateDeployment())}),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close())}),e.k0s()()}}const N=function(){return{dateInputFormat:"YYYY-MM-DD"}};function B(s,c){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",22),e.nrm(2,"input",23)(3,"ng-select",24)(4,"ng-select",25)(5,"input",26)(6,"input",27),e.j41(7,"button",28),e.bIt("click",function(){const a=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.download(a))}),e.k0s(),e.j41(8,"button",29),e.bIt("click",function(){const a=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.removeDepItem(a))}),e.k0s()()()}if(2&s){const t=c.index,n=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("bsValue",n.bsValueDate)("bsConfig",e.lJ4(7,N)),e.R7$(1),e.Y8G("items",n.depStatusAndNames),e.R7$(1),e.Y8G("items",n.depStatusAndNames),e.R7$(1),e.Y8G("bsValue",n.bsValueDate)("bsConfig",e.lJ4(8,N))}}function q(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",6)(1,"form",7)(2,"label",8),e.EFF(3,"Candidate:"),e.k0s(),e.j41(4,"div",9),e.EFF(5),e.k0s(),e.j41(6,"label",10),e.EFF(7,"Customer:"),e.k0s(),e.j41(8,"div",9),e.EFF(9),e.k0s(),e.j41(10,"label",11),e.EFF(11),e.k0s(),e.nrm(12,"br"),e.j41(13,"label",10),e.EFF(14,"Category Ref"),e.k0s(),e.j41(15,"div",9),e.EFF(16),e.k0s(),e.j41(17,"label",12),e.EFF(18,"ECNR"),e.k0s(),e.j41(19,"div",13),e.EFF(20),e.k0s(),e.nrm(21,"br"),e.j41(22,"label",14),e.EFF(23,"Selected On"),e.k0s(),e.j41(24,"div",9),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"label",14),e.EFF(28,"Current Status:"),e.k0s(),e.j41(29,"div",15),e.EFF(30),e.k0s(),e.nrm(31,"hr",16),e.j41(32,"label",17),e.EFF(33,"Date"),e.k0s(),e.j41(34,"label",18),e.EFF(35,"Process Name"),e.k0s(),e.j41(36,"label",18),e.EFF(37,"Next Process"),e.k0s(),e.j41(38,"label",17),e.EFF(39,"Next Process"),e.nrm(40,"br"),e.EFF(41,"Estimated Dt"),e.k0s(),e.j41(42,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addDepItem())}),e.k0s(),e.j41(43,"div",20),e.DNE(44,B,9,9,"div",21),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(1),e.Y8G("formGroup",t.form),e.R7$(4),e.JRh(t.candidateName),e.R7$(4),e.JRh(t.companyName),e.R7$(2),e.JRh(t.dep.id),e.R7$(5),e.JRh(t.categoryRef),e.R7$(4),e.JRh(t.dep.ecnr?"Yes":"No"),e.R7$(5),e.JRh(e.i5U(26,9,t.dep.selectedOn,"dd-MMM-yy")),e.R7$(5),e.JRh(t.dep.currentStatus),e.R7$(14),e.Y8G("ngForOf",t.depItems.controls)}}let $=(()=>{class s{constructor(t,n,i,a,o,d){this.bsModalRef=t,this.toastr=n,this.confirmService=i,this.fb=a,this.service=o,this.activatedRoute=d,this.updateDep=new e.bkB,this.ecnr=!1,this.form=new r.gE({}),this.candidateName="",this.categoryRef="",this.companyName="",this.depStatusAndNames=[],this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date}ngOnInit(){this.dep&&this.InitializeForm(this.dep)}InitializeForm(t){this.form=this.fb.group({id:[t.id],cVRefId:[t.cvRefId],orderItemId:[t.orderItemId],customerId:t.customerId,selectedOn:t.selectedOn,currentStatus:t.currentStatus,ecnr:t.ecnr,depItems:this.fb.array(t.depItems.map(n=>this.fb.group({id:n.id,depId:n.depId,transactionDate:[n.transactionDate,r.k0.required],sequence:[n.sequence,r.k0.required],nextSequence:n.nextSequence,nextSequenceDate:n.nextSequenceDate,fullPath:n.fullPath})))})}get depItems(){return this.form.get("depItems")}newDepItem(){return this.fb.group({id:0,depId:this.form.get("id")?.value,transactionDate:[new Date,r.k0.required],sequence:[this.depItems.value[this.depItems.length].map(t=>t.nextSequence),r.k0.required],nextSequence:this.service.getNextSequence(this.depItems.value[this.depItems.length].map(t=>t.nextSequence),this.ecnr),nextSequenceDate:this.service.getNextStageDate(this.depItems.value[this.depItems.length].map(t=>t.nextSequence)),fullPath:""})}addDepItem(){this.depItems.push(this.newDepItem)}removeDepItem(t){var n="This will also delete ";n+=+t+1,this.confirmService.confirm("Confirm Delete",n+=" transactions that are after the date of this transaction.  THE DELETION WILL TAKE EFFECT ONLY AFTER YOU UPDATE THIS FORM").subscribe({next:i=>{if(i)for(let a=+t+1;a--;a<=t)console.log(t,a),this.depItems.removeAt(a)}})}updateDeployment(){this.form.dirty?(this.toastr.info("toaster info","testing"),this.updateDep.emit(this.form.value),this.bsModalRef.hide()):this.toastr.warning("form is not dirty","no changes made",{closeButton:!0,timeOut:0,extendedTimeOut:0})}download(t){var i=this.depItems.at(t).value.fullPath;""!==i?this.service.downloadAttachment(i).subscribe({next:a=>{const o=document.createElement("a"),d=URL.createObjectURL(a);o.href=d;var p=i.lastIndexOf("\\");o.download=-1!==p?i.substring(p+1):"filename.ext",o.click(),URL.revokeObjectURL(d)},error:a=>this.toastr.error(a.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("this transaction has no file uploaded","Invalid selection")}close(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(C.Y$),e.rXU(E.tw),e.rXU(f.G),e.rXU(r.ok),e.rXU(b.j),e.rXU(m.nX))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deploy-edit-modal"]],inputs:{dep:"dep",updateDep:"updateDep"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],["title","edit emp data",1,"btn","fa","fa-save","fa-2x",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-window-close","fa-2x","pull-right","my-0",3,"click"],[1,"modal-body","my-0"],[3,"formGroup"],["for","applicationNo",1,"stdd","w125","b"],[1,"stdd","w150"],["for","customerName",1,"stdd","w125","b"],[1,"stdd","w75"],[1,"stdd","w50","b"],[1,"stdd","w50"],[1,"stdd","w125","b"],[1,"stdd","w250"],[1,"my-0"],[1,"stdd","w90","b","vMiddle"],[1,"stdd","w200","b","vMiddle"],[1,"btn","fa","fa-plus","pull-right",3,"click"],["formArrayName","depItems"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","placeholder","Selected On","formControlName","transactionDate","bsDatepicker","",1,"stdd","w90",3,"bsValue","bsConfig"],["bindLabel","name","bindValue","id","labelForId","id","formControlName","sequence",1,"stdd","w200",2,"height","fit-content","border-color","black",3,"items"],["bindLabel","name","bindValue","id","labelForId","id","clearAllText","Clear","formControlName","nextSequence",1,"stdd","w200",2,"border","rgb(from color r g b)",3,"items"],["type","text","placeholder","Selected On","formControlName","nextSequenceDate","bsDatepicker","",1,"stdd","w90",3,"bsValue","bsConfig"],["type","text","formControlName","fullPath",1,"stdd","w50",2,"font-size","smaller"],["type","button","title","download the attachment",1,"btn","fa","fa-download",3,"click"],[1,"btn","w25","fa","fa-trash","fa-sm","red",3,"click"]],template:function(n,i){1&n&&(e.DNE(0,y,5,0,"div",0),e.DNE(1,q,45,12,"div",1),e.nrm(2,"div",2)),2&n&&(e.Y8G("ngIf",i.dep),e.R7$(1),e.Y8G("ngIf",i.dep))},dependencies:[l.Sq,l.bT,g.pc,g.p0,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.$R,r.v8,_.vr,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding:0;vertical-align:top}.vMiddle[_ngcontent-%COMP%]{vertical-align:middle}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w50[_ngcontent-%COMP%]{width:50px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px;word-wrap:normal}.w125[_ngcontent-%COMP%]{width:125px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}"]})}return s})();var L=u(1413),k=u(5964),w=u(5558),T=u(9437),O=u(7673),X=u(8141);class Y{constructor(){this.id=0,this.depId=0,this.transactionDate=new Date,this.sequence=0,this.nextSequence=0,this.nextSequenceDate=new Date,this.fullPath=""}}const J=["editForm"],A=function(){return{dateInputFormat:"YYYY-MM-DD"}};let Q=(()=>{class s{constructor(t,n,i,a){this.bsModalRef=t,this.toastr=n,this.confirmService=i,this.service=a,this.cvRefId=0,this.depItem=new Y,this.updateDepItem=new e.bkB,this.candidateName="",this.categoryRef="",this.companyName="",this.ecnr=!1,this.depStatuses=[],this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.service.getDeployStatuses().subscribe({next:o=>this.depStatuses=o})}ngOnInit(){0!==this.cvRefId&&this.service.getNextDepItemFromCVRefId(this.cvRefId).subscribe({next:t=>{null!==t&&(this.depItem=t)}})}saveDepItem(){this.confirmService.confirm("cofirm Save","Press Ok to proceed").subscribe({next:t=>{t&&(this.updateDepItem.emit(this.editForm?.value),this.bsModalRef.hide())}})}close(){this.bsModalRef.hide()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(C.Y$),e.rXU(E.tw),e.rXU(f.G),e.rXU(b.j))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deploy-add-modal"]],viewQuery:function(n,i){if(1&n&&e.GBs(J,5),2&n){let a;e.mGM(a=e.lsd())&&(i.editForm=a.first)}},inputs:{cvRefId:"cvRefId",updateDepItem:"updateDepItem"},decls:37,vars:16,consts:[[1,"modal-header"],["title","edit emp data",1,"w35","btn","btn-success","fa","fa-save",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-close","pull-right",3,"click"],[1,"modal-body"],["for","applicationNo",1,"stdd","w150","b"],[1,"stdd","w200"],["for","customerName",1,"stdd","w150","b"],[1,"stdd","w150"],[1,"stdd","w50"],["id","editForm"],["editForm","ngForm"],[2,"display","inline-block","width","110px"],["type","text","placeholder","Offer accepted On","bsDatepicker","",1,"stdd","w110",3,"ngModel","bsValue","bsConfig","ngModelChange"],[1,"stdd","w125"],["bindLabel","statusName","bindValue","depItem.sequence","labelForId","depItem.statusName","clearAllText","Clear",2,"border","color(from color srgb r g b)","font-size","smaller",3,"items","ngModel","ngModelChange"],["bindLabel","statusName","bindValue","depItem.nextSequence","labelForId","depItem.statusName","clearAllText","Clear",2,"border","color(from color srgb r g b)","font-size","smaller",3,"items","ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"h6"),e.EFF(2,"Add a deployment transaction"),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return i.saveDepItem()}),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return i.close()}),e.k0s()(),e.j41(5,"div",3)(6,"label",4),e.EFF(7,"Application No:"),e.k0s(),e.j41(8,"div",5),e.EFF(9),e.k0s(),e.nrm(10,"br"),e.j41(11,"label",6),e.EFF(12,"Customer Name"),e.k0s(),e.j41(13,"div",5),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"label",6),e.EFF(17,"Category Ref"),e.k0s(),e.j41(18,"div",5),e.EFF(19),e.k0s(),e.nrm(20,"br"),e.j41(21,"label",7),e.EFF(22,"Emig Clearance Required"),e.k0s(),e.j41(23,"div",8),e.EFF(24),e.k0s(),e.j41(25,"h6"),e.EFF(26,"Deployment Transaction to add:"),e.k0s(),e.j41(27,"form",9,10)(29,"div",11)(30,"input",12),e.bIt("ngModelChange",function(o){return i.depItem.transactionDate=o}),e.k0s()(),e.j41(31,"div",13)(32,"ng-select",14),e.bIt("ngModelChange",function(o){return i.depItem.sequence=o}),e.k0s()(),e.j41(33,"div",13)(34,"ng-select",15),e.bIt("ngModelChange",function(o){return i.depItem.nextSequence=o}),e.k0s()(),e.j41(35,"div",11)(36,"input",12),e.bIt("ngModelChange",function(o){return i.depItem.nextSequenceDate=o}),e.k0s()()()()),2&n&&(e.R7$(9),e.JRh(i.candidateName),e.R7$(5),e.JRh(i.companyName),e.R7$(5),e.JRh(i.categoryRef),e.R7$(5),e.JRh(i.ecnr?"YES":"NO"),e.R7$(6),e.Y8G("ngModel",i.depItem.transactionDate)("bsValue",i.bsValueDate)("bsConfig",e.lJ4(14,A)),e.R7$(2),e.Y8G("items",i.depStatuses)("ngModel",i.depItem.sequence),e.R7$(2),e.Y8G("items",i.depStatuses)("ngModel",i.depItem.nextSequence),e.R7$(2),e.Y8G("ngModel",i.depItem.nextSequenceDate)("bsValue",i.bsValueDate)("bsConfig",e.lJ4(15,A)))},dependencies:[g.pc,g.p0,r.qT,r.me,r.BC,r.cb,r.vS,r.cV,_.vr]})}return s})();function z(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",6)(1,"label",7),e.EFF(2,"Airline"),e.k0s(),e.j41(3,"input",8),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.airlineName=i)}),e.k0s(),e.j41(4,"label",9),e.EFF(5,"Flight No"),e.k0s(),e.j41(6,"input",10),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.flightNo=i)}),e.k0s(),e.nrm(7,"br"),e.j41(8,"label",7),e.EFF(9,"Airport of Boarding"),e.k0s(),e.j41(10,"input",11),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.airportOfBoarding=i)}),e.k0s(),e.j41(11,"label",9),e.EFF(12,"ETD Boarding"),e.k0s(),e.j41(13,"input",12),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.etD_BoardingString=i)}),e.k0s(),e.nrm(14,"br"),e.j41(15,"label",7),e.EFF(16,"Destination Airport"),e.k0s(),e.j41(17,"input",13),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.airportOfDestination=i)}),e.k0s(),e.j41(18,"label",9),e.EFF(19,"ETA Destination"),e.k0s(),e.j41(20,"input",14),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.etA_DestinationString=i)}),e.k0s(),e.nrm(21,"br"),e.j41(22,"label",7),e.EFF(23,"Via Airport"),e.k0s(),e.j41(24,"input",15),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.airportVia=i)}),e.k0s(),e.j41(25,"label",9),e.EFF(26,"Flight No Via"),e.k0s(),e.j41(27,"input",16),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.flightNoVia=i)}),e.k0s(),e.nrm(28,"br"),e.j41(29,"label",7),e.EFF(30,"ETA at Via Airport"),e.k0s(),e.j41(31,"input",17),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.etA_ViaString=i)}),e.k0s(),e.j41(32,"label",7),e.EFF(33,"ETD from Via Airport"),e.k0s(),e.j41(34,"input",18),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.flightData.etD_ViaString=i)}),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngModel",t.flightData.airlineName),e.R7$(3),e.Y8G("ngModel",t.flightData.flightNo),e.R7$(4),e.Y8G("ngModel",t.flightData.airportOfBoarding),e.R7$(3),e.Y8G("ngModel",t.flightData.etD_BoardingString),e.R7$(4),e.Y8G("ngModel",t.flightData.airportOfDestination),e.R7$(3),e.Y8G("ngModel",t.flightData.etA_DestinationString),e.R7$(4),e.Y8G("ngModel",t.flightData.airportVia),e.R7$(3),e.Y8G("ngModel",t.flightData.flightNoVia),e.R7$(4),e.Y8G("ngModel",t.flightData.etA_ViaString),e.R7$(3),e.Y8G("ngModel",t.flightData.etD_ViaString)}}let V=(()=>{class s{constructor(t,n,i,a){this.bsModalRef=t,this.toastr=n,this.confirmService=i,this.service=a,this.candidateFlightEvent=new e.bkB}ngOnInit(){}close(){this.candidateFlightEvent.emit(null),this.bsModalRef.hide()}registerDate(){this.DataVerified()&&(this.candidateFlightEvent.emit(this.flightData),this.bsModalRef.hide())}DataVerified(){var t="";return(!R(this.flightData.etA_DestinationString)||!R(this.flightData.etD_BoardingString))&&(t="Invalid Date - ETA / ETD"),""!==this.flightData?.airlineVia&&(!R(this.flightData.etD_ViaString)||!R(this.flightData.etA_ViaString))&&(t+="Invalid Date - ETD"),""==this.flightData?.airlineName&&(t+=" Airline name not mentioned"),""==this.flightData?.airportOfBoarding&&(t+=" Airport of Boarding not mentioned"),""==this.flightData?.airportOfDestination&&(t+=" Airport of destination not provided"),""==this.flightData?.flightNo&&(t+=" Flight No not provided"),""==t||(this.toastr.warning(t,"errors encountered"),!1)}dateChanged(t){return console.log("dateChanged:",t),t?new Date(t):null}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(C.Y$),e.rXU(E.tw),e.rXU(f.G),e.rXU(b.j))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-choose-flight-modal"]],inputs:{flightData:"flightData"},outputs:{candidateFlightEvent:"candidateFlightEvent"},decls:8,vars:1,consts:[[1,"modal-header","my-0"],["title","edit emp data",1,"w35","btn","btn-success","fa","fa-check",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-close","pull-right",3,"click"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer","my-0"],[2,"font-size","x-small"],[1,"modal-body","my-0"],[1,"lbl","w125"],["type","text","placeholder","Airline Name",1,"stdd","w125",3,"ngModel","ngModelChange"],[1,"lbl","w100","mx-2"],["type","text","placeholder","Flight No",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Boarding Airport",1,"stdd","w125",3,"ngModel","ngModelChange"],["type","datetime","placeholder","ETD Boarding",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Destination Airport",1,"stdd","w125",3,"ngModel","ngModelChange"],["type","datetime","placeholder","ETA Destination",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","text","placeholder","Via Airport",1,"stdd","w125",3,"ngModel","ngModelChange"],["type","text","placeholder","FlightNo Via",1,"stdd","w125",3,"ngModel","ngModelChange"],["type","datetime","placeholder","ETA Via Airport",1,"stdd","w150",3,"ngModel","ngModelChange"],["type","datetime","placeholder","ETD Via Airport",1,"stdd","w125",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"h4"),e.EFF(2,"Flight details"),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return i.registerDate()}),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return i.close()}),e.k0s()(),e.DNE(5,z,35,10,"div",3),e.nrm(6,"div",4)(7,"div",5)),2&n&&(e.R7$(5),e.Y8G("ngIf",i.flightData))},dependencies:[l.bT,r.me,r.BC,r.vS],styles:[".w20[_ngcontent-%COMP%]{width:20px}.w60[_ngcontent-%COMP%]{width:60px}.w75[_ngcontent-%COMP%]{width:75px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w200[_ngcontent-%COMP%]{width:200px}.mL120[_ngcontent-%COMP%]{margin-left:120px}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:2px;font-weight:700;font-size:smaller;vertical-align:middle;word-wrap:normal}.blue[_ngcontent-%COMP%]{color:#00008b}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin:2px;word-wrap:normal}.line2[_ngcontent-%COMP%]{color:#00008b;display:inline-block;margin:0 2px;font-weight:700;font-size:smaller;vertical-align:middle;word-wrap:normal}"]})}return s})();function R(s){const c=new Date(s);return!isNaN(c.getTime())}function H(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"h4"),e.EFF(2,"Edit Deployment records"),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.uploadAttachment())}),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.bsModalRef.hide())}),e.k0s()()}}const W=function(){return{dateInputFormat:"YYYY-MM-DD"}};function K(s,c){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",20),e.nrm(2,"input",21)(3,"ng-select",22)(4,"input",23),e.j41(5,"button",24),e.bIt("click",function(){const a=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.download(a))}),e.k0s(),e.j41(6,"button",25),e.bIt("click",function(){const a=e.eBV(t).index,o=e.XpG(2);return e.Njj(o.deleteAttachment(a))}),e.k0s(),e.j41(7,"input",26),e.bIt("change",function(i){const o=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.onFileInputChange(i,o))}),e.k0s()()()}if(2&s){const t=c.index,n=e.XpG(2);e.R7$(1),e.Y8G("formGroupName",t),e.R7$(1),e.Y8G("bsValue",n.bsValueDate)("bsConfig",e.lJ4(4,W)),e.R7$(1),e.Y8G("items",n.depStatusAndNames)}}function Z(s,c){if(1&s&&(e.j41(0,"div",6)(1,"form",7)(2,"label",8),e.EFF(3,"Candidate:"),e.k0s(),e.j41(4,"div",9),e.EFF(5),e.k0s(),e.j41(6,"label",10),e.EFF(7,"Customer:"),e.k0s(),e.j41(8,"div",9),e.EFF(9),e.k0s(),e.nrm(10,"br"),e.j41(11,"label",10),e.EFF(12,"Category Ref"),e.k0s(),e.j41(13,"div",9),e.EFF(14),e.k0s(),e.j41(15,"label",11),e.EFF(16,"ECNR"),e.k0s(),e.j41(17,"div",12),e.EFF(18),e.k0s(),e.nrm(19,"br"),e.j41(20,"label",13),e.EFF(21,"Selected On"),e.k0s(),e.j41(22,"div",9),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"label",13),e.EFF(26,"Current Status:"),e.k0s(),e.j41(27,"div",14),e.EFF(28),e.k0s(),e.nrm(29,"hr",15),e.j41(30,"label",16),e.EFF(31,"Date"),e.k0s(),e.j41(32,"label",17),e.EFF(33,"Process Name"),e.k0s(),e.j41(34,"div",18),e.DNE(35,K,8,5,"div",19),e.k0s()()()),2&s){const t=e.XpG();e.R7$(1),e.Y8G("formGroup",t.form),e.R7$(4),e.JRh(t.candidateName),e.R7$(4),e.JRh(t.companyName),e.R7$(5),e.JRh(t.categoryRef),e.R7$(4),e.JRh(t.dep.ecnr?"Yes":"No"),e.R7$(5),e.JRh(e.i5U(24,8,t.dep.selectedOn,"dd-MMM-yy")),e.R7$(5),e.JRh(t.dep.currentStatus),e.R7$(7),e.Y8G("ngForOf",t.depItems.controls)}}let ee=(()=>{class s{constructor(t,n,i,a,o){this.bsModalRef=t,this.toastr=n,this.confirm=i,this.fb=a,this.service=o,this.updateDep=new e.bkB,this.indexId=0,this.ecnr=!1,this.form=new r.gE({}),this.candidateName="",this.categoryRef="",this.companyName="",this.filesToUpload=[],this.lastTimeCalled=0,this.bsValue=new Date,this.bsRangeValue=new Date,this.maxDate=new Date,this.minDate=new Date,this.bsValueDate=new Date,this.depStatusAndNames=[]}ngOnInit(){this.dep&&this.InitializeForm(this.dep)}InitializeForm(t){this.form=this.fb.group({id:[t.id],cVRefId:[t.cvRefId],orderItemId:[t.orderItemId],customerId:t.customerId,selectedOn:t.selectedOn,currentStatus:t.currentStatus,ecnr:t.ecnr,depItems:this.fb.array(t.depItems.map(n=>this.fb.group({id:n.id,depId:n.depId,transactionDate:[n.transactionDate,r.k0.required],sequence:[n.sequence,r.k0.required],fullPath:n.fullPath})))})}get depItems(){return this.form.get("depItems")}onFileInputChange(t,n){const i=t.target;var a=this.depItems.at(n).value;if(!this.sequenceValidForUpload(a.sequence))return void this.toastr.warning("The item has a sequence that does not need any file attachment","Invalid Item for Upload");if(this.filesToUpload=[],null!==a.fullPath&&""!==a.fullPath)return void this.toastr.warning("one file is already listed as uploaded.  If you want to replace earlier upload, then delete the upload in order to add another upload","Only 1 file can be uploaded for a transaction");this.depItemOfAttachment=a,this.indexId=n;const p=i.files[0];a.fullPath=p.name,this.filesToUpload.push(p)}uploadAttachment(){if(Date.now()<this.lastTimeCalled+28e3)return;this.lastTimeCalled=Date.now();let i=new FormData;this.filesToUpload.length>0&&this.filesToUpload.forEach(a=>{i.append("file",a,a.name)}),i.append("data",JSON.stringify(this.depItemOfAttachment)),this.service.uploadAttachmentForItem(i).subscribe({next:a=>{this.depItems.at(this.indexId).get("fullPath")?.setValue(a),this.toastr.success("file uploaded and attachment path updated","Success")},error:a=>this.toastr.error(a.error.details,"error while uploading the attachment")})}sequenceValidForUpload(t){switch(t){case 100:case 150:case 400:case 700:case 1100:case 1300:return!0;default:return!1}}download(t){var n=this.depItems.at(t).get("fullPath")?.value;null!==n&&""!==n?this.service.downloadAttachment(n).subscribe({next:i=>{const a=document.createElement("a"),o=URL.createObjectURL(i);a.href=o;var d=n.lastIndexOf("\\");a.download=-1!==d?n.substring(d+1):"filename.ext",a.click(),URL.revokeObjectURL(o)},error:i=>this.toastr.error(i.error.details,"Error encountered while downloading the file ")}):this.toastr.warning("No file upload data available","Bad Request")}deleteAttachment(t){var n=this.depItems.at(t).get("fullPath")?.value;null!==n&&""!==n||this.toastr.warning("No file upload data available","Bad Request")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(C.Y$),e.rXU(E.tw),e.rXU(f.G),e.rXU(r.ok),e.rXU(b.j))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-dep-attachment-modal"]],inputs:{updateDep:"updateDep"},decls:3,vars:2,consts:[["class","modal-header my-0",4,"ngIf"],["class","modal-body my-0",4,"ngIf"],[1,"modal-footer"],[1,"modal-header","my-0"],["title","edit emp data",1,"btn","fa","fa-save","fa-2x",2,"margin-left","200px",3,"click"],["title","Close",1,"btn","fa","fa-window-close","fa-2x","pull-right","my-0",3,"click"],[1,"modal-body","my-0"],[3,"formGroup"],["for","applicationNo",1,"stdd","w125","b"],[1,"stdd","w150"],["for","customerName",1,"stdd","w125","b"],[1,"stdd","w50","b"],[1,"stdd","w50"],[1,"stdd","w125","b"],[1,"stdd","w250"],[1,"my-0"],[1,"stdd","w110","b","vMiddle"],[1,"stdd","w200","b","vMiddle"],["formArrayName","depItems"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","placeholder","Selected On","formControlName","transactionDate","bsDatepicker","",1,"stdd","w90",3,"bsValue","bsConfig"],["bindLabel","name","bindValue","id","labelForId","id","formControlName","sequence",1,"stdd","w200",2,"height","fit-content","border-color","black",3,"items"],["type","text","formControlName","fullPath",1,"stdd","w50",2,"font-size","smaller"],[1,"btn","fa","fa-download",3,"click"],[1,"btn","fa","fa-trash","red",3,"click"],["type","file","id","file",1,"stdd",3,"change"]],template:function(n,i){1&n&&(e.DNE(0,H,5,0,"div",0),e.DNE(1,Z,36,11,"div",1),e.nrm(2,"div",2)),2&n&&(e.Y8G("ngIf",i.dep),e.R7$(1),e.Y8G("ngIf",i.dep))},dependencies:[l.Sq,l.bT,g.pc,g.p0,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.$R,r.v8,_.vr,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:0 2px;padding:0;vertical-align:top}.vMiddle[_ngcontent-%COMP%]{vertical-align:middle}.b[_ngcontent-%COMP%]{font-weight:700}.red[_ngcontent-%COMP%]{color:red}.w50[_ngcontent-%COMP%]{width:50px}.w90[_ngcontent-%COMP%]{width:90px}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w150[_ngcontent-%COMP%]{width:150px;word-wrap:normal}.w125[_ngcontent-%COMP%]{width:125px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}"]})}return s})();var P=u(3400),M=u(9213);let te=(()=>{class s{constructor(){this.statuses=[{sequence:0,status:"None"},{sequence:100,status:"Selected"},{sequence:150,status:"Offer Letter Accepted"},{sequence:200,status:"Document Certificate Initiated"},{sequence:300,status:"Ref For Med Tests"},{sequence:400,status:"Med Fit"},{sequence:500,status:"Med Unfit"},{sequence:550,status:"Visa Documents Prepared"},{sequence:600,status:"Visa Docs submitted"},{sequence:700,status:"Visa Endorsed"},{sequence:800,status:"Visa denied"},{sequence:900,status:"Emig Application Lodged"},{sequence:1e3,status:"Emig Documents Lodged"},{sequence:1100,status:"Emig Granted"},{sequence:1200,status:"Emig Denied"},{sequence:1300,status:"Travel Tkt booked"},{sequence:1400,status:"Docs couriered to candidate"},{sequence:1500,status:"Traveled"},{sequence:1600,status:"Arrival Acknowledged by client"},{sequence:5e3,status:"Concluded"}]}transform(t){return this.statuses.filter(i=>i.sequence===t).map(i=>i.status)[0]??"undefined"}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275pipe=e.EJ8({name:"depStatus",type:s,pure:!0})}return s})();function ne(s,c){if(1&s&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"depStatus"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.JRh(e.bMT(2,1,t.dep.deploySequence))}}function ie(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showFlight())}),e.EFF(1),e.nI1(2,"depStatus"),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(1),e.JRh(e.bMT(2,1,t.dep.deploySequence))}}function ae(s,c){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"input",1),e.bIt("ngModelChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.dep.checked=i)})("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.selectedClicked())}),e.k0s(),e.j41(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"div",3),e.EFF(5),e.k0s(),e.j41(6,"div",3),e.EFF(7),e.k0s(),e.j41(8,"div",4),e.EFF(9),e.k0s(),e.j41(10,"div",3),e.EFF(11),e.k0s(),e.j41(12,"div",5),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"div",5),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"div",3),e.EFF(19),e.k0s(),e.DNE(20,ne,3,3,"div",6),e.DNE(21,ie,3,3,"div",7),e.j41(22,"div",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.displayVisaClicked())}),e.EFF(23),e.k0s(),e.j41(24,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editDep())}),e.j41(25,"mat-icon"),e.EFF(26,"edit"),e.k0s()(),e.j41(27,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editAttachment())}),e.j41(28,"mat-icon"),e.EFF(29,"cloud_upload"),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngModel",t.dep.checked),e.R7$(2),e.JRh(t.dep.applicationNo),e.R7$(2),e.JRh(t.dep.candidateName),e.R7$(2),e.JRh(t.dep.customerName),e.R7$(2),e.JRh(t.dep.orderNo),e.R7$(2),e.SpI("",t.dep.categoryName," "),e.R7$(2),e.JRh(e.i5U(14,12,t.dep.referredOn,"dd-MMM")),e.R7$(3),e.JRh(e.i5U(17,15,t.dep.selectedOn,"dd-MMM")),e.R7$(3),e.JRh(t.dep.currentStatus),e.R7$(1),e.Y8G("ngIf",1300!==t.dep.deploySequence),e.R7$(1),e.Y8G("ngIf",1300===t.dep.deploySequence),e.R7$(2),e.JRh(t.dep.visaNo||"undefined")}}let se=(()=>{class s{constructor(t,n){this.service=t,this.toastr=n,this.editDepEvent=new e.bkB,this.deleteDepEvent=new e.bkB,this.selectedEvent=new e.bkB,this.showTicket=new e.bkB,this.editAttachmentEvent=new e.bkB,this.displayVisaEvent=new e.bkB}ngOnInit(){}editDep(){this.dep&&this.service.getDeploymentWithItems(this.dep.depId).subscribe({next:t=>{t&&this.editDepEvent.emit(t)}})}showFlight(){1300===this.dep.deploySequence?this.showTicket.emit(this.dep?.cvRefId):this.toastr.warning("This can be called only when there is a ticket booked")}deleteDep(){this.deleteDepEvent.emit(this.dep.depId)}selectedClicked(){this.selectedEvent.emit(this.dep)}editAttachment(){this.dep&&this.service.getDeploymentWithItems(this.dep.depId).subscribe({next:t=>{t&&this.editAttachmentEvent.emit(t)}})}displayVisaClicked(){null!==this.dep?.visaNo&&""!==this.dep?.visaNo?this.displayVisaEvent.emit(this.dep?.cvRefId):this.toastr.warning("visa number not provided to assign it to the candidate","Visa no not provided")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(b.j),e.rXU(E.tw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deploy-line"]],inputs:{dep:"dep"},outputs:{editDepEvent:"editDepEvent",deleteDepEvent:"deleteDepEvent",selectedEvent:"selectedEvent",showTicket:"showTicket",editAttachmentEvent:"editAttachmentEvent",displayVisaEvent:"displayVisaEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["type","checkbox",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","margin-right","10px",3,"ngModel","ngModelChange","click"],[1,"w50",2,"display","inline-block","margin-left","5px"],[1,"stdd","w150"],[1,"stdd","w50"],[1,"stdd","w75"],["class","stdd w125",4,"ngIf"],["class","stdd w150 stretched cursorPointer","title","Press this to display flight details",3,"click",4,"ngIf"],["title","click to assign visa number to the candidate.  If not visa number available (undefined), this click will not work",1,"stdd","w75","cursorPointer",3,"click"],["title","edit Deployment Transactions.  This option also provides for addition of a transaction",1,"btn",3,"click"],["title","upload/download attachments.",1,"btn",3,"click"],[1,"stdd","w125"],["title","Press this to display flight details",1,"stdd","w150","stretched","cursorPointer",3,"click"]],template:function(n,i){1&n&&e.DNE(0,ae,30,18,"div",0),2&n&&e.Y8G("ngIf",void 0!==i.dep)},dependencies:[l.bT,r.Zm,r.BC,r.vS,M.An,l.vh,te],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:2px 0;vertical-align:top;font-size:small;word-wrap:break-word}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.w20[_ngcontent-%COMP%]{width:20px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px;font-size:smaller!important}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.mL25[_ngcontent-%COMP%]{width:25px}input[type=checkbox][_ngcontent-%COMP%]{outline:1px solid #1e5180}.red[_ngcontent-%COMP%]{color:red}  .ng-select-container{height:5px!important;font-size:.8em!important}.cursorPointer[_ngcontent-%COMP%]{cursor:pointer;color:#deb887}.btn[_ngcontent-%COMP%]{display:inline-block;color:#f0f8ff;margin:0 2px;padding:0;vertical-align:top}.stretched[_ngcontent-%COMP%]{display:inline-block;width:150px;vertical-align:top;word-wrap:break-word;font-stretch:extra-condensed}"]})}return s})();const oe=["search"];function le(s,c){if(1&s){const t=e.RV6();e.j41(0,"pagination",33),e.bIt("pageChanged",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChanged(i))}),e.EFF(1," >"),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",20)}}function re(s,c){1&s&&(e.j41(0,"div"),e.EFF(1," No pending deployment transactions on record\n"),e.k0s())}function de(s,c){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"app-deploy-line",34),e.bIt("editDepEvent",function(i){const o=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.editDeploymentModal(i,o))})("selectedEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.selectionChanged(i))})("showTicket",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.showTicketClicked(i))})("candidateFlightDeleteEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.candidateFlightDelete(i))})("candidteFlightEditEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.candidateFlightEdit(i))})("editAttachmentEvent",function(i){const o=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.editAttachmentModal(i,o))})("displayVisaEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.displayVisaTransaction(i))}),e.k0s()()}if(2&s){const t=c.$implicit;e.R7$(1),e.Y8G("dep",t)}}const ce=function(){return{dateInputFormat:"YYYY-MM-DD"}};let pe=(()=>{class s{constructor(t,n,i,a,o,d){this.toastr=t,this.confirm=n,this.bsModalService=i,this.activatedRoute=a,this.service=o,this.router=d,this.EditDepEvent=new e.bkB,this.returnUrl="",this.title="",this.currentSearchValue="",this.currentOption="",this.currentStatus="",this.deployStatus="",this.deploys=[],this.deploysSelected=[],this.routeId="",this.totalCount=0,this.depStatuses=[],this.statusNameAndSeq=[],this.transDate=new Date,this.sequenceSelected="",this.currentCVRefId=0,this.dParams=new D.a,this.newSequence=new L.B,this.bsValueDate=new Date,this.optionSelected="",this.searchOptions=[{name:"Application",value:"applicationNo"},{name:"Candidate Name",value:"candidateName"},{name:"Order No",value:"orderNo"},{name:"Category Name",value:"categoryName"},{name:"Date Selected",value:"selectedon"},{name:"Employer Name",value:"customerName"},{name:"Current Status",value:"currentStatus"}],this.sortOptions=[{name:"By Application No Asc",value:"appno"},{name:"By Application No Desc",value:"apppnodesc"},{name:"By Profession Asc",value:"prof"},{name:"By Profession Desc",value:"profdesc"},{name:"By Employer",value:"employer"},{name:"By Employer Desc",value:"employerdesc"}],this.SEQUENCE_SELECTED=100,this.SEQUENCE_SELECTED_NAME="Selected",this.SEQUENCE_DOCUMENTS_ATTESTATION=200,this.SEQUENCE_DOCUMENTS_ATTESTATION_NAME="Document Certification Initiated",this.SEQUENCE_MED_REFERRED=300,this.SEQUENCE_MED_REFERRED_NAME="Referred For Medical Test",this.SEQUENCE_MED_FIT=400,this.SEQUENCE_MED_FIT_NAME="Medically Fit",this.SEQUENCE_MED_UNFIT=500,this.SEQUENCE_MED_UNFIT_NAME="Medically Unfit",this.SEQUENCE_VISA_DOC_SUBMITTED=600,this.SEQUENCE_VISA_DOC_SUBMITTED_NAME="Visa Documents submitted",this.SEQUENCE_VISA_ISSUED=700,this.SEQUENCE_VISA_ISSUED_NAME="Visa Issued",this.SEQUENCE_VISA_REJECTED=800,this.SEQUENCE_VISA_REJECTED_NAME="Visa Rejected",this.SEQUENCE_EMIG_APP_LODGED=900,this.SEQUENCE_EMIG_APP_LODGED_NAME="Emigration application lodged",this.SEQUENCE_EMIG_DOC_LODGED=1e3,this.SEQUENCE_EMIG_DOC_LODGED_NAME="Emigration Documents lodged",this.SEQUENCE_EMIG_CLEARED=1100,this.SEQUENCE_EMIG_CLEARED_NAME="Emigration Cleared",this.SEQUENCE_EMIG_DENIED=1200,this.SEQUENCE_EMIG_DENIED_NAME="Emigration Denied",this.SEQUENCE_TRAVEL_BOOKED=1300,this.SEQUENCE_TRAVEL_BOOKED_NAME="Ticket booked",this.SEQUENCE_TRAVELED=1500,this.SEQUENCE_TRAVELED_NAME="Traveled";let p=this.router.getCurrentNavigation();p?.extras&&p.extras.state&&(p.extras.state.returnUrl&&(this.returnUrl=p.extras.state.returnUrl),p.extras.state.user&&(this.user=p.extras.state.user))}ngOnInit(){this.deploysSelected=[],this.title="active",this.activatedRoute.data.subscribe(t=>{this.deploys=t.deps.result,this.pagination=t.deps.pagination,this.totalCount=t.deps.count,this.statusNameAndSeq=t.statusNameAndSeq,this.depStatuses=t.depStatuses})}onPageChanged(t){const n=this.service.getParams();n.pageNumber!==t&&(n.pageNumber=t.page,this.service.setParams(n),this.getDeployments())}getDeployments(){var t=this.service.getParams();this.service.getDeploymentPagedList(t)?.subscribe({next:n=>{null!=n?(this.deploys=n.result,this.totalCount=n?.count,this.pagination=n.pagination):console.log("response is undefined")},error:n=>console.log(n)})}close(){this.currentCVRefId=0}deletDeployment(t){var n=t;this.confirm.confirm("confirm Delete","Are you sure you want to delete this deployment?  All related transactions will also be deleted").pipe((0,k.p)(a=>a),(0,w.n)(a=>this.service.deleteDeployment(n).pipe((0,T.W)(o=>(this.toastr.error(o,"failed to delete"),(0,O.of)())),(0,X.M)(o=>{this.toastr.error("Deleted the deployment","success in deletion")}),(0,T.W)(o=>(this.toastr.error(o,"Failed to delete the deployment record"),(0,O.of)()))))).subscribe(()=>this.toastr.success("deployment deleted in subscribe","success"))}onSearch(){const t=this.service.getParams();var n=this.searchTerm.nativeElement.value;if(this.currentSearchValue!=n||this.optionSelected!=this.currentOption||this.currentStatus!=this.deployStatus){switch(this.currentStatus=this.deployStatus,this.currentSearchValue=n,this.optionSelected){case"applicationNo":t.applicationNo=n;break;case"orderNo":t.orderNo=n;break;case"selectedOn":t.selectedOn=new Date(n);break;case"customerName":t.customerName=n;break;case"categoryName":t.categoryName=n;break;case"candidateName":t.candidateName=n;break;case"currentStatus":t.currentStatus=n}this.title=this.optionSelected+"="+n,""===this.deployStatus&&(this.deployStatus="Concluded"),t.status=this.deployStatus,t.pageNumber=1,this.service.setParams(t),this.getDeployments()}else this.toastr.warning("No valid selection","Bad Request")}onOptionSelected(t){this.optionSelected!==t&&(this.optionSelected=t,this.currentOption=t)}optionCleared(){this.optionSelected=""}onReset(){this.searchTerm.nativeElement.value="",this.sequenceSelected="",this.dParams=new D.a,this.service.setParams(this.dParams),this.getDeployments()}editDeploymentModal(t,n){null!==t?(this.bsModalRef=this.bsModalService.show($,{class:"modal-dialog-centered modal-md",initialState:{dep:t,depStatusAndNames:this.statusNameAndSeq,candidateName:n.applicationNo+"-"+n.candidateName,categoryRef:n.categoryName,companyName:n.customerName}}),this.bsModalRef.content.updateDep.pipe((0,k.p)(o=>null!==o),(0,w.n)(o=>this.service.updateDeployment(o))).subscribe(o=>{if(null!==o){this.toastr.success("Deployment updated","Success");var d=this.deploys.findIndex(p=>p.depId===o.depId);-1!==d&&(this.deploys[d]=o)}else this.toastr.warning(o,"Failure")})):this.toastr.warning("No Deployment object returned from the modal form")}adddNewDeployment(t){this.bsModalRef=this.bsModalService.show(Q,{class:"modal-dialog-centered modal-lg",initialState:{cvRefId:t.cvRefId,depStatuses:this.depStatuses,candidateName:t.applicationNo+"-"+t.customerName,categoryRef:t.categoryName,companyName:t.customerName,ecnr:t.ecnr}}),this.bsModalRef.content.updateDep.pipe((0,k.p)(a=>null!==a),(0,w.n)(a=>this.service.updateDeploymentItem(a))).subscribe(a=>{""===a?this.toastr.success("Deployment Item inserted","Success"):this.toastr.warning(a,"Failure")})}editAttachmentModal(t,n){null!==t?(this.bsModalRef=this.bsModalService.show(ee,{class:"modal-dialog-centered modal-lg",initialState:{dep:t,depStatusAndNames:this.statusNameAndSeq,candidateName:n.applicationNo+"-"+n.candidateName,categoryRef:n.categoryName,companyName:n.customerName}}),this.bsModalRef.content.updateDep.subscribe({next:()=>this.toastr.info("attachment process completed","Process Over")})):this.toastr.warning("No Deployment object returned from the modal form")}verifyNextSequence(t,n){var i=this.depStatuses.filter(p=>p.statusName==t)[0],o=(this.depStatuses.filter(p=>p.statusName==n),this.deploysSelected.filter(p=>p.ecnr)),d="";if(null==i)return"Cannot find this.Stage";switch(i.sequence){case this.SEQUENCE_MED_REFERRED:d=n===this.SEQUENCE_MED_FIT_NAME||n===this.SEQUENCE_MED_UNFIT_NAME?"":"Valid Sequence after Medical Referred is: MEDICALLY FIT or MEDICALLY UNFIT";break;case this.SEQUENCE_MED_FIT:d=n===this.SEQUENCE_VISA_DOC_SUBMITTED_NAME?"Sequence after Medical Fitness is Visa Documents submision":"";break;case this.SEQUENCE_VISA_ISSUED:d=n===this.SEQUENCE_EMIG_APP_LODGED_NAME&&o.length>0?"Atleast one of the selected candidates are ECNR, and does not need Emigration formalities":n===this.SEQUENCE_TRAVEL_BOOKED_NAME&&0===o.length?"Emigration Clearance can be bye-passed only for ECNR candidates":"";break;case this.SEQUENCE_EMIG_APP_LODGED:d=n!==this.SEQUENCE_EMIG_DOC_LODGED_NAME?"Sequence to follow Emigration application Lodgement is":"EMIGRATION Documents Lodgement";break;case this.SEQUENCE_EMIG_DOC_LODGED:d=n===this.SEQUENCE_EMIG_CLEARED_NAME||n===this.SEQUENCE_EMIG_DENIED_NAME?"":"Sequence after Emigration Document Lodgement is either Emigration Cleared Or Emigration Denied";break;case this.SEQUENCE_TRAVEL_BOOKED:case this.SEQUENCE_EMIG_CLEARED:d=n===this.SEQUENCE_TRAVELED_NAME?"":"Sequence after Travel booked is TRAVELED"}return d}navigateByRoute(t,n,i,a){this.router.navigate([n+"/"+t],{state:{user:this.user,toedit:i,returnUrl:"/processing/list",depStages:a}})}getNextSeqForNextTransaction(t){return this.depStatuses.find(i=>i.sequence==t)?.nextSequence??0}getSequenceForNextTransaction(t){var n=this.findMaxSeq(t),i=this.depStatuses.find(a=>a.sequence==n)?.nextSequence;return i??0}findMaxSeq(t){return t.deploySequence}getNextStageDateForNextTransaction(t,n){var i=new Date(t.currentSeqDate),a=this.depStatuses.find(o=>o.sequence==n)?.workingDaysReqdForNextStage;return new Date(i.setDate(i.getDate()+a))}selectionChanged(t){if(void 0!==t){var n;n=!0!==t.checked;var i=this.deploysSelected.findIndex(a=>a.depId===t.depId);n?this.deploysSelected.push(t):this.deploysSelected.splice(i,1)}}getTravellingTicket(){var t=new Date;t.setDate(t.getDate()+4),this.bsModalRef=this.bsModalService.show(V,{class:"modal-dialog-centered modal-lg",initialState:{flightData:{etD_Boarding:t,etA_Destination:t,airlineName:"Air India",airportOfBoarding:"Mumbai",airportOfDestination:"Jeddah",flightNo:"AI-823",etA_Via:null,etD_Via:null,flightNoVia:"",airportVia:"",airlineVia:"",etA_DestinationString:"",etD_BoardingString:"",etA_ViaString:"",etD_ViaString:""}}}),this.bsModalRef.content.candidateFlightEvent.subscribe({next:a=>a,error:a=>{console.log(a)}})}verifyTransactionData(){if(""===this.sequenceSelected)return"Please select the deployment transaction you want to apply";if(0===this.deploysSelected.length)return"Please select the items that you want to apply the transactions";const n=[...new Set(this.deploysSelected.map(v=>v.currentStatus))],i=[...new Set(n)];if(console.log("distinctcurrentseq",i),i.length>1)return"You can apply a common next sequence to items having same current sequence";if([...new Set(this.deploysSelected.map(v=>v.currentStatus))].length>1)return"You may not select items having different values of ECNR - if an item has ECNR = true, then there are different yard stick available for next sequence applicability";var d,o=this.depStatuses.filter(v=>v.sequence===+this.sequenceSelected)[0];if(!o)return"failed to get proposed seq ";d=o.statusName,console.log("currentSeq:",i[0],"proposed Seq:",d);var p=this.verifyNextSequence(i[0],d);if(""!==p)return p;var h=[...new Set(this.deploysSelected.map(v=>v.cityOfWorking))];if(this.sequenceSelected===this.SEQUENCE_TRAVEL_BOOKED_NAME&&h.length>1)return"The deployment items selected by you have more than one destination airports to travel to. Pl select the group with common destination airport, with common airport of Departure also.  Else, choose one candidate at a time";const F=Math.max(...this.deploysSelected.map(v=>new Date(v.transactionDate).getTime()));return F>new Date(this.transDate).getTime()?"The selected Transaction date '"+this.transDate+"' is earlier than the last recorded transaction date  of "+F:""}constructDepItemsToAdd(){var t=this.depStatuses.find(i=>i.statusName===this.sequenceSelected)?.id,n=[];return console.log("id",this.sequenceSelected,t),this.deploysSelected.forEach(i=>{n.push({depId:i.depId,transactionDate:this.transDate,sequence:+this.sequenceSelected})}),n}applyTransactions(){var t=this.verifyTransactionData();if(""!==t)return this.toastr.warning(t,"Error in the proposed transactions"),t;let n=this.constructDepItemsToAdd();if(null===n||0===n.length)return"failed to construct Dep Items";if(this.sequenceSelected===this.SEQUENCE_TRAVEL_BOOKED_NAME){var i=[];this.deploysSelected.forEach(h=>{i.push({candidateName:h.candidateName,applicationNo:h.applicationNo,depId:h.depId,cvRefId:h.cvRefId,customerName:h.customerName,customerCity:h.cityOfWorking,id:0,depItemId:0,categoryName:h.categoryName})});var a=this.transDate;this.bsModalRef=this.bsModalService.show(V,{class:"modal-dialog-centered modal-lg",initialState:{flightData:{etD_Boarding:a,etA_Destination:a,airlineName:"Air India",airportOfBoarding:"Mumbai",airportOfDestination:this.deploysSelected[0].cityOfWorking,flightNo:"AI-823",etA_Via:null,etD_Via:null,flightNoVia:"",airportVia:"",airlineVia:"",etA_DestinationString:"",etD_BoardingString:"",etA_ViaString:"",etD_ViaString:""}}}),this.bsModalRef.content.candidateFlightEvent.pipe((0,k.p)(h=>null!==h),(0,w.n)(h=>(this.deploysSelected.forEach(v=>{this.candFlight={id:0,dateOfFlight:h.etD_Boarding,airlineName:h.airlineName,flightNo:h.flightNo,airportOfBoarding:h.airportOfBoarding,airportOfDestination:h.airportOfDestination,etA_Destination:h.etA_Destination,fullPath:"",fileToUpload:null,orderNo:v.orderNo,candidateFlightItems:i,customerId:0,etD_Boarding:h.etD_Boarding,etD_BoardingString:h.etD_BoardingString,etA_DestinationString:h.etA_DestinationString,flightNoVia:h.flightNoVia,airportVia:h.airportVia,etA_Via:h.etD_Via,etA_ViaString:h.etA_ViaString,etD_ViaString:h.etD_ViaString}}),this.service.InsertDepItemsAndCandFlights({candFlightToAdd:this.candFlight,depItemsToAdd:n})))).subscribe(h=>{h.length>1&&this.UpdateDeploymentDOM(h)})}else this.service.InsertDepItems(n).subscribe({next:d=>null===d||0===d.length?(this.toastr.warning("Failed to insert","Failed to insert any dep Transaction"),this.sequenceSelected="",n=[],this.deploys.forEach(p=>{}),"failed to insert dep transactions"):(this.UpdateDeploymentDOM(d),""),error:d=>this.toastr.error(d.error.details,"Error encountered")});return""}displayVisaTransaction(t){this.navigateByRoute(t,"/visas/visaTransactionByCVRefId",!1,[])}UpdateDeploymentDOM(t){for(const i of t){var n=this.deploys.findIndex(a=>a.depId==i.depId);-1!==n&&(this.deploys[n].currentStatus=i.currentStatus,this.deploys[n].checked=!1)}this.deploysSelected=[],this.sequenceSelected="",this.toastr.success("Success","Inserted "+t.length+" number of deployment transactions")}selected(t){this.sequenceSelected=t.currentStatus}showTicketClicked(t){}candidateFlightDelete(t){this.service.deleteCandidateFlight(t).subscribe(i=>{i?this.toastr.success("Candidate Flight Detail deleted","Deleted successfully"):this.toastr.warning("Failed to delete the Candidate Flight","Failed to delete")})}candidateFlightEdit(t){null!=t?this.service.editCandidateFlight(t).subscribe({next:i=>{""==i?this.toastr.success("The Candidate Flight was successfully updated","Success"):this.toastr.warning(i,"failed to update the candidate flight object")}}):this.toastr.warning("null object received from CAndidate Flight modal")}filterData(){var t=this.statusNameAndSeq.filter(n=>n.name===this.sequenceSelected).map(n=>n.name)[0];this.deploys=this.deploys.filter(n=>n.currentStatus===t)}houseKeeping(){this.service.housekeeping().subscribe({next:t=>{""!==t.successString&&this.toastr.success(t.successString,"Success")},error:t=>this.toastr.error(t.error.details,"Error")})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(E.tw),e.rXU(f.G),e.rXU(C.I8),e.rXU(m.nX),e.rXU(b.j),e.rXU(m.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deploy-listing"]],viewQuery:function(n,i){if(1&n&&e.GBs(oe,5),2&n){let a;e.mGM(a=e.lsd())&&(i.searchTerm=a.first)}},inputs:{EditDepEvent:"EditDepEvent"},decls:67,vars:16,consts:[["style","margin-left: 5px;","style","display: inline-block;","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[2,"width","50px","display","inline-block","font-size","large","word-wrap","break-word","vertical-align","middle"],[2,"display","inline-block","vertical-align","top","font-size","small","font-size","bold","margin-left","5px"],["bindLabel","name","bindValue","value","labelForId","value","clearAllText","Clear","title","select a search option - then, enter the search value in the search box","placeholder","Select a Status",2,"display","inline-block","vertical-align","top","width","150px","font-size","small","margin-left","20px","vertical-align","top",3,"items","ngModel","selected","ngModelChange","clear"],["type","text","title","enter a value against the search option selected","placeholder","Search Value",1,"stdd","form-control","w100",2,"margin-left","25px !important",3,"keyup.enter"],["search",""],[2,"font-size","small","display","inline-block","font-weight","bold","margin-left","10px","vertical-align","top"],["type","radio","id","deployStatus","value","concluded","checked","true",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black","display","inline-block","vertical-align","top",3,"ngModel","ngModelChange"],[2,"vertical-align","top","font-size","small"],["type","radio","id","deployStatus","value","all",1,"form-check-input","w20","hAlignCenter",2,"margin-left","10px","border-color","black","display","inline-block","vertical-align","top",3,"ngModel","ngModelChange"],["type","button",1,"btn",3,"click"],["title","select a status to add new transaction for the candidates selected",1,"stdd","b",2,"margin-left","30px !important"],["bindLabel","name","bindValue","id","labelForId","id","clearAllText","Clear","title","select a status for adding new deployment transactions","placeholder","Select a Status",2,"display","inline-block","border-style","solid","width","200px","font-size","small","margin-left","10px","vertical-align","top",3,"items","ngModel","selected","ngModelChange"],["type","text","placeholder","Order Date","bsDatepicker","",1,"stdd","w110","mx-2",3,"ngModel","bsValue","bsConfig","ngModelChange"],["type","button","title","Press to insert transactions for the items selected",1,"btn",3,"click"],["type","button","title","Filter the deployment records based on deployment status selected",1,"btn",3,"disabled","click"],["title","reset the data",1,"btn","w20","fa","fa-refresh","fa-2x",2,"margin-left","25px",3,"click"],["type","button","title","List of deployment status","routerLink","/deployment/deployStatus",1,"btn"],["title","return to Main Menu","routerLink","/",1,"btn"],["type","button","title","carries out housekeeping - corrects current status value in Deps to coincide with DepItems","routerLink","/",1,"btn",3,"click"],[1,"stretched"],[1,"my-2",2,"margin-left","10px"],[1,"stdd","w30"],[1,"stdd","w50",2,"margin-left","15px"],[1,"stdd","w150","stretched"],[1,"stdd","w50"],[1,"stdd","w150"],[1,"stdd","w75"],[1,"stdd","w100","stretched"],[1,"stdd","w125"],[1,"stdd","w75","stretched"],[4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[3,"dep","editDepEvent","selectedEvent","showTicket","candidateFlightDeleteEvent","candidteFlightEditEvent","editAttachmentEvent","displayVisaEvent"]],template:function(n,i){1&n&&(e.DNE(0,le,2,3,"pagination",0),e.j41(1,"label",1),e.EFF(2),e.k0s(),e.j41(3,"label",2),e.EFF(4,"Search:"),e.k0s(),e.j41(5,"ng-select",3),e.bIt("selected",function(o){return i.onOptionSelected(o)})("ngModelChange",function(o){return i.optionSelected=o})("clear",function(){return i.optionCleared()}),e.k0s(),e.j41(6,"input",4,5),e.bIt("keyup.enter",function(){return i.onSearch()}),e.k0s(),e.j41(8,"label",6),e.EFF(9,"Status"),e.k0s(),e.j41(10,"input",7),e.bIt("ngModelChange",function(o){return i.deployStatus=o}),e.k0s(),e.j41(11,"span",8),e.EFF(12,"Concluded"),e.k0s(),e.j41(13,"input",9),e.bIt("ngModelChange",function(o){return i.deployStatus=o}),e.k0s(),e.j41(14,"span",8),e.EFF(15,"All"),e.k0s(),e.j41(16,"button",10),e.bIt("click",function(){return i.onSearch()}),e.j41(17,"mat-icon"),e.EFF(18,"search"),e.k0s()(),e.nrm(19,"br"),e.j41(20,"label",11),e.EFF(21,"add new transaction"),e.k0s(),e.j41(22,"ng-select",12),e.bIt("selected",function(o){return i.selected(o)})("ngModelChange",function(o){return i.sequenceSelected=o}),e.k0s(),e.j41(23,"input",13),e.bIt("ngModelChange",function(o){return i.transDate=o}),e.k0s(),e.j41(24,"button",14),e.bIt("click",function(){return i.applyTransactions()}),e.j41(25,"mat-icon"),e.EFF(26,"check"),e.k0s()(),e.j41(27,"button",15),e.bIt("click",function(){return i.filterData()}),e.j41(28,"mat-icon"),e.EFF(29,"filter_list"),e.k0s()(),e.j41(30,"button",16),e.bIt("click",function(){return i.onReset()}),e.k0s(),e.j41(31,"button",17)(32,"mat-icon"),e.EFF(33,"receipt"),e.k0s()(),e.j41(34,"button",18)(35,"mat-icon"),e.EFF(36,"cancel"),e.k0s()(),e.j41(37,"button",19),e.bIt("click",function(){return i.houseKeeping()}),e.j41(38,"mat-icon"),e.EFF(39,"settings_applications"),e.k0s()(),e.j41(40,"h4",20),e.EFF(41),e.k0s(),e.j41(42,"div",21)(43,"label",22),e.EFF(44,"Sel"),e.k0s(),e.j41(45,"label",23),e.EFF(46,"App#"),e.k0s(),e.j41(47,"label",24),e.EFF(48,"Candidate Name"),e.k0s(),e.j41(49,"label",24),e.EFF(50,"Customer Name"),e.k0s(),e.j41(51,"label",25),e.EFF(52,"Order#"),e.k0s(),e.j41(53,"label",26),e.EFF(54,"Category"),e.k0s(),e.j41(55,"label",27),e.EFF(56,"Referred On"),e.k0s(),e.j41(57,"label",27),e.EFF(58,"Selected On"),e.k0s(),e.j41(59,"label",28),e.EFF(60,"Current Dep Status"),e.k0s(),e.j41(61,"label",29),e.EFF(62,"Next Dep Status"),e.k0s(),e.j41(63,"label",30),e.EFF(64,"Visa No"),e.k0s()(),e.DNE(65,re,2,0,"div",31),e.DNE(66,de,2,1,"div",32)),2&n&&(e.Y8G("ngIf",i.deploys&&i.pagination),e.R7$(2),e.SpI(" of ",null==i.pagination?null:i.pagination.totalItems,""),e.R7$(3),e.Y8G("items",i.searchOptions)("ngModel",i.optionSelected),e.R7$(5),e.Y8G("ngModel",i.deployStatus),e.R7$(3),e.Y8G("ngModel",i.deployStatus),e.R7$(9),e.Y8G("items",i.statusNameAndSeq)("ngModel",i.sequenceSelected),e.R7$(1),e.Y8G("ngModel",i.transDate)("bsValue",i.bsValueDate)("bsConfig",e.lJ4(15,ce)),e.R7$(4),e.Y8G("disabled",""===i.sequenceSelected),e.R7$(14),e.JRh(i.title),e.R7$(24),e.Y8G("ngIf",!i.deploys),e.R7$(1),e.Y8G("ngForOf",i.deploys))},dependencies:[l.Sq,l.bT,g.pc,g.p0,P.eK,r.me,r.Fm,r.BC,r.vS,_.vr,m.Wk,M.An,se],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;margin:1px 0;vertical-align:top;word-wrap:break-word;font-size:small}.fSmall[_ngcontent-%COMP%]{font-size:small}.fSmaller[_ngcontent-%COMP%]{font-size:smaller}.hAlignCenter[_ngcontent-%COMP%]{text-align:center}.w20[_ngcontent-%COMP%]{width:20px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px;font-size:smaller!important}.w100[_ngcontent-%COMP%]{width:100px}.w110[_ngcontent-%COMP%]{width:110px}.w125[_ngcontent-%COMP%]{width:125px}.w150[_ngcontent-%COMP%]{width:150px}.w175[_ngcontent-%COMP%]{width:175px}.w200[_ngcontent-%COMP%]{width:200px}.w250[_ngcontent-%COMP%]{width:250px}.b[_ngcontent-%COMP%]{font-weight:700}.green[_ngcontent-%COMP%]{color:#006400}  .ng-select .ng-select-container,   .ng-select.ng-select-single .ng-select-container{min-height:25px;font-size:.8em;font-weight:400}.btn[_ngcontent-%COMP%]{color:#f0f8ff;margin:0 3px;vertical-align:top;width:15px;display:inline-block}.stretched[_ngcontent-%COMP%]{display:inline-block;width:150px;vertical-align:top;word-wrap:break-word;font-stretch:extra-condensed}"]})}return s})();function ue(s,c){if(1&s&&(e.j41(0,"div")(1,"div",6),e.EFF(2),e.k0s(),e.j41(3,"div",7),e.EFF(4),e.k0s(),e.j41(5,"div",8),e.EFF(6),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s(),e.j41(9,"div",6),e.EFF(10),e.k0s(),e.j41(11,"div",7),e.EFF(12),e.k0s()()),2&s){const t=c.$implicit,n=e.XpG();e.R7$(2),e.JRh(t.sequence),e.R7$(2),e.JRh(t.statusName),e.R7$(2),e.JRh(t.workingDaysReqdForNextStage),e.R7$(2),e.JRh(t.isOptional?"Yes":"No"),e.R7$(2),e.JRh(t.nextSequence),e.R7$(2),e.JRh(n.getSeqNameFromSeq(t.nextSequence))}}let me=(()=>{class s{constructor(t){this.activatedRoute=t,this.status=[]}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.status=t.statuslist}})}getSeqNameFromSeq(t){var n=this.status.findIndex(i=>i.sequence==t);return-1===n?"Invalid Seq":this.status[n].statusName}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(m.nX))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-deploy-status-list"]],decls:21,vars:1,consts:[[1,"lbl"],["routerLink","/",1,"btn",2,"color","aliceblue"],[1,"lbl","w75"],[1,"lbl","w250"],[1,"lbl","w100"],[4,"ngFor","ngForOf"],[1,"w75","tAlignRight"],[1,"stdd","w250"],[1,"stdd","w100"],[1,"stdd","w75"]],template:function(n,i){1&n&&(e.j41(0,"h4",0),e.EFF(1,"Deployment Status with Sequence Numbers"),e.k0s(),e.j41(2,"button",1)(3,"mat-icon"),e.EFF(4,"cancel"),e.k0s()(),e.nrm(5,"br"),e.j41(6,"label",2),e.EFF(7,"Sequence No"),e.k0s(),e.j41(8,"label",3),e.EFF(9,"Deployment Status"),e.k0s(),e.j41(10,"label",4),e.EFF(11,"Estimated days"),e.nrm(12,"br"),e.EFF(13,"for this Sequence"),e.k0s(),e.j41(14,"label",2),e.EFF(15,"Optional"),e.k0s(),e.j41(16,"label",2),e.EFF(17,"Next Sequence"),e.k0s(),e.j41(18,"label",3),e.EFF(19,"Next Status Name"),e.k0s(),e.DNE(20,ue,13,6,"div",5)),2&n&&(e.R7$(20),e.Y8G("ngForOf",i.status))},dependencies:[l.Sq,m.Wk,M.An],styles:[".w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w250[_ngcontent-%COMP%]{width:250px}.lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;font-weight:700;margin:2px;vertical-align:middle}.tAlignRight[_ngcontent-%COMP%]{display:inline-block;text-align:right;margin:2px 6px 2px 2px;padding-right:4px}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin:2px;vertical-align:top}.cursorpointer[_ngcontent-%COMP%]{cursor:pointer;color:#00008b;font-weight:700}"]})}return s})();const G=()=>(0,e.WQX)(b.j).getDeployStatuses();var x=u(5174);function ge(s,c){if(1&s){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.bExpand=!1)}),e.k0s()}}function fe(s,c){if(1&s){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.bExpand=!0)}),e.k0s()}}function _e(s,c){if(1&s&&(e.j41(0,"div")(1,"div",17),e.EFF(2),e.k0s(),e.j41(3,"div",18),e.EFF(4),e.k0s(),e.j41(5,"div",19),e.EFF(6),e.k0s()()),2&s){const t=c.$implicit,n=c.index;e.R7$(2),e.JRh(n+1),e.R7$(2),e.JRh(t.applicationNo),e.R7$(2),e.JRh(t.candidateName)}}function be(s,c){if(1&s&&(e.j41(0,"div")(1,"label",13),e.EFF(2,"Sr No"),e.k0s(),e.j41(3,"label",14),e.EFF(4,"App No"),e.k0s(),e.j41(5,"label",15),e.EFF(6,"Candidate Name"),e.k0s(),e.DNE(7,_e,7,3,"div",16),e.k0s()),2&s){const t=e.XpG(2);e.R7$(7),e.Y8G("ngForOf",t.dto.candidateFlightItems)}}function ve(s,c){if(1&s){const t=e.RV6();e.j41(0,"div"),e.DNE(1,ge,1,0,"button",1),e.DNE(2,fe,1,0,"button",2),e.j41(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",5),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"div",6),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"div",5),e.EFF(14),e.k0s(),e.j41(15,"div",6),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"div",7),e.EFF(19),e.k0s(),e.j41(20,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editClicked())}),e.k0s(),e.j41(21,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.travelAdviseClicked())}),e.k0s(),e.j41(22,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteClicked())}),e.k0s(),e.DNE(23,be,8,1,"div",0),e.k0s()}if(2&s){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.bExpand),e.R7$(1),e.Y8G("ngIf",!t.bExpand),e.R7$(2),e.JRh(t.dto.airlineName),e.R7$(2),e.JRh(t.dto.airportOfBoarding),e.R7$(2),e.JRh(e.i5U(9,10,t.dto.dateOfFlight,"dd-MMM-yy")),e.R7$(3),e.JRh(e.i5U(12,13,t.dto.etD_Boarding,"hh:mm")),e.R7$(3),e.JRh(t.dto.airportOfDestination),e.R7$(2),e.JRh(e.i5U(17,16,t.dto.etA_Destination,"hh:mm")),e.R7$(3),e.JRh(t.dto.candidateFlightItems.length),e.R7$(4),e.Y8G("ngIf",t.bExpand)}}let Ee=(()=>{class s{constructor(t){this.service=t,this.flightCandidates=[],this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.travelAdviseEvent=new e.bkB,this.selectedEvent=new e.bkB,this.bExpand=!1}ngOnInit(){console.log("dto",this.dto)}editClicked(){this.editEvent.emit(this.dto.id)}deleteClicked(){this.deleteEvent.emit(this.dto.id)}travelAdviseClicked(){this.travelAdviseEvent.emit(this.dto?.id)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(b.j))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-candidate-flight-item"]],inputs:{dto:"dto"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",travelAdviseEvent:"travelAdviseEvent",selectedEvent:"selectedEvent"},decls:1,vars:1,consts:[[4,"ngIf"],["class","btn fa fa-minus","style","color:aqua;",3,"click",4,"ngIf"],["class","btn fa fa-plus","style","color:aqua;",3,"click",4,"ngIf"],[1,"stdd","w120"],[1,"stdd","w100","cursorPointer"],[1,"stdd","w100"],[1,"stdd","w50"],[1,"stdd","w50",2,"text-align","right","padding-right","3px"],["title","edit this Flight",1,"btn","w25","fa","fa-pencil",2,"color","aliceblue",3,"click"],["title","edit this Flight",1,"btn","w25","fa","fa-envelope",2,"color","aliceblue",3,"click"],["title","delete this customer",1,"btn","w25","fa","fa-trash","red",2,"color","red",3,"click"],[1,"btn","fa","fa-minus",2,"color","aqua",3,"click"],[1,"btn","fa","fa-plus",2,"color","aqua",3,"click"],[1,"cand","w50","b",2,"margin-left","100px !important"],[1,"cand","w100","b",2,"margin-left","15px !important"],[1,"cand","w150","b"],[4,"ngFor","ngForOf"],[1,"cand","w50",2,"margin-left","100px !important","text-align","right"],[1,"cand","w100",2,"margin-left","50px !important"],[1,"cand","w150"]],template:function(n,i){1&n&&e.DNE(0,ve,24,19,"div",0),2&n&&e.Y8G("ngIf",i.dto)},dependencies:[l.Sq,l.bT,l.vh],styles:[".stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-left:2px;margin-right:2px;vertical-align:top}.cand[_ngcontent-%COMP%]{display:inline-block;font-size:smaller;margin-left:2px;margin-right:2px;vertical-align:top;color:#0ff}.w15[_ngcontent-%COMP%]{width:15px}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w120[_ngcontent-%COMP%]{width:120px}.w150[_ngcontent-%COMP%]{width:150px}.mL50[_ngcontent-%COMP%]{margin-left:50px!important}.mL100[_ngcontent-%COMP%]{margin-left:10ppx!important}.b[_ngcontent-%COMP%]{font-weight:700}"]})}return s})();function Ce(s,c){if(1&s){const t=e.RV6();e.j41(0,"pagination",16),e.bIt("pageChanged",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChanged(i))}),e.EFF(1,"\n>"),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",15)}}function Fe(s,c){1&s&&(e.j41(0,"div"),e.EFF(1," No matching Candidate Flights on record\n"),e.k0s())}function De(s,c){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"app-candidate-flight-item",17),e.bIt("deleteEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.deleteClicked(i))})("editEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.editClicked(i))})("travelAdviseEvent",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.travelAdviseClicked(i))}),e.k0s()()}if(2&s){const t=c.$implicit;e.R7$(1),e.Y8G("dto",t)}}const ye=[{path:"",component:pe,resolve:{statusNameAndSeq:()=>(0,e.WQX)(b.j).getDepStatusAndNames(),deps:s=>{var c=new D.a;return(0,e.WQX)(b.j).getDeploymentPagedList(c)},depStatuses:G}},{path:"candidateflights",component:(()=>{class s{constructor(t,n,i,a,o){this.service=t,this.router=n,this.confirm=i,this.toastr=a,this.activatedRoute=o,this.cFlights=[],this.totalCount=0,this.fParams=new x._}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.cFlights=t.cFlights.result,this.pagination=t.cFlights.pagination,this.totalCount=t.cFlights.totalCount}),console.log("cFlights",this.cFlights)}loadFlights(){var t=this.service.getFlightParams();this.service.getCandidateFlightHeadersPagedList(t)?.subscribe({next:n=>{null!=n&&(this.cFlights=n.result,this.totalCount=n?.count,this.pagination=n.pagination)},error:n=>console.log(n.error?.details,"Error")}),console.log("loadFlights cFlights",this.cFlights)}travelAdviseClicked(t){this.service.composeTravelAdviseForClient(+t).subscribe({next:i=>{console.log("response",i),this.toastr.success(i,"Success")},error:i=>this.toastr.error(i.error.details,"Error encountered")})}onPageChanged(t){const n=this.service.getFlightParams();n.pageNumber!==t&&(n.pageNumber=t.page,this.service.setFlightParams(n),this.loadFlights())}deleteClicked(t){var n=t;const a=this.service.deleteCandidateFlight(n);this.confirm.confirm("confirm Delete","confirm delete this Candidate Flight?. WARNING: this will also delete the flight transaction, and cannot be undone").pipe((0,k.p)(d=>d),(0,w.n)(d=>a)).subscribe(d=>{if(d){this.toastr.success("Flight data deleted for the chosen candidate","deletion successful");var p=this.cFlights.findIndex(h=>h.id==n);p>=0&&this.cFlights.splice(p,1)}else this.toastr.error("Error in deleting the candidate Flight data","failed to delete")})}editClicked(t){}onReset(){this.fParams=new x._,this.service.setFlightParams(this.fParams),this.loadFlights()}applyParams(){this.service.setFlightParams(this.fParams),this.loadFlights()}close(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(b.j),e.rXU(m.Ix),e.rXU(f.G),e.rXU(E.tw),e.rXU(m.nX))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-candidate-flight-header"]],decls:42,vars:5,consts:[[1,"mx-4",2,"display","inline-block"],["style","display: inline-block;","class","mx-3","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],[1,"lbl","w150"],[1,"lbl","w75"],["id","orderNo","name","orderNo",1,"stdd","w75",3,"ngModel","ngModelChange"],[1,"lbl","w100","mL25"],["title","retrieves records from database based upon value selected",1,"btn","mL25",3,"click"],["title","resets search parameters",1,"btn",3,"click"],["title","close this page",1,"btn",3,"click"],[1,"my-0"],[2,"display","inline-block","width","120px","margin-left","45px","font-size","small","font-weight","bold"],[1,"lbl","w100"],[1,"lbl","w100",2,"margin-left","10px !important"],[1,"lbl","w50"],[4,"ngIf"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"mx-3",2,"display","inline-block",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[3,"dto","deleteEvent","editEvent","travelAdviseEvent"]],template:function(n,i){1&n&&(e.j41(0,"h4",0),e.EFF(1,"Candidate Flight details"),e.k0s(),e.DNE(2,Ce,2,3,"pagination",1),e.j41(3,"span",2),e.EFF(4,"Search Parameters"),e.k0s(),e.j41(5,"span",3),e.EFF(6,"Order No"),e.k0s(),e.j41(7,"input",4),e.bIt("ngModelChange",function(o){return i.fParams.orderNo=o}),e.k0s(),e.j41(8,"span",5),e.EFF(9,"Category Ref"),e.k0s(),e.j41(10,"input",4),e.bIt("ngModelChange",function(o){return i.fParams.orderItemId=o}),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return i.applyParams()}),e.j41(12,"mat-icon"),e.EFF(13,"search"),e.k0s()(),e.j41(14,"button",7),e.bIt("click",function(){return i.onReset()}),e.j41(15,"mat-icon"),e.EFF(16,"refresh"),e.k0s()(),e.j41(17,"button",8),e.bIt("click",function(){return i.close()}),e.j41(18,"mat-icon"),e.EFF(19,"cancel"),e.k0s()(),e.nrm(20,"hr",9),e.j41(21,"label",10),e.EFF(22,"Airline"),e.k0s(),e.j41(23,"label",11),e.EFF(24,"Airport of"),e.nrm(25,"br"),e.EFF(26,"Boarding"),e.k0s(),e.j41(27,"label",12),e.EFF(28,"Flight Date"),e.k0s(),e.j41(29,"label",13),e.EFF(30,"ETD"),e.k0s(),e.j41(31,"label",11),e.EFF(32,"Airport of Destination"),e.k0s(),e.j41(33,"label",13),e.EFF(34,"ETA"),e.k0s(),e.j41(35,"label",3),e.EFF(36,"Ct of Pax"),e.k0s(),e.j41(37,"label",11),e.EFF(38,"Actions"),e.k0s(),e.nrm(39,"hr"),e.DNE(40,Fe,2,0,"div",14),e.DNE(41,De,2,1,"div",15)),2&n&&(e.R7$(2),e.Y8G("ngIf",void 0!==i.pagination),e.R7$(5),e.Y8G("ngModel",i.fParams.orderNo),e.R7$(3),e.Y8G("ngModel",i.fParams.orderItemId),e.R7$(30),e.Y8G("ngIf",!i.cFlights),e.R7$(1),e.Y8G("ngForOf",i.cFlights))},dependencies:[l.Sq,l.bT,P.eK,r.me,r.BC,r.vS,M.An,Ee],styles:[".lbl[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-left:2px;margin-right:2px;vertical-align:middle;font-weight:700}.stdd[_ngcontent-%COMP%]{display:inline-block;font-size:small;margin-left:2px;margin-right:2px;vertical-align:middle}.w25[_ngcontent-%COMP%]{width:25px}.w50[_ngcontent-%COMP%]{width:50px}.w75[_ngcontent-%COMP%]{width:75px}.w100[_ngcontent-%COMP%]{width:100px}.w120[_ngcontent-%COMP%]{width:120px}.w150[_ngcontent-%COMP%]{width:150px}.mL25[_ngcontent-%COMP%]{margin-left:25px}.btn[_ngcontent-%COMP%]{color:#f0f8ff;vertical-align:top;margin:0 2px}"]})}return s})(),resolve:{cFlights:s=>{var c=new x._;return(0,e.WQX)(b.j).getCandidateFlightHeadersPagedList(c)}}},{path:"deployStatus",component:me,resolve:{statuslist:G}}];let ke=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=e.G2t({imports:[l.MD,m.iI.forChild(ye),m.iI]})}return s})(),we=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=e.G2t({imports:[l.MD,I.G,ke,M.m_]})}return s})()}}]);