<h4 class="stdd">Customer Feedback</h4>
<button class="stdd btn fa fa-check mL600" [disabled]="!form.dirty" (click)="updateFeedback()" ></button>
<button class="stdd btn fa fa-window-close fa-2x mx-2" (click)="close()" ></button>

<div *ngIf="!feedback" class="my-5">
    No feedback on record
</div>
<div *ngIf="feedback" class="container stdd">
    
        <div style="vertical-align: top; display: inline-block;">
            <label class="lbl w150 fSmall b">Customer Name</label>
            <div class="stdd w250 fSmall"> {{feedback.customerName}}, {{feedback.city}}</div>   
            <label class="lbl w150 fSmall b">Feedback No</label>
            <div class="stdd w50 fSmall"> {{feedback.feedbackNo}}</div>   
            <br><label class="lbl w150 fSmall b">Official Name</label> 
            <div class="stdd w250 fSmall"> {{feedback.officialName}}</div>   
            <label class="lbl w120 fSmall b">Designation</label>
            <div class="stdd w200 fSmall"> {{feedback.designation}}</div>   
            <br><label class="lbl w150 fSmall b">Email</label>
            <div class="stdd w250 fSmall"> {{feedback.email}}</div>   
            <label class="lbl w120 fSmall b">Phone No</label>
            <div class="stdd w150 fSmall"> {{feedback.phoneNo}}</div>   
            <label class="lbl w50 fSmall b" style="margin-left: 5px;">Grade</label>
            <div class="stdd w100 fSmall"> {{feedback.gradeAssessedByClient}}</div>   
            
        </div>
        <div style="vertical-align: top; display: inline-block; margin-left: 15px;">
               <ng-select 
                    style="width: 200px; display: inline-block;"
                    [items]="feedbackHistory!"
                    bindLabel="feedbackIssueDate"
                    bindValue="feedbackId"
                    labelForId="feedbackId"
                    clearAllText="Clear"
                    [(ngModel)]="feedbackIdSelected"
               ></ng-select>
               <button title="click to display the selected Feedback" class="btn fa fa-list"
                    style="display: inline-block; margin-left: 5px;"  (click)="showFeedback()" ></button>
                <button title="click to add a new feedback for the customer" class="btn fa fa-plus"
                    style="display: inline-block; margin-left: 5px;"  (click)="newFeedback()" ></button>
                <button title="click to add a new feedback for the customer" class="btn fa fa-envelope"
                    style="display: inline-block; margin-left: 5px;"  (click)="sendEmail()" ></button>
        </div>
        <hr class="my-0" style="border-width: 2px; border-color: black;">
        <form [formGroup]="form">  

            <label class="lbl w100 fSmall b">Issued On</label>
            <input class="stdd  fSmaller w100" type="text" placeholder="Issued On" 
                formControlName="dateIssued" bsDatepicker 
                [bsValue]="bsValueDate" 
                [bsConfig]="{dateInputFormat: 'YYYY-MM-DD' }">
            <label class="lbl w150 fSmall b">Received On</label>
            <input class="stdd  fSmaller w100" type="text" placeholder="Received On" 
                formControlName="dateReceived" bsDatepicker 
                [bsValue]="bsValueDate" 
                [bsConfig]="{dateInputFormat: 'YYYY-MM-DD' }">
            
            <br><label class="lbl fSmaller b w50">Sr#</label>
            <label class="lbl fSmaller b w370">Parameter</label>
            <label class="lbl fSmaller b w250" style="margin-left: 325px !important;">Remarks</label>
            <hr class="my-0" style="border-width: 2px; border-color: black;">
            <div formArrayName="feedbackInputItems" class="my-2">
                <div *ngFor="let item of feedbackInputItems.controls; let i=index" [formGroupName]="i">
                        <input type="text" formControlName="questionNo" class="stdd w25 fSmaller" >
                        <div class="stdd w370">
                            <app-text-input [label]="'Question'" formControlName="question" ></app-text-input>
                        </div>
                        <input type="text" formControlName="prompt1" class="prompt w75">
                        <input type="radio" class="radio" id="i" value="20" (change)="gradeChanged(i)" 
                            checked="response==='20'" formControlName="response">
                        
                        <input type="text" formControlName="prompt2" class="prompt w50">
                        <input type="radio" class="radio" id="i" value="15" (change)="gradeChanged(i)" 
                        checked="response==='15'" formControlName="response">
                        
                        <div *ngIf="i < 8" class="stdd">
                            <input type="text" formControlName="prompt3" class="prompt w75">
                            <input type="radio" class="radio" id="i" value="10" (change)="gradeChanged(i)" 
                                checked="response==='10'" formControlName="response">
                            
                            <input type="text" formControlName="prompt4" class="prompt w35">
                            <input type="radio" class="radio" id="i" value="5" (change)="gradeChanged(i)" 
                                checked="response==='5'" formControlName="response">
                        </div>
                        <div class="stdd w200" [ngClass]="i<8 ? '' : 'mL185'">
                            <app-text-input [label]="'Remarks'" formControlName="remarks"></app-text-input>
                        </div>
                        <button class="btn fa fa-trash red" (click)="removeFeedbackInput(i)" ></button>
                    </div>
            </div>
        </form>
    </div>


<div style="font-size: smaller;">
    {{form.value | json}}
</div>